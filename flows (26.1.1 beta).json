[
    {
        "id": "8c9d42231fd19d3c",
        "type": "tab",
        "label": "WP Dash",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e7187e0c9dc038f0",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Home (HEAT)",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "719e11414721599e",
            "b51f6522ce8b3103",
            "05f3b66c7b91e0c6",
            "5bada38f261d4a06",
            "1f4a153d2239272b",
            "00dd6c3fd833a5cf",
            "2f6dcfe431b67d95",
            "ef9758a537d81735",
            "cc398f298c681782",
            "702993e29cd93413",
            "46b7fe12f60ad08b",
            "9975ddd7c9465aea",
            "872ffae146541a5a",
            "5dfb70935ea409db",
            "354635fe353183fd",
            "cb7bd45634ebfb62",
            "ea31d112c91c0da9",
            "a12d078fa519dd37",
            "45a77ca7212de80c"
        ],
        "x": 114,
        "y": 1219,
        "w": 1012,
        "h": 262
    },
    {
        "id": "7c41aa629fb3859e",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Home (DHW)",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "50b87b6e19d49fae",
            "158e0bb2b00cd4ba",
            "50bbeaa9a0ad9305",
            "14d2ae6b4af7e45e",
            "4982424c661376ea",
            "23197820b73be2c8",
            "21345852944158b2",
            "4cfdc172228a42bb",
            "4f19cd39ac4c4be0",
            "6bdcf84066368733",
            "8c2afa46f759d9cd",
            "7386864c75dbce5c",
            "3f63919ddd4f0ea7",
            "3d3b432c844ba87e",
            "0609b7d54d31dafb",
            "f38de05b84881512",
            "b690e6a46d9553ba",
            "6366ce3358b65976",
            "7157605d81a5de0d",
            "e4d3b74c7c050a7d",
            "e498876c6a66fb4c",
            "de12a1bd6b72fc0a",
            "7f44b9272e731114",
            "70f71351c6facb1b"
        ],
        "x": 114,
        "y": 19,
        "w": 932,
        "h": 442
    },
    {
        "id": "5ab5ca67951ca4de",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Home (PUMP)",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "5d54922367195a62",
            "0e09d25e4fd17042",
            "1d97c2a9ed08db30",
            "9dc0d35330d31725",
            "3478273eb4693d84",
            "1d51b425fba024d2",
            "024bef9dc12b8273",
            "521e419dae5882e7",
            "dcdf16916497a46e",
            "3ac59d9a6138e620",
            "e6ca18bfd7adb287",
            "42c8d2ef7cd7f120",
            "1ed98a1d47eb56f0",
            "79dc18dd1cca1e73",
            "49a94006dd1947ac",
            "17c5ba9bb0b58a11",
            "b65cef840ae30edb",
            "91fcc102b422de3b",
            "8ae2f173954488ad",
            "1daf8c5944f23d71",
            "45fc74dd150cc9e5",
            "cb32ff75cb09ea95",
            "b98f96fc98434fef",
            "76b462d26dcde630",
            "2e6f993342584047",
            "60d36489df57e2d2",
            "913a3d6738a936b8",
            "2ae1f0e14435e803",
            "f37c739180bdbc6e",
            "30a8e90354d6eb5d",
            "c77191faf1a057ff",
            "1f8e0da618a71c16",
            "3f9cda20118a9a8a"
        ],
        "x": 114,
        "y": 519,
        "w": 992,
        "h": 622
    },
    {
        "id": "c3b7d9597903239c",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Charts Temperature",
        "style": {
            "label": true
        },
        "nodes": [
            "8cb1aceef81045bd",
            "9802bf01ebf45d28",
            "9789265573ab4c80",
            "c9c2bf06edb19d41",
            "76fd0cf35b775cdf",
            "9f3df8b1cba0bbda",
            "a734f98c5d02604e",
            "12b317db9b7ce136",
            "aeca371dc97489c4",
            "1afae37bbb9eee4f",
            "62bb9a3778a8e0c4",
            "8cea97ace96d4c67",
            "eea147e0b371b347",
            "f6a75e4b3dd9cf4c",
            "95590d576d789646",
            "7f2afa931336f755",
            "c76df998b7cb23d3",
            "3c2858cfac17c240",
            "2093edece5e11445",
            "dcbd136bd82a4d21",
            "421277fb75f3fae8",
            "f841f2adf20f9317"
        ],
        "x": 14,
        "y": 2199,
        "w": 972,
        "h": 302
    },
    {
        "id": "a8ac5b148d851a6b",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Function (RTC ZONE 1)",
        "style": {
            "label": true,
            "fill": "#dbcbe7"
        },
        "nodes": [
            "1b8f5447c498c1d6",
            "e17b09af13812496",
            "11c68fc0d3095541",
            "e8990d184ea1eca6",
            "b4051f61cf6d4d65",
            "c9df0ea076346fde",
            "e6999514a091fd05",
            "501242b43a1016ea",
            "d3b8865dfdb6d46c",
            "e4c7ba5f1306c384",
            "a0998b9af634354f",
            "aa1f73bbe3eef9e1",
            "9b1f3ccedd4e853b",
            "017e7b4d1642ed42",
            "aae82d0c01404d51",
            "60e33931edeab23f",
            "3e3f19d365adf7ae",
            "38a2e1df7e0bdb2a",
            "25b8320badf7ef88",
            "45643e4e39e1d248",
            "8bd536b323fb865c",
            "dade0dbb40c3945a",
            "942f2ca34abfe8ac",
            "48ac4170551d07e2",
            "e5afa5e58fb2ecef",
            "1f5d513050d612a1",
            "9e7985132053da99",
            "7bf73fde5dbbe654",
            "af1e900e0be88b34",
            "6a4e29a621172a7e",
            "47b72adc26e2025f",
            "3cf1a2dd31dacbca",
            "ca0d9f423e83d3e2",
            "449411f64f3ffe0b",
            "c3c748a1b5f04d42",
            "7d582005c7d66f28",
            "6efc9729afea79a2",
            "0d3da6a8d7fa38ee",
            "4faba89ea8ec838c",
            "7764079e5c12e488",
            "b57cce7cc9fa92ea",
            "ca0190e54c9749cb",
            "2ca9ec858ebd4887",
            "290133f7fd948e25",
            "ab1290025b96a1df",
            "bb54f8581c258040",
            "fb7f16aa29565d78",
            "ecbb543ba37d9962",
            "57d858f4dd89a4c8",
            "083547591b89bc09",
            "f8d7e53aed62cd14",
            "85d4c15e56ecc525",
            "a19cd490d0cc5d13",
            "2d7930a2b848335e",
            "22addf167b287f53",
            "b62de7b7b1c2c0b6",
            "ca6c0bce1bb90d64",
            "7f32080d7494b6ae",
            "cfa2eec0803fe7cd",
            "e77ae78af76db973",
            "30bdc6940be044bf",
            "a695685930d2097e",
            "d9b3ca8bfaa4c10a",
            "1728bf6be1141a5f",
            "023e106e50b945f6",
            "f8cd2e5c468286a5",
            "2d1a9fcd35c50c2a",
            "cc930ab5b67c257e",
            "a2afbd9244cceed5",
            "922a3b1879d1a5ec",
            "368bd104ea1ba4e6",
            "ae00df3cd05e6b06",
            "470ba61639a6ba2d",
            "1b0dd0c926383896",
            "ce9db55d9de18296",
            "af715d4c79137c30",
            "534ceb039d7f9812",
            "6b9a0352c4460ae5",
            "3f6602042d2dc015",
            "54724886189b074f",
            "4ffcf5c7dbf32067",
            "b15c419913e8770a",
            "b44fceec58293e64"
        ],
        "x": 2994,
        "y": 719,
        "w": 2098,
        "h": 1102,
        "info": "# yeah"
    },
    {
        "id": "3476743a7b29da0d",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Function (CCC ZONE 1)",
        "style": {
            "label": true,
            "fill": "#dbcbe7"
        },
        "nodes": [
            "01d75eec1bfe68d4",
            "8329aedf9204b75d",
            "9535722dad6d0995",
            "9a0e227ed7718d64",
            "e07cc2b915729d33",
            "f1d9c2e3346b1e43",
            "388bec4d296db98d",
            "81e0133d16c51789",
            "b991be16b9662a3e",
            "0380b395668eee8e",
            "0ad263e5f3bf4fe9",
            "5b0c451c1ec63b84",
            "080c11bcc5a2ac73",
            "d1e851a03542c949",
            "54284f6b97afb3c7",
            "7febe67492bf7cbe",
            "d9675d9d144e412b",
            "f3f5cc4e789d19f3",
            "0c8eb8257035ca5f",
            "36a9b7dad9d2611e",
            "fa81c798d517834f",
            "4dc131a257d753d0",
            "b92812725c4e8443",
            "5c6e3f50e1a2328b",
            "ecf47b4f156ae616",
            "12842f4ef6ffc342",
            "5429970cdd04e922",
            "cc1c74d4b3b87c5e",
            "e5a709273b24888d",
            "d0cbd630befb3d01",
            "7a2a9be0735512b6",
            "320506c25427ee87",
            "74e2096239928bfc",
            "df2ff07ddeb07106",
            "65770940f38c7f51",
            "f2daac0935cc9d81",
            "4950af3d6534aa47",
            "07c9121f1be83415",
            "a00885bfd0ed77a7",
            "f76c271c4a48a3e7",
            "fa5d110ee0083845",
            "5b9847446fee98a9",
            "02bef4c27cae892f",
            "0366fd634f110ba4",
            "a7ed974cef55c457",
            "850fb0ccb76b25cf",
            "881c9c83727201e4",
            "946190a858bafe3d",
            "26028dafb645f0a9",
            "78b397adf806a09f",
            "b7b3c4dcda507ecb",
            "05065bbd47aa9dd3",
            "6c95ed35d3dcaea3",
            "96c650af80111193",
            "187c584c21359a3e",
            "97f8288d7402bc77",
            "136e0fb8144c7c14",
            "a1d3737a5a110aa9",
            "ae3b104ec8689934",
            "f700767045104b75",
            "b167f12e02c63359",
            "82a387f8895ef8f6",
            "e0c5ca5db0a7df5b",
            "0bf8dbceb8cf0c93",
            "9fda0aa836fde5a4",
            "ddaab01e52410fc0",
            "2994451c952d77ae",
            "9f7444f54dcf44b7",
            "d2881ea90b259ad7",
            "f4c3147c72aeb7b5"
        ],
        "x": 3004,
        "y": 19,
        "w": 1802,
        "h": 662
    },
    {
        "id": "f9448182b177e40e",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Chart Energy",
        "style": {
            "label": true
        },
        "nodes": [
            "ea3029991749f77b",
            "fa2eba3089ca0ef4",
            "3b552bccda090181",
            "8a140f3a3a1ff736",
            "1cbdb190d6f52cb6",
            "fe8e23b8971b868e",
            "b1933566192d3b78",
            "fae151e3fc249477",
            "21857afb8366acf2",
            "039ca8047ee5b833",
            "8e0dc8ab2999f4ec",
            "38b10c117605255d",
            "53393ad3ce2b9113",
            "3a6bb7844523ece7",
            "ca8fd698c67b1cfa",
            "b3e1e417d51330e7",
            "bbe6832628277539",
            "8627726ba882e493",
            "4b0bb57d44bd8bb1",
            "b4d652a4c0313e8a",
            "990e0858767f91fc",
            "9ed43df7ef7fa246",
            "6d77bc12fe8024ee",
            "9534d89253d426ca",
            "79ff4d14869086b3",
            "f9bad51c9301e2d7",
            "bda2df97c3dfd6ad",
            "ba8181d980146bf5",
            "9d4206dc389ad732",
            "2ec8265263c71358",
            "2347fd7ebf82b618",
            "ffa2e7745e5aed4c",
            "d77ae32f90417f20",
            "6fb3c122147f795e",
            "aa53a0c487c666f0",
            "e7d39d4073a87d3c",
            "bed822f215bd3ddf",
            "14789bda2966231c",
            "01809486b97e6f56",
            "1fcb5929aa984ced",
            "25210cce780a4996",
            "13f0a9873929b3aa",
            "6a440038dc115f96",
            "c3ef05a0c221ab0c",
            "b43a80548539a4b4",
            "ab864b203271765a",
            "1aa75bcd6581ca94",
            "f10c2c06bd9d5a5a"
        ],
        "x": 14,
        "y": 1499,
        "w": 1172,
        "h": 662
    },
    {
        "id": "f1a34e3fea473398",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Combined bar-chart",
        "style": {
            "label": true
        },
        "nodes": [
            "b09d20349841eaed",
            "d4198e0e57720e55",
            "8859608d9186c4e4",
            "278b50b68f01198e",
            "93a7de2857166209",
            "d63cf14c266a32c5",
            "d5724fa53412c7c1",
            "3c6cbf1cc644de40",
            "ad2577846265e4ee",
            "c302223665944545",
            "9a77a77bdc585373",
            "721b7d606f558c73",
            "7e69bda9aa493902",
            "4dc4c11e169604ca",
            "c28ac0a0c107c5e3",
            "f5f7d3b912113a33",
            "2c380c0bbcfb5eb1",
            "2114aed06fe6d5aa",
            "e1f45532e4338e4a",
            "25a5987e8a1aaf9c",
            "fc86551753d1a7c1",
            "3b28d9bcf7da39c1"
        ],
        "x": 54,
        "y": 2939,
        "w": 1398,
        "h": 602
    },
    {
        "id": "4f352fdae09316c2",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Logs",
        "style": {
            "fill": "#ffffff",
            "label": true
        },
        "nodes": [
            "1fc3414887db6c0f",
            "e649dffb7b88341d",
            "87de9f606819ee7c",
            "031e62b0bf3df7d7",
            "22443324686e908d",
            "6966950676b3438b",
            "46d0a8b4fabd20c4",
            "29a9b4d9e823126c",
            "9ab36aee321695b7",
            "56bc942b17cf740c",
            "70d422652df2468e",
            "647564ca1e204b5f",
            "6215a77a119228d1",
            "a2c6183556ca72d1",
            "2dc5c2ac3212179c",
            "9a7dda15052b4034",
            "82deff483aabb062",
            "8c9a955c41e3e669",
            "ccf20ebdd2bc2ad5",
            "2e07cb8c215afb98",
            "c83f2c1b98fec551",
            "48b67765f5bf4521",
            "47cc58d8c2f4aae6",
            "2cb940cabdae70e5",
            "a2d45addc303107f",
            "46c5b8fae5c96441",
            "7ec2785759270a3f",
            "97186cf285d61502",
            "1fa1afeeb1c84d32",
            "729f15cc004fcc21",
            "8b99fa1a632fa6aa",
            "8da7c93f059466f2",
            "8d9c639aa58c9a3e",
            "1e0df57eb3e96bf7",
            "a7d4b11b9c045f95",
            "997453c0771acfc3",
            "e969a884012a60e7",
            "e5c16c1442eeb1cc",
            "861b9f982a76f569",
            "1d13fdc79740ec03",
            "12df328367013dd2",
            "5e4c3c30025c30ee",
            "ae6175191a94d7ec",
            "49edcd3fcf15db5c",
            "9202d8b025b48df6",
            "9fb2ab0ff0488d63",
            "59880adf86aa8db5",
            "b9785129f166494d",
            "8956cbf4c5618de8",
            "1da8a2bfaa2b82b8",
            "631cb9906b885a9d",
            "282b457abad9d46c",
            "f34af83eb1ed2250"
        ],
        "x": 1234,
        "y": 2059,
        "w": 1812,
        "h": 842
    },
    {
        "id": "69d31fcea48c5132",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "(RTC-z1) Changed Room setpoint to log",
        "style": {
            "label": true,
            "color": "#000000",
            "stroke": "#000000"
        },
        "nodes": [
            "b53bc6358e871056",
            "e7e7a120cf9e9001",
            "087a748b7ca8e4f0",
            "28ade256a9b75487",
            "28d654bc8270de5e"
        ],
        "x": 4254,
        "y": 1019,
        "w": 442,
        "h": 122
    },
    {
        "id": "3151681b2157872c",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Settings",
        "style": {
            "fill": "#bfbfbf",
            "label": true
        },
        "nodes": [
            "fadad1e2505bf86d",
            "493be73ce31c8c96",
            "d286bfab06c854b3",
            "98757de0a2842b4b",
            "c6559a95bb3c55fb",
            "17cf53c8acbfb4e1",
            "4dee981d88ea5cf3",
            "45a93847a1d11766",
            "ccb9e79ff06190fa",
            "20e2544a8277d8c2",
            "91fa7e389b484d7c",
            "69ea88923a102a5d",
            "7c7fd14d9f6ec530",
            "02af248fc547b96b",
            "b8abd042ad10fed8",
            "2d364a067e4a7b4a",
            "a89b41c6600cac07",
            "e31636baf16e3b69",
            "1f2cb9545d7e212d",
            "a6854436b6e1c7e8",
            "fce687f80b334b9e",
            "bdb7e8e0217cec66",
            "979c5ca99c054740",
            "092a9db0d9b923b3",
            "5e3a9447502864ad",
            "2ed9d626c929fb95",
            "7139256ff024b872",
            "c803b9ad018fe78e",
            "78816343589b199a",
            "a2d7de4325e4bf91",
            "089ba42c8f7f7a61",
            "3de982eda6f5e1a3",
            "5b0e15b0804a4452",
            "564fcdd537853126",
            "381a37d17ef728cc",
            "cb354767e9f35bc0",
            "df60cdb125adaf72",
            "9b3cba642f3daa70",
            "9e998e80ed82590d",
            "88e644ce965a6890",
            "a26b41289a59dba3",
            "a45a6b8b1ac4b46d",
            "d9a7bffb1a15426e",
            "b203a1c024a72593",
            "34397163757fd58b",
            "7c74fd1faa32c81d",
            "de0e892a0157baca",
            "05d3e85b3963e4e2",
            "0897b055d53c8a84",
            "afa82ddd168a4ea4",
            "58ee259d850d95ac",
            "332fb342687e1121",
            "50f5134fb3ba9e38",
            "119d9c04e028ad98",
            "13b0a160e7f2d0a0",
            "8e9f91dd021c2ccd",
            "0a683587ca4fc25c",
            "05e2f23adde7a6fc",
            "ede3b3328704cab1",
            "22afde8747ce6ca0",
            "9170caebad3acdcf",
            "58d199ee200d7b16",
            "9fcae1bec983aa1f",
            "887a43d150c20eb2",
            "7f6107d49ab83c40",
            "6db2abfba9e25737",
            "071ac5a0f08a8fdb",
            "6ae86dc05a6a3c4a",
            "2f577f48a3804703",
            "b7a195156eedf201",
            "99fca21d30786e83",
            "7b3d20aa8c9abb1e",
            "56131f5116b20fba",
            "550d51c7fe788f9e",
            "e85a5bbd08082721",
            "c2baf1abae4e4441",
            "4694bfeaa76d43f1",
            "db41038f69a63144",
            "f66e9fca72401ab4",
            "9e59dd1bbe56fc88",
            "3ed1fd544412f391",
            "dcec18e192df8d64",
            "be17c89704b598d8",
            "ea184fe6e1240203",
            "2c13c33324bb6c6e",
            "684cdf95f8172514",
            "32c4b461266d4a6e",
            "b4efe8320bae812d",
            "115cf15b6254cb9c",
            "313780cf94ef9d1c",
            "d9cbcc885d31c1fd",
            "00660af047d90d84",
            "d60532c945c70ab1",
            "fb1ef412a32707e7",
            "7216a1bd8dc26f16",
            "849755bc336c0289",
            "ca8be52d82cfb2da",
            "85737143f803169a",
            "80dd0b992f3f7c9a",
            "7cfabb437dca890f",
            "7813313c8fae18d5",
            "0db2bdc455e4bffe",
            "2989d5851e2457ae",
            "a845813900ca9e55",
            "1f12871cda6c40b3",
            "85327198ddc6e251",
            "eeae40f40c5ecf87",
            "2810d417aa5c3457",
            "47b7f4736455a3cb",
            "5eebb66e29e252f6",
            "bcda53f9e43821c5",
            "1742dd060b79dfd1",
            "7c74eef7b504ee67",
            "bc84f4340c3e5b0a",
            "a20fe452e34c26f2",
            "7cfe771e9583a82d",
            "3c054d7f511af4eb",
            "3b2ded71a11dfb75",
            "c5f279c69179fd5b",
            "8ddf4987d6b31ae5",
            "5182a29718a4142e",
            "08d04747592e753f",
            "b6dd964e2537fb76",
            "87449349b95f6091",
            "d65b99037cb3740d",
            "29f1c1eaf91ec977",
            "e0217508a82c4d43",
            "65e5ce7e8bb0e284",
            "302de5d951e650b6",
            "db78ad9b985b4aa5",
            "e1d9c3b48e3b4cba",
            "9b7f15d048bb1f60",
            "749ce60adde338d9",
            "c6e07a956cf2f293",
            "6886cb05525f8d0b",
            "16e91d824cef95e3",
            "6111292139d84986",
            "a863b940531858e1",
            "f2e85ff23b3dc136",
            "400c912774a24583",
            "f94a97e9d42084d7",
            "b8ed3bef56b272a1",
            "4a2670b477ab7f75",
            "f6e0cc6687051bf1",
            "585e4d6a54d44021",
            "367f1fc8966e2514",
            "aad17e70a817393e",
            "fca8ea8f1117c808",
            "d5948f3208081ac8",
            "9e1f07f9825bd79d",
            "c9428fcff7af5f3a",
            "c33b3e865b1bd8b8",
            "7d9dc928c0177c74",
            "a3d9dc45c641ff7d",
            "4125dbe2c258837c",
            "0a89bc3104c3ee9b",
            "b41f920bc63ae262",
            "32840bc8d04fbb31",
            "61def1f2090e360a",
            "43464dca9fd194fa",
            "27d4716d98709ec9",
            "ac2652f2dd9df44c",
            "476134da722ea175",
            "939b63cd71edad9b",
            "45f764b22fa2979e",
            "11d6554f952a6ae3",
            "8406701f07ab7886",
            "6864b73de510f046",
            "64d06b253783964a",
            "281a5e0dca0e33dc",
            "063fe3316395a6c4",
            "6591faa63b1b0351",
            "24b17d7139dc31a7",
            "3e5558127fc3402a",
            "9164f892e385d90c",
            "e9fc5e9327936cd3",
            "280f1a6cbf825ee2",
            "ab935ff6cc1d4377",
            "e137742b346ad008",
            "3abff96efac6ca31",
            "d233c56ec779154b",
            "cd39dd6db4d4cbf2",
            "5a3e1810b8f2135a",
            "b8bcc572150cf1d4",
            "51306cbfdaec2dc2",
            "3ae265eeaed19245",
            "3764998155e75bbb",
            "3ccb1ebb3e26ef32",
            "86915cbe3b9c85d7",
            "ac6e032187db54c7",
            "bafc3bac1af8d9dd",
            "79e2f9225b931e16",
            "607aa2de7f1a0f59",
            "9b6df7cf166fd06a",
            "96bfb59824d94a5e",
            "c7956753cc63cfc4",
            "83544a490499e99c",
            "d8cbe45733f62ad2",
            "fec855b6c7ec4694",
            "971c986d68f201a6",
            "d0304b43f08fc247",
            "96a5cf433a98a371",
            "21ebdaf0c28e39ab",
            "5b42252823e24321",
            "b5dc51a590bfb68d",
            "e581d28cc362452a",
            "26788a9c5068d2e2",
            "369a3b80fea31b09",
            "2ee6fe83b8cf0f17",
            "79ad31b84520b767",
            "62b3c7c6d8895b1d",
            "42d50b95f8eb32a4",
            "34a886f1f91573fc",
            "9a8085c30aee2250",
            "830637fbcb7ec1bd",
            "bff0cc5ed79c971d",
            "c4def6c29af1c95d",
            "3c42519dcb347603",
            "14952d2a7782cba8",
            "318d8d4097066143",
            "066124d57fbb907f",
            "c15682752982ae1f",
            "1f91269e8e062b61",
            "4b254ad728752964",
            "18ac97b7c4a2f6b4",
            "eec290acaa090189",
            "e1989aa130fcf7fa",
            "a4a8967bca76bcae",
            "f042572825758948",
            "16725b9ae83a775a",
            "328368282a2df12d",
            "9f3d499b78d6688a",
            "52354b3c465d574c",
            "eb9141c8d2afe9b5",
            "ce57d6123654286a",
            "e9e3d0d0ef897ed5",
            "20842e7fa662ab81",
            "e0ba83b784e2b218",
            "2d0e4fd78a0e7edf",
            "970ccad2654b34c1",
            "8fce19c6455342d1",
            "7a69672de5ef63dc",
            "821bfc4baa75c406",
            "608e18424bd15979",
            "1198aff12514253c",
            "2e4bb9c8148947e6",
            "880307044a34f772",
            "1b1ddea1350cb5ce"
        ],
        "x": 1214,
        "y": 19,
        "w": 1672,
        "h": 2002
    },
    {
        "id": "ffa1f23278378e79",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "SS CHART",
        "style": {
            "label": true
        },
        "nodes": [
            "37ae6fb47a326b5e",
            "3578d6b18ceb5727",
            "7bad42f4cc70470e",
            "2b065128513763fa",
            "9548ee234cc5af7a",
            "69b1892c29513016",
            "4212c42fb72cce77",
            "2bc0c1510a6e89c4",
            "e3b0d458cec07c21",
            "349683fa690f91a3",
            "0899698bb588f911"
        ],
        "x": 3674,
        "y": 2339,
        "w": 1372,
        "h": 162
    },
    {
        "id": "4d3178806b1f0577",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "SS SETTINGS",
        "style": {
            "label": true,
            "fill": "#dbcbe7"
        },
        "nodes": [
            "c66f65978915e688",
            "39c4c5d262a3065b",
            "84f7cbc2cc8c135d",
            "1b40f688e5fbc5dd",
            "4c49268a7054041c",
            "7790b731fd9a1374",
            "b5f581c27a02b8a0",
            "1eb00088db267256",
            "6acc923b4ebb49e4",
            "b1118094796c2de3",
            "6d347eebf409d174",
            "d1aaf53ae9beb422",
            "e33c35973b22ff0b",
            "2fdb58826d7b6432",
            "e4f68946c7b21da7",
            "6fc2967e18fedff3",
            "a8db39ee44e93a18",
            "cdf7664223f16687",
            "23b6190afc840bdc",
            "f3ab44f6bb3c013a",
            "47e76e01a5cfb304",
            "3a196a4275cfec68",
            "2f436c5ec33c9291",
            "b2003add7c0ba5a9",
            "8df6915186a6430a",
            "296d72c4856363ff",
            "d83ab1374f972ad1",
            "2cf43683279df520",
            "b09ae278b516c328",
            "838a27801d1da2db",
            "6bb32dd02ad372d4",
            "a7d4c9f19c358e4f",
            "adc15a17d080d791",
            "fbb9ab3b17c06559",
            "3b21b99348cb6165",
            "be39fba32e4d8824",
            "bab678598cd122e7",
            "f9a25376cfab94a8"
        ],
        "x": 3674,
        "y": 1859,
        "w": 1412,
        "h": 402
    },
    {
        "id": "47b08c1184b335ce",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "SoftStart Advanced menu",
        "style": {
            "label": true
        },
        "nodes": [
            "3b7535829c2cdf6b",
            "cc3e8e6c49910b24",
            "98a53971ecd61da7",
            "b643e9d5e036f4ee",
            "c3c9902496136a46",
            "e211a5736784a0fc",
            "bd802f87a97dcefd",
            "c1486ebe999c1402",
            "b54015c2f88f6bae",
            "c3c59a45d2e39fec",
            "ecb93ad39d98a1fd",
            "d0269b3429462492",
            "7bbad0897f1fcc7f",
            "d6df210fe010dd33",
            "f94254ca964c6921",
            "fc318adaf0d65e13",
            "72a545f547cbe5a3",
            "3547352170ac81f9",
            "029c5c12e6deaf2a",
            "6ec6a3d95c50a2f6",
            "6ca1c1b33b5cf449",
            "8c0d3e8e47e5848c",
            "0c5c291dfef49206",
            "50b756726996fb8b",
            "6b090a2bc61386b2",
            "bab176f0addd9f32",
            "c50ffc38e8d8bca7",
            "0244f3af4037bfe4",
            "cb4f0ebfd47b2b34",
            "a9eac72958d861ac",
            "5c8427c809a8f68f"
        ],
        "x": 3664,
        "y": 2519,
        "w": 1222,
        "h": 562
    },
    {
        "id": "a930214064f6df4c",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "SoftStart - QuietMode setup",
        "style": {
            "label": true
        },
        "nodes": [
            "3b06cb6fe4aba512",
            "d7cc3d6e4843a8ad",
            "c63eb9bc210b7b1d",
            "688af2d1eee80549",
            "2953bc932b436d2e",
            "f52fb1c1050e067f",
            "5444f8ed7b1fa765",
            "ab31019d5a2a15b3",
            "042a326783f2a657",
            "2c0778f496681b41",
            "9c7187657eb05439",
            "51e9ad6273cba0ec",
            "02ec5c80f142f377",
            "24fbbd2b93a9c9f4",
            "70aea97804b35103",
            "e9942046bea0d380",
            "a423271481d5d54d",
            "d080747c531f1376",
            "4d6957c0b336a3cb",
            "4270ba926708b00d",
            "ab242c5522877fe3",
            "b530eb1ecdcd7af8",
            "0834eda7cad080f5",
            "2746ca6bcc924e40",
            "639bc923555d743a",
            "52a0fd0bd128ca0a",
            "e3cf888e2774fce3",
            "f4bdf0dbe861aebc",
            "8b78c607f5328303",
            "e2710acd9d09b8ce",
            "03298033c4fd4ab5"
        ],
        "x": 3674,
        "y": 3119,
        "w": 1252,
        "h": 402
    },
    {
        "id": "822c399b9b278bd4",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Function (CCC ZONE2)",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "ef4ade1fff94fc42",
            "ef90d986e95d7c90",
            "8e7355b23acb2b1e",
            "9694fb072fae3ffe",
            "6c3a65e3304ace9a",
            "72433c365f544366",
            "b5e481dd0bb09203",
            "5fdb8714ea46d7ec",
            "c3d49d458ecc6039",
            "5f5ee90163d11747",
            "5856ee88a056445f",
            "6500967add5c38cf",
            "7c30bffd90c4b164",
            "55077b783e982d30",
            "4e1b202d3faac630",
            "14ea107217d03045",
            "ae68d2f4a8da27a7",
            "6691f17402b1fe5b",
            "d827db9068451cb7",
            "97602181c9892c0f",
            "6bb2693c1e0ee2bf",
            "ec395fd84fd32931",
            "d11d6440844a6291",
            "0be114106fc46980",
            "055f20cc695bc789",
            "58bef76f50f2e729",
            "3d3667db4acd5f21",
            "3cbea5f4d5bf6c77",
            "f4342fcb9a22b0a6",
            "878266dd498c6fd1",
            "cd34df31d687b448",
            "89b5e7dfdf40917f",
            "69930635e26a3abb",
            "6a82bfa1f23a2871",
            "161ade78a41df7cb",
            "c85eb14899eb0c55",
            "1903cc2166412771",
            "fcbc0ff07627d750",
            "b6d2d5e809c78512",
            "61c9ea022d43fe83",
            "1ef5b57ddac915fa",
            "3614f0f929ce8a13",
            "be0b1f44ea33c32a",
            "5c621541879bde70",
            "6795cdc1f85ebdbe",
            "c22f1a7f7dde4230",
            "152a07bab899214b",
            "da1daee0f07ec0fa",
            "6ce08e3e20985fc6",
            "2f64e66b2021a0eb",
            "9a4c2e2328c9aa18",
            "a7f33634e3289d43",
            "d41450134c2d573e",
            "2b6cdd258a390ffe",
            "b218db750d106f77",
            "901c1c1dfbe65b3b",
            "b9a0b36165cc12c5",
            "02019b7020b000c4",
            "824bb98cee7d05eb",
            "a44824d776d20cde",
            "c311ce95a112969d",
            "a055b83be75ea0ce",
            "49d95e3f016cbca3",
            "cb995415dbbbe7a9",
            "3afa438c44b78abd"
        ],
        "x": 5544,
        "y": 19,
        "w": 1892,
        "h": 648
    },
    {
        "id": "17164836e6c57f8b",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "name": "Function (RTC ZONE 2)",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "c05450dcdb75572d",
            "fa7b23d8aa5a5849",
            "e2a3adee39b5539e",
            "977bb657f759948a",
            "d623402b62dea86c",
            "db1fb98ca4fdcc25",
            "cf9c3b1c60839829",
            "fe53451e91cfd331",
            "05017c2ecba0a692",
            "3766ea44b9ca610b",
            "fe4f087158d008e4",
            "e1529880c6a6223e",
            "f661e6e6544ebc6c",
            "e346b8726ebe9cd9",
            "bc47fd7cc80fec41",
            "e25b4f60be9d81d2",
            "79ef5c038efcee21",
            "cf7a6e8cc8d1ebce",
            "7b4c2a95aba87e9d",
            "e19e61c53578e11b",
            "f8169608f1f35b56",
            "d60cb7d9078bfdaf",
            "0c3797698ceb1022",
            "6f43f61636b68777",
            "8b391a05a7f52e53",
            "e3bc1acee5a2cc98",
            "f641073983807a8e",
            "ca4a07c37b9c4f18",
            "26ea2065af75153b",
            "49bbcdc6539f94fe",
            "f2fe4939eaeea42e",
            "6af70d1403ec0df2",
            "2ecab5900dfda9d8",
            "b63b696d40899414",
            "86d7318e73038502",
            "de7c5c2916599040",
            "c40816f066cf98e5",
            "319301f2d5fc1d0e",
            "48bd155428717bbe",
            "ebf331ab3aadaa29",
            "c5473b63422c3506",
            "aa08790a4d25f173",
            "4a69ffe447263421",
            "97d6c067d71e46a3",
            "b6fefe59b4d89bf8",
            "b5936f69e6b31d58",
            "b184ea6e4969973e",
            "fc6148bf5eca289d",
            "e439e0d942d27b4a",
            "1c8888d67418eea9",
            "e55cae9ad63ae7cc",
            "4e49a10110baab19",
            "0d28cb8875bca592",
            "2775bbabf89cbb64",
            "f6ff4eff6615e0d3",
            "cc19eff0424139ee",
            "6ce525811e6d0a6e",
            "03d39f5299973789",
            "e1d0b0f0b8ad655f",
            "d991366e7d67c54e",
            "58fb0b8dc1837b4d",
            "08167bdfbbef5324",
            "d4595356e2536fda",
            "afd3bbb9c7da4674",
            "e2252ed3891a3e62"
        ],
        "x": 5484,
        "y": 719,
        "w": 2108,
        "h": 902,
        "info": "# yeah"
    },
    {
        "id": "5c6e3f50e1a2328b",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "charts",
        "style": {
            "label": true
        },
        "nodes": [
            "4d5e9a9dacd2b429",
            "0d58a1e854263ec4",
            "c26a112b706b6d55",
            "aa33ae9640c6a434",
            "db206585adea91d8",
            "354fe89415b3f383",
            "558d0a739f566895"
        ],
        "x": 4054,
        "y": 439,
        "w": 482,
        "h": 202
    },
    {
        "id": "2c380c0bbcfb5eb1",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "eee624aa045ae22a"
        ],
        "x": 1094,
        "y": 3399,
        "w": 312,
        "h": 82
    },
    {
        "id": "2114aed06fe6d5aa",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "style": {
            "fill": "#DE425B",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "35c9b0fcbdf3c9e0"
        ],
        "x": 1074,
        "y": 3179,
        "w": 352,
        "h": 82
    },
    {
        "id": "e1f45532e4338e4a",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "Bucket 1 - kWh calculation",
        "style": {
            "fill": "#F59B56",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "47a9e516229e0256"
        ],
        "x": 1074,
        "y": 3079,
        "w": 352,
        "h": 82
    },
    {
        "id": "023e106e50b945f6",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "b32f014cb3ec752e",
            "79daf2eea90f8432",
            "032ca56c8c21283e",
            "72bcb750dc791f05",
            "65ea8cc832ad6d50"
        ],
        "x": 4474,
        "y": 1339,
        "w": 592,
        "h": 202
    },
    {
        "id": "0be114106fc46980",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "charts",
        "style": {
            "label": true
        },
        "nodes": [
            "cc312cf75ed71723",
            "35b4ca755a2ac28a",
            "575083448c49852d",
            "de4d0e42d3721ad1",
            "cbcdf14aca1f61c8",
            "dcb8ba5f031d5fff",
            "bef2e925b04e3690"
        ],
        "x": 6664,
        "y": 439,
        "w": 482,
        "h": 202
    },
    {
        "id": "b184ea6e4969973e",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "b55e98847ad8ecdf",
            "7a309f0c4f930c07",
            "41986d4acf984ff4",
            "8491b61e69fb4555",
            "cb801098daa59e70"
        ],
        "x": 6974,
        "y": 1339,
        "w": 592,
        "h": 202
    },
    {
        "id": "afd3bbb9c7da4674",
        "type": "group",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "(RTC-Z2) Changed Room setpoint to log",
        "style": {
            "label": true
        },
        "nodes": [
            "b0bbbb09b63fc68a",
            "e4bfa259db11a5be",
            "103a668576c83c1e"
        ],
        "x": 6674,
        "y": 1019,
        "w": 372,
        "h": 122
    },
    {
        "id": "5d54922367195a62",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "",
        "links": [
            "3b23831ccc3641c6"
        ],
        "x": 155,
        "y": 760,
        "wires": [
            [
                "0e09d25e4fd17042"
            ]
        ]
    },
    {
        "id": "0e09d25e4fd17042",
        "type": "ui_gauge",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Water",
        "group": "bf4af523ba16d457",
        "order": 10,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Water flow",
        "label": "L/min",
        "format": "{{value}}",
        "min": 0,
        "max": "35",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 930,
        "y": 760,
        "wires": []
    },
    {
        "id": "1d97c2a9ed08db30",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "",
        "links": [
            "905527b22aae9dc8"
        ],
        "x": 155,
        "y": 700,
        "wires": [
            [
                "3478273eb4693d84",
                "3f9cda20118a9a8a"
            ]
        ]
    },
    {
        "id": "9dc0d35330d31725",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "",
        "links": [
            "35ca9241fc9fc7a1"
        ],
        "x": 155,
        "y": 640,
        "wires": [
            [
                "1d51b425fba024d2",
                "30a8e90354d6eb5d"
            ]
        ]
    },
    {
        "id": "3478273eb4693d84",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 9,
        "width": 6,
        "height": 1,
        "name": "Inlet actual",
        "label": "Inlet actual",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 950,
        "y": 700,
        "wires": []
    },
    {
        "id": "1d51b425fba024d2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 7,
        "width": 6,
        "height": 1,
        "name": "Outlet actual",
        "label": "Outlet actual",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 950,
        "y": 640,
        "wires": []
    },
    {
        "id": "024bef9dc12b8273",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "",
        "links": [
            "61dfad40f76daac7"
        ],
        "x": 155,
        "y": 580,
        "wires": [
            [
                "45fc74dd150cc9e5",
                "521e419dae5882e7",
                "1f8e0da618a71c16"
            ]
        ]
    },
    {
        "id": "521e419dae5882e7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 6,
        "width": 6,
        "height": 1,
        "name": "Outlet setpoint",
        "label": "Outlet setpoint",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 960,
        "y": 580,
        "wires": []
    },
    {
        "id": "6bdcf84066368733",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "",
        "links": [
            "872ffae146541a5a"
        ],
        "x": 155,
        "y": 420,
        "wires": [
            [
                "4f19cd39ac4c4be0"
            ]
        ]
    },
    {
        "id": "4f19cd39ac4c4be0",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "e3cc96332cd59f07",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "DHW status",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 850,
        "y": 420,
        "wires": []
    },
    {
        "id": "50b87b6e19d49fae",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "Force sterilization",
        "label": "Force sterilization",
        "tooltip": "Forces sterilization cycle (Cycle = Set DHW-Only, Set sterilization active, run. When done, revert Operating Mode, Set sterilization to inactive)",
        "group": "e3cc96332cd59f07",
        "order": 8,
        "width": 6,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Toggle",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 530,
        "y": 180,
        "wires": [
            [
                "0609b7d54d31dafb"
            ]
        ]
    },
    {
        "id": "719e11414721599e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "1179fa790d2d89ca",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "Heat status",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 970,
        "y": 1260,
        "wires": []
    },
    {
        "id": "dcdf16916497a46e",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "TOP65 - panasonic_heat_pump/main/Pump_Speed",
        "topic": "panasonic_heat_pump/main/Pump_Speed",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 820,
        "wires": [
            [
                "3ac59d9a6138e620"
            ]
        ]
    },
    {
        "id": "3ac59d9a6138e620",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 12,
        "width": 6,
        "height": 1,
        "name": "Pump speed",
        "label": "Pump speed",
        "format": "{{msg.payload}} rpm",
        "layout": "row-spread",
        "className": "",
        "x": 950,
        "y": 820,
        "wires": []
    },
    {
        "id": "158e0bb2b00cd4ba",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "DHW (SP)",
        "label": "DHW setpoint",
        "tooltip": "Setpoint for the DHW tank. (Range 40-75)",
        "group": "e3cc96332cd59f07",
        "order": 3,
        "width": 6,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "dhw_sp",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "40",
        "max": "75",
        "step": 1,
        "className": "",
        "x": 510,
        "y": 120,
        "wires": [
            [
                "7157605d81a5de0d"
            ]
        ]
    },
    {
        "id": "23197820b73be2c8",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "e3cc96332cd59f07",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "Sterilization (SP)",
        "label": "Sterilization setpoint",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 870,
        "y": 300,
        "wires": []
    },
    {
        "id": "21345852944158b2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "e3cc96332cd59f07",
        "order": 4,
        "width": 6,
        "height": 1,
        "name": "DHW (PV)",
        "label": "DHW actual",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 850,
        "y": 360,
        "wires": []
    },
    {
        "id": "50bbeaa9a0ad9305",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "Force DHW",
        "label": "Force DHW",
        "tooltip": "Forces a DHW cycle. (Result = Set DHW-Only, Set ForceDHW active, run. When done, revert Operating Mode, Set ForceDHW to inactive)",
        "group": "e3cc96332cd59f07",
        "order": 6,
        "width": 6,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "GUI_F_DHW",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 510,
        "y": 240,
        "wires": [
            [
                "3d3b432c844ba87e"
            ]
        ]
    },
    {
        "id": "1b8f5447c498c1d6",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Room setpoint",
        "label": "Room setpoint",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 14,
        "width": 5,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.setpoint",
        "topicType": "str",
        "format": "{{value}}",
        "min": "5",
        "max": "50",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 1040,
        "wires": [
            [
                "11c68fc0d3095541",
                "af715d4c79137c30"
            ]
        ]
    },
    {
        "id": "e17b09af13812496",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Woonkamer z1 SP (custom)",
        "mode": "link",
        "links": [
            "c3a9e17b02222cee"
        ],
        "x": 4845,
        "y": 1040,
        "wires": []
    },
    {
        "id": "11c68fc0d3095541",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 3810,
        "y": 1040,
        "wires": [
            [
                "e17b09af13812496",
                "7d582005c7d66f28",
                "087a748b7ca8e4f0",
                "b15c419913e8770a"
            ]
        ]
    },
    {
        "id": "4cfdc172228a42bb",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "",
        "links": [
            "d54ac3b979428b64"
        ],
        "x": 155,
        "y": 360,
        "wires": [
            [
                "21345852944158b2",
                "e498876c6a66fb4c"
            ]
        ]
    },
    {
        "id": "14d2ae6b4af7e45e",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "",
        "links": [
            "092a9db0d9b923b3",
            "b131edf180140fb6"
        ],
        "x": 155,
        "y": 260,
        "wires": [
            [
                "50bbeaa9a0ad9305"
            ]
        ]
    },
    {
        "id": "4982424c661376ea",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "Force sterilization",
        "links": [
            "6591faa63b1b0351",
            "24b17d7139dc31a7"
        ],
        "x": 155,
        "y": 180,
        "wires": [
            [
                "50b87b6e19d49fae"
            ]
        ]
    },
    {
        "id": "b51f6522ce8b3103",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "",
        "links": [
            "4ff74e2b48b1d597",
            "aec0cb2b18e02d8b"
        ],
        "x": 155,
        "y": 1280,
        "wires": [
            [
                "5bada38f261d4a06"
            ]
        ]
    },
    {
        "id": "8cb1aceef81045bd",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "Room Temperature",
        "group": "e374621a9f5ac0d6",
        "order": 9,
        "width": 26,
        "height": 7,
        "label": "Room Temperature",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "15",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "2000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 690,
        "y": 2240,
        "wires": [
            [
                "1afae37bbb9eee4f"
            ]
        ]
    },
    {
        "id": "9802bf01ebf45d28",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "Water HEAT",
        "group": "e374621a9f5ac0d6",
        "order": 7,
        "width": 26,
        "height": 7,
        "label": "HEAT",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 670,
        "y": 2380,
        "wires": [
            [
                "62bb9a3778a8e0c4"
            ]
        ]
    },
    {
        "id": "9789265573ab4c80",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "Water DHW",
        "group": "e374621a9f5ac0d6",
        "order": 5,
        "width": 26,
        "height": 7,
        "label": "DHW",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": "48",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 670,
        "y": 2420,
        "wires": [
            [
                "8cea97ace96d4c67"
            ]
        ]
    },
    {
        "id": "c66f65978915e688",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Softstart on/off (Home)",
        "label": "Softstart (experimental)",
        "tooltip": "",
        "group": "bf4af523ba16d457",
        "order": 25,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 4420,
        "y": 1940,
        "wires": [
            [
                "d83ab1374f972ad1"
            ]
        ]
    },
    {
        "id": "39c4c5d262a3065b",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "set.F_SS.state",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.source = \"Function - SoftStart\";\nmsg.topic = \"Function - SoftStart\"\nglobal.set(\"F_SS.state\",msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4820,
        "y": 1920,
        "wires": [
            [
                "84f7cbc2cc8c135d",
                "adc15a17d080d791"
            ]
        ]
    },
    {
        "id": "84f7cbc2cc8c135d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "F_SS.state",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "4c81e32b9d30b212",
            "6165734a2db82af9"
        ],
        "x": 5045,
        "y": 1920,
        "wires": []
    },
    {
        "id": "e8990d184ea1eca6",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC on/off Home_HEAT",
        "label": "",
        "tooltip": "",
        "group": "1179fa790d2d89ca",
        "order": 9,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 3650,
        "y": 800,
        "wires": [
            [
                "22addf167b287f53"
            ]
        ]
    },
    {
        "id": "b4051f61cf6d4d65",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "set F_RTC.z1.state on/off",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = \"Function - RTC (Zone 1)\";\nglobal.set(\"F_RTC.z1.state\",msg.payload,\"file\");\n\n\n//******************************************************************************\nif (msg.payload == 0) {\n    /*\n    var F_stored_next_operating_mode    = global.get('F_stored_next_operating_mode',\"file\");\n    var F_SOLAR                         = global.get('F_SOLAR',\"file\");\n    \n    \n    if (F_stored_next_operating_mode === undefined) {\n        return null;\n    }\n    //  msg         // pin 1 - oringinal msg object. The correction.\n    let msg1={};    // pin 2 - the restored operating mode.\n    let msg99={};   // pin 3 - info to the log.\n    // return [msg,msg1,msg99]\n\n    \n    if (F_SOLAR.function_active_state === undefined) {\n        msg1.payload = F_stored_next_operating_mode;\n        msg1.topic = 'Restoring new operating mode';\n        \n        msg99.topic = 'Function RTC on/off';\n        msg99.payload = 'RTC on/off function turned off manually. Restoring operating mode';\n        \n        global.set('F_stored_next_operating_mode',undefined,\"file\");\n        \n        return [msg,msg1,msg99];\n    }\n    */\n    return msg\n}\n\n\nelse {\n    return msg;    \n}\n\n\n\n\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4470,
        "y": 820,
        "wires": [
            [
                "c9df0ea076346fde"
            ],
            [
                "b57cce7cc9fa92ea"
            ],
            [
                "ca0190e54c9749cb"
            ]
        ],
        "outputLabels": [
            "msg",
            "operating mode",
            "to log"
        ]
    },
    {
        "id": "c9df0ea076346fde",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Correction_1_heatcurve_on_off z1",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "942f2ca34abfe8ac"
        ],
        "x": 4845,
        "y": 780,
        "wires": []
    },
    {
        "id": "e6999514a091fd05",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "e6999514a091fd05 z1",
        "links": [
            "18fd7ac120089042"
        ],
        "x": 3245,
        "y": 1640,
        "wires": [
            [
                "0d3da6a8d7fa38ee",
                "7764079e5c12e488"
            ]
        ]
    },
    {
        "id": "501242b43a1016ea",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 27,
        "width": 7,
        "height": 1,
        "name": "Function RTC - Current correction",
        "label": "Current correction",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3720,
        "y": 1320,
        "wires": []
    },
    {
        "id": "8329aedf9204b75d",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "z1_SP_DIRECT_virt",
        "label": "",
        "tooltip": "This is the default outlet water temperature when all functions are turned off. Heating mode Direct: range: 20-65°C. Heating mode Compensation Curve: Range: -5 / +5",
        "group": "1179fa790d2d89ca",
        "order": 4,
        "width": 3,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "z1_SP_DIRECT_virt",
        "topicType": "str",
        "format": "<font color= {{msg.color}} > {{value}} °C</font>",
        "min": "-5",
        "max": "65",
        "step": 1,
        "className": "",
        "x": 3500,
        "y": 140,
        "wires": [
            [
                "ae3b104ec8689934",
                "f700767045104b75",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "9535722dad6d0995",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "set.SP_Ta_(base) SP_DIRECT_virt",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set('F_CCC.z1.SP_DIRECT_virt',msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3920,
        "y": 160,
        "wires": [
            [
                "a7ed974cef55c457"
            ]
        ]
    },
    {
        "id": "9a0e227ed7718d64",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "war_ot1",
        "label": "",
        "tooltip": "Range -20 / 15",
        "group": "9b8ec8b1b9f66309",
        "order": 8,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z1.ot1",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 3440,
        "y": 360,
        "wires": [
            [
                "0ad263e5f3bf4fe9",
                "850fb0ccb76b25cf",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "e07cc2b915729d33",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "war_wt2",
        "label": "",
        "tooltip": "Range 20 / 60",
        "group": "9b8ec8b1b9f66309",
        "order": 12,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z1.wt2",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 3600,
        "y": 400,
        "wires": [
            [
                "0ad263e5f3bf4fe9",
                "850fb0ccb76b25cf",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "f1d9c2e3346b1e43",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "war_ot2",
        "label": "",
        "tooltip": "Range -20 / 15",
        "group": "9b8ec8b1b9f66309",
        "order": 11,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z1.ot2",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 3440,
        "y": 400,
        "wires": [
            [
                "0ad263e5f3bf4fe9",
                "850fb0ccb76b25cf",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "388bec4d296db98d",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "war_wt1",
        "label": "",
        "tooltip": "Range 20 / 60",
        "group": "9b8ec8b1b9f66309",
        "order": 9,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z1.wt1",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 3600,
        "y": 360,
        "wires": [
            [
                "0ad263e5f3bf4fe9",
                "850fb0ccb76b25cf",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "81e0133d16c51789",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "z1_CCC on/off",
        "label": "",
        "tooltip": " ",
        "group": "1179fa790d2d89ca",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "z1_Correction_0_WAR_on_off",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 3460,
        "y": 300,
        "wires": [
            [
                "65770940f38c7f51"
            ]
        ]
    },
    {
        "id": "b991be16b9662a3e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "set.Correction_0_WAR_on_off",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = \"Function - CCC (Zone 1)\";\nglobal.set('F_CCC.z1.state',msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3910,
        "y": 280,
        "wires": [
            [
                "0380b395668eee8e"
            ]
        ]
    },
    {
        "id": "0380b395668eee8e",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Correction_0_WAR_on_off Z1",
        "mode": "link",
        "links": [
            "01d75eec1bfe68d4",
            "031e62b0bf3df7d7",
            "3f0803a3a230aca2"
        ],
        "x": 4075,
        "y": 280,
        "wires": []
    },
    {
        "id": "0ad263e5f3bf4fe9",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "set.war_ot_wt",
        "func": "var varName = msg.topic\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(varName,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3460,
        "y": 520,
        "wires": [
            [
                "5b0c451c1ec63b84"
            ]
        ]
    },
    {
        "id": "5b0c451c1ec63b84",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Chart WAR",
        "func": "var war_Tb          = global.get('T_outside',\"file\");                           // Outdoor temperature.\nvar SP_war          = global.get('F_CCC.z1.setpoint',\"file\");                                   // Setpoint after the WAR calculation done in (other) function.\n\nvar war_ot1         = global.get('F_CCC.z1.ot1',\"file\");\nvar war_ot2         = global.get('F_CCC.z1.ot2',\"file\");\nvar war_ot3         = global.get('F_CCC.z1.ot3',\"file\");\n\nvar war_wt1         = global.get('F_CCC.z1.wt1',\"file\");\nvar war_wt2         = global.get('F_CCC.z1.wt2',\"file\");\nvar war_wt3         = global.get('F_CCC.z1.wt3',\"file\");\n\n// Design example\n//          OUTSIDE                 WATER\n//          Temperature     >>      Temperature\n//----------------------------------------------------------------------------\n// Range 1\n//          (OT1=)  20      >>  25  (=WT1)\n// Range 2\n//          (OT2=)  5       >>  31  (=WT2)\n// Range 3\n//          (OT3=)  -10     >>  37  (=WT3)\n// Range 4\n//----------------------------------------------------------------------------\n//\n//\n// math part \n// Y = aX + b\n// X axis = ot variable\n// Y axis = wt variable\nvar a;\nvar b;\n\nif (war_Tb <= war_ot3)                                                          // Range 1 in the graph\n    {   a = 0;\n        b = war_wt3;\n    }\n\nif (war_Tb > war_ot2)                                                           // Range 2 in the graph\n    {   a = ((war_wt2-war_wt1)/(war_ot2-war_ot1));\n        b = (war_wt1-(war_ot1*a));\n    }\n    \nif (war_Tb <= war_ot2)                                                          // Range 3 in the graph\n    {   a = ((war_wt3-war_wt2)/(war_ot3-war_ot2));\n        b = (war_wt2-(war_ot2*a));\n    }\n    \nif (war_Tb >= war_ot1)                                                          // Range 4 in the graph\n    {   a = 0;\n        b = war_wt1;\n    }\n\n// Chart part. \n// Here the chart is created with the variables.\n// Part 1 of the chart plots the WAR temperature profile set by the values on the page. \n// Part 2 of the chart plots the line which represents the actual temperature to water temperature. To read it easier.\n// Part 3 of the chart plots the ranges so the chart will be more stable on screen, not messing around with chart axis.\n\nvar chart =     [{\n    \"series\":   [\"Water\",\"Actual\",''],\n    \"data\": [\n                [\n                {\"x\":(war_ot1+15),\"y\":war_wt1},                                 // chart part 1: WAR program series\n                {\"x\":(war_ot1),\"y\":war_wt1},\n                {\"x\":(war_ot2),\"y\":war_wt2},\n                {\"x\":(war_ot3),\"y\":war_wt3},\n                {\"x\":(war_ot3-15),\"y\":war_wt3}\n                ],\n                \n                [\n                {\"x\":(war_ot3-15),  \"y\":((a*war_Tb)+b).toFixed(3)},                        // chart part 2: Actual lines which make use of the function above.\n                {\"x\":(war_Tb),      \"y\":((a*war_Tb)+b).toFixed(3)},\n                {\"x\":(war_Tb),      \"y\":(17).toFixed(3)},\n                ],\n                \n                [                                                               // chart part 3: X-Y as with fixed ranges to make it look more stable.\n                {\"x\":(war_ot3-15),\"y\":(war_wt3+5)},\n                {\"x\":(war_ot3-15),\"y\":(17)},\n                {\"x\":(war_ot1+15),\"y\":(17)}\n                ]\n\n            ],    \n    \"labels\":[ \"\",\"\" ]\n}];\n\n\n\nlet msg1={}, msg2={}, msg3={};\nmsg.payload = chart; \nmsg2.payload = war_Tb; \nmsg3.payload = SP_war;\n\nmsg2.payload = Number(msg2.payload).toFixed(1);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.topic='T outside';\n\nmsg3.payload = Number(msg3.payload).toFixed(1);\nmsg3.payload = parseFloat(msg3.payload);\nmsg3.topic='SP WAR';\n\nreturn [msg, msg2, msg3];\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3670,
        "y": 520,
        "wires": [
            [
                "4d5e9a9dacd2b429"
            ],
            [
                "7febe67492bf7cbe",
                "12842f4ef6ffc342"
            ],
            []
        ],
        "outputLabels": [
            "Real chart",
            "T_outside",
            ""
        ]
    },
    {
        "id": "4d5e9a9dacd2b429",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "name": "",
        "group": "9b8ec8b1b9f66309",
        "order": 2,
        "width": 16,
        "height": 8,
        "label": "Zone 1 Temperature Profile",
        "chartType": "line",
        "legend": "false",
        "xformat": "x",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#ff7f0e",
            "#333333",
            "#000000",
            "#000000",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 4220,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "e5afa5e58fb2ecef",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "1 Trigger / 5 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 3200,
        "y": 760,
        "wires": [
            [
                "48ac4170551d07e2"
            ]
        ]
    },
    {
        "id": "48ac4170551d07e2",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Load on boot RTC Z1",
        "func": "var F_RTC       = global.get('F_RTC',\"file\");\nvar save        = false;\n\n////////////////////////////////////\nif (F_RTC===undefined){\n    global.set('F_RTC',{},\"file\"); \n    F_RTC = {};\n}\nif (F_RTC.z1===undefined){\n    global.set('F_RTC.z1',{},\"file\"); \n    F_RTC.z1 = {};\n}\n////////////////////////////////////\nif (F_RTC.z1.state === undefined)                   { F_RTC.z1.state = 0; save = true; }\nif (F_RTC.z1.t1_limit === undefined)                { F_RTC.z1.t1_limit = 1.5; save = true; }\nif (F_RTC.z1.t2_limit === undefined)                { F_RTC.z1.t2_limit = 1; save = true; }\nif (F_RTC.z1.t3_limit === undefined)                { F_RTC.z1.t3_limit = 0.5; save = true; }\nif (F_RTC.z1.t4_limit === undefined)                { F_RTC.z1.t4_limit = -0.5; save = true; }\nif (F_RTC.z1.t5_limit === undefined)                { F_RTC.z1.t5_limit = -1; save = true; }\nif (F_RTC.z1.t6_limit === undefined)                { F_RTC.z1.t6_limit = -1.5; save = true; }\nif (F_RTC.z1.t7_correction_value === undefined)     { F_RTC.z1.t7_correction_value = 4; save = true; }\nif (F_RTC.z1.t7_limit === undefined)                { F_RTC.z1.t7_limit = -2; save = true; }\nif (F_RTC.automation_on_limit === undefined)        { F_RTC.automation_on_limit = 3; save = true; }\nif (F_RTC.automation_off_limit === undefined)       { F_RTC.automation_off_limit = 1; save = true; }\nif (F_RTC.automation_power_state === undefined)     { F_RTC.automation_power_state = 0; save = true; }\nif (F_RTC.automation_OM_state === undefined)        { F_RTC.automation_OM_state = 0; save = true; }\nif (F_RTC.incremental_setpoints_state === undefined){ F_RTC.incremental_setpoints_state = 0; save = true; }\nif (F_RTC.z1.t1_correction === undefined)              { F_RTC.z1.t1_correction = -3; save = true; }\nif (F_RTC.z1.t2_correction === undefined)              { F_RTC.z1.t2_correction = -2; save = true; }\nif (F_RTC.z1.t3_correction === undefined)              { F_RTC.z1.t3_correction = -1; save = true; }\nif (F_RTC.z1.t4_correction === undefined)              { F_RTC.z1.t4_correction = 1; save = true; }\nif (F_RTC.z1.t5_correction === undefined)              { F_RTC.z1.t5_correction = 2; save = true; }\nif (F_RTC.z1.t6_correction === undefined)              { F_RTC.z1.t6_correction = 3; save = true; }\n\nif (save === true) {global.set('F_RTC',F_RTC,\"file\");}\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nlet msg1 = {}, msg2 = {}, msg3 = {}, msg4 = {}, msg5 = {}, msg6 = {}, msg7 = {}, msg8 = {}, msg9 = {}, msg10 = {}, msg11 = {}, msg12 = {}, msg13 = {}, msg14 = {}, msg15 = {},      msg16={}, msg17={}, msg18={}, msg19={}, msg20={}, msg21={};\n\nmsg1.payload = F_RTC.z1.state;\nmsg2.payload = F_RTC.z1.setpoint;\nmsg3.payload = F_RTC.z1.t1_limit; msg3.topic = 'z1.t1_limit';\nmsg4.payload = F_RTC.z1.t2_limit; msg4.topic = 'z1.t2_limit';\nmsg5.payload = F_RTC.z1.t3_limit; msg5.topic = 'z1.t3_limit';\nmsg6.payload = F_RTC.z1.t4_limit; msg6.topic = 'z1.t4_limit';\nmsg7.payload = F_RTC.z1.t5_limit; msg7.topic = 'z1.t5_limit';\nmsg8.payload = F_RTC.z1.t6_limit; msg8.topic = 'z1.t6_limit';\nmsg9.payload = F_RTC.z1.t7_limit; msg9.topic = 'z1.t7_limit'; // custom\nmsg10.payload = F_RTC.automation_off_limit; msg10.topic = 'automation_off_limit'\nmsg11.payload = F_RTC.automation_on_limit; msg11.topic = 'automation_on_limit';\nmsg12.payload = F_RTC.automation_power_state; msg12.topic = 'automation_power_state';\nmsg13.payload = F_RTC.z1.t7_correction_value; msg13.topic = 'z1.t7_correction_value';\nmsg14.payload = F_RTC.z1.incremental_setpoints_state; msg14.custom = F_RTC.z1.t7_correction_value;\nmsg15.payload = F_RTC.automation_OM_state; msg15.topic = 'automation_OM_state';\nmsg16.payload = F_RTC.z1.t1_correction; msg16.topic = 'z1.t1_correction';\nmsg17.payload = F_RTC.z1.t2_correction; msg17.topic = 'z1.t2_correction';\nmsg18.payload = F_RTC.z1.t3_correction; msg18.topic = 'z1.t3_correction';\nmsg19.payload = F_RTC.z1.t4_correction; msg19.topic = 'z1.t4_correction';\nmsg20.payload = F_RTC.z1.t5_correction; msg20.topic = 'z1.t5_correction';\nmsg21.payload = F_RTC.z1.t6_correction; msg21.topic = 'z1.t6_correction';\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10, msg11, msg12, msg13, msg14, msg15, msg16, msg17, msg18, msg19, msg20, msg21];\n",
        "outputs": 21,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3220,
        "y": 960,
        "wires": [
            [
                "e8990d184ea1eca6",
                "25b8320badf7ef88",
                "54724886189b074f"
            ],
            [
                "1b8f5447c498c1d6",
                "b15c419913e8770a"
            ],
            [
                "d3b8865dfdb6d46c",
                "4ffcf5c7dbf32067"
            ],
            [
                "e4c7ba5f1306c384",
                "4ffcf5c7dbf32067"
            ],
            [
                "a0998b9af634354f",
                "4ffcf5c7dbf32067"
            ],
            [
                "aa1f73bbe3eef9e1",
                "4ffcf5c7dbf32067"
            ],
            [
                "9b1f3ccedd4e853b",
                "4ffcf5c7dbf32067"
            ],
            [
                "017e7b4d1642ed42",
                "4ffcf5c7dbf32067"
            ],
            [
                "2ca9ec858ebd4887",
                "4ffcf5c7dbf32067"
            ],
            [
                "6a4e29a621172a7e",
                "4ffcf5c7dbf32067"
            ],
            [
                "9e7985132053da99",
                "4ffcf5c7dbf32067"
            ],
            [
                "6efc9729afea79a2",
                "4ffcf5c7dbf32067"
            ],
            [
                "290133f7fd948e25",
                "4ffcf5c7dbf32067"
            ],
            [
                "57d858f4dd89a4c8"
            ],
            [
                "f8d7e53aed62cd14",
                "4ffcf5c7dbf32067"
            ],
            [
                "368bd104ea1ba4e6",
                "4ffcf5c7dbf32067"
            ],
            [
                "922a3b1879d1a5ec",
                "4ffcf5c7dbf32067"
            ],
            [
                "ae00df3cd05e6b06",
                "4ffcf5c7dbf32067"
            ],
            [
                "470ba61639a6ba2d",
                "4ffcf5c7dbf32067"
            ],
            [
                "1b0dd0c926383896",
                "4ffcf5c7dbf32067"
            ],
            [
                "ce9db55d9de18296",
                "4ffcf5c7dbf32067"
            ]
        ],
        "outputLabels": [
            "Correction_1_RTC_on_off",
            "WoonkamerSP",
            "rtc_t1",
            "rtc_t2",
            "rtc_t3",
            "rtc_t4",
            "rtc_t5",
            "rtc_t6",
            "rtc_t7",
            "rtc_off",
            "rtc_on",
            "F_RTC_on_off2",
            "rtc_t7_correction_value",
            "incremental_setpoints_state",
            "F_RTC_on_off3_OM",
            "F_RTC.t1_correction",
            "F_RTC.t2_correction",
            "F_RTC.t3_correction",
            "F_RTC.t4_correction",
            "F_RTC.t5_correction",
            "F_RTC.t6_correction"
        ]
    },
    {
        "id": "080c11bcc5a2ac73",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Z1",
        "links": [
            "d16f38ef74db786a"
        ],
        "x": 3365,
        "y": 600,
        "wires": [
            [
                "d9675d9d144e412b",
                "946190a858bafe3d"
            ]
        ]
    },
    {
        "id": "d1e851a03542c949",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 5,
        "width": 3,
        "height": 1,
        "name": "Outside temp.",
        "label": "Outside temp.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 3460,
        "y": 340,
        "wires": []
    },
    {
        "id": "54284f6b97afb3c7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "Water temp.",
        "label": "Water temp. z1",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3610,
        "y": 340,
        "wires": []
    },
    {
        "id": "7febe67492bf7cbe",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 22,
        "width": 3,
        "height": 1,
        "name": "T outside",
        "label": "",
        "format": "{{msg.payload}} °C",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3840,
        "y": 460,
        "wires": []
    },
    {
        "id": "d9675d9d144e412b",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 23,
        "width": 3,
        "height": 1,
        "name": "SP (WAR) - Function (WAR) settings tab",
        "label": "",
        "format": "{{msg.payload}} °C",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3880,
        "y": 560,
        "wires": []
    },
    {
        "id": "f3f5cc4e789d19f3",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 20,
        "width": 3,
        "height": 1,
        "name": "Calculated water temp.",
        "label": "Calculated temp.",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3840,
        "y": 380,
        "wires": []
    },
    {
        "id": "0c8eb8257035ca5f",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "z1_CCC on/off",
        "label": "Zone 1",
        "tooltip": "",
        "group": "9b8ec8b1b9f66309",
        "order": 1,
        "width": 8,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "z1_Correction_0_WAR_on_off",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 3460,
        "y": 260,
        "wires": [
            [
                "65770940f38c7f51"
            ]
        ]
    },
    {
        "id": "d3b8865dfdb6d46c",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t1_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 8,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t1_limit",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 920,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "e4c7ba5f1306c384",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t2_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 10,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t2_limit",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 960,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "a0998b9af634354f",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t3_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 12,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t3_limit",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 1000,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "aa1f73bbe3eef9e1",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t4_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 18,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t4_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 1120,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "9b1f3ccedd4e853b",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t5_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 20,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t5_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 1160,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "017e7b4d1642ed42",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t6_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 22,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t6_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 1200,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "aae82d0c01404d51",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "set.rtc_t_ranges",
        "func": "if (msg.topic == 'z1.setpoint') { return null; }\n\nvar varName = \"F_RTC.\" + msg.topic;\nmsg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(varName,msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4320,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "60e33931edeab23f",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 5,
        "width": 3,
        "height": 4,
        "name": "Warm limits",
        "label": "Too warm",
        "format": "{{msg.payload}}",
        "layout": "row-right",
        "className": "",
        "x": 3450,
        "y": 920,
        "wires": []
    },
    {
        "id": "3e3f19d365adf7ae",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 17,
        "width": 3,
        "height": 4,
        "name": "Cold limits",
        "label": "Too cold",
        "format": "{{msg.payload}}",
        "layout": "row-right",
        "className": "",
        "x": 3450,
        "y": 1120,
        "wires": []
    },
    {
        "id": "38a2e1df7e0bdb2a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Chart RTC z1",
        "func": "var rtc_PV          = global.get('T_zone_1');                             // Measurement of room temperature\nif (rtc_PV === undefined) { return null; }\n\nvar rtc_SP          = global.get('F_RTC.z1.setpoint',\"file\");                         // SetPoint of room temperature.\nif (rtc_SP===undefined) {global.set('F_RTC.z1.setpoint',20,\"file\"); rtc_SP=20;}\n\nvar F_RTC = global.get('F_RTC',\"file\");\n\nvar rtc_t1          = F_RTC.z1.t1_limit;\nvar rtc_t2          = F_RTC.z1.t2_limit;\nvar rtc_t3          = F_RTC.z1.t3_limit;\n\nvar rtc_t4          = F_RTC.z1.t4_limit;\nvar rtc_t5          = F_RTC.z1.t5_limit;\nvar rtc_t6          = F_RTC.z1.t6_limit;\nvar rtc_t7          = F_RTC.z1.t7_limit; //custom\nvar rtc_on          = F_RTC.automation_on_limit;\nvar rtc_off         = F_RTC.automation_off_limit;\n\nvar rtc_vvw1        = global.get('T_woonkamer_BT3_vvw');                        // Measurement of room temperature \nvar rtc_vvw2        = global.get('T_woonkamer_BT4_vvw');                        // Measurement of room temperature \n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={}, msg8a={}, msg9={}, msg10={}, msg11={}, msg12={};\n\n\nmsg1.payload = rtc_SP;                                                          //\nmsg1.payload = Number(msg1.payload).toFixed(1);\nmsg1.payload = parseFloat(msg1.payload);\nmsg1.topic='Room SP';                                                                // \n\nmsg2.payload = rtc_PV;                                                          // \nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.topic='Room PV';                                                                // \n\nmsg3.payload = (rtc_SP+rtc_t1);                                                 // \nmsg3.payload = Number(msg3.payload).toFixed(1);\nmsg3.payload = parseFloat(msg3.payload);\nmsg3.topic='-3';                                                          // \n\nmsg4.payload = (rtc_SP+rtc_t2);                                                 // \nmsg4.payload = Number(msg4.payload).toFixed(1);\nmsg4.payload = parseFloat(msg4.payload);\nmsg4.topic='-2';                                                          // \n\nmsg5.payload = (rtc_SP+rtc_t3);                                                 // \nmsg5.payload = Number(msg5.payload).toFixed(1);\nmsg5.payload = parseFloat(msg5.payload);\nmsg5.topic='-1';                                                          // \n\nmsg6.payload = (rtc_SP+rtc_t4);                                                 // \nmsg6.payload = Number(msg6.payload).toFixed(1);\nmsg6.payload = parseFloat(msg6.payload);\nmsg6.topic='+1';                                                          // \n\nmsg7.payload = (rtc_SP+rtc_t5);                                                 // \nmsg7.payload = Number(msg7.payload).toFixed(1);\nmsg7.payload = parseFloat(msg7.payload);\nmsg7.topic='+2';                                                          // \n\nmsg8.payload = (rtc_SP+rtc_t6);                                                 // \nmsg8.payload = Number(msg8.payload).toFixed(1);\nmsg8.payload = parseFloat(msg8.payload);\nmsg8.topic='+3';                                                          // \n\nmsg8a.payload = (rtc_SP+rtc_t7);                                                 // \nmsg8a.payload = Number(msg8a.payload).toFixed(1);\nmsg8a.payload = parseFloat(msg8a.payload);\nmsg8a.topic = '+custom';  //change to custom\n\nmsg9.payload = rtc_vvw1;                                                        // \nmsg9.payload = Number(msg9.payload).toFixed(2);\nmsg9.payload = parseFloat(msg9.payload);\nmsg9.topic='Floor T1';\n\n\nmsg10.payload = rtc_vvw2;                                                        // \nmsg10.payload = Number(msg10.payload).toFixed(2);\nmsg10.payload = parseFloat(msg10.payload);\nmsg10.topic='Floor T2';  \n\nmsg11.payload = (rtc_SP+rtc_on);                                                        // \nmsg11.payload = Number(msg11.payload).toFixed(1);\nmsg11.payload = parseFloat(msg11.payload);\nmsg11.topic='Trigger';  \n\nmsg12.payload = (rtc_SP+rtc_off);                                                        // \nmsg12.payload = Number(msg12.payload).toFixed(1);\nmsg12.payload = parseFloat(msg12.payload);\nmsg12.topic='Revert';  \n\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg8a, msg9, msg10, msg11, msg12], msg2];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4340,
        "y": 1400,
        "wires": [
            [
                "b32f014cb3ec752e"
            ],
            [
                "1f5d513050d612a1"
            ]
        ],
        "outputLabels": [
            "chart",
            "rtc_PV"
        ]
    },
    {
        "id": "b32f014cb3ec752e",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "023e106e50b945f6",
        "name": "",
        "group": "e27cfec311892d88",
        "order": 3,
        "width": 16,
        "height": 14,
        "label": "Zone 1 Room Temperature",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "2000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#7bd152",
            "#0011ff",
            "#b22222",
            "#dc7f27",
            "#ffd700",
            "#ffd700",
            "#dc7f27",
            "#b22222",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 4640,
        "y": 1420,
        "wires": [
            [
                "65ea8cc832ad6d50"
            ]
        ]
    },
    {
        "id": "79daf2eea90f8432",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "023e106e50b945f6",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 4570,
        "y": 1380,
        "wires": [
            [
                "b32f014cb3ec752e"
            ]
        ]
    },
    {
        "id": "25b8320badf7ef88",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC on/off RTC_Settings",
        "label": "Zone 1",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 1,
        "width": 7,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 3650,
        "y": 840,
        "wires": [
            [
                "22addf167b287f53"
            ]
        ]
    },
    {
        "id": "032ca56c8c21283e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "023e106e50b945f6",
        "group": "e27cfec311892d88",
        "order": 29,
        "width": 16,
        "height": 1,
        "name": "footnote",
        "label": "This chart shows 1 datapoint every 5 minutes",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4560,
        "y": 1480,
        "wires": []
    },
    {
        "id": "36a9b7dad9d2611e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 24,
        "width": 16,
        "height": 1,
        "name": "Graph description",
        "label": "X-axis: outside °C | Y-axis: water °C",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3990,
        "y": 360,
        "wires": []
    },
    {
        "id": "45643e4e39e1d248",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "1179fa790d2d89ca",
        "order": 11,
        "width": 2,
        "height": 1,
        "name": "Home Heat - Current correction value RTC",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-right",
        "className": "",
        "x": 3710,
        "y": 1640,
        "wires": []
    },
    {
        "id": "1b40f688e5fbc5dd",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "bf4af523ba16d457",
        "order": 27,
        "width": 2,
        "height": 1,
        "name": "Home - Current correction (SS)",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4450,
        "y": 2220,
        "wires": []
    },
    {
        "id": "4c49268a7054041c",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "",
        "links": [
            "16054e8334890ad8"
        ],
        "x": 3765,
        "y": 2180,
        "wires": [
            [
                "47e76e01a5cfb304",
                "3a196a4275cfec68"
            ]
        ]
    },
    {
        "id": "37ae6fb47a326b5e",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "SS chart",
        "group": "c2a0123d2e2c91f0",
        "order": 3,
        "width": 18,
        "height": 8,
        "label": "24 hour",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "-6",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "2000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 4520,
        "y": 2420,
        "wires": [
            [
                "e3b0d458cec07c21"
            ]
        ]
    },
    {
        "id": "3578d6b18ceb5727",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "Chart SS",
        "func": "var ss_SP           = Math.ceil(global.get('SP_Final',\"file\"));\nvar ss_Tr           = global.get('TOP5_Main_Inlet_Temp');\nvar ss_Ta           = global.get('TOP6_Main_Outlet_Temp');\nvar ss_hz           = global.get('compressor_frequency',\"file\");\nvar ss_corr         = Math.ceil(global.get('SHIFT_Final',\"file\"));\nvar QM_level        = global.get('TOP18_Quiet_Mode_Level',\"file\");\n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={};\n\nmsg1.payload = ss_SP;\nmsg1.topic   = 'Setpoint';\nvar OM = global.get('TOP4_Operating_Mode_State',\"file\")\nif (OM == 1) { \n    msg1.payload = global.get('Z1_Cool_Request_Temp'); \n}\nif (msg1.payload === undefined) { msg1.payload = null}\nmsg1.payload = Number(msg1.payload).toFixed(1);\nmsg1.payload = parseFloat(msg1.payload);\n\n\nmsg2.payload = ss_Tr;\nmsg2.payload = Number(msg2.payload).toFixed(1);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.topic='Water inlet';\n\nmsg3.payload = ss_Ta;\nmsg3.payload = Number(msg3.payload).toFixed(1);\nmsg3.payload = parseFloat(msg3.payload);\nmsg3.topic='Water outlet';\n\nmsg4.payload = ss_hz;\nmsg4.payload = Number(msg4.payload).toFixed(0);\nmsg4.payload = parseFloat(msg4.payload);\nmsg4.topic='Frequency';\n\n\nmsg5.payload = ss_corr;\nmsg5.payload = Number(msg5.payload).toFixed();\nmsg5.payload = parseFloat(msg5.payload);\nmsg5.topic='Correction';\n\nmsg6.payload = QM_level;\nmsg6.payload = Number(msg6.payload).toFixed(0);\nmsg6.payload = parseFloat(msg6.payload);\nmsg6.topic   = 'QuietMode level';\n\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6]];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4220,
        "y": 2420,
        "wires": [
            [
                "37ae6fb47a326b5e",
                "c48cd6bad07ce428"
            ]
        ]
    },
    {
        "id": "7bad42f4cc70470e",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 3970,
        "y": 2460,
        "wires": [
            [
                "3578d6b18ceb5727"
            ]
        ]
    },
    {
        "id": "7790b731fd9a1374",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Softstart on/off (SS)",
        "label": "Softstart",
        "tooltip": "",
        "group": "c2a0123d2e2c91f0",
        "order": 2,
        "width": 5,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 4410,
        "y": 1900,
        "wires": [
            [
                "d83ab1374f972ad1"
            ]
        ]
    },
    {
        "id": "c9c2bf06edb19d41",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "Chart Water (ROOM)",
        "func": "var SP_Ta                   = global.get('SP_Final',\"file\");                    // Current Setpoint Ta\nvar PV_Tr                   = global.get('TOP5_Main_Inlet_Temp');               // Current inlet temperature\nvar PV_Ta                   = global.get('TOP6_Main_Outlet_Temp');              // Current outlet temperature\nvar TOP10_DHW_Temp          = global.get('TOP10_DHW_Temp');                     // Current TANK temperature\nvar TOP20_ThreeWay_Valve_State    = global.get(\"TOP20_ThreeWay_Valve_State\");   // Current state of the 3-way valve\nvar TOP9_DHW_Target_Temp    = global.get('TOP9_DHW_Target_Temp',\"file\");        // Current Setpoint DHW\n\n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={};\n\nmsg1.payload = SP_Ta;                                                           //\nmsg1.payload = Number(msg1.payload).toFixed(0);\nmsg1.payload = parseFloat(msg1.payload);\nmsg1.topic='Setpoint';                                                             // \n\nmsg2.payload = PV_Tr;                                                           // \nmsg2.payload = Number(msg2.payload).toFixed(1);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.topic='Actual T(inlet)';                                                             // \n\nmsg3.payload = PV_Ta;                                                           // \nmsg3.payload = Number(msg3.payload).toFixed(1);\nmsg3.payload = parseFloat(msg3.payload);\nmsg3.topic='Actual T(outlet)';                                                             // \n\nmsg4.payload = TOP20_ThreeWay_Valve_State;                                            // \nmsg4.payload = Number(msg4.payload).toFixed(0);\nmsg4.payload = parseFloat(msg4.payload);\nmsg4.topic='ThreeWay Valve State';                                              //  \n\nmsg5.payload = TOP10_DHW_Temp;                                                        // \nmsg5.payload = Number(msg5.payload).toFixed(0);\nmsg5.payload = parseFloat(msg5.payload);\nmsg5.topic='Tank Actual';                                                           //  \n\nmsg6.payload = TOP9_DHW_Target_Temp;                                                           //\nmsg6.payload = Number(msg6.payload).toFixed(0);\nmsg6.payload = parseFloat(msg6.payload);\nmsg6.topic='Tank Setpoint';  \n\n\n// TOP20_ThreeWay_Valve_State = ROOM mode > output value to pin 1\nif (TOP20_ThreeWay_Valve_State == 0) {\n    return [ [msg1, msg2, msg3] , [msg6, null, null, msg5] ];\n    } \n\n// TOP20_ThreeWay_Valve_State = DHW mode > output value to pin 2, including the PV_Tank\nelse {\n    return [ null , [msg6, msg2, msg3, msg5] ];\n    }",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 2400,
        "wires": [
            [
                "9802bf01ebf45d28"
            ],
            [
                "9789265573ab4c80"
            ]
        ]
    },
    {
        "id": "76fd0cf35b775cdf",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 650,
        "y": 2280,
        "wires": [
            [
                "8cb1aceef81045bd"
            ]
        ]
    },
    {
        "id": "9f3df8b1cba0bbda",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "Chart Roomtemperatures Z1+Z2",
        "func": "var SPz1          = global.get('SP_Final_z1',\"file\");            // Current Zone 1 Setpoint of the water\nvar SPz2          = global.get('SP_Final_z2',\"file\");            // Current Zone 2 Setpoint of the water\n\nvar T_zone_1    = global.get('T_zone_1');                   // Current room sensor 1 (air)\nvar T_zone_2    = global.get('T_zone_2');                   // Current room sensor 2 (air)\n\nvar TOP94_Zones_State = global.get('TOP94_Zones_State',\"file\");\n\n\n\nvar msg1={}, msg2={}, msg3={}, msg4={};\n\nif (SPz1 !== undefined)\n{\n    msg1.payload = SPz1;\n    msg1.payload = Number(msg1.payload).toFixed(2);\n    msg1.payload = parseFloat(msg1.payload);\n    msg1.topic='Setpoint (Zone 1)';\n}\nif (SPz2 !== undefined)\n{\n    msg2.payload = SPz2;\n    msg2.payload = Number(msg2.payload).toFixed(2);\n    msg2.payload = parseFloat(msg2.payload);\n    msg2.topic='Setpoint (Zone 2)';\n}\n\n\nif (T_zone_1 !== undefined)\n{\n    msg3.payload = T_zone_1;\n    msg3.payload = Number(msg3.payload).toFixed(2);\n    msg3.payload = parseFloat(msg3.payload);\n    msg3.topic='Room Actual (Zone 1)';\n}\nif (T_zone_2 !== undefined)\n{\n    msg4.payload = T_zone_2;\n    msg4.payload = Number(msg4.payload).toFixed(2);\n    msg4.payload = parseFloat(msg4.payload);\n    msg4.topic='Room Actual (Zone 2)';\n}\n\n\nif (TOP94_Zones_State == 0) {\n    return [[msg1, null, msg3, null, null, null, null]];\n}\n\nif (TOP94_Zones_State == 1) {\n    return [[null, msg2, null, msg4, null, null, null]];\n}\n\nif (TOP94_Zones_State == 2) {\n    return [[msg1, msg2, msg3, msg4, null, null, null]];\n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 2240,
        "wires": [
            [
                "8cb1aceef81045bd"
            ]
        ]
    },
    {
        "id": "a734f98c5d02604e",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "Trigger at start",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 2240,
        "wires": [
            [
                "9f3df8b1cba0bbda",
                "c9c2bf06edb19d41"
            ]
        ]
    },
    {
        "id": "fa81c798d517834f",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "WAR part",
        "info": "",
        "x": 3140,
        "y": 140,
        "wires": []
    },
    {
        "id": "8bd536b323fb865c",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC part",
        "info": "",
        "x": 3180,
        "y": 820,
        "wires": []
    },
    {
        "id": "b5f581c27a02b8a0",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "SS part",
        "info": "",
        "x": 3750,
        "y": 1900,
        "wires": []
    },
    {
        "id": "4dc131a257d753d0",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "SP >>",
        "info": "",
        "x": 3130,
        "y": 180,
        "wires": []
    },
    {
        "id": "dade0dbb40c3945a",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 16,
        "width": 5,
        "height": 1,
        "name": "Room actual",
        "label": "Room actual",
        "format": "{{msg.payload}} °C ",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3610,
        "y": 1080,
        "wires": []
    },
    {
        "id": "0d58a1e854263ec4",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "name": "",
        "group": "9b8ec8b1b9f66309",
        "order": 32,
        "width": 16,
        "height": 6,
        "label": "Time chart",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-10",
        "ymax": "50",
        "removeOlder": "24",
        "removeOlderPoints": "1000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#de425b",
            "#00876c",
            "#f59b56",
            "#000000",
            "#000000",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 4170,
        "y": 520,
        "wires": [
            [
                "c26a112b706b6d55"
            ]
        ]
    },
    {
        "id": "b92812725c4e8443",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Trigger interval 1m",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 3440,
        "y": 560,
        "wires": [
            [
                "5b0c451c1ec63b84",
                "6c95ed35d3dcaea3"
            ]
        ]
    },
    {
        "id": "01d75eec1bfe68d4",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Dash_WAR_OnOff Z1",
        "links": [
            "0380b395668eee8e",
            "34e923228bf51ddf",
            "3511e342c1fb7c3f",
            "6a7dd03e7f46c1f5"
        ],
        "x": 3355,
        "y": 200,
        "wires": [
            [
                "0c8eb8257035ca5f",
                "81e0133d16c51789"
            ]
        ]
    },
    {
        "id": "942f2ca34abfe8ac",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC toggle on/off (z1)",
        "links": [
            "aa4dd3b07f9cb7ed",
            "c9df0ea076346fde",
            "eb88ab4567d68ff5"
        ],
        "x": 3465,
        "y": 760,
        "wires": [
            [
                "25b8320badf7ef88",
                "e8990d184ea1eca6"
            ]
        ]
    },
    {
        "id": "354fe89415b3f383",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 4160,
        "y": 600,
        "wires": [
            [
                "558d0a739f566895"
            ]
        ]
    },
    {
        "id": "ecf47b4f156ae616",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Load on boot CCC z1",
        "func": "\n    \nvar Correction_0_WAR_on_off = global.get('F_CCC.z1.state',\"file\");\n    if (Correction_0_WAR_on_off === undefined)        {global.set('F_CCC.z1.state',0,\"file\"); Correction_0_WAR_on_off=0;}\n\nvar war_ot1                 = global.get('F_CCC.z1.ot1',\"file\");                             // Outside temperature high         (warm outside)\nvar war_ot2                 = global.get('F_CCC.z1.ot2',\"file\");                             // Outside temperature intermediate (intermediate outside temperature)\nvar war_ot3                 = global.get('F_CCC.z1.ot3',\"file\");                             // Outside temperature low          (cold outside)\nvar war_wt1                 = global.get('F_CCC.z1.wt1',\"file\");                             // Water temperature low            (cold water)\nvar war_wt2                 = global.get('F_CCC.z1.wt2',\"file\");                             // Water temperature intermediate   (intermediate water temperature)\nvar war_wt3                 = global.get('F_CCC.z1.wt3',\"file\");                             // Water temperature high           (warm water)\n\nvar SP_DIRECT_virt          = global.get('F_CCC.z1.SP_DIRECT_virt',\"file\");\n\nvar check = (war_ot1+war_ot2+war_ot3+war_wt1+war_wt2+war_wt3);\nif (isNaN(check) === true || check === undefined)     // if the variables are added to eachother and the result is Not a Number, produce an error message.\n    {   \n        return null;\n    }\n\nvar msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={};\n\n///////////////////\nvar TOP76_Heating_Mode = global.get(\"TOP76_Heating_Mode\",\"file\");\nif (TOP76_Heating_Mode === undefined) { return null; }\n\nmsg1.payload = SP_DIRECT_virt;\n\nif (TOP76_Heating_Mode == 0){                 // Compensation curve mode\n    if (SP_DIRECT_virt === undefined)        {global.set('F_CCC.z1.SP_DIRECT_virt',0,\"file\"); SP_DIRECT_virt=0;}   \n    var msg1 = { ui_control: {min:-5, max:+5, step:1 } };\n    msg1.label = \"Shift water temp.\";\n}\n\nif (TOP76_Heating_Mode == 1){                 // Direct mode\n    if (SP_DIRECT_virt === undefined)        {global.set('F_CCC.z1.SP_DIRECT_virt',20,\"file\"); SP_DIRECT_virt=20;}\n    var msg1 = {ui_control:{min:20, max:65, step:1}};\n    msg1.label = \"Default water temp.\";\n}\n//////////////////\n\n\n\nmsg1.payload = SP_DIRECT_virt;\nmsg1.topic = 'SP_DIRECT_virt';\nif (SP_DIRECT_virt !== undefined) { node.send(msg1); }\n\nmsg2.payload = Correction_0_WAR_on_off;\nmsg2.topic = \"Correction_0_WAR_on_off\";\nif (Correction_0_WAR_on_off !== undefined) { node.send([null, msg2]); }\n\nmsg3.payload = war_ot1;\nmsg3.topic = \"F_CCC.z1.ot1\";\nif (war_ot1 !== undefined) { node.send([null, null, msg3, null, null, null, null, null]); }\n\nmsg4.payload = war_ot2;\nmsg4.topic = \"F_CCC.z1.ot2\";\nif (war_ot2 !== undefined) { node.send([null, null, null, msg4, null, null, null, null]); }\n\nmsg5.payload = war_ot3;\nmsg5.topic = \"F_CCC.z1.ot3\";\nif (war_ot3 !== undefined) { node.send([null, null, null, null, msg5, null, null, null]); }\n\nmsg6.payload = war_wt1;\nmsg6.topic = \"F_CCC.z1.wt1\";\nif (war_wt1 !== undefined) { node.send([null, null, null, null, null, msg6, null, null]); }\n\nmsg7.payload = war_wt2;\nmsg7.topic = \"F_CCC.z1.wt2\";\nif (war_wt2 !== undefined) { node.send([null, null, null, null, null, null, msg7, null]); }\n\nmsg8.payload = war_wt3;\nmsg8.topic = \"F_CCC.z1.wt3\";\nif (war_wt3 !== undefined) { node.send([null, null, null, null, null, null, null, msg8]); }\n\n\n//return [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8];\n\n",
        "outputs": 8,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3220,
        "y": 380,
        "wires": [
            [
                "9fda0aa836fde5a4"
            ],
            [
                "0c8eb8257035ca5f",
                "81e0133d16c51789",
                "9fda0aa836fde5a4"
            ],
            [
                "9a0e227ed7718d64",
                "9fda0aa836fde5a4"
            ],
            [
                "f1d9c2e3346b1e43",
                "9fda0aa836fde5a4"
            ],
            [
                "4950af3d6534aa47",
                "9fda0aa836fde5a4"
            ],
            [
                "388bec4d296db98d",
                "9fda0aa836fde5a4"
            ],
            [
                "e07cc2b915729d33",
                "9fda0aa836fde5a4"
            ],
            [
                "f2daac0935cc9d81",
                "9fda0aa836fde5a4"
            ]
        ],
        "outputLabels": [
            "SP_DIRECT_virt",
            "Correction_0_WAR_on_off",
            "war_ot1",
            "war_ot2",
            "war_ot3",
            "war_wt1",
            "war_wt2",
            "war_wt3"
        ]
    },
    {
        "id": "8c2afa46f759d9cd",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "Load on boot 4",
        "func": "var TOP9_DHW_Target_Temp         = global.get('TOP9_DHW_Target_Temp',\"file\");\n//let msg1={};\nmsg.payload = TOP9_DHW_Target_Temp;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 120,
        "wires": [
            [
                "158e0bb2b00cd4ba",
                "7f44b9272e731114"
            ]
        ],
        "outputLabels": [
            "DHW_Target_Temp"
        ]
    },
    {
        "id": "12842f4ef6ffc342",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "1179fa790d2d89ca",
        "order": 7,
        "width": 3,
        "height": 1,
        "name": "T outside (advanced Functions tab)",
        "label": "CCC",
        "format": "({{msg.payload}} °C)",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3880,
        "y": 420,
        "wires": []
    },
    {
        "id": "1f5d513050d612a1",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "1179fa790d2d89ca",
        "order": 10,
        "width": 3,
        "height": 1,
        "name": "RTC PV (Home_HEAT)",
        "label": "RTC",
        "format": "({{msg.payload}} °C)",
        "layout": "row-left",
        "className": "",
        "x": 4550,
        "y": 1580,
        "wires": []
    },
    {
        "id": "1eb00088db267256",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "bf4af523ba16d457",
        "order": 26,
        "width": 3,
        "height": 1,
        "name": "SoftStart txt",
        "label": "SoftStart",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3990,
        "y": 1900,
        "wires": []
    },
    {
        "id": "cc1c74d4b3b87c5e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 18,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4270,
        "y": 120,
        "wires": []
    },
    {
        "id": "e5a709273b24888d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "b021ff109e8a2288",
        "order": 1,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4290,
        "y": 140,
        "wires": []
    },
    {
        "id": "d0cbd630befb3d01",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 17,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4250,
        "y": 240,
        "wires": []
    },
    {
        "id": "7a2a9be0735512b6",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 21,
        "width": 2,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4270,
        "y": 260,
        "wires": []
    },
    {
        "id": "320506c25427ee87",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 34,
        "width": 2,
        "height": 3,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4270,
        "y": 320,
        "wires": []
    },
    {
        "id": "e6ca18bfd7adb287",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "TOP62 - panasonic_heat_pump/main/Fan1_Motor_Speed",
        "topic": "panasonic_heat_pump/main/Fan1_Motor_Speed",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 350,
        "y": 1000,
        "wires": [
            [
                "8ae2f173954488ad"
            ]
        ]
    },
    {
        "id": "42c8d2ef7cd7f120",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "TOP63 - panasonic_heat_pump/main/Fan2_Motor_Speed",
        "topic": "panasonic_heat_pump/main/Fan2_Motor_Speed",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 350,
        "y": 1040,
        "wires": [
            [
                "60d36489df57e2d2"
            ]
        ]
    },
    {
        "id": "1ed98a1d47eb56f0",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 15,
        "width": 6,
        "height": 1,
        "name": "Fan1",
        "label": "Fan 1",
        "format": "{{msg.payload}} rpm",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 970,
        "y": 1000,
        "wires": []
    },
    {
        "id": "79dc18dd1cca1e73",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 14,
        "width": 6,
        "height": 1,
        "name": "Compressor runtime",
        "label": "Compressor runtime",
        "format": "{{msg.payload}} min",
        "layout": "row-spread",
        "className": "",
        "x": 980,
        "y": 940,
        "wires": []
    },
    {
        "id": "2b065128513763fa",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "Store information",
        "func": "var ss_chart = msg;\nglobal.set(\"ss_chart\", ss_chart, \"file\");",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4930,
        "y": 2420,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "9548ee234cc5af7a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "Load information",
        "func": "var msg1={};\nmsg1 = global.get('ss_chart', \"file\");\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4190,
        "y": 2380,
        "wires": [
            [
                "37ae6fb47a326b5e"
            ]
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "69b1892c29513016",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 4000,
        "y": 2380,
        "wires": [
            [
                "9548ee234cc5af7a"
            ]
        ]
    },
    {
        "id": "72bcb750dc791f05",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "023e106e50b945f6",
        "name": "Store information",
        "func": "var rtc_chart = msg;\n//global.set(\"rtc_chart_z1\", rtc_chart,\"file\") || [];\nglobal.set(\"rtc_chart_z1\", rtc_chart,\"file\");",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4950,
        "y": 1500,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "7bf73fde5dbbe654",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Load information",
        "func": "let msg1={};\nmsg1 = global.get(\"rtc_chart_z1\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4310,
        "y": 1440,
        "wires": [
            [
                "b32f014cb3ec752e"
            ]
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "af1e900e0be88b34",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 4140,
        "y": 1440,
        "wires": [
            [
                "7bf73fde5dbbe654"
            ]
        ]
    },
    {
        "id": "aa33ae9640c6a434",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "name": "Store information",
        "func": "var war_chart = msg;\nglobal.set(\"F_CCC.z1.chart\", war_chart,\"file\") || [];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4420,
        "y": 600,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "c26a112b706b6d55",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4410,
        "y": 560,
        "wires": [
            [
                "aa33ae9640c6a434"
            ]
        ]
    },
    {
        "id": "74e2096239928bfc",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Load information",
        "func": "let msg1={};\nmsg1 = global.get(\"F_CCC.z1.chart\",\"file\");\nreturn msg1;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4190,
        "y": 420,
        "wires": [
            [
                "0d58a1e854263ec4"
            ]
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "df2ff07ddeb07106",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 4160,
        "y": 380,
        "wires": [
            [
                "74e2096239928bfc"
            ]
        ]
    },
    {
        "id": "ea3029991749f77b",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP15 - panasonic_heat_pump/main/Heat_Energy_Production",
        "topic": "panasonic_heat_pump/main/Heat_Energy_Production",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 290,
        "y": 1580,
        "wires": [
            [
                "e7d39d4073a87d3c"
            ]
        ]
    },
    {
        "id": "fa2eba3089ca0ef4",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "group": "fb77ab43998a2f18",
        "order": 5,
        "width": 26,
        "height": 7,
        "label": "Energy (W)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "1000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#056647",
            "#d1102b",
            "#0082cd",
            "#ff7f0e",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1090,
        "y": 1640,
        "wires": [
            [
                "ba8181d980146bf5"
            ]
        ]
    },
    {
        "id": "3b552bccda090181",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP40 - panasonic_heat_pump/main/DHW_Energy_Production",
        "topic": "panasonic_heat_pump/main/DHW_Energy_Production",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 310,
        "y": 1680,
        "wires": [
            [
                "14789bda2966231c"
            ]
        ]
    },
    {
        "id": "8a140f3a3a1ff736",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP67 - panasonic_heat_pump/main/Compressor_Current",
        "topic": "panasonic_heat_pump/main/Compressor_Current",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 350,
        "y": 1900,
        "wires": [
            [
                "9ed43df7ef7fa246"
            ]
        ]
    },
    {
        "id": "1cbdb190d6f52cb6",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "group": "fb77ab43998a2f18",
        "order": 7,
        "width": 26,
        "height": 7,
        "label": "Efficiency",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "1500",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1060,
        "y": 2020,
        "wires": [
            [
                "2ec8265263c71358"
            ]
        ]
    },
    {
        "id": "fe8e23b8971b868e",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "COP calculated",
        "links": [
            "306b69356454f3ff",
            "5787c91b303f2538",
            "0f227f10f68c8a90"
        ],
        "x": 300,
        "y": 2060,
        "wires": [
            [
                "f10c2c06bd9d5a5a"
            ]
        ],
        "l": true
    },
    {
        "id": "b1933566192d3b78",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP53 - panasonic_heat_pump/main/Eva_Outlet_Temp",
        "topic": "panasonic_heat_pump/main/Eva_Outlet_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 360,
        "y": 2120,
        "wires": [
            [
                "9534d89253d426ca"
            ]
        ]
    },
    {
        "id": "fae151e3fc249477",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Current [A]",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1900,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "21857afb8366acf2",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Defrost State [-]",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1960,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "039ca8047ee5b833",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Evaporator outlet [°C]",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 2120,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "8e0dc8ab2999f4ec",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1070,
        "y": 1960,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "38b10c117605255d",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Heat | Energy production",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1560,
        "wires": [
            [
                "fa2eba3089ca0ef4"
            ]
        ]
    },
    {
        "id": "53393ad3ce2b9113",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Heat | Energy consumption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1600,
        "wires": [
            [
                "fa2eba3089ca0ef4",
                "b3e1e417d51330e7"
            ]
        ]
    },
    {
        "id": "3a6bb7844523ece7",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "DHW | Energy production",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1680,
        "wires": [
            [
                "fa2eba3089ca0ef4"
            ]
        ]
    },
    {
        "id": "ca8fd698c67b1cfa",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "DHW | Energy consumption",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1740,
        "wires": [
            [
                "fa2eba3089ca0ef4",
                "bbe6832628277539"
            ]
        ]
    },
    {
        "id": "b3e1e417d51330e7",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "Heat | Energy consumption",
        "mode": "link",
        "links": [],
        "x": 1125,
        "y": 1600,
        "wires": []
    },
    {
        "id": "bbe6832628277539",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "DHW | Energy consumption",
        "mode": "link",
        "links": [],
        "x": 1115,
        "y": 1740,
        "wires": []
    },
    {
        "id": "8627726ba882e493",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "links": [
            "9de1bde370b68508"
        ],
        "x": 275,
        "y": 1600,
        "wires": [
            [
                "79ff4d14869086b3"
            ]
        ]
    },
    {
        "id": "4b0bb57d44bd8bb1",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1560,
        "wires": [
            [
                "38b10c117605255d"
            ]
        ]
    },
    {
        "id": "b4d652a4c0313e8a",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1680,
        "wires": [
            [
                "3a6bb7844523ece7"
            ]
        ]
    },
    {
        "id": "990e0858767f91fc",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1740,
        "wires": [
            [
                "ca8fd698c67b1cfa"
            ]
        ]
    },
    {
        "id": "9ed43df7ef7fa246",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1900,
        "wires": [
            [
                "fae151e3fc249477"
            ]
        ]
    },
    {
        "id": "6d77bc12fe8024ee",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1960,
        "wires": [
            [
                "21857afb8366acf2"
            ]
        ]
    },
    {
        "id": "9534d89253d426ca",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 2120,
        "wires": [
            [
                "039ca8047ee5b833"
            ]
        ]
    },
    {
        "id": "79ff4d14869086b3",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1600,
        "wires": [
            [
                "53393ad3ce2b9113"
            ]
        ]
    },
    {
        "id": "9e7985132053da99",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "rtc_on (activate automation)",
        "label": "",
        "tooltip": "Above this delta T, the automation action will be executed",
        "group": "ef3dbc543ae92bec",
        "order": 6,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "automation_on_limit",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "0",
        "max": "+20",
        "step": "0.1",
        "className": "",
        "x": 3680,
        "y": 1440,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "47b72adc26e2025f",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "Trigger action above dT",
        "label": "Trigger action above dT",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 3430,
        "y": 1440,
        "wires": []
    },
    {
        "id": "6a4e29a621172a7e",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "rtc_off (deactivate automation)",
        "label": "",
        "tooltip": "Below this delta T, the automation action will be reverted",
        "group": "ef3dbc543ae92bec",
        "order": 8,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "automation_off_limit",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "2",
        "step": "0.1",
        "className": "",
        "x": 3690,
        "y": 1480,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "449411f64f3ffe0b",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "Revert action below dT",
        "label": "Revert action below dT",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 3420,
        "y": 1480,
        "wires": []
    },
    {
        "id": "4b2cff40b8a3ecc9",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1db6d698669f3827",
        "order": 2,
        "width": 11,
        "height": 1,
        "name": "TOPBAR",
        "label": "<h1>Room Temperature Controle</h>",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5220,
        "y": 780,
        "wires": []
    },
    {
        "id": "7386864c75dbce5c",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "DHW_Target_Temp",
        "mode": "link",
        "links": [
            "32840bc8d04fbb31"
        ],
        "x": 795,
        "y": 120,
        "wires": []
    },
    {
        "id": "3f63919ddd4f0ea7",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "Dash - DHW (SP) link in",
        "links": [
            "550d51c7fe788f9e"
        ],
        "x": 365,
        "y": 100,
        "wires": [
            [
                "158e0bb2b00cd4ba"
            ]
        ]
    },
    {
        "id": "62bb9a3778a8e0c4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "",
        "func": "global.set(\"chart-water-heat\",msg,\"file\")",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "8cea97ace96d4c67",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "",
        "func": "global.set(\"chart-water-dhw\",msg,\"file\")",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "1afae37bbb9eee4f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "",
        "func": "global.set(\"chart-kamertemperatuur\",msg,\"file\")",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "aeca371dc97489c4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "load",
        "func": "let msg1={};\nmsg1 = global.get(\"chart-kamertemperatuur\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 2300,
        "wires": [
            [
                "8cb1aceef81045bd"
            ]
        ]
    },
    {
        "id": "eea147e0b371b347",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "load",
        "func": "let msg1={};\nmsg1 = global.get(\"chart-water-heat\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 2360,
        "wires": [
            [
                "9802bf01ebf45d28"
            ]
        ]
    },
    {
        "id": "f6a75e4b3dd9cf4c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "load",
        "func": "let msg1={};\nmsg1 = global.get(\"chart-water-dhw\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 2440,
        "wires": [
            [
                "9789265573ab4c80"
            ]
        ]
    },
    {
        "id": "12b317db9b7ce136",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "start",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 2340,
        "wires": [
            [
                "aeca371dc97489c4",
                "eea147e0b371b347",
                "f6a75e4b3dd9cf4c"
            ]
        ]
    },
    {
        "id": "65770940f38c7f51",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 3610,
        "y": 280,
        "wires": [
            [
                "b991be16b9662a3e",
                "81e0133d16c51789",
                "0c8eb8257035ca5f",
                "850fb0ccb76b25cf",
                "82a387f8895ef8f6",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "3d3b432c844ba87e",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "ForceDHW out",
        "mode": "link",
        "links": [
            "3e5558127fc3402a"
        ],
        "x": 795,
        "y": 240,
        "wires": []
    },
    {
        "id": "0609b7d54d31dafb",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "",
        "mode": "link",
        "links": [
            "20e2544a8277d8c2"
        ],
        "x": 795,
        "y": 180,
        "wires": []
    },
    {
        "id": "25a5987e8a1aaf9c",
        "type": "bar-chart-data",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "bar-chart DHW COP-12months",
        "x_interval": "months",
        "x_size": "12",
        "unit": "",
        "precision": 2,
        "is_meter_reading": "False",
        "agg_by": "avg",
        "x": 890,
        "y": 3220,
        "wires": [
            [
                "35c9b0fcbdf3c9e0"
            ]
        ]
    },
    {
        "id": "b09d20349841eaed",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "Once per 15minutes",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "trigger",
        "x": 220,
        "y": 3440,
        "wires": [
            [
                "d4198e0e57720e55"
            ]
        ]
    },
    {
        "id": "d4198e0e57720e55",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "Function - bucket 1 + 2 combined",
        "func": "/*\nvar dhw     = global.get(\"COP_DHW_24m\",\"file\");\nvar heat    = global.get(\"COP_HEAT_24m\",\"file\"); \nlet msg1={}, msg2={};\n\nmsg1 = dhw;\nmsg2 = heat;\n\nvar varlabels;\nif (heat === undefined){varlabels = msg1.payload[0].labels;}else{varlabels = msg2.payload[0].labels;}\n\nvar varData1;// dhw\nif (dhw === undefined){varData1 = [0,0,0,0,0,0,0,0,0,0,0,0];}else{varData1 = msg1.payload[0].data[0];}\n\nvar varData2;// heat\nif (heat === undefined){varData2 = [0,0,0,0,0,0,0,0,0,0,0,0];}else{varData2 = msg2.payload[0].data[0];}\n\nvar varSeries1     = \"DHW\"; // dhw\nvar varSeries2     = \"HEAT\"; // heat\n\nvar m={};\n    m.labels    = varlabels;\n    m.series    = [varSeries1, varSeries2];\n    m.data      = [varData1, varData2];\n\n\nreturn {payload:[m]};\n*/\n\n/////////////////////////////\nvar dhw = global.get(\"COP_DHW_24m\", \"file\");\nvar heat = global.get(\"COP_HEAT_24m\", \"file\");\n\nlet varlabels;\nif (heat && heat.payload && heat.payload[0]) {\n    varlabels = heat.payload[0].labels;\n} else if (dhw && dhw.payload && dhw.payload[0]) {\n    varlabels = dhw.payload[0].labels;\n} else {\n    varlabels = [];   // fallback if both missing\n}\n\n// dhw data\nlet varData1 = (dhw && dhw.payload && dhw.payload[0])\n    ? dhw.payload[0].data[0]\n    : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n// heat data\nlet varData2 = (heat && heat.payload && heat.payload[0])\n    ? heat.payload[0].data[0]\n    : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nlet m = {\n    labels: varlabels,\n    series: [\"DHW\", \"HEAT\"],\n    data: [varData1, varData2]\n};\n\nreturn { payload: [m] };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 3440,
        "wires": [
            [
                "eee624aa045ae22a"
            ]
        ],
        "outputLabels": [
            "graaddagen_calc"
        ]
    },
    {
        "id": "8859608d9186c4e4",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "Bucket 1 + 2  combined to chart",
        "info": "",
        "x": 230,
        "y": 3400,
        "wires": []
    },
    {
        "id": "278b50b68f01198e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "Load bar-chart data",
        "func": "var heat = global.get(\"COP_HEAT_24m\",\"file\");\nvar dhw = global.get(\"COP_DHW_24m\",\"file\");\n\n// note: if you need to correct the COP monthly chart because it does not show values. Copy/paste the content of \"COP_DHW_24m\" or \"COP_HEAT_24m\" in the lines below. Line 8 or 9. \n// Uncomment the corresponding line 8 or 9. \n// adjust the incorrect value and press [Done] > [Deploy] > [Restore after boot]\n\n//dhw = {\"payload\":[{\"labels\":[\"2022-01\",\"2022-02\",\"2022-03\",\"2022-04\",\"2022-05\",\"2022-06\",\"2022-07\",\"2022-08\",\"2022-09\",\"2022-10\",\"2022-11\",\"2022-12\"],\"series\":[\"DHW\"],\"data\":[[0,0,0,0,3.84,3.05,1.13,3.65,3.68,3.89,3.29,2.79]]}],\"topic\":\"DHW\",\"_msgid\":\"46ca0b6da9dae345\",\"_event\":\"node:5787c91b303f2538\",\"bar_keys\":[\"202201\",\"202202\",\"202203\",\"202204\",\"202205\",\"202206\",\"202207\",\"202208\",\"202209\",\"202210\",\"202211\",\"202212\"],\"data_counter\":[{\"202212\":4814}],\"topics\":[\"DHW\"],\"DHW_last\":0,\"data_min\":0,\"data_max\":3.89,\"data_sum\":25.32,\"settings\":{\"unit\":\"\",\"x_size\":\"12\",\"precision\":2,\"is_meter_reading\":false,\"agg_by\":\"avg\"}};\n//heat = {\"payload\":[{\"labels\":[\"2022-01\",\"2022-02\",\"2022-03\",\"2022-04\",\"2022-05\",\"2022-06\",\"2022-07\",\"2022-08\",\"2022-09\",\"2022-10\",\"2022-11\",\"2022-12\"],\"series\":[\"HEAT\"],\"data\":[[0,0,0,0,4.86,6.01,0.64,0,6.57,7.43,6.32,4.96]]}],\"topic\":\"HEAT\",\"_msgid\":\"a3d2b37df2f169e3\",\"_event\":\"node:306b69356454f3ff\",\"bar_keys\":[\"202201\",\"202202\",\"202203\",\"202204\",\"202205\",\"202206\",\"202207\",\"202208\",\"202209\",\"202210\",\"202211\",\"202212\"],\"data_counter\":[{\"202212\":85520}],\"topics\":[\"HEAT\"],\"HEAT_last\":0,\"data_min\":0,\"data_max\":7.43,\"data_sum\":36.79,\"settings\":{\"unit\":\"\",\"x_size\":\"12\",\"precision\":\"2\",\"is_meter_reading\":false,\"agg_by\":\"avg\"}}\n\nvar msg1 = heat;\nvar msg2 = dhw;\n\n\n\nif (heat === undefined)     {\n    if (dhw === undefined)  {\n        return [null,null];\n    }\n    \n    return [null,msg2];\n}\n\nelse    {\n    if (dhw === undefined)  {\n        return [msg1,null];\n    }\n    \n    return [msg1,msg2];\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 3020,
        "wires": [
            [
                "f5f7d3b912113a33"
            ],
            [
                "25a5987e8a1aaf9c"
            ]
        ],
        "outputLabels": [
            "COP_HEAT_24m",
            "COP_DHW_24m"
        ]
    },
    {
        "id": "93a7de2857166209",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "Restore after boot",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "trigger",
        "x": 190,
        "y": 3020,
        "wires": [
            [
                "278b50b68f01198e"
            ]
        ]
    },
    {
        "id": "d63cf14c266a32c5",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 170,
        "y": 3500,
        "wires": [
            []
        ]
    },
    {
        "id": "d5724fa53412c7c1",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "31 Days information",
        "info": "",
        "x": 170,
        "y": 2980,
        "wires": []
    },
    {
        "id": "eee624aa045ae22a",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "2c380c0bbcfb5eb1",
        "name": "COP DHW + COP HEAT (12m)",
        "group": "fb77ab43998a2f18",
        "order": 9,
        "width": 26,
        "height": 7,
        "label": "Monthly COP",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#007585",
            "#de425b",
            "#f59b56",
            "#fff18f",
            "#89bf77",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1250,
        "y": 3440,
        "wires": [
            []
        ]
    },
    {
        "id": "3c6cbf1cc644de40",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "clear",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "clear",
        "payloadType": "str",
        "x": 350,
        "y": 3500,
        "wires": [
            []
        ]
    },
    {
        "id": "ad2577846265e4ee",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "links": [
            "306b69356454f3ff"
        ],
        "x": 105,
        "y": 3120,
        "wires": [
            [
                "c28ac0a0c107c5e3"
            ]
        ]
    },
    {
        "id": "c302223665944545",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "links": [
            "5787c91b303f2538"
        ],
        "x": 105,
        "y": 3220,
        "wires": [
            [
                "4dc4c11e169604ca"
            ]
        ]
    },
    {
        "id": "9a77a77bdc585373",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 3120,
        "wires": [
            [
                "fc86551753d1a7c1"
            ]
        ]
    },
    {
        "id": "721b7d606f558c73",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 3220,
        "wires": [
            [
                "3b28d9bcf7da39c1"
            ]
        ]
    },
    {
        "id": "35c9b0fcbdf3c9e0",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "2114aed06fe6d5aa",
        "name": "Store information to COP_DHW_24m",
        "func": "var myArray210 = msg;\nglobal.set(\"COP_DHW_24m\", myArray210,\"file\");\n//return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 3220,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "47a9e516229e0256",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "e1f45532e4338e4a",
        "name": "Store information to COP_HEAT_24m",
        "func": "var myArray4 = msg;\nglobal.set(\"COP_HEAT_24m\", myArray4,\"file\");\n//return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 3120,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "7e69bda9aa493902",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",
        "info": "",
        "x": 670,
        "y": 3320,
        "wires": []
    },
    {
        "id": "4dc4c11e169604ca",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "DHW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 3220,
        "wires": [
            [
                "721b7d606f558c73"
            ]
        ]
    },
    {
        "id": "c28ac0a0c107c5e3",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "HEAT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 3120,
        "wires": [
            [
                "9a77a77bdc585373"
            ]
        ]
    },
    {
        "id": "f5f7d3b912113a33",
        "type": "bar-chart-data",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": "bar-chart HEAT COP-12months",
        "x_interval": "months",
        "x_size": "12",
        "unit": "",
        "precision": "2",
        "is_meter_reading": "False",
        "agg_by": "avg",
        "x": 890,
        "y": 3120,
        "wires": [
            [
                "47a9e516229e0256"
            ]
        ]
    },
    {
        "id": "43403f14c1a863a4",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "bf4af523ba16d457",
        "name": "Line - Water",
        "order": 2,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Operating mode</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 790,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "592f552754e017f5",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "bf4af523ba16d457",
        "name": "Line - Water",
        "order": 13,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 590,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "05f3b66c7b91e0c6",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "623f5d089867807d",
        "name": "Line",
        "order": 16,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 830,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "f38de05b84881512",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "e3cc96332cd59f07",
        "name": "Line",
        "order": 2,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 850,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "5429970cdd04e922",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "b021ff109e8a2288",
        "order": 6,
        "width": 1,
        "height": 1,
        "name": "spacer 6x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4230,
        "y": 220,
        "wires": []
    },
    {
        "id": "5191d46e46766a6b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "623f5d089867807d",
        "name": "Line",
        "order": 2,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Zone 2</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4330,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "6cce5b6bd4157c5b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "fb77ab43998a2f18",
        "name": "Line",
        "order": 4,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\";\n\t>\n\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1070,
        "y": 2200,
        "wires": [
            []
        ]
    },
    {
        "id": "dc1b09eb3278501e",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "fb77ab43998a2f18",
        "name": "Line",
        "order": 6,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\";\n\t>\n\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1070,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "23aa1aeed6d15e49",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "fb77ab43998a2f18",
        "name": "Line",
        "order": 8,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\";\n\t>\n\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1070,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "f9bad51c9301e2d7",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "trigger",
        "x": 180,
        "y": 1640,
        "wires": [
            [
                "bda2df97c3dfd6ad",
                "9d4206dc389ad732"
            ]
        ]
    },
    {
        "id": "bda2df97c3dfd6ad",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "LoadOnBoot",
        "func": "var msg1={}\nmsg1 = flow.get(\"chart_energy\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1640,
        "wires": [
            [
                "fa2eba3089ca0ef4"
            ]
        ]
    },
    {
        "id": "ba8181d980146bf5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "func": "var chart_data = msg;\nflow.set('chart_energy', chart_data, \"file\")",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "2ec8265263c71358",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "func": "var chart_data = msg;\nflow.set('chart_efficiency', chart_data, \"file\")",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "9d4206dc389ad732",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "LoadOnBoot",
        "func": "var msg1={}\nmsg1 = flow.get(\"chart_efficiency\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 2020,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "17c5ba9bb0b58a11",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Runtime",
        "func": "// compressor runnint time\nvar start = global.get(\"compressor_start\", \"file\");\nlet msg1 = {};\n\nif (msg.payload > 0) {\n    if (start !== undefined && start != null) {\n        var current_time = new Date().getTime();\n        var TimeElapsed = ((current_time - start) / 1000 / 60); // minutes\n        msg1.payload = TimeElapsed;\n        msg1.payload = Number(msg1.payload).toFixed(0);\n        msg1.payload = parseFloat(msg1.payload);\n        global.set(\"compressor_runtime\", msg1.payload, \"file\");\n        global.set(\"compressor_last_runtime\", msg1.payload, \"file\"); //remember last runtime\n        return msg1;                                    // Value of time elapsed\n\n    }\n    else {\n        start = new Date().getTime();\n        global.set(\"compressor_start\", start, \"file\");\n        return null;\n\n    }\n}\nelse {\n    global.set(\"compressor_start\", undefined, \"file\");\n    global.set(\"compressor_runtime\", 0, \"file\");\n    return null;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 940,
        "wires": [
            [
                "49a94006dd1947ac"
            ]
        ]
    },
    {
        "id": "49a94006dd1947ac",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 800,
        "y": 940,
        "wires": [
            [
                "79dc18dd1cca1e73",
                "b65cef840ae30edb"
            ]
        ]
    },
    {
        "id": "f2daac0935cc9d81",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "war_wt3",
        "label": "",
        "tooltip": "Range 20 / 60",
        "group": "9b8ec8b1b9f66309",
        "order": 15,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z1.wt3",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 3600,
        "y": 440,
        "wires": [
            [
                "0ad263e5f3bf4fe9",
                "850fb0ccb76b25cf",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "4950af3d6534aa47",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "war_ot3",
        "label": "",
        "tooltip": "Range -20 / 15",
        "group": "9b8ec8b1b9f66309",
        "order": 14,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z1.ot3",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 3440,
        "y": 440,
        "wires": [
            [
                "0ad263e5f3bf4fe9",
                "850fb0ccb76b25cf",
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "07c9121f1be83415",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 7,
        "width": 2,
        "height": 1,
        "name": "warm spacer 2x1",
        "label": "Warm",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4520,
        "y": 180,
        "wires": []
    },
    {
        "id": "a00885bfd0ed77a7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 10,
        "width": 2,
        "height": 1,
        "name": "Inter spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4510,
        "y": 220,
        "wires": []
    },
    {
        "id": "fa5d110ee0083845",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "name": "Line - Temperature profile",
        "order": 3,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Temperature profile</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4590,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "f76c271c4a48a3e7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 13,
        "width": 2,
        "height": 1,
        "name": "Cold 2x1",
        "label": "Cold",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4490,
        "y": 260,
        "wires": []
    },
    {
        "id": "5b9847446fee98a9",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "Weather spacer 2x1",
        "label": "Weather",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4540,
        "y": 400,
        "wires": []
    },
    {
        "id": "02bef4c27cae892f",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "name": "Line - Setup ",
        "order": 16,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Result</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4530,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "0366fd634f110ba4",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 29,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4370,
        "y": 400,
        "wires": []
    },
    {
        "id": "be5c89aff3235cfd",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1db6d698669f3827",
        "order": 1,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5230,
        "y": 920,
        "wires": []
    },
    {
        "id": "3cf1a2dd31dacbca",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "name": "Line - Setup ",
        "order": 4,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Setup</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3450,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "ca0d9f423e83d3e2",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "name": "Line - RTC results",
        "order": 26,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>RTC results</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3430,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "db206585adea91d8",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "group": "9b8ec8b1b9f66309",
        "name": "Line - Setup ",
        "order": 26,
        "width": 16,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4420,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "5bada38f261d4a06",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "Check operation mode",
        "func": "var TOP20_ThreeWay_Valve_State      = global.get('TOP20_ThreeWay_Valve_State');\nvar TOP0_Heatpump_State             = global.get('TOP0_Heatpump_State',\"file\");\n\nlet msg1={}; // to HEAT status\nlet msg2={}; // to DHW status\nlet msg3={}; // to COOL status\n\nif (TOP20_ThreeWay_Valve_State == 1) {          // dhw}\n    msg1.payload = 'OFF';\n    msg1.color = 'grey';\n    msg2.payload = 'ON';\n    msg2.color = '';\n    msg3.payload = 'OFF';\n    msg3.color = 'grey';\n    if (TOP0_Heatpump_State == 0) {msg2.color = 'grey'}\n    return ([msg1,msg2,msg3])\n}\n\nvar TOP4_Operating_Mode_State       = global.get('TOP4_Operating_Mode_State',\"file\");\n\n\n\nif (TOP20_ThreeWay_Valve_State == 0) {          // room}\n\n    // HEAT /////////////////\n    if (TOP4_Operating_Mode_State == 0 || TOP4_Operating_Mode_State == 2 || TOP4_Operating_Mode_State == 3 || TOP4_Operating_Mode_State == 4 || TOP4_Operating_Mode_State == 6)     {\n            \n        msg1.payload = 'ON';\n        msg1.color = '';\n        msg2.payload = 'OFF';\n        msg2.color = 'grey';\n        msg3.payload = 'OFF';\n        msg3.color = 'grey';\n        if (TOP0_Heatpump_State == 0) {msg1.color = 'grey'}\n        return ([msg1,msg2,msg3])\n    }\n    \n    // COOL /////////////////\n    if (TOP4_Operating_Mode_State == 1 || TOP4_Operating_Mode_State == 5 || TOP4_Operating_Mode_State == 7 || TOP4_Operating_Mode_State == 8)     {\n        msg1.payload = 'OFF';\n        msg1.color = 'grey';\n        msg2.payload = 'OFF';\n        msg2.color = 'grey';\n        msg3.payload = 'ON';\n        msg3.color = '';\n            \n        if (TOP0_Heatpump_State == 0) {msg3.color = 'grey'}\n        return ([msg1,msg2,msg3])\n    }    \n\n}\n\n\n\n// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n// <font color= {{msg.color}} > {{msg.payload}}  </font>",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1280,
        "wires": [
            [
                "719e11414721599e"
            ],
            [
                "872ffae146541a5a"
            ],
            [
                "5dfb70935ea409db"
            ]
        ],
        "outputLabels": [
            "HEAT status",
            "DHW status",
            "COOL status"
        ]
    },
    {
        "id": "2347fd7ebf82b618",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "link in 1",
        "links": [
            "a3180920b08e8108"
        ],
        "x": 275,
        "y": 1740,
        "wires": [
            [
                "990e0858767f91fc"
            ]
        ]
    },
    {
        "id": "c3c748a1b5f04d42",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC z1 gui changes to function trigger",
        "mode": "link",
        "links": [
            "c3a9e17b02222cee"
        ],
        "x": 4845,
        "y": 900,
        "wires": []
    },
    {
        "id": "a7ed974cef55c457",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "WAR gui changes to function trigger Z1",
        "mode": "link",
        "links": [
            "ff40b3d6f1b996fe"
        ],
        "x": 4105,
        "y": 180,
        "wires": []
    },
    {
        "id": "7d582005c7d66f28",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 4000,
        "y": 1220,
        "wires": [
            [
                "c3c748a1b5f04d42",
                "aae82d0c01404d51",
                "38a2e1df7e0bdb2a",
                "4ffcf5c7dbf32067"
            ]
        ]
    },
    {
        "id": "850fb0ccb76b25cf",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "",
        "op1": "",
        "op2": "trigger",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 3840,
        "y": 200,
        "wires": [
            [
                "a7ed974cef55c457"
            ]
        ]
    },
    {
        "id": "6acc923b4ebb49e4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "set.F_SS.total_duration",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(\"F_SS.total_duration\",msg.payload*60,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4850,
        "y": 2020,
        "wires": [
            [
                "b1118094796c2de3"
            ]
        ]
    },
    {
        "id": "b1118094796c2de3",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "F_SS GUI changes",
        "mode": "link",
        "links": [
            "4c81e32b9d30b212"
        ],
        "x": 5045,
        "y": 2020,
        "wires": []
    },
    {
        "id": "6d347eebf409d174",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "runtime",
        "label": "",
        "tooltip": "Default 15 (range 5min/9hours)",
        "place": "Select option",
        "group": "c2a0123d2e2c91f0",
        "order": 6,
        "width": 2,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "5 mins",
                "value": 5,
                "type": "num"
            },
            {
                "label": "10 mins",
                "value": 10,
                "type": "num"
            },
            {
                "label": "15 mins",
                "value": 15,
                "type": "num"
            },
            {
                "label": "20 mins",
                "value": 20,
                "type": "num"
            },
            {
                "label": "25 mins",
                "value": 25,
                "type": "num"
            },
            {
                "label": "30 mins",
                "value": 30,
                "type": "num"
            },
            {
                "label": "45 mins",
                "value": 45,
                "type": "num"
            },
            {
                "label": "1 hour",
                "value": 60,
                "type": "num"
            },
            {
                "label": "1 h 15 mins",
                "value": 75,
                "type": "num"
            },
            {
                "label": "1 h 30 mins",
                "value": 90,
                "type": "num"
            },
            {
                "label": "1 h 45 mins",
                "value": 105,
                "type": "num"
            },
            {
                "label": "2 hours",
                "value": 120,
                "type": "num"
            },
            {
                "label": "3 hours",
                "value": 180,
                "type": "num"
            },
            {
                "label": "4 hours",
                "value": 240,
                "type": "num"
            },
            {
                "label": "5 hours",
                "value": 300,
                "type": "num"
            },
            {
                "label": "6 hours",
                "value": 360,
                "type": "num"
            },
            {
                "label": "7 hours",
                "value": 420,
                "type": "num"
            },
            {
                "label": "8 hours",
                "value": 480,
                "type": "num"
            },
            {
                "label": "9 hours",
                "value": 540,
                "type": "num"
            },
            {
                "label": "10 hours",
                "value": 600,
                "type": "num"
            },
            {
                "label": "12 hours",
                "value": 720,
                "type": "num"
            },
            {
                "label": "18 hours",
                "value": 1080,
                "type": "num"
            },
            {
                "label": "24 hours",
                "value": 1440,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 4380,
        "y": 2020,
        "wires": [
            [
                "fc318adaf0d65e13",
                "6acc923b4ebb49e4"
            ]
        ]
    },
    {
        "id": "3b7535829c2cdf6b",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "upperlimit_correction",
        "label": "Upperlimit correction",
        "tooltip": "Default 0 (range 0/10) When this number increases, the setpoint is allowed to increase and extend runs",
        "group": "e18bf5825c47a08f",
        "order": 14,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": true,
        "topic": "upperlimit_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": 0,
        "max": 10,
        "step": 1,
        "className": "",
        "x": 4280,
        "y": 2920,
        "wires": [
            [
                "cc3e8e6c49910b24"
            ]
        ]
    },
    {
        "id": "cc3e8e6c49910b24",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 4480,
        "y": 2940,
        "wires": [
            [
                "98a53971ecd61da7"
            ]
        ]
    },
    {
        "id": "98a53971ecd61da7",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "set.F_SS.upperlimit_correction",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(\"F_SS.\" + msg.topic,msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4730,
        "y": 2940,
        "wires": [
            [
                "b1118094796c2de3"
            ]
        ]
    },
    {
        "id": "6efc9729afea79a2",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC on/off POWER",
        "label": "Action: Turn off/on power",
        "tooltip": "Enables or disables the heat function based on below set deltas",
        "group": "ef3dbc543ae92bec",
        "order": 11,
        "width": 7,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "automation_power_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 3120,
        "y": 1540,
        "wires": [
            [
                "2d1a9fcd35c50c2a"
            ]
        ]
    },
    {
        "id": "d1aaf53ae9beb422",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "order": 12,
        "width": 6,
        "height": 1,
        "name": "Current runtime",
        "label": "Current/last runtime",
        "format": "{{msg.payload}} Min",
        "layout": "row-spread",
        "className": "",
        "x": 4400,
        "y": 2140,
        "wires": []
    },
    {
        "id": "b65cef840ae30edb",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Compressor runtime",
        "mode": "link",
        "links": [
            "e33c35973b22ff0b"
        ],
        "x": 1045,
        "y": 980,
        "wires": []
    },
    {
        "id": "e33c35973b22ff0b",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "link in 5",
        "links": [
            "b65cef840ae30edb"
        ],
        "x": 3985,
        "y": 2140,
        "wires": [
            [
                "d1aaf53ae9beb422"
            ]
        ]
    },
    {
        "id": "2fdb58826d7b6432",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "Runtime",
        "label": "Runtime",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 4140,
        "y": 2020,
        "wires": []
    },
    {
        "id": "e4f68946c7b21da7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "order": 11,
        "width": 6,
        "height": 1,
        "name": "Compressor",
        "label": "Frequency",
        "format": "{{msg.payload}} Hz",
        "layout": "row-spread",
        "className": "",
        "x": 4390,
        "y": 2100,
        "wires": []
    },
    {
        "id": "6fc2967e18fedff3",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "name": "Line setup",
        "order": 4,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Setup</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4150,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "a8db39ee44e93a18",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "name": "Line compressor",
        "order": 10,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Compressor</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4150,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "cdf7664223f16687",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "order": 19,
        "width": 6,
        "height": 1,
        "name": "SS - Current correction (SS)",
        "label": "Current correction (SS)",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4440,
        "y": 2180,
        "wires": []
    },
    {
        "id": "23b6190afc840bdc",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "name": "Line Result",
        "order": 13,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Result</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4150,
        "y": 2160,
        "wires": [
            []
        ]
    },
    {
        "id": "f3ab44f6bb3c013a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "link in 7",
        "links": [
            "c57a81d1dee5b8a9"
        ],
        "x": 3985,
        "y": 2100,
        "wires": [
            [
                "e4f68946c7b21da7"
            ]
        ]
    },
    {
        "id": "881c9c83727201e4",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "1179fa790d2d89ca",
        "order": 8,
        "width": 2,
        "height": 1,
        "name": "SP (WAR) - Home HEAT Functions tab",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3870,
        "y": 600,
        "wires": []
    },
    {
        "id": "946190a858bafe3d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "Color",
        "func": "var war_state          = global.get('F_CCC.z1.state',\"file\");\n    if (war_state === undefined)    {return null;}\n\nlet msg1={};\n\n\n    if (war_state == 0) \n        {\n            msg1.color = \"gray\";\n        }\n\n\n    if (war_state == 1) \n        {\n            msg1.color = \"\";\n        }\nmsg1.payload = msg.payload;\n\nreturn [msg1];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3630,
        "y": 600,
        "wires": [
            [
                "881c9c83727201e4",
                "f4c3147c72aeb7b5"
            ]
        ]
    },
    {
        "id": "26028dafb645f0a9",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "name": "Line - Advanced setup",
        "order": 25,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Advanced</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4480,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "78b397adf806a09f",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 27,
        "width": 2,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4270,
        "y": 80,
        "wires": []
    },
    {
        "id": "2994451c952d77ae",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 31,
        "width": 1,
        "height": 1,
        "name": "----- spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4660,
        "y": 600,
        "wires": []
    },
    {
        "id": "47e76e01a5cfb304",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Color",
        "func": "var F_SS_state          = global.get('F_SS.state',\"file\");\n    if (F_SS_state === undefined)    {return null;}\n\nlet msg1={};\n\n\n    if (F_SS_state == 0) \n        {\n            msg1.color = \"gray\";\n        }\n\n\n    if (F_SS_state == 1) \n        {\n            msg1.color = \"\";\n        }\nif (msg.payload > 0){msg.payload = '+' + msg.payload;}\n\nmsg1.payload = msg.payload;\n\nreturn [msg1];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3970,
        "y": 2220,
        "wires": [
            [
                "1b40f688e5fbc5dd",
                "fbb9ab3b17c06559",
                "3b21b99348cb6165"
            ]
        ]
    },
    {
        "id": "0d3da6a8d7fa38ee",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Color",
        "func": "var F_RTC_state = global.get('F_RTC.z1.state',\"file\");\n\nlet msg1={};\n\n\nif (F_RTC_state == 0) \n        {\n            msg1.color = \"gray\";\n        }\n\n\nif (F_RTC_state == 1) \n        {\n            msg1.color = \"\";\n        }\nif (msg.payload > 0){msg.payload = '+' + msg.payload;}\nmsg1.payload = msg.payload;\n\nreturn [msg1];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3450,
        "y": 1640,
        "wires": [
            [
                "45643e4e39e1d248"
            ]
        ]
    },
    {
        "id": "b7b3c4dcda507ecb",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "9b8ec8b1b9f66309",
        "order": 19,
        "width": 3,
        "height": 1,
        "name": "Outside temp.",
        "label": "Actual outside",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3840,
        "y": 340,
        "wires": []
    },
    {
        "id": "05065bbd47aa9dd3",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "trigger Loaded WAR profile from panasonic Z1",
        "links": [
            "76e65f54ff08aa50",
            "b46cfcf8ce6d8f91"
        ],
        "x": 3045,
        "y": 480,
        "wires": [
            [
                "ecf47b4f156ae616"
            ]
        ]
    },
    {
        "id": "4faba89ea8ec838c",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "1 Trigger / 5 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 3200,
        "y": 800,
        "wires": [
            [
                "48ac4170551d07e2"
            ]
        ]
    },
    {
        "id": "6c95ed35d3dcaea3",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "function 6",
        "func": "let msg1={};\nlet msg2={};\nlet msg3={};\n\nvar Tb0 =   global.get(\"TOP14_Outside_Temp\",\"file\");\n    if (Tb0 === undefined)  {return null;}\nvar Tsp = global.get('F_CCC.z1.setpoint',\"file\");\n    if (Tsp === undefined)  {return null;}  \nvar Tb1 =   global.get(\"T_outside_custom\",\"file\");\n\nmsg1.payload    = Tb0;\nmsg1.payload    = Number(msg1.payload).toFixed(1);\nmsg1.payload    = parseFloat(msg1.payload);\nmsg1.topic      = 'T outside';\n\nmsg2.payload    = Tsp;\nmsg2.payload    = Number(msg2.payload).toFixed(1);\nmsg2.payload    = parseFloat(msg2.payload);\nmsg2.topic      = 'CCC Setpoint';\n\nmsg3.payload    = Tb1;\nmsg3.payload    = Number(msg3.payload).toFixed(1);\nmsg3.payload    = parseFloat(msg3.payload);\nmsg3.topic      = 'T outside custom';\n\n\nif (Tb1 === undefined)  \n    {\n        return [[msg1,msg2,null]];\n    }\nelse \n    {\n        return [[msg1,msg2,msg3]];\n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3920,
        "y": 520,
        "wires": [
            [
                "0d58a1e854263ec4"
            ]
        ]
    },
    {
        "id": "1fc3414887db6c0f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Create table in context",
        "func": "var stored_value = flow.get(\"sctab\",\"file\");\n\nif (msg.payload == \"RESET\")\n    {\n        flow.set(\"sctab\",undefined,\"file\"); \n        return null;\n    }\n\nelse if (stored_value !== undefined) \n    {\n        let sctab = [];\n        sctab = stored_value; \n        msg.payload = [...sctab];\n        return msg;\n    }\n    \nelse\n    {\n        let sctab = [];\n        flow.set(\"sctab\", sctab,\"file\");        \n    }\n    \n    \n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 2240,
        "wires": [
            [
                "ccf20ebdd2bc2ad5"
            ]
        ]
    },
    {
        "id": "e649dffb7b88341d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "group": "16ec453c8cb345ac",
        "order": 2,
        "width": 5,
        "height": 1,
        "name": "Flow version",
        "label": "Flow version",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1970,
        "y": 2100,
        "wires": []
    },
    {
        "id": "87de9f606819ee7c",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Clear",
        "group": "16ec453c8cb345ac",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Clear",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "clear",
        "payload": "RESET",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1370,
        "y": 2240,
        "wires": [
            [
                "1fc3414887db6c0f",
                "1fa1afeeb1c84d32",
                "97186cf285d61502"
            ]
        ]
    },
    {
        "id": "031e62b0bf3df7d7",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Input LOGS",
        "links": [
            "0380b395668eee8e",
            "0a5b5d3209c8063f",
            "0cf4bc856d3a17df",
            "0efd6826e2004381",
            "1a8bf49ae0badf5a",
            "1b0aafd65d5593dd",
            "246757b0d4390b0d",
            "2989d5851e2457ae",
            "2997cfbec5081574",
            "2a72a0a50c226d0f",
            "34cc66e23b5eec55",
            "40abfbbe563b32ac",
            "4a4a891dece731a1",
            "4c70cc2db4654795",
            "4e1fa036d5ada897",
            "53dba3f23c3b38f0",
            "5d8b7981975b516e",
            "5f7b921ab9a4ce7c",
            "842e7cc6853ea3c8",
            "84f7cbc2cc8c135d",
            "8e16d1ef3e972c95",
            "8ed91c4260d9b758",
            "9815e18a26e4cd85",
            "9a7dda15052b4034",
            "9e1b71b301e9e79d",
            "a2c6183556ca72d1",
            "a4c25442b9ae52a6",
            "acea208050889a80",
            "c1c79e431d237e73",
            "c4dd85e3e2a5dff4",
            "c77c4767a9dd84f4",
            "c8b5382d8d981e31",
            "c9df0ea076346fde",
            "ca0190e54c9749cb",
            "ce0115cd2e7f2ac7",
            "d076ca8f3d1efe81",
            "dc99be6d3a53311d",
            "e0217508a82c4d43",
            "e1119d6b8e83a3a5",
            "e7e7a120cf9e9001",
            "f0b20c8165a68430",
            "f41ec824afb63153",
            "5f5ee90163d11747",
            "e35e41f116eee384",
            "db1fb98ca4fdcc25",
            "de7c5c2916599040",
            "b7556729d886d04c"
        ],
        "x": 1350,
        "y": 2380,
        "wires": [
            [
                "861b9f982a76f569"
            ]
        ],
        "l": true
    },
    {
        "id": "22443324686e908d",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "System start",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "SYSTEM",
        "payload": "Start---------------------------------------------------------------",
        "payloadType": "str",
        "x": 1350,
        "y": 2280,
        "wires": [
            [
                "6966950676b3438b",
                "1d13fdc79740ec03"
            ]
        ]
    },
    {
        "id": "6966950676b3438b",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "ToLogs",
        "mode": "link",
        "links": [],
        "x": 1475,
        "y": 2320,
        "wires": []
    },
    {
        "id": "46d0a8b4fabd20c4",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "New day log line",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": true,
        "onceDelay": "0",
        "topic": "",
        "payload": "------------------------------------------------------------------------------------------------",
        "payloadType": "str",
        "x": 2430,
        "y": 2440,
        "wires": [
            [
                "9fb2ab0ff0488d63"
            ]
        ]
    },
    {
        "id": "29a9b4d9e823126c",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "topic": "panasonic_heat_pump/LWT",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1380,
        "y": 2760,
        "wires": [
            [
                "9ab36aee321695b7"
            ]
        ]
    },
    {
        "id": "9ab36aee321695b7",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1670,
        "y": 2760,
        "wires": [
            [
                "56bc942b17cf740c",
                "b9785129f166494d"
            ]
        ]
    },
    {
        "id": "56bc942b17cf740c",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "topic",
                "pt": "msg",
                "from": "panasonic_heat_pump/LWT",
                "fromt": "str",
                "to": "SYSTEM - HEISHAMON Connection",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1850,
        "y": 2740,
        "wires": [
            [
                "7ec2785759270a3f"
            ]
        ]
    },
    {
        "id": "70d422652df2468e",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Heishamon connection status",
        "info": "",
        "x": 1390,
        "y": 2720,
        "wires": []
    },
    {
        "id": "647564ca1e204b5f",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "TOP76 - panasonic_heat_pump/main/Heating_Mode",
        "topic": "panasonic_heat_pump/main/Heating_Mode",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1450,
        "y": 2820,
        "wires": [
            [
                "6215a77a119228d1",
                "f18205dcad572d9c"
            ]
        ]
    },
    {
        "id": "6215a77a119228d1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "set.TOP76_Heating_Mode",
        "func": "//Only check Heating_Mode at startup and display in log (filter will block same messages)\nlet msg1={};\n\nvar TOP76_Heating_Mode = global.get(\"TOP76_Heating_Mode\",\"file\");\n\nif (msg.payload == 0)\n    {\n        msg1.payload = \"Heatpump is Compensation Curve mode\";\n        msg1.topic = \"SYSTEM\";\n        if (TOP76_Heating_Mode != 0)\n            {\n                global.set(\"TOP76_Heating_Mode\",0,\"file\");\n                let msg2={};\n                msg2.payload = 'check_heating_mode';\n                return [msg1,msg2]\n            }\n        return msg1;\n    }\n\nelse if (msg.payload == 1) \n    {\n        msg1.payload = \"Heatpump is in DIRECT mode\";\n        msg1.topic = \"SYSTEM\";\n        if (TOP76_Heating_Mode != 1)\n                {\n                    global.set(\"TOP76_Heating_Mode\",1,\"file\");\n                    let msg2={};\n                    msg2.payload = 'check_heating_mode';\n                    return [msg1,msg2]\n                }\n        return [msg1,null];\n    }\nelse\n    {\n        return null\n    }",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1800,
        "y": 2820,
        "wires": [
            [
                "2cb940cabdae70e5"
            ],
            [
                "a7d4b11b9c045f95"
            ]
        ],
        "outputLabels": [
            "log",
            "check"
        ]
    },
    {
        "id": "a2c6183556ca72d1",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "toLog",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 2165,
        "y": 2820,
        "wires": []
    },
    {
        "id": "2dc5c2ac3212179c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Setup test",
        "func": "let msg1={};\nmsg1.payload = \"Testing...\"\n\nflow.set(\"persistency_test\", msg1.payload, \"file\");\n\nreturn msg1;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 2680,
        "wires": [
            [
                "997453c0771acfc3"
            ]
        ]
    },
    {
        "id": "9a7dda15052b4034",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1925,
        "y": 2680,
        "wires": []
    },
    {
        "id": "82deff483aabb062",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "SYSTEM",
        "payload": "Persistence",
        "payloadType": "str",
        "x": 1380,
        "y": 2680,
        "wires": [
            [
                "2dc5c2ac3212179c"
            ]
        ]
    },
    {
        "id": "8c9a955c41e3e669",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Persistent storage check",
        "info": "",
        "x": 1370,
        "y": 2640,
        "wires": []
    },
    {
        "id": "ccf20ebdd2bc2ad5",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "group": "16ec453c8cb345ac",
        "name": "Log to dashboard",
        "order": 5,
        "width": 24,
        "height": 16,
        "format": "<div ng-repeat=\"line in msg.payload track by $index\">\n    <div ng-bind-html=\"line\"></div>\n</div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2930,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "9fb2ab0ff0488d63",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Add word to scrolling table",
        "func": "let pay = msg.payload;\n\n// Read scrolling table from context\nlet sctab = flow.get('sctab',\"file\");\n\nif (sctab === undefined || pay === undefined)\n    {\n        return null;\n    }\nelse if (msg.topic==\"populate\")\n    {\n        msg.payload = [...sctab];\n        \n        return msg;\n    }\n\nelse\n    {\n        // Modify scrolling table by adding msg.payload as first element\n        let size = sctab.unshift(pay);\n         \n        // Remove last element from scrolling table\n        if (size >900) sctab.pop();\n         \n        // Update context for scrolling text\n        flow.set('sctab',sctab,\"file\");\n         \n        // Shalow copy updated scrolling table to msg.payload\n        msg.payload = [...sctab];\n         \n        return msg;\n    }",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2680,
        "y": 2380,
        "wires": [
            [
                "ccf20ebdd2bc2ad5"
            ]
        ]
    },
    {
        "id": "ae6175191a94d7ec",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "commands/#",
        "topic": "panasonic_heat_pump/commands/#",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1350,
        "y": 2440,
        "wires": [
            [
                "49edcd3fcf15db5c",
                "12df328367013dd2"
            ]
        ]
    },
    {
        "id": "5e4c3c30025c30ee",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "func": "var DateTime = msg.time;\nvar Source = msg.topic;\nvar Value = msg.payload;\nlet msg1 = {};\nmsg1.payload = (DateTime + \" - \" + Source + \": \" + Value);\n\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2480,
        "y": 2380,
        "wires": [
            [
                "9fb2ab0ff0488d63"
            ]
        ]
    },
    {
        "id": "49edcd3fcf15db5c",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "topic",
                "pt": "msg",
                "from": "panasonic_heat_pump/commands/",
                "fromt": "str",
                "to": "<b>MQTT Command: </b>",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 2440,
        "wires": [
            [
                "1e0df57eb3e96bf7"
            ]
        ]
    },
    {
        "id": "2e07cb8c215afb98",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": true,
        "onceDelay": "0",
        "topic": "",
        "payload": "Start",
        "payloadType": "str",
        "x": 1770,
        "y": 2140,
        "wires": [
            [
                "1fc3414887db6c0f"
            ]
        ]
    },
    {
        "id": "c83f2c1b98fec551",
        "type": "ui_ui_control",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "events": "all",
        "x": 1760,
        "y": 2180,
        "wires": [
            [
                "1fc3414887db6c0f"
            ]
        ]
    },
    {
        "id": "48b67765f5bf4521",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "group": "16ec453c8cb345ac",
        "order": 4,
        "width": 24,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 2790,
        "y": 2200,
        "wires": []
    },
    {
        "id": "47cc58d8c2f4aae6",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2340,
        "y": 2380,
        "wires": [
            [
                "5e4c3c30025c30ee"
            ]
        ]
    },
    {
        "id": "af715d4c79137c30",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Link out to HA - Room Setpoint Z1",
        "mode": "link",
        "links": [],
        "x": 3165,
        "y": 1180,
        "wires": []
    },
    {
        "id": "2cb940cabdae70e5",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2050,
        "y": 2820,
        "wires": [
            [
                "a2c6183556ca72d1"
            ]
        ]
    },
    {
        "id": "a2d45addc303107f",
        "type": "moment",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "{{msg.outTz}}",
        "adjAmount": "0",
        "adjType": "hours",
        "adjDir": "add",
        "format": "DD/MM HH:mm:ss",
        "locale": "en-US",
        "output": "time",
        "outputType": "msg",
        "outTz": "{{msg.outTz}}",
        "x": 2020,
        "y": 2280,
        "wires": [
            [
                "5e4c3c30025c30ee"
            ]
        ]
    },
    {
        "id": "46c5b8fae5c96441",
        "type": "moment",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "{{msg.outTz}}",
        "adjAmount": "0",
        "adjType": "hours",
        "adjDir": "add",
        "format": "DD/MM HH:mm:ss",
        "locale": "en-US",
        "output": "time",
        "outputType": "msg",
        "outTz": "{{msg.outTz}}",
        "x": 2160,
        "y": 2380,
        "wires": [
            [
                "47cc58d8c2f4aae6"
            ]
        ]
    },
    {
        "id": "7ec2785759270a3f",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2090,
        "y": 2760,
        "wires": [
            [
                "1d13fdc79740ec03"
            ]
        ]
    },
    {
        "id": "7764079e5c12e488",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "+",
        "func": "if (msg.payload > 0){msg.payload = '+' + msg.payload;}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3470,
        "y": 1320,
        "wires": [
            [
                "501242b43a1016ea",
                "3f6602042d2dc015"
            ]
        ]
    },
    {
        "id": "3a196a4275cfec68",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "+",
        "func": "if (msg.payload > 0){msg.payload = '+' + msg.payload;}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3970,
        "y": 2180,
        "wires": [
            [
                "cdf7664223f16687"
            ]
        ]
    },
    {
        "id": "ed38db2e845981c3",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP99 - panasonic_heat_pump/main/Buffer_Installed",
        "topic": "panasonic_heat_pump/main/Buffer_Installed",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2020,
        "y": 3040,
        "wires": [
            [
                "c89d0e068db5d0a3",
                "29f0a76babd44a0d"
            ]
        ]
    },
    {
        "id": "e413e4528a583aca",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP100 - panasonic_heat_pump/main/DHW_Installed",
        "topic": "panasonic_heat_pump/main/DHW_Installed",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2020,
        "y": 3120,
        "wires": [
            [
                "c90242e0d0920cb4",
                "0476ec162f4e3c21",
                "29f0a76babd44a0d"
            ]
        ]
    },
    {
        "id": "27765fa485cf9edc",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP101 - panasonic_heat_pump/main/Solar_Mode",
        "topic": "panasonic_heat_pump/main/Solar_Mode",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2010,
        "y": 3160,
        "wires": [
            [
                "8a2587bfa102f546"
            ]
        ]
    },
    {
        "id": "25a7c297f9a7769d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 21,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Buffer installed",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2720,
        "y": 3040,
        "wires": []
    },
    {
        "id": "a1ad83346ebe69f7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 23,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "DHW installed",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2720,
        "y": 3120,
        "wires": []
    },
    {
        "id": "8d8cf818740ba383",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 26,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Solar mode",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2710,
        "y": 3160,
        "wires": []
    },
    {
        "id": "c89d0e068db5d0a3",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::TOP99_Buffer_Installed",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Disabled",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Enabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 3040,
        "wires": [
            [
                "25a7c297f9a7769d"
            ]
        ]
    },
    {
        "id": "c90242e0d0920cb4",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::TOP100_DHW_Installed",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Disabled",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Enabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 3120,
        "wires": [
            [
                "a1ad83346ebe69f7"
            ]
        ]
    },
    {
        "id": "8a2587bfa102f546",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Disabled",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Enabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 3160,
        "wires": [
            [
                "8d8cf818740ba383"
            ]
        ]
    },
    {
        "id": "3eae91d9cd1bdee8",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 15,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Heating mode",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2720,
        "y": 2960,
        "wires": []
    },
    {
        "id": "f18205dcad572d9c",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Compensation curve",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Direct",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 2960,
        "wires": [
            [
                "3eae91d9cd1bdee8"
            ]
        ]
    },
    {
        "id": "8af692675b83ae82",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP81 - panasonic_heat_pump/main/Cooling_Mode",
        "topic": "panasonic_heat_pump/main/Cooling_Mode",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2010,
        "y": 3000,
        "wires": [
            [
                "420db86c7b6e5af4"
            ]
        ]
    },
    {
        "id": "84116d62e4ebcbed",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 25,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Cooling mode",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2720,
        "y": 3000,
        "wires": []
    },
    {
        "id": "420db86c7b6e5af4",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::panasonic.cooling_mode",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Compensation curve",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Direct",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 3000,
        "wires": [
            [
                "84116d62e4ebcbed"
            ]
        ]
    },
    {
        "id": "5dc231f82f838360",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "name": "Line - Hardware information",
        "order": 1,
        "width": 12,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Hardware information</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2680,
        "y": 2920,
        "wires": [
            []
        ]
    },
    {
        "id": "1bb2e188964a1341",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP59 - panasonic_heat_pump/main/Room_Heater_State",
        "topic": "panasonic_heat_pump/main/Room_Heater_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2030,
        "y": 3240,
        "wires": [
            [
                "3b1207cb272b0f70"
            ]
        ]
    },
    {
        "id": "d4e0faf63ac63064",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP58 - panasonic_heat_pump/main/DHW_Heater_State",
        "topic": "panasonic_heat_pump/main/DHW_Heater_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2030,
        "y": 3200,
        "wires": [
            [
                "a398b005199a43cf"
            ]
        ]
    },
    {
        "id": "a398b005199a43cf",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Disabled",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Enabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 3200,
        "wires": [
            [
                "7e7348fb4ac5bc99"
            ]
        ]
    },
    {
        "id": "3b1207cb272b0f70",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "0",
                "fromt": "num",
                "to": "Disabled",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "1",
                "fromt": "num",
                "to": "Enabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 3240,
        "wires": [
            [
                "d576dddb4d172860"
            ]
        ]
    },
    {
        "id": "7e7348fb4ac5bc99",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 24,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "DHW heater state",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2730,
        "y": 3200,
        "wires": []
    },
    {
        "id": "d576dddb4d172860",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 20,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Room heater state",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2730,
        "y": 3240,
        "wires": []
    },
    {
        "id": "4ac3620489b6a382",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "548e51986bce11b0",
        "name": "Line - panasonic",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2460,
        "y": 2920,
        "wires": [
            []
        ]
    },
    {
        "id": "a0baaad72b5322f9",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP11 - panasonic_heat_pump/main/Operations_Hours",
        "topic": "panasonic_heat_pump/main/Operations_Hours",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2020,
        "y": 3280,
        "wires": [
            [
                "f4c673f35d3ad0dd",
                "b9a90bcc4b056db7"
            ]
        ]
    },
    {
        "id": "a8de78895c96410f",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP12 - panasonic_heat_pump/main/Operations_Counter",
        "topic": "panasonic_heat_pump/main/Operations_Counter",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2030,
        "y": 3320,
        "wires": [
            [
                "ccdeb93d0df404fd",
                "6b27da6efcb59131"
            ]
        ]
    },
    {
        "id": "f4c673f35d3ad0dd",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 4,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Operation hours",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2720,
        "y": 3280,
        "wires": []
    },
    {
        "id": "ccdeb93d0df404fd",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 6,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Operation counter",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2730,
        "y": 3320,
        "wires": []
    },
    {
        "id": "01b95384bec879c2",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP91 - panasonic_heat_pump/main/DHW_Heater_Operations_Hours",
        "topic": "panasonic_heat_pump/main/DHW_Heater_Operations_Hours",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2070,
        "y": 3360,
        "wires": [
            [
                "d6822a7d071e95a2"
            ]
        ]
    },
    {
        "id": "c5fa76779fb49ffe",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP90 - panasonic_heat_pump/main/Room_Heater_Operations_Hours",
        "topic": "panasonic_heat_pump/main/Room_Heater_Operations_Hours",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2070,
        "y": 3400,
        "wires": [
            [
                "5b3ff627c4ccac4d"
            ]
        ]
    },
    {
        "id": "d6822a7d071e95a2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 8,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Backup heater hours (DHW)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2760,
        "y": 3360,
        "wires": []
    },
    {
        "id": "5b3ff627c4ccac4d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 10,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Backup heater hours (HEAT)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2760,
        "y": 3400,
        "wires": []
    },
    {
        "id": "4d2f479ee6166e7b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "name": "Line - Operation information",
        "order": 2,
        "width": 12,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Operation information</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2960,
        "y": 3560,
        "wires": [
            []
        ]
    },
    {
        "id": "b53bc6358e871056",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "69d31fcea48c5132",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4570,
        "y": 1060,
        "wires": [
            [
                "e7e7a120cf9e9001"
            ]
        ]
    },
    {
        "id": "e7e7a120cf9e9001",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "69d31fcea48c5132",
        "name": "Send to log Z1",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 4655,
        "y": 1060,
        "wires": []
    },
    {
        "id": "087a748b7ca8e4f0",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "69d31fcea48c5132",
        "name": "Get Room 1 setpoint",
        "func": "global.set(\"F_RTC.z1.setpoint\", msg.payload, \"file\");\nvar setpoint_zone1 = msg.payload;\n    \nmsg.topic = \"RTC\"\nmsg.payload = \"Room 1 setpoint changed to: \" + setpoint_zone1 + \" °C\";\n\n//check of Night reduction room setpoint is niet actief:\nif (global.get(\"NightReductionRoomSetpoint.state\", \"file\") == 0) {\n    let msg2 = {};                  //pin2 ---> link-out to Room setpoint NORMAL on dashboard Scheduler\n    msg2.payload = setpoint_zone1; \n    if (global.get('NightReductionRoomSetpoint.NORMAL', \"file\") == setpoint_zone1) { return null; } //only send when different\n    global.set(\"NightReductionRoomSetpoint.NORMAL\", setpoint_zone1, \"file\");\n    return [msg,msg2];\n    }\n\n\nreturn [msg,null];\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4380,
        "y": 1080,
        "wires": [
            [
                "b53bc6358e871056"
            ],
            [
                "28d654bc8270de5e"
            ]
        ]
    },
    {
        "id": "cc398f298c681782",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "Check operation mode",
        "func": "if (global.get('TOP26_Defrosting_State', \"file\") == 1) { // During defrost show status on Home dashboard\n    msg.payload = \"*Defrosting*\";\n    return msg;\n}\n\n//var OM = msg.payload;\nvar OM = global.get('TOP4_Operating_Mode_State', \"file\");\nmsg.topic = \"Current state\";\nif (OM == 0) {\n    msg.payload = \"Heat only\";\n} else if (OM == 1) {\n    msg.payload = \"Cool only\";\n} else if (OM == 2) {\n    msg.payload = \"Auto(Heat)\";\n} else if (OM == 3) {\n    msg.payload = \"DHW only\";\n} else if (OM == 4) {\n    msg.payload = \"Heat+DHW\";\n} else if (OM == 5) {\n    msg.payload = \"Cool+DHW\";\n} else if (OM == 6) {\n    msg.payload = \"Auto(Heat)+DHW\";\n} else if (OM == 7) {\n    msg.payload = \"Auto(Cool)\";\n} else if (OM == 8) {\n    msg.payload = \"Auto(Cool)+DHW)\";\n} else {\n    return null;\n}\n\nreturn msg;\n// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1400,
        "wires": [
            [
                "ef9758a537d81735"
            ]
        ]
    },
    {
        "id": "ef9758a537d81735",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "bf4af523ba16d457",
        "order": 3,
        "width": 6,
        "height": 1,
        "name": "Current state",
        "label": "Actual",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 970,
        "y": 1400,
        "wires": []
    },
    {
        "id": "702993e29cd93413",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "link in Operation Mode status (HOME)",
        "links": [
            "4ff74e2b48b1d597",
            "6c685782864f1787"
        ],
        "x": 155,
        "y": 1400,
        "wires": [
            [
                "cc398f298c681782"
            ]
        ]
    },
    {
        "id": "46b7fe12f60ad08b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "bf4af523ba16d457",
        "name": "Line - Water",
        "order": 5,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Water temperature</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 610,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "11c006e989f63390",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "2b0c8e162d47abbb",
        "name": "Line - Scheduler",
        "order": 6,
        "width": 28,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Scheduler</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2920,
        "y": 3520,
        "wires": [
            []
        ]
    },
    {
        "id": "b690e6a46d9553ba",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "e3cc96332cd59f07",
        "name": "Line",
        "order": 9,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Custom functions</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 910,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "96c650af80111193",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "1179fa790d2d89ca",
        "name": "Line Custom functions",
        "order": 5,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Custom functions (Zone 1)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4680,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "97186cf285d61502",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tab\":\"\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1540,
        "y": 2180,
        "wires": [
            [
                "c83f2c1b98fec551"
            ]
        ]
    },
    {
        "id": "1fa1afeeb1c84d32",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "pauseType": "delay",
        "timeout": "50",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1530,
        "y": 2220,
        "wires": [
            [
                "729f15cc004fcc21"
            ]
        ]
    },
    {
        "id": "729f15cc004fcc21",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": " - ... Clear",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SYSTEM",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1740,
        "y": 2220,
        "wires": [
            [
                "861b9f982a76f569"
            ]
        ]
    },
    {
        "id": "8b99fa1a632fa6aa",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "26.1.1 Beta",
        "payloadType": "str",
        "x": 1370,
        "y": 2100,
        "wires": [
            [
                "e649dffb7b88341d",
                "8da7c93f059466f2"
            ]
        ]
    },
    {
        "id": "8da7c93f059466f2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "group": "b7f740331bca1b3f",
        "order": 1,
        "width": 24,
        "height": 1,
        "name": "Flow version",
        "label": "Flow version ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 2010,
        "y": 2120,
        "wires": []
    },
    {
        "id": "8d9c639aa58c9a3e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "group": "16ec453c8cb345ac",
        "order": 3,
        "width": 16,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 2790,
        "y": 2240,
        "wires": []
    },
    {
        "id": "b57cce7cc9fa92ea",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link out 27 z1",
        "mode": "link",
        "links": [
            "f76db0ea91c39edd"
        ],
        "x": 4845,
        "y": 820,
        "wires": []
    },
    {
        "id": "ca0190e54c9749cb",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link out 28 z1",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 4845,
        "y": 860,
        "wires": []
    },
    {
        "id": "91fcc102b422de3b",
        "type": "ui_gauge",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Frequency",
        "group": "bf4af523ba16d457",
        "order": 11,
        "width": 3,
        "height": 3,
        "gtype": "gage",
        "title": "Frequency",
        "label": "Hz",
        "format": "{{value}}",
        "min": 0,
        "max": "120",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "36",
        "seg2": "69",
        "className": "",
        "x": 950,
        "y": 880,
        "wires": []
    },
    {
        "id": "2ca9ec858ebd4887",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t7_limit",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 24,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t7_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 3820,
        "y": 1240,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "290133f7fd948e25",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "+custom",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 25,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t7_correction_value",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "4",
        "max": "30",
        "step": "0.1",
        "className": "",
        "x": 3600,
        "y": 1240,
        "wires": [
            [
                "ab1290025b96a1df",
                "a19cd490d0cc5d13",
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "ab1290025b96a1df",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "save +custom",
        "func": "// save on change only\nvar rtc_t7_custom_cor = global.get('F_RTC.z1.t7_correction_value',\"file\");\nif (msg.payload == rtc_t7_custom_cor)   {\n    return null;\n}\nelse    {\n    global.set('F_RTC.z1.t7_correction_value', msg.payload, \"file\");\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4000,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "bb54f8581c258040",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 15,
        "width": 2,
        "height": 2,
        "name": "filler b",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 3810,
        "y": 1080,
        "wires": []
    },
    {
        "id": "fb7f16aa29565d78",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 4140,
        "y": 1400,
        "wires": [
            [
                "38a2e1df7e0bdb2a"
            ]
        ]
    },
    {
        "id": "8ae2f173954488ad",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Set TOP62_Fan1_Motor_Speed",
        "func": "global.set('TOP62_Fan1_Motor_Speed', msg.payload); // Memory Only\nif (msg.payload > 0) {\n    msg.enabled = true;\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1000,
        "wires": [
            [
                "1ed98a1d47eb56f0"
            ]
        ]
    },
    {
        "id": "1daf8c5944f23d71",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "link in 12",
        "links": [
            "c57a81d1dee5b8a9"
        ],
        "x": 155,
        "y": 880,
        "wires": [
            [
                "17c5ba9bb0b58a11",
                "91fcc102b422de3b"
            ]
        ]
    },
    {
        "id": "6366ce3358b65976",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "link in 13",
        "links": [
            "7ce3c0d525800846"
        ],
        "x": 155,
        "y": 300,
        "wires": [
            [
                "23197820b73be2c8",
                "de12a1bd6b72fc0a"
            ]
        ]
    },
    {
        "id": "ffa2e7745e5aed4c",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "link in 14",
        "links": [
            "6c685782864f1787"
        ],
        "x": 275,
        "y": 1960,
        "wires": [
            [
                "1fcb5929aa984ced"
            ]
        ]
    },
    {
        "id": "ecbb543ba37d9962",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link in 20 Z1",
        "links": [
            "a22898dfdc4ff0ca"
        ],
        "x": 3275,
        "y": 1280,
        "wires": [
            [
                "dade0dbb40c3945a"
            ]
        ]
    },
    {
        "id": "57d858f4dd89a4c8",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "F_RTC.z1.incremental_setpoints_state on/off",
        "label": "Enable between +3 and +{{msg.custom}}",
        "tooltip": "Incremental setpoints: Enable/Disable the incremental steps between the two ranges.",
        "group": "ef3dbc543ae92bec",
        "order": 3,
        "width": 7,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 3750,
        "y": 1360,
        "wires": [
            [
                "083547591b89bc09"
            ]
        ]
    },
    {
        "id": "083547591b89bc09",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "set F_RTC.incremental_setpoints_state on/off z1",
        "func": "\nmsg.topic = \"Function - RTC incremental_setpoints\";\nglobal.set(\"F_RTC.z1.incremental_setpoints_state\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4220,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "2f436c5ec33c9291",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Restart after defrost",
        "label": "Restart after defrost",
        "tooltip": "",
        "group": "c2a0123d2e2c91f0",
        "order": 7,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 4420,
        "y": 2060,
        "wires": [
            [
                "b2003add7c0ba5a9"
            ]
        ]
    },
    {
        "id": "b2003add7c0ba5a9",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4630,
        "y": 2060,
        "wires": [
            [
                "8df6915186a6430a"
            ]
        ]
    },
    {
        "id": "8df6915186a6430a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "set.F_SS.reset_after_defrost",
        "func": "\nvar F_SS_reset_after_defrost                = global.get('F_SS.reset_after_defrost',\"file\");\n\nif (msg.payload != F_SS_reset_after_defrost) {\n    global.set('F_SS.reset_after_defrost',msg.payload,\"file\");\n}\nmsg.topic = 'NR - SS restart after defrost';\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4860,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "f8d7e53aed62cd14",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC on/off_OM",
        "label": "Action: Change operating mode",
        "tooltip": "Enables or disables the heat function based on below set deltas",
        "group": "ef3dbc543ae92bec",
        "order": 10,
        "width": 7,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "automation_OM_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 3140,
        "y": 1480,
        "wires": [
            [
                "f8cd2e5c468286a5"
            ]
        ]
    },
    {
        "id": "85d4c15e56ecc525",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "name": "Line 7x1 automations",
        "order": 4,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n\t<left>Automations</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3420,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "a19cd490d0cc5d13",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "custom",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3240,
        "y": 1360,
        "wires": [
            [
                "2d7930a2b848335e",
                "57d858f4dd89a4c8"
            ]
        ]
    },
    {
        "id": "2d7930a2b848335e",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "name": "Line 7x1 ",
        "order": 1,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 0px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 0px solid #a39d99;\n    box-shadow: 0 0 0px #a39d99\";\n\t>\n\t<left>Calculate linear correction</left>\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3440,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "28ade256a9b75487",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "69d31fcea48c5132",
        "name": "link out 32 Z1",
        "mode": "link",
        "links": [
            "55a0fb67fbe206cf"
        ],
        "x": 4655,
        "y": 1100,
        "wires": []
    },
    {
        "id": "28d654bc8270de5e",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "69d31fcea48c5132",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4570,
        "y": 1100,
        "wires": [
            [
                "28ade256a9b75487"
            ]
        ]
    },
    {
        "id": "1e0df57eb3e96bf7",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "MQTT_source",
        "func": "var MQTT_Source = global.get('MQTT_Source'); //Memory Only\nif (typeof msg.payload === 'object') {\n    if (msg.payload.hasOwnProperty(\"zone1\")) {\n        \n        var z1_ccc_wt2 = global.get('F_CCC.z1.wt2',\"file\");\n        \n        if (msg.payload.zone1.heat.target.low === undefined){ msg.payload = \"(Zone 1) Target: \" + (msg.payload.zone1.heat.target.high); }\n        \n        else { msg.payload = \"(Zone 1) Shift: \" + (msg.payload.zone1.heat.target.high - z1_ccc_wt2); }\n    }\n\n    if (msg.payload.hasOwnProperty(\"zone2\")) {\n        \n        var z2_ccc_wt2 = global.get('F_CCC.z2.wt2',\"file\");\n        \n        if (msg.payload.zone2.heat.target.low === undefined){ msg.payload = \"(Zone 2) Target: \" + (msg.payload.zone2.heat.target.high); }\n        \n        else { msg.payload = \"(Zone 2) Shift: \" + (msg.payload.zone2.heat.target.high - z2_ccc_wt2); }\n    }\n\n}\nif (MQTT_Source === undefined) {msg.payload = \"<b>\" + msg.payload + \"</b>\";}\nif (MQTT_Source !== undefined) {msg.payload = \"<b>\" + msg.payload + \"</b> (\" + MQTT_Source + \")\";}\n\nglobal.set('MQTT_Source', undefined); // reset and wait for next command.\n\nreturn msg;\n\n/*\n\nmqtt-source added for:\n======================\n-Function SoftStart (corrections)\n-Function Reduce Pump Peed\n-Power on/off (rtc, scheduler, gui)\n-Quietmode (scheduler, gui)\n-SS_Quietmode\n\n*/",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1740,
        "y": 2440,
        "wires": [
            [
                "9202d8b025b48df6",
                "861b9f982a76f569"
            ]
        ]
    },
    {
        "id": "fadad1e2505bf86d",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Quiet mode",
        "label": "Quiet mode",
        "tooltip": "",
        "place": "Select option",
        "group": "548e51986bce11b0",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Level 0",
                "value": 0,
                "type": "num"
            },
            {
                "label": "Level 1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Level 2",
                "value": 2,
                "type": "num"
            },
            {
                "label": "Level 3",
                "value": 3,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Quiet Mode",
        "topicType": "str",
        "className": "",
        "x": 1750,
        "y": 200,
        "wires": [
            [
                "4125dbe2c258837c"
            ]
        ]
    },
    {
        "id": "493be73ce31c8c96",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Operation mode",
        "label": "Operation mode",
        "tooltip": "",
        "place": "Select option",
        "group": "548e51986bce11b0",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat only (0)",
                "value": 0,
                "type": "num"
            },
            {
                "label": "Cool only (1)",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Auto (2)",
                "value": 2,
                "type": "num"
            },
            {
                "label": "DHW only (3)",
                "value": 3,
                "type": "num"
            },
            {
                "label": "Heat+DHW (4)",
                "value": 4,
                "type": "num"
            },
            {
                "label": "Cool+DHW (5)",
                "value": 5,
                "type": "num"
            },
            {
                "label": "Auto+DHW (6)",
                "value": 6,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1760,
        "y": 280,
        "wires": [
            [
                "367f1fc8966e2514"
            ]
        ]
    },
    {
        "id": "d286bfab06c854b3",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Pump Service mode",
        "label": "Service mode (100%)",
        "tooltip": "Set pump flow to maximum",
        "group": "fea7672db2f050c9",
        "order": 10,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "ServiceMode",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1780,
        "y": 360,
        "wires": [
            [
                "99fca21d30786e83"
            ]
        ]
    },
    {
        "id": "98757de0a2842b4b",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "conversion function",
        "func": "// SET15 SetMaxPumpDuty decimal value translate to hexadecimal in service menu 64 to 254\n// First find out the upper and lower limit of the waterpump. Trial and arror by injecting a number as payload to the mqtt topic. fill them in in the two lines below!!!\n//\nvar lowerlimit=64; // Lowest value\nvar upperlimit=254; // Hihghes value\n\n\nvar range=(upperlimit-lowerlimit); // This is the range of operation for the waterpump. You need to test this manually and correct the values if needed.\n\n\nmsg.payload = ((msg.payload) / 100 * range) + lowerlimit; // calculation\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(\"F_ReducePumpSpeed.NormalSpeed\", msg.payload, \"file\"); // edit 13-12-2022\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2130,
        "y": 460,
        "wires": [
            [
                "6864b73de510f046"
            ]
        ]
    },
    {
        "id": "c6559a95bb3c55fb",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Force DHW",
        "label": "Force DHW",
        "tooltip": "Forces a DHW cycle. (Result = Set DHW-Only, Set ForceDHW active, run. When done, revert Operating Mode, Set ForceDHW to inactive)",
        "group": "4e9e24cca215ad4d",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "GUI_F_DHW",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1750,
        "y": 920,
        "wires": [
            [
                "cd39dd6db4d4cbf2"
            ]
        ]
    },
    {
        "id": "17cf53c8acbfb4e1",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "3151681b2157872c",
        "name": "Holiday Mode",
        "label": "Holiday Mode",
        "tooltip": "Off / On Holiday mode",
        "group": "548e51986bce11b0",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1760,
        "y": 780,
        "wires": [
            [
                "bdb7e8e0217cec66",
                "2f577f48a3804703"
            ]
        ]
    },
    {
        "id": "4dee981d88ea5cf3",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "DHW (SP)",
        "label": "DHW setpoint",
        "tooltip": "",
        "group": "4e9e24cca215ad4d",
        "order": 2,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": false,
        "topic": "dhw_sp",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "40",
        "max": "75",
        "step": 1,
        "className": "",
        "x": 1750,
        "y": 1020,
        "wires": [
            [
                "ac2652f2dd9df44c"
            ]
        ]
    },
    {
        "id": "45a93847a1d11766",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "3151681b2157872c",
        "name": "Force defrost",
        "label": "Force defrost",
        "tooltip": "",
        "group": "548e51986bce11b0",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1750,
        "y": 1060,
        "wires": [
            [
                "5e3a9447502864ad",
                "3de982eda6f5e1a3"
            ]
        ]
    },
    {
        "id": "ccb9e79ff06190fa",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Force sterilization",
        "label": "Force sterilization",
        "tooltip": "Forces sterilization cycle (operating mode should be set first to include DHW mode (operation mode 3, 4, 5 or 6) to function)",
        "group": "4e9e24cca215ad4d",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "Toggle",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1770,
        "y": 1100,
        "wires": [
            [
                "063fe3316395a6c4"
            ]
        ]
    },
    {
        "id": "20e2544a8277d8c2",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Force sterilization1",
        "links": [
            "0609b7d54d31dafb",
            "4f62466c41bb3667",
            "f4637a99af0d109d"
        ],
        "x": 1975,
        "y": 1080,
        "wires": [
            [
                "063fe3316395a6c4"
            ]
        ]
    },
    {
        "id": "91fa7e389b484d7c",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Panasonic Main Scheduler",
        "label": "Panasonic main scheduler",
        "tooltip": "It is possible to use both Panasonic and NodeRed scheduler running at the same time. This is not recommended, make sure the schedules are not conflicting",
        "group": "548e51986bce11b0",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "TOP13_Main_Schedule_State",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1800,
        "y": 1560,
        "wires": [
            [
                "089ba42c8f7f7a61",
                "88e644ce965a6890"
            ]
        ]
    },
    {
        "id": "69ea88923a102a5d",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Heater Stop delta",
        "label": "Stop delta",
        "tooltip": "Turn off backup heater again when the temperature is xx °C lower than setpoint (only J-series) Range -8/0",
        "group": "fea7672db2f050c9",
        "order": 13,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "TOP98_Heater_Stop_Delta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-8",
        "max": "0",
        "step": 1,
        "className": "",
        "x": 1770,
        "y": 1520,
        "wires": [
            [
                "a2d7de4325e4bf91",
                "db41038f69a63144"
            ]
        ]
    },
    {
        "id": "7c7fd14d9f6ec530",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Heater Start delta",
        "label": "Start delta",
        "tooltip": "Turn on backup heater when the temperature is xx °C lower than setpoint (only J-series) Range: -10/-2",
        "group": "fea7672db2f050c9",
        "order": 12,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "TOP97_Heater_Start_Delta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-10",
        "max": "-2",
        "step": 1,
        "className": "",
        "x": 1770,
        "y": 1480,
        "wires": [
            [
                "78816343589b199a",
                "4694bfeaa76d43f1"
            ]
        ]
    },
    {
        "id": "02af248fc547b96b",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Heater Delay Time",
        "label": "Delay time",
        "tooltip": "In case the final water temperature is not reached within the specified delay time turn on the backup heater (only J-series)",
        "group": "fea7672db2f050c9",
        "order": 14,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "TOP96_Heater_Delay_Time",
        "topicType": "str",
        "format": "{{value}} min",
        "min": "0",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 1770,
        "y": 1440,
        "wires": [
            [
                "c2baf1abae4e4441"
            ]
        ]
    },
    {
        "id": "b8abd042ad10fed8",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "DHW delta",
        "label": "DHW delta",
        "tooltip": "DHW delta (range -12/-2)",
        "group": "4e9e24cca215ad4d",
        "order": 7,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "TOP22_DHW_Heat_Delta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-12",
        "max": "-2",
        "step": 1,
        "className": "",
        "x": 1750,
        "y": 1400,
        "wires": [
            [
                "c803b9ad018fe78e",
                "e85a5bbd08082721"
            ]
        ]
    },
    {
        "id": "2d364a067e4a7b4a",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Cool delta",
        "label": "Cool delta",
        "tooltip": "Cool delta (range 1/15)",
        "group": "26d9e6cf24507b4f",
        "order": 7,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "TOP24_Cool_Delta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "1",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 1740,
        "y": 1360,
        "wires": [
            [
                "1b1ddea1350cb5ce"
            ]
        ]
    },
    {
        "id": "a89b41c6600cac07",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Heat delta",
        "label": "Heat delta",
        "tooltip": "Heat delta (Range 1/15)",
        "group": "26d9e6cf24507b4f",
        "order": 4,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "TOP23_Heat_Delta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "1",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 1750,
        "y": 1320,
        "wires": [
            [
                "9e59dd1bbe56fc88"
            ]
        ]
    },
    {
        "id": "e31636baf16e3b69",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Powerful mode",
        "label": "Powerful mode",
        "tooltip": "",
        "place": "Set powerful mode run time in minutes",
        "group": "26d9e6cf24507b4f",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Off",
                "value": 0,
                "type": "num"
            },
            {
                "label": "30 minutes",
                "value": 1,
                "type": "num"
            },
            {
                "label": "60 minutes",
                "value": 2,
                "type": "num"
            },
            {
                "label": "90 minutes",
                "value": 3,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "TOP17_Powerful_Mode_Time",
        "topicType": "str",
        "className": "",
        "x": 1760,
        "y": 840,
        "wires": [
            [
                "979c5ca99c054740",
                "b7a195156eedf201"
            ]
        ]
    },
    {
        "id": "1f2cb9545d7e212d",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Set zones",
        "label": "Set active zones",
        "tooltip": "Set the active zones",
        "place": "Select option",
        "group": "26d9e6cf24507b4f",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Zone 1",
                "value": 0,
                "type": "num"
            },
            {
                "label": "Zone 2",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Zone 1 and 2",
                "value": 2,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "TOP94_Zones_State",
        "topicType": "str",
        "className": "",
        "x": 1740,
        "y": 1280,
        "wires": [
            [
                "2ed9d626c929fb95",
                "5b0e15b0804a4452"
            ]
        ]
    },
    {
        "id": "a6854436b6e1c7e8",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "TOP44 - panasonic_heat_pump/main/Error",
        "topic": "panasonic_heat_pump/main/Error",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1480,
        "y": 1620,
        "wires": [
            [
                "fce687f80b334b9e",
                "7813313c8fae18d5",
                "b8bcc572150cf1d4"
            ]
        ]
    },
    {
        "id": "fce687f80b334b9e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "fea7672db2f050c9",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Current error",
        "label": "Current error",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1910,
        "y": 1600,
        "wires": []
    },
    {
        "id": "bdb7e8e0217cec66",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HolidayMode",
        "links": [
            "e8684c407d602e87"
        ],
        "x": 2035,
        "y": 760,
        "wires": []
    },
    {
        "id": "979c5ca99c054740",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "TOP17_Powerful_Mode_Time",
        "mode": "link",
        "links": [
            "f70b59196295efc0"
        ],
        "x": 1945,
        "y": 820,
        "wires": []
    },
    {
        "id": "092a9db0d9b923b3",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "ForceDHW",
        "mode": "link",
        "links": [
            "12e43571a8c16fa2",
            "14d2ae6b4af7e45e",
            "327f3ad0eae0d7d5",
            "6ae86dc05a6a3c4a"
        ],
        "x": 2035,
        "y": 900,
        "wires": []
    },
    {
        "id": "5e3a9447502864ad",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "ForceDefrost",
        "links": [
            "01744f1093a2fd51"
        ],
        "x": 2155,
        "y": 1060,
        "wires": []
    },
    {
        "id": "2ed9d626c929fb95",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "TOP94_Zones_State",
        "mode": "link",
        "links": [
            "9c4e9ed4c3ac1779"
        ],
        "x": 2175,
        "y": 1280,
        "wires": []
    },
    {
        "id": "7139256ff024b872",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "FloorCoolDelta",
        "mode": "link",
        "links": [
            "25041e53f134e3fb"
        ],
        "x": 2225,
        "y": 1380,
        "wires": []
    },
    {
        "id": "c803b9ad018fe78e",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "DHWHeatDelta",
        "links": [
            "5e35dee1374d6829"
        ],
        "x": 2175,
        "y": 1400,
        "wires": []
    },
    {
        "id": "78816343589b199a",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HeaterStartDelta",
        "links": [
            "0e3197d36afc45dc"
        ],
        "x": 2175,
        "y": 1480,
        "wires": []
    },
    {
        "id": "a2d7de4325e4bf91",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HeaterStopDelta",
        "links": [
            "ca1f0fdf0dd05c89"
        ],
        "x": 2175,
        "y": 1520,
        "wires": []
    },
    {
        "id": "089ba42c8f7f7a61",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "TOP13_Main_Schedule_State",
        "mode": "link",
        "links": [
            "c5cba27eac8a70a2"
        ],
        "x": 2175,
        "y": 1560,
        "wires": []
    },
    {
        "id": "3de982eda6f5e1a3",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1040,
        "wires": [
            [
                "a20fe452e34c26f2"
            ]
        ]
    },
    {
        "id": "5b0e15b0804a4452",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1280,
        "wires": [
            [
                "3c054d7f511af4eb",
                "1f2cb9545d7e212d"
            ]
        ]
    },
    {
        "id": "564fcdd537853126",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1320,
        "wires": [
            [
                "3b2ded71a11dfb75"
            ]
        ]
    },
    {
        "id": "381a37d17ef728cc",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1360,
        "wires": [
            [
                "c5f279c69179fd5b"
            ]
        ]
    },
    {
        "id": "cb354767e9f35bc0",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1400,
        "wires": [
            [
                "8ddf4987d6b31ae5"
            ]
        ]
    },
    {
        "id": "df60cdb125adaf72",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1440,
        "wires": [
            [
                "5182a29718a4142e",
                "02af248fc547b96b"
            ]
        ]
    },
    {
        "id": "9b3cba642f3daa70",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1480,
        "wires": [
            [
                "08d04747592e753f",
                "7c7fd14d9f6ec530"
            ]
        ]
    },
    {
        "id": "9e998e80ed82590d",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1520,
        "wires": [
            [
                "b6dd964e2537fb76",
                "69ea88923a102a5d"
            ]
        ]
    },
    {
        "id": "88e644ce965a6890",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1560,
        "wires": [
            [
                "87449349b95f6091",
                "91fa7e389b484d7c"
            ]
        ]
    },
    {
        "id": "a26b41289a59dba3",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var2a         = global.get('TOP18_Quiet_Mode_Level',\"file\");\nlet msg1={};\nmsg1.source = \"boot\";\n\nif(var2a === undefined)     {return null;}\nelse                        {msg1.payload = var2a;\n                            msg1.topic = \"Quiet Mode\"; \n                            return msg1;}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 200,
        "wires": [
            [
                "fadad1e2505bf86d"
            ]
        ],
        "outputLabels": [
            "Quiet Mode"
        ]
    },
    {
        "id": "a45a6b8b1ac4b46d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP4_Operating_Mode_State',\"file\");\nlet msg1={};\n\nif (var1 === undefined)      {\n                                return null;\n                            }\n\nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP4_Operating_Mode_State'; \n                            msg1.source = \"boot\";\n                            return msg1;\n                            }\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 280,
        "wires": [
            [
                "493be73ce31c8c96"
            ]
        ],
        "outputLabels": [
            "Operation Mode"
        ]
    },
    {
        "id": "d9a7bffb1a15426e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var TOP0_Heatpump_State                    = global.get('TOP0_Heatpump_State',\"file\");\nlet msg1={};\n\nif (TOP0_Heatpump_State === undefined)      \n    {\n        return null;    \n    }\n\nelse\n    {\n        msg1.payload = TOP0_Heatpump_State;\n        msg1.topic = 'TOP0_Heatpump_State'; \n        msg1.source = 'boot'; //if using flow it will generate a mqqt-command every minute\n        return msg1;\n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 100,
        "wires": [
            [
                "7b3d20aa8c9abb1e"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "b203a1c024a72593",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1 = global.get('F_ReducePumpSpeed.PumpMaxFlowSetting',\"file\");\n\nif (var1 === undefined) { return null; }\n\nlet msg1 = {};                            \n\nvar1 = (var1-64) / (254-64) * 100;\nvar1 = Number(var1).toFixed(0);\nmsg1.payload = var1;\nmsg1.topic = 'PumpMaxFlowSetting'; \n\nmsg1.source = \"boot\";\nreturn msg1;\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 540,
        "wires": [
            [
                "2c13c33324bb6c6e",
                "ea184fe6e1240203",
                "d5948f3208081ac8"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "34397163757fd58b",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP19_Holiday_Mode_State',\"file\");\nif (var1 === undefined)      { return null; }\n\nlet msg1={};\nmsg1.payload = var1;\nmsg1.topic = 'TOP19_Holiday_Mode_State'; \nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 780,
        "wires": [
            [
                "17cf53c8acbfb4e1"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "7c74fd1faa32c81d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP17_Powerful_Mode_Time',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            return null;    \n                            }\n                            \nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP17_Powerful_Mode_Time'; \n                            return msg1;\n                            }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 840,
        "wires": [
            [
                "e31636baf16e3b69"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "de0e892a0157baca",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var ForceDHW = global.get('ForceDHW',\"file\");\nif(ForceDHW === undefined) { return null; }\n\nlet msg1={};\nmsg1.payload = ForceDHW;\nmsg1.topic = 'ForceDHW'; \nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 900,
        "wires": [
            [
                "092a9db0d9b923b3"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "05d3e85b3963e4e2",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP26_Defrosting_State',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            return null;    \n                            }\n                            \nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP26_Defrosting_State'; \n                            return msg1;\n                            }\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1060,
        "wires": [
            [
                "45a93847a1d11766"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "0897b055d53c8a84",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP94_Zones_State',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            return null;    \n                            }\n                            \nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP94_Zones_State'; \n                            return msg1;\n                            }\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1280,
        "wires": [
            [
                "1f2cb9545d7e212d"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "afa82ddd168a4ea4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP23_Heat_Delta',\"file\");\nlet msg1={};\n\nif(var1 === undefined)  {\n    return null;    \n}\n\nelse {\n    msg1.payload = var1;\n    msg1.topic = 'TOP23_Heat_Delta'; \n    return msg1;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1320,
        "wires": [
            [
                "a89b41c6600cac07"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "58ee259d850d95ac",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1 = global.get('TOP24_Cool_Delta',\"file\");\nlet msg1={};\n\nif (var1 === undefined) {\n    return null;    \n}\n    \nelse {\n    msg1.payload = var1;\n    msg1.topic = 'TOP24_Cool_Delta'; \n    return msg1;\n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1360,
        "wires": [
            [
                "2d364a067e4a7b4a"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "332fb342687e1121",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP22_DHW_Heat_Delta',\"file\");\nlet msg1={};\n\nif(var1 === undefined) { return null; }\n                            \nelse {\n    msg1.payload = var1;\n    msg1.topic = 'TOP22_DHW_Heat_Delta'; \n    return msg1;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1400,
        "wires": [
            [
                "b8abd042ad10fed8"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "50f5134fb3ba9e38",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var TOP96_Heater_Delay_Time = global.get('TOP96_Heater_Delay_Time',\"file\");\nif (TOP96_Heater_Delay_Time === undefined) { return null; }\n\nlet msg1 = {};                            \nmsg1.payload = TOP96_Heater_Delay_Time;\nmsg1.topic = 'TOP96_Heater_Delay_Time'; \nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1440,
        "wires": [
            [
                "02af248fc547b96b"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "119d9c04e028ad98",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP97_Heater_Start_Delta',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            return null;    \n                            }\n                            \nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP97_Heater_Start_Delta'; \n                            return msg1;\n                            }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1480,
        "wires": [
            [
                "7c7fd14d9f6ec530"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "13b0a160e7f2d0a0",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP98_Heater_Stop_Delta',\"file\");\n\nif (var1 === undefined) {\n    return null;\n}\n\nlet msg1={};\nmsg1.payload = var1;\nmsg1.topic = 'TOP98_Heater_Stop_Delta'; \nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1520,
        "wires": [
            [
                "69ea88923a102a5d"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "8e9f91dd021c2ccd",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP13_Main_Schedule_State',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            return null;    \n                            }\n                            \nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP13_Main_Schedule_State'; \n                            return msg1;\n                            }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1560,
        "wires": [
            [
                "91fa7e389b484d7c"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "0a683587ca4fc25c",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "ForceSterilization",
        "mode": "link",
        "links": [
            "d0fda364deccc7f0"
        ],
        "x": 2225,
        "y": 1140,
        "wires": []
    },
    {
        "id": "05e2f23adde7a6fc",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HEAT SP lower limit",
        "label": "Minimum temp.",
        "tooltip": "",
        "group": "26d9e6cf24507b4f",
        "order": 9,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "HEAT_SP_lower_limit",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "100",
        "step": 1,
        "className": "",
        "x": 1780,
        "y": 1160,
        "wires": [
            [
                "9170caebad3acdcf"
            ]
        ]
    },
    {
        "id": "ede3b3328704cab1",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HEAT SP upper limit",
        "label": "Maximum temp.",
        "tooltip": "",
        "group": "26d9e6cf24507b4f",
        "order": 10,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "HEAT_SP_upper_limit",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "100",
        "step": 1,
        "className": "",
        "x": 1780,
        "y": 1200,
        "wires": [
            [
                "58d199ee200d7b16"
            ]
        ]
    },
    {
        "id": "22afde8747ce6ca0",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('HEAT_SP_upper_limit',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            global.set(\"HEAT_SP_upper_limit\",100,\"file\");\n                            var1 = 100;\n                            }\n                            \nmsg1.payload = var1;\nmsg1.topic = 'HEAT_SP_upper_limit'; \nreturn msg1;\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1200,
        "wires": [
            [
                "ede3b3328704cab1"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "9170caebad3acdcf",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1160,
        "wires": [
            [
                "9fcae1bec983aa1f",
                "05e2f23adde7a6fc"
            ]
        ]
    },
    {
        "id": "58d199ee200d7b16",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 1200,
        "wires": [
            [
                "887a43d150c20eb2",
                "ede3b3328704cab1"
            ]
        ]
    },
    {
        "id": "9fcae1bec983aa1f",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HEAT SP lower limit",
        "links": [
            "8206cc922dc8874d"
        ],
        "x": 2175,
        "y": 1160,
        "wires": []
    },
    {
        "id": "887a43d150c20eb2",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "HEAT SP upper limit",
        "mode": "link",
        "links": [
            "170936d914847ac0"
        ],
        "x": 2175,
        "y": 1200,
        "wires": []
    },
    {
        "id": "7f6107d49ab83c40",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('HEAT_SP_lower_limit',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            global.set(\"HEAT_SP_lower_limit\",20,\"file\");\n                            var1 = 20;\n}\n                            \nmsg1.payload = var1;\nmsg1.topic = 'HEAT_SP_lower_limit'; \nreturn msg1;\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1160,
        "wires": [
            [
                "05e2f23adde7a6fc"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "6db2abfba9e25737",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var var1                    = global.get('TOP69_Sterilization_State',\"file\");\nlet msg1={};\n\nif(var1 === undefined)      {\n                            return null;    \n                            }\n                            \nelse                        {\n                            msg1.payload = var1;\n                            msg1.topic = 'TOP69_Sterilization_State'; \n                            return msg1;\n                            }\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1100,
        "wires": [
            [
                "ccb9e79ff06190fa",
                "24b17d7139dc31a7"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "071ac5a0f08a8fdb",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "set HeatPump Power state",
        "links": [
            "0970bfa5a14caf6b",
            "346a3528a7770803",
            "7a30c0f0dbf50e03",
            "ee7e3fc1d241d09e",
            "f217f942f56cbfa9",
            "f7f21cce882495d8",
            "833c7b0abfcd9deb"
        ],
        "x": 1565,
        "y": 60,
        "wires": [
            [
                "79e2f9225b931e16"
            ]
        ]
    },
    {
        "id": "6ae86dc05a6a3c4a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "ForceDHW IN",
        "links": [
            "092a9db0d9b923b3",
            "b131edf180140fb6"
        ],
        "x": 1635,
        "y": 940,
        "wires": [
            [
                "c6559a95bb3c55fb"
            ]
        ]
    },
    {
        "id": "2f577f48a3804703",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 780,
        "wires": [
            [
                "bcda53f9e43821c5"
            ]
        ]
    },
    {
        "id": "b7a195156eedf201",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 840,
        "wires": [
            [
                "1742dd060b79dfd1"
            ]
        ]
    },
    {
        "id": "99fca21d30786e83",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 360,
        "wires": [
            [
                "47b7f4736455a3cb"
            ]
        ]
    },
    {
        "id": "7b3d20aa8c9abb1e",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Heat pump power",
        "label": "Heat pump power",
        "tooltip": "",
        "group": "bf4af523ba16d457",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1770,
        "y": 100,
        "wires": [
            [
                "79e2f9225b931e16"
            ]
        ]
    },
    {
        "id": "56131f5116b20fba",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "links": [
            "550d51c7fe788f9e",
            "7f44b9272e731114",
            "f3f961c698c9fc05"
        ],
        "x": 1635,
        "y": 1040,
        "wires": [
            [
                "4dee981d88ea5cf3"
            ]
        ]
    },
    {
        "id": "550d51c7fe788f9e",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "DHW SP post-filter",
        "mode": "link",
        "links": [
            "3f63919ddd4f0ea7",
            "56131f5116b20fba",
            "a6ccb9d3fcdad8e7",
            "d2d71d4e69ee31d7"
        ],
        "x": 2175,
        "y": 1000,
        "wires": []
    },
    {
        "id": "e85a5bbd08082721",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1940,
        "y": 1400,
        "wires": [
            [
                "cb354767e9f35bc0",
                "b8abd042ad10fed8"
            ]
        ]
    },
    {
        "id": "c2baf1abae4e4441",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1940,
        "y": 1440,
        "wires": [
            [
                "df60cdb125adaf72"
            ]
        ]
    },
    {
        "id": "4694bfeaa76d43f1",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1940,
        "y": 1480,
        "wires": [
            [
                "9b3cba642f3daa70"
            ]
        ]
    },
    {
        "id": "db41038f69a63144",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1940,
        "y": 1520,
        "wires": [
            [
                "9e998e80ed82590d"
            ]
        ]
    },
    {
        "id": "f66e9fca72401ab4",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1940,
        "y": 1360,
        "wires": [
            [
                "381a37d17ef728cc"
            ]
        ]
    },
    {
        "id": "9e59dd1bbe56fc88",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1940,
        "y": 1320,
        "wires": [
            [
                "564fcdd537853126",
                "a89b41c6600cac07"
            ]
        ]
    },
    {
        "id": "3ed1fd544412f391",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "coolDeltaLinkIN",
        "links": [
            "158b8983b1dd0aa9",
            "94fca17199ef198f"
        ],
        "x": 1375,
        "y": 1360,
        "wires": [
            [
                "1b1ddea1350cb5ce"
            ]
        ]
    },
    {
        "id": "dcec18e192df8d64",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "fea7672db2f050c9",
        "name": "Line - Setup ",
        "order": 11,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Backup heater</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2470,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "be17c89704b598d8",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "26d9e6cf24507b4f",
        "name": "Line - Setup ",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2470,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "ea184fe6e1240203",
        "type": "ui_slider",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "fea7672db2f050c9",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 1730,
        "y": 540,
        "wires": [
            [
                "d5948f3208081ac8",
                "c9428fcff7af5f3a"
            ]
        ]
    },
    {
        "id": "2c13c33324bb6c6e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "fea7672db2f050c9",
        "order": 9,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Current max flow",
        "format": "{{msg.payload  | number: 0}} %",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1770,
        "y": 600,
        "wires": []
    },
    {
        "id": "684cdf95f8172514",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "group": "fea7672db2f050c9",
        "order": 7,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "SET {{msg.payload}}",
        "tooltip": "{{msg.tooltip}}",
        "color": "{{msg.color}}",
        "bgcolor": "{{msg.bgcolor}}",
        "className": "",
        "icon": "",
        "payload": "Pump_Max_Flow",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 1850,
        "y": 460,
        "wires": [
            [
                "7cfabb437dca890f"
            ]
        ]
    },
    {
        "id": "32c4b461266d4a6e",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 9",
        "links": [
            "11822306257b3b3a",
            "8f0e209ac14bdb9a",
            "ea04ae839e1d6b46"
        ],
        "x": 1365,
        "y": 540,
        "wires": [
            [
                "b203a1c024a72593"
            ]
        ]
    },
    {
        "id": "b4efe8320bae812d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "1eb6d525c86c4977",
        "order": 3,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Model",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2350,
        "y": 1680,
        "wires": []
    },
    {
        "id": "115cf15b6254cb9c",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "1eb6d525c86c4977",
        "name": "Line - panasonic",
        "order": 14,
        "width": 12,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Hardware configuration</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2000,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "313780cf94ef9d1c",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "fea7672db2f050c9",
        "name": "Line - 1",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1800,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "d9cbcc885d31c1fd",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var panasonic = global.get('panasonic',\"file\");\nlet msg1={};\n\nif (panasonic === undefined)      {return null;}\n\nmsg1.payload = panasonic.model;\nmsg1.topic = 'Model'; \nreturn msg1;\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1680,
        "wires": [
            [
                "b4efe8320bae812d"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "00660af047d90d84",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var panasonic = global.get('panasonic', \"file\");\nlet msg1 = {};\n\nif (panasonic === undefined) { return null; }\n\nmsg1.payload = panasonic.power;\nmsg1.topic = 'Power';\nreturn msg1;\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1720,
        "wires": [
            [
                "d60532c945c70ab1"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "d60532c945c70ab1",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "1eb6d525c86c4977",
        "order": 7,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Heat capacity",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 2380,
        "y": 1720,
        "wires": []
    },
    {
        "id": "fb1ef412a32707e7",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var panasonic = global.get('panasonic', \"file\");\nlet msg1 = {};\n\nif (panasonic === undefined) { return null; }\n\nmsg1.payload = panasonic.phase;\nmsg1.topic = 'Phase';\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1760,
        "wires": [
            [
                "7216a1bd8dc26f16"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "7216a1bd8dc26f16",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "1eb6d525c86c4977",
        "order": 9,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Power connection",
        "format": "{{msg.payload}} Phase",
        "layout": "row-spread",
        "className": "",
        "x": 2390,
        "y": 1760,
        "wires": []
    },
    {
        "id": "849755bc336c0289",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Load on boot",
        "func": "var panasonic = global.get('panasonic', \"file\");\nlet msg1 = {};\n\nif (panasonic === undefined) { return null; }\n\nmsg1.payload = panasonic.type;\nmsg1.topic = 'Type';\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 1800,
        "wires": [
            [
                "ca8be52d82cfb2da"
            ]
        ],
        "outputLabels": [
            "Heatpump_State"
        ]
    },
    {
        "id": "ca8be52d82cfb2da",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "1eb6d525c86c4977",
        "order": 5,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Type",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2350,
        "y": 1800,
        "wires": []
    },
    {
        "id": "85737143f803169a",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "fea7672db2f050c9",
        "name": "Line - Setup 2",
        "order": 5,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Water pump</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1320,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "80dd0b992f3f7c9a",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "26d9e6cf24507b4f",
        "name": "Line - heat limits",
        "order": 8,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>CUSTOM - Heat water temp limits</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2320,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "7cfabb437dca890f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "filter",
        "func": "if (msg.source == \"boot\") return null; // exit\n\nvar ReducePumpSpeed = global.get('F_ReducePumpSpeed.state', \"file\");\n\n// check if running:\nvar Freq = global.get(\"compressor_frequency\", \"file\");\n\nif (ReducePumpSpeed == 1 && Freq == 0) return null; // exit\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1970,
        "y": 460,
        "wires": [
            [
                "98757de0a2842b4b"
            ]
        ]
    },
    {
        "id": "7813313c8fae18d5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Last error",
        "func": "if (msg.payload == \"No error\") { return null; };\n\nmsg.topic = \"SYSTEM - Last error\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2060,
        "y": 1620,
        "wires": [
            [
                "0db2bdc455e4bffe"
            ]
        ]
    },
    {
        "id": "0db2bdc455e4bffe",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2230,
        "y": 1620,
        "wires": [
            [
                "2989d5851e2457ae"
            ]
        ]
    },
    {
        "id": "2989d5851e2457ae",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 17",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 2375,
        "y": 1620,
        "wires": []
    },
    {
        "id": "a845813900ca9e55",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Exit to log",
        "info": "",
        "x": 2460,
        "y": 1620,
        "wires": []
    },
    {
        "id": "1f12871cda6c40b3",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "var MQTT = global.get('MQTT', \"file\");\nlet msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\nmsg66.topic = \"SYSTEM\";\n\nif (msg.source == \"mqtt\") {return null;} // Block. no function after setting the GUI toggles.\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 1) {   // Block all msg, and log it.\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];                                                        \n}\n\nif (msg.source == \"GUI\" || msg.source == \"External\") {\n    global.set('MQTT_Source', msg.source);\n    return [msg, null]; // allow when user action  \n    }\n\nif (MQTT.block_active == 0) \n    { \n        return [msg, null]; // allow rtc, scheduler \n    }\n\n    // *****************************************************************************\n    //  MQTT.block_mode = BLOCK ALL (1)\n    //  MQTT.block_mode = CUSTOM (2)\n    //  MQTT.block_mode = UNRESTRICTED (3)\n    // *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 2) \n    {\n        //  MQTT_default_2 = CUSTOM\n            //**********************************************************************\n            //MQTT.allow_rtc_onoff\n            //**********************************************************************\n            if (MQTT.allow_rtc_onoff == 1)      {\n                global.set('MQTT_Source', \"rtc on/off\");\n                return [msg,null];        //  Pass through msg.\n                }\n            //**********************************************************************\n            //MQTT.allow_solar\n            //**********************************************************************\n            else if (MQTT.allow_solar == 1)      {\n                global.set('MQTT_Source', \"solar\");\n                return [msg,null];        //  Pass through msg.\n                }\n            //**********************************************************************\n            //MQTT.allow_scheduler\n            //**********************************************************************\n            else if (MQTT.allow_scheduler == 1)   {\n                global.set('MQTT_Source', \"scheduler\");\n                return [msg,null];              //  Pass through msg.\n                } \n    }\n    \n\nmsg66.payload = \"MQTT-Commands are blocked!\";\nreturn [null,msg66];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2270,
        "y": 100,
        "wires": [
            [
                "3ae265eeaed19245",
                "e581d28cc362452a"
            ],
            [
                "85327198ddc6e251"
            ]
        ]
    },
    {
        "id": "85327198ddc6e251",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2415,
        "y": 120,
        "wires": []
    },
    {
        "id": "eeae40f40c5ecf87",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];                                                       //  Block msg, and log it.\n}\n\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 2) {                                //  If Manual OFF has been detected...\n    \n\n\n    ////////////////////////////////////////////////////////////////////////////\n    //  MQTT_default_2 = CUSTOM\n    //\n    //\n    // ATTENTION: UN-COMMENT 2 lines out so that the function below is allowed to pass the block.\n    \n        //**********************************************************************\n        //MQTT.allow_rtc_onoff\n        //**********************************************************************\n        //if (MQTT.allow_rtc_onoff == 1)      {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_solar\n        //**********************************************************************\n        //if (MQTT.allow_solar == 1)          {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_scheduler\n        //**********************************************************************\n        if (MQTT.allow_scheduler == 1)      {return [msg,null];}        //  Pass through msg.\n        else                                      {return [null,null];}       //  Block\n        \n        //return [null,null];\n    }\n\n\n\nif (MQTT.block_active == 0) {\n    return msg;\n}\n\n    \n  ",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 200,
        "wires": [
            [
                "369a3b80fea31b09"
            ],
            [
                "d65b99037cb3740d"
            ]
        ]
    },
    {
        "id": "2810d417aa5c3457",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active == 1) {                                //  If Manual OFF has been detected...\n    \n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 1) {                                           //  MQTT_default_1 = BLOCK ALL\n        let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n        msg66.topic = \"SYSTEM\";\n        msg66.payload = \"MQTT-Commands are blocked!\";\n        return [null, msg66];                                                   //  Block msg, and log it.\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 2) {                                           //  MQTT_default_2 = CUSTOM\n    //\n    //\n    // ATTENTION: UN-COMMENT 2 lines out so that the function below is aloowed to pass the block.\n    \n        //**********************************************************************\n        //MQTT\n        //**********************************************************************\n        if (MQTT.allow_rtc_onoff == 1 || MQTT.allow_solar == 1 || MQTT.allow_scheduler == 1)      {\n            if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"flow\"); }\n            return [msg, null];                                                 //  Pass through msg.\n            }\n        else                                      {return [null,null];}         //  Block\n        \n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 3) {                                           //  MQTT_default_3 = UNRESTRICTED\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"flow\"); }\n        return [msg, null];                                                     //  Pass through msg.\n    }\n}\n\nif (MQTT.block_active == 0) {\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', msg.source); }\n    return msg;\n}\n\n    \n  ",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 280,
        "wires": [
            [
                "3ae265eeaed19245",
                "79ad31b84520b767"
            ],
            [
                "29f1c1eaf91ec977"
            ]
        ]
    },
    {
        "id": "47b7f4736455a3cb",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "let msg99 = {}; // pin 2 - To Notify msg (and input LOGS)\n\nif (global.get('MQTT.block_active', \"file\") == 1) {\n    msg99.topic = \"SYSTEM\";\n    msg99.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg99];\n    }\n    \nglobal.set('MQTT_Source', \"GUI\");\nmsg99.topic = \"USER\";\nmsg99.payload = \"Pump Service-mode (max flow): \" + msg.payload;\nreturn [msg, msg99];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 360,
        "wires": [
            [
                "42d50b95f8eb32a4"
            ],
            [
                "e0217508a82c4d43"
            ]
        ]
    },
    {
        "id": "5eebb66e29e252f6",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\n\nglobal.set('MQTT_Source', \"pump speed\"); // Memory Only\nglobal.set(\"F_ReducePumpSpeed.PumpMaxFlowSetting\", msg.payload, \"file\"); // not really save, better wait for mqtt\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 460,
        "wires": [
            [
                "9a8085c30aee2250"
            ],
            [
                "65e5ce7e8bb0e284"
            ]
        ]
    },
    {
        "id": "bcda53f9e43821c5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 780,
        "wires": [
            [
                "bff0cc5ed79c971d"
            ],
            [
                "302de5d951e650b6"
            ]
        ]
    },
    {
        "id": "1742dd060b79dfd1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 840,
        "wires": [
            [
                "3c42519dcb347603"
            ],
            [
                "db78ad9b985b4aa5"
            ]
        ]
    },
    {
        "id": "7c74eef7b504ee67",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];                                                       //  Block msg, and log it.\n}\n\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 2) {                                //  If Manual OFF has been detected...\n    \n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 1) {                                            //  MQTT_default_1 = BLOCK ALL\n        return [null, null];  \n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 2) {                                            //  MQTT_default_2 = CUSTOM\n    //\n    //\n    // ATTENTION: UN-COMMENT 2 lines out so that the function below is aloowed to pass the block.\n    \n        //**********************************************************************\n        //MQTT.allow_rtc_onoff\n        //**********************************************************************\n        //if (MQTT.allow_rtc_onoff == 1)      {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_solar\n        //**********************************************************************\n        //if (MQTT.allow_solar == 1)          {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_scheduler\n        //**********************************************************************\n        if (MQTT.allow_scheduler == 1)      {return [msg,null];}        //  Pass through msg.\n        else                                      {return [null,null];}       //  Block\n        \n        //return [null,null];\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 3) {                                            //  MQTT_default_3 = UNRESTRICTED\n        return [msg, null];                                                     //  Pass through msg.\n    }\n}\n\nif (MQTT.block_active == 0) {\n    return [msg,null];\n}\n\n    \n  ",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 900,
        "wires": [
            [
                "318d8d4097066143"
            ],
            [
                "e1d9c3b48e3b4cba"
            ]
        ]
    },
    {
        "id": "bc84f4340c3e5b0a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1000,
        "wires": [
            [
                "5b42252823e24321"
            ],
            [
                "9b7f15d048bb1f60"
            ]
        ]
    },
    {
        "id": "a20fe452e34c26f2",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];                                                       //  Block msg, and log it.\n}\n\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 2) {                                //  If Manual OFF has been detected...\n    \n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 1) {                                            //  MQTT_default_1 = BLOCK ALL\n        return [null, null];  \n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 2) {                                            //  MQTT_default_2 = CUSTOM\n    //\n    //\n    // ATTENTION: UN-COMMENT 2 lines out so that the function below is aloowed to pass the block.\n    \n        //**********************************************************************\n        //MQTT.allow_rtc_onoff\n        //**********************************************************************\n        //if (MQTT.allow_rtc_onoff == 1)      {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_solar\n        //**********************************************************************\n        //if (MQTT.allow_solar == 1)          {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_scheduler\n        //**********************************************************************\n        //if (MQTT.allow_scheduler == 1)      {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        return [null,null];\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 3) {                                            //  MQTT_default_3 = UNRESTRICTED\n        return [msg, null];                                                     //  Pass through msg.\n    }\n}\n\nif (MQTT.block_active == 0) {\n    return msg;\n}\n\n    \n  ",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1060,
        "wires": [
            [
                "4b254ad728752964"
            ],
            [
                "749ce60adde338d9"
            ]
        ]
    },
    {
        "id": "7cfe771e9583a82d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];                                                       //  Block msg, and log it.\n}\n\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 2) {                                //  If Manual OFF has been detected...\n    \n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 1) {                                            //  MQTT_default_1 = BLOCK ALL\n        return [null, null];  \n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 2) {                                            //  MQTT_default_2 = CUSTOM\n    //\n    //\n    // ATTENTION: UN-COMMENT 2 lines out so that the function below is aloowed to pass the block.\n    \n        //**********************************************************************\n        //MQTT.allow_rtc_onoff\n        //**********************************************************************\n        //if (MQTT.allow_rtc_onoff == 1)      {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_solar\n        //**********************************************************************\n        //if (MQTT.allow_solar == 1)          {return [msg,null];}        //  Pass through msg.\n        //else                                      {return [null,null];}       //  Block\n        \n        //**********************************************************************\n        //MQTT.allow_scheduler\n        //**********************************************************************\n        if (MQTT.allow_scheduler == 1)      {return [msg,null];}        //  Pass through msg.\n        else                                      {return [null,null];}       //  Block\n        \n        //return [null,null];\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 3) {                                            //  MQTT_default_3 = UNRESTRICTED\n        return [msg, null];                                                     //  Pass through msg.\n    }\n}\n\nif (MQTT.block_active == 0) {\n    return msg;\n}\n\n    \n  ",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1100,
        "wires": [
            [
                "eec290acaa090189"
            ],
            [
                "c6e07a956cf2f293"
            ]
        ]
    },
    {
        "id": "3c054d7f511af4eb",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1280,
        "wires": [
            [
                "c15682752982ae1f"
            ],
            [
                "b8ed3bef56b272a1"
            ]
        ]
    },
    {
        "id": "3b2ded71a11dfb75",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nif (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1320,
        "wires": [
            [
                "a4a8967bca76bcae"
            ],
            [
                "f94a97e9d42084d7"
            ]
        ]
    },
    {
        "id": "c5f279c69179fd5b",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nif (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1360,
        "wires": [
            [
                "16725b9ae83a775a"
            ],
            [
                "400c912774a24583"
            ]
        ]
    },
    {
        "id": "8ddf4987d6b31ae5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1400,
        "wires": [
            [
                "52354b3c465d574c"
            ],
            [
                "f2e85ff23b3dc136"
            ]
        ]
    },
    {
        "id": "5182a29718a4142e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1440,
        "wires": [
            [
                "eb9141c8d2afe9b5"
            ],
            [
                "a863b940531858e1"
            ]
        ]
    },
    {
        "id": "08d04747592e753f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1480,
        "wires": [
            [
                "20842e7fa662ab81"
            ],
            [
                "6111292139d84986"
            ]
        ]
    },
    {
        "id": "b6dd964e2537fb76",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1520,
        "wires": [
            [
                "e0ba83b784e2b218"
            ],
            [
                "6886cb05525f8d0b"
            ]
        ]
    },
    {
        "id": "87449349b95f6091",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2450,
        "y": 1560,
        "wires": [
            [
                "8fce19c6455342d1"
            ],
            [
                "16e91d824cef95e3"
            ]
        ]
    },
    {
        "id": "d65b99037cb3740d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 200,
        "wires": []
    },
    {
        "id": "29f1c1eaf91ec977",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 280,
        "wires": []
    },
    {
        "id": "e0217508a82c4d43",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "c764c19340b7b720"
        ],
        "x": 2545,
        "y": 360,
        "wires": []
    },
    {
        "id": "65e5ce7e8bb0e284",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 460,
        "wires": []
    },
    {
        "id": "302de5d951e650b6",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 780,
        "wires": []
    },
    {
        "id": "db78ad9b985b4aa5",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 840,
        "wires": []
    },
    {
        "id": "e1d9c3b48e3b4cba",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 900,
        "wires": []
    },
    {
        "id": "9b7f15d048bb1f60",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 1000,
        "wires": []
    },
    {
        "id": "749ce60adde338d9",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 1060,
        "wires": []
    },
    {
        "id": "c6e07a956cf2f293",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2545,
        "y": 1100,
        "wires": []
    },
    {
        "id": "6886cb05525f8d0b",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1520,
        "wires": []
    },
    {
        "id": "16e91d824cef95e3",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1560,
        "wires": []
    },
    {
        "id": "6111292139d84986",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1480,
        "wires": []
    },
    {
        "id": "a863b940531858e1",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1440,
        "wires": []
    },
    {
        "id": "f2e85ff23b3dc136",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1400,
        "wires": []
    },
    {
        "id": "400c912774a24583",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1360,
        "wires": []
    },
    {
        "id": "f94a97e9d42084d7",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1320,
        "wires": []
    },
    {
        "id": "b8ed3bef56b272a1",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2535,
        "y": 1280,
        "wires": []
    },
    {
        "id": "4a2670b477ab7f75",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "548e51986bce11b0",
        "order": 6,
        "width": 4,
        "height": 1,
        "name": "Force defrost",
        "label": "Force defrost routine",
        "format": "",
        "layout": "row-left",
        "className": "",
        "x": 1330,
        "y": 1060,
        "wires": []
    },
    {
        "id": "f6e0cc6687051bf1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Filter",
        "func": "if (global.get('VirtualState') == msg.payload) { return null; }\n\nglobal.set('VirtualState', msg.payload); //always set VirtualState\n\nif (msg.source == \"boot\") {\n    return null;\n}\n\nif (msg.source == \"mqtt\") { \n    return null; \n    }\n\nif (msg.source == 'DHW-function') {\n    msg.source = \"GUI\";\n    global.set('MQTT_Source', \"DHW-function\");\n}\n\nif (msg.source === undefined) {\n    msg.source = \"GUI\";\n    global.set('MQTT_Source', \"GUI\");\n    }\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2130,
        "y": 100,
        "wires": [
            [
                "1f12871cda6c40b3"
            ]
        ]
    },
    {
        "id": "585e4d6a54d44021",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Filter",
        "func": "var last_msgid      = context.get('last_msgid');\nvar current_value   = global.get('TOP4_Operating_Mode_State',\"file\");\n\n//  READ: Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW) \n//  SET:  Operating mode (0=Heat only, 1=Cool only, 2=Auto, 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto+DHW\n\nif (current_value == 7) { current_value = 2; }\nif (current_value == 8) { current_value = 6; }\n\nif (last_msgid == msg._msgid){\n    return null;\n}\n\nif (last_msgid === undefined){\n    context.set('last_msgid',msg._msgid);\n}\n\nif (msg.payload != current_value){\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2170,
        "y": 280,
        "wires": [
            [
                "2810d417aa5c3457"
            ]
        ]
    },
    {
        "id": "367f1fc8966e2514",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "filter",
        "func": "if (msg.source === undefined) {\n    msg.source = \"GUI\";\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1930,
        "y": 280,
        "wires": [
            [
                "27d4716d98709ec9"
            ]
        ]
    },
    {
        "id": "aad17e70a817393e",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 35",
        "mode": "link",
        "links": [
            "c3a9e17b02222cee",
            "8d56089ccc135555"
        ],
        "x": 2595,
        "y": 160,
        "wires": []
    },
    {
        "id": "fca8ea8f1117c808",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To Function RTC",
        "info": "",
        "x": 2780,
        "y": 140,
        "wires": []
    },
    {
        "id": "9202d8b025b48df6",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "to update mqtt msg/dag label",
        "mode": "link",
        "links": [
            "2cc4d65eb692223b"
        ],
        "x": 1915,
        "y": 2440,
        "wires": []
    },
    {
        "id": "d5948f3208081ac8",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "color",
        "func": "let msg2 = {};\n\n\nvar ReducePumpSpeed = global.get('F_ReducePumpSpeed.state', \"file\"); // check if enabled switch reduce pump speed\n// check if running:\nvar Freq = global.get(\"compressor_frequency\",\"file\");\n\nif (ReducePumpSpeed == 0) {\n    if (msg.source != \"boot\") msg2.payload = msg.payload;           // send slider value to button\n    msg2.color = \"white\";\n    msg2.bgcolor = [];\n    msg2.tooltip = \"\";\n    return msg2;\n}\n\n\nif (ReducePumpSpeed == 1) {\n    msg2.payload = \"BLOCKED\";\n    msg2.color = \"white\";\n    msg2.bgcolor = \"grey\";\n    msg2.tooltip = \"Set via flexible pump speed function\";\n    return msg2;\n}\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1730,
        "y": 460,
        "wires": [
            [
                "684cdf95f8172514"
            ]
        ]
    },
    {
        "id": "9e1f07f9825bd79d",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2150,
        "y": 540,
        "wires": [
            [
                "d5948f3208081ac8"
            ]
        ]
    },
    {
        "id": "c9428fcff7af5f3a",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Pump_Max_Flow",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1930,
        "y": 540,
        "wires": [
            [
                "9e1f07f9825bd79d"
            ]
        ]
    },
    {
        "id": "b643e9d5e036f4ee",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "Show SoftStart_Advanced tab",
        "group": "c2a0123d2e2c91f0",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "Advanced setup",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "settings",
        "payload": "{\"group\":{\"show\":[\"SoftStart_Advanced\"],\"hide\":[\"SoftStart_Quietmode_add-on_settings\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 4310,
        "y": 2560,
        "wires": [
            [
                "a9eac72958d861ac",
                "c50ffc38e8d8bca7",
                "0244f3af4037bfe4"
            ]
        ]
    },
    {
        "id": "c3c9902496136a46",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "Hide SoftStart_Advanced tab",
        "group": "e18bf5825c47a08f",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"show\":[\"SoftStart_Settings\"],\"hide\":[\"SoftStart_Advanced\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 4300,
        "y": 2600,
        "wires": [
            [
                "a9eac72958d861ac",
                "c50ffc38e8d8bca7"
            ]
        ]
    },
    {
        "id": "a9eac72958d861ac",
        "type": "ui_ui_control",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "events": "all",
        "x": 4800,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "e211a5736784a0fc",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "stage 1 duration",
        "label": "",
        "tooltip": "Default 170 (range 60/180) ",
        "group": "e18bf5825c47a08f",
        "order": 6,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": true,
        "topic": "phase_1_duration",
        "topicType": "str",
        "format": "{{value}}",
        "min": "60",
        "max": "180",
        "step": 1,
        "className": "",
        "x": 4260,
        "y": 2720,
        "wires": [
            [
                "6ec6a3d95c50a2f6",
                "f94254ca964c6921"
            ]
        ]
    },
    {
        "id": "bd802f87a97dcefd",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "stage 2 delay",
        "label": "",
        "tooltip": "Default 45 (range 1/180) If set too high (>120) the compressor will abort too early",
        "group": "e18bf5825c47a08f",
        "order": 13,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "phase_2_delay_time",
        "topicType": "str",
        "format": "{{value}}",
        "min": "1",
        "max": "180",
        "step": 1,
        "className": "",
        "x": 4250,
        "y": 2880,
        "wires": [
            [
                "6ec6a3d95c50a2f6"
            ]
        ]
    },
    {
        "id": "c1486ebe999c1402",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "order": 7,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Message delay (sec)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4020,
        "y": 2760,
        "wires": []
    },
    {
        "id": "b54015c2f88f6bae",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "order": 12,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Message delay (sec)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4020,
        "y": 2880,
        "wires": []
    },
    {
        "id": "c3c59a45d2e39fec",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "order": 17,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Message delay (min/°C)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4030,
        "y": 3040,
        "wires": []
    },
    {
        "id": "ecb93ad39d98a1fd",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "stage 3 delay",
        "label": "",
        "tooltip": "Default 15 (range 5/120)",
        "group": "e18bf5825c47a08f",
        "order": 18,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "phase_3_delay_time",
        "topicType": "str",
        "format": "{{value}}",
        "min": "5",
        "max": "120",
        "step": 1,
        "className": "",
        "x": 4250,
        "y": 3040,
        "wires": [
            [
                "6ec6a3d95c50a2f6"
            ]
        ]
    },
    {
        "id": "d0269b3429462492",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "order": 5,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Catch duration (sec)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4020,
        "y": 2720,
        "wires": []
    },
    {
        "id": "7bbad0897f1fcc7f",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "stage 1 delay",
        "label": "",
        "tooltip": "Default 3 (range 0/30) If set too high, reaction is too slow causing compressor to stop early",
        "group": "e18bf5825c47a08f",
        "order": 8,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "phase_1_delay_time",
        "topicType": "str",
        "format": "{{value}}",
        "min": 0,
        "max": "30",
        "step": 1,
        "className": "",
        "x": 4250,
        "y": 2760,
        "wires": [
            [
                "6ec6a3d95c50a2f6"
            ]
        ]
    },
    {
        "id": "d6df210fe010dd33",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "name": "Line Phase 1",
        "order": 4,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Phase 1 (STARTUP)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4150,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "f94254ca964c6921",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "name": "Line Phase 2",
        "order": 11,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Phase 2 (STABLE) - (start after {{msg.payload}} sec)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4150,
        "y": 2840,
        "wires": [
            []
        ]
    },
    {
        "id": "fc318adaf0d65e13",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "name": "Line Phase 3",
        "order": 16,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Phase 3 (END) - (start after {{msg.payload}} min)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4150,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "72a545f547cbe5a3",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "order": 1,
        "width": 5,
        "height": 1,
        "name": "Advanced settings",
        "label": "Advanced settings",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4010,
        "y": 2560,
        "wires": []
    },
    {
        "id": "3547352170ac81f9",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "name": "Disclaimer",
        "order": 3,
        "width": 6,
        "height": 3,
        "format": "Disclaimer:<br/>\nOnly change settings in this advanced section if you truely know what you are doing !!\nIncorrect setup can cause the heatpump to never reach a stable phase.",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4250,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "029c5c12e6deaf2a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "global.set to variable",
        "func": "if (msg.topic == \"phase_1_delay_time\") {\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set(\"F_SS.phase_1_delay_time\",msg.payload,\"file\");\n}\n\nif (msg.topic == \"phase_1_duration\") {\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set(\"F_SS.phase_1_duration\",msg.payload,\"file\");\n}\n\n\nif (msg.topic == \"phase_2_delay_time\") {\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set(\"F_SS.phase_2_delay_time\",msg.payload,\"file\");\n}\n\n\n\nif (msg.topic == \"phase_3_delay_time\") {\n    msg.payload = msg.payload * 60;                                             // convert to seconds.\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set(\"F_SS.phase_3_delay_time\",msg.payload,\"file\");\n}\n\n\nif (msg.topic == \"phase_1_max_dT\") {\n    msg.payload = msg.payload;\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set(\"F_SS.phase_1_max_dT\",msg.payload,\"file\");\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4700,
        "y": 2780,
        "wires": [
            []
        ]
    },
    {
        "id": "6ec6a3d95c50a2f6",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 4500,
        "y": 2780,
        "wires": [
            [
                "029c5c12e6deaf2a"
            ]
        ]
    },
    {
        "id": "6ca1c1b33b5cf449",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "lowerlimit_correction",
        "label": "Lowerlimit correction",
        "tooltip": "Default -5 (range -5/0). If -5 results in too early aborted runs, increase it.",
        "group": "e18bf5825c47a08f",
        "order": 15,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": true,
        "topic": "lowerlimit_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": 1,
        "className": "",
        "x": 4280,
        "y": 2960,
        "wires": [
            [
                "cc3e8e6c49910b24"
            ]
        ]
    },
    {
        "id": "8c0d3e8e47e5848c",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "1 Trigger / 30 minute",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "trigger",
        "x": 3820,
        "y": 2600,
        "wires": [
            [
                "0c5c291dfef49206",
                "cb4f0ebfd47b2b34"
            ]
        ]
    },
    {
        "id": "296d72c4856363ff",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Load on boot SS",
        "func": "// Load all variables in one go and write all variables in one go.\n\nvar F_SS = global.get('F_SS',\"file\");\nvar save = false;\n\nif (F_SS === undefined)         {F_SS = {}; global.set('F_SS',{},\"file\");}\n\n    if (F_SS.state === undefined)                    {F_SS.state = 0; save = true;}                         // State of the softstart function itself. 1=on 0=off    \n    if (F_SS.reset_after_defrost === undefined)      {F_SS.reset_after_defrost = 0; save = true;}           // Reset softstart function after a defrost cycle\n    if (F_SS.total_duration === undefined)           {F_SS.total_duration = 15*60; save = true;}            // default 15 minutes converted to seconds\n    \n    if (F_SS.correction_value === undefined)         {F_SS.correction_value = 0; save = true;}              // Current value for correction\n    // F_SS.correction_bandwidth is not set in this function, but in other logic. should not be in here.\n\nif (save === true)      {global.set('F_SS',F_SS,\"file\");}\n\nvar msg1={}, msg2={}, msg3={}, msg4={}, msg5={};\n\nmsg1.payload    =   F_SS.state;\nmsg1.payload    =   Number(msg1.payload).toFixed(0);\nmsg1.payload    =   parseFloat(msg1.payload);\nmsg2.payload    =   F_SS.total_duration / 60;\nmsg3.payload    =   F_SS.reset_after_defrost;\n\n\n\n\nreturn [msg1,msg2,msg3];\n\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3950,
        "y": 1980,
        "wires": [
            [
                "7790b731fd9a1374",
                "c66f65978915e688"
            ],
            [
                "6d347eebf409d174"
            ],
            [
                "2f436c5ec33c9291"
            ]
        ],
        "outputLabels": [
            "F_SS.state",
            "F_SS.total_duration",
            "F_SS.reset_after_defrost"
        ]
    },
    {
        "id": "0c5c291dfef49206",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "Load on boot",
        "func": "// Load all variables in one go and write all variables in one go.\n\nvar F_SS = global.get('F_SS',\"file\");\nvar save = false;\n\nif (F_SS === undefined)         {F_SS = {};}\n\n    if (F_SS.phase_1_duration === undefined)            {F_SS.phase_1_duration = 170; save = true;}             // startup phase. Default 170 seconds\n    if (F_SS.phase_1_delay_time === undefined)          {F_SS.phase_1_delay_time = 3; save = true;}             // Holdingtime for temperature changes (up) during phase 1. Default 0 seconds\n    if (F_SS.phase_1_max_dT === undefined)              {F_SS.phase_1_max_dT = -1; save = true;}                // max temperature difference between SP and Toutlet (Ta)\n    \n    if (F_SS.phase_2_delay_time === undefined)          {F_SS.phase_2_delay_time = 60; save = true;}            // Holdingtime for temperature changes (up) during phase 2. Default 70 seconds\n    if (F_SS.upperlimit_correction === undefined)       {F_SS.upperlimit_correction = 1; save = true;}          // Upper limit for the softstart function to stay under during phase 2\n    if (F_SS.lowerlimit_correction === undefined)       {F_SS.lowerlimit_correction = -5; save = true;}         // Upper limit for the softstart function to stay under during phase 2\n\n    if (F_SS.phase_3_delay_time === undefined)          {F_SS.phase_3_delay_time = 15*60; save = true;}         // End speed of the function. Reduce correction to 0 (zero), in 1 C xx minutes. Default is 1 degree per 15 minutes.\n    \n    \n    \nif (save === true)      {global.set('F_SS',F_SS,\"file\");}\n\nvar msg1={}, msg2={}, msg3={}, msg4={},msg5={}, msg6={},msg7={};\n\n\nmsg1.payload    =   F_SS.phase_1_duration;\nmsg1.topic      =   'phase_1_duration';\nmsg2.payload    =   F_SS.phase_1_delay_time;\nmsg3.payload    =   F_SS.phase_1_max_dT;\n\nmsg4.payload    =   F_SS.phase_2_delay_time;\nmsg5.payload    =   F_SS.upperlimit_correction;\nmsg6.payload    =   F_SS.lowerlimit_correction;\n\nmsg7.payload    =   F_SS.phase_3_delay_time / 60;\n\nreturn [msg1,msg2,msg3,msg4,msg5,msg6,msg7];\n\n",
        "outputs": 7,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3790,
        "y": 2760,
        "wires": [
            [
                "e211a5736784a0fc",
                "f94254ca964c6921"
            ],
            [
                "7bbad0897f1fcc7f"
            ],
            [
                "6b090a2bc61386b2"
            ],
            [
                "bd802f87a97dcefd"
            ],
            [
                "3b7535829c2cdf6b"
            ],
            [
                "6ca1c1b33b5cf449"
            ],
            [
                "ecb93ad39d98a1fd"
            ]
        ],
        "outputLabels": [
            "F_SS.phase_1_duration",
            "F_SS.phase_1_delay_time",
            "F_SS.phase_1_max_dT",
            "F_SS.phase_2_delay_time",
            "F_SS.upperlimit_correction",
            "F_SS.lowerlimit_correction",
            "F_SS.phase_3_delay_time"
        ]
    },
    {
        "id": "50b756726996fb8b",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "group": "e18bf5825c47a08f",
        "order": 9,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Max temp difference (°C)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4030,
        "y": 2800,
        "wires": []
    },
    {
        "id": "6b090a2bc61386b2",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "phase_1_max_dT",
        "label": "",
        "tooltip": "Default -1 (range -3/0) If set too low the compressor could stop too early",
        "group": "e18bf5825c47a08f",
        "order": 10,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "phase_1_max_dT",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-3",
        "max": "0",
        "step": 1,
        "className": "",
        "x": 4270,
        "y": 2800,
        "wires": [
            [
                "6ec6a3d95c50a2f6"
            ]
        ]
    },
    {
        "id": "4212c42fb72cce77",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "link in 21 - SS chart for accurate lines",
        "links": [
            "5a1d6b18490ded1c",
            "37db709069bc2dc2",
            "9ece6a95a9a5c846"
        ],
        "x": 3715,
        "y": 2420,
        "wires": [
            [
                "349683fa690f91a3"
            ]
        ]
    },
    {
        "id": "187c584c21359a3e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "shift vs direct",
        "func": "\nvar TOP76_Heating_Mode = global.get(\"TOP76_Heating_Mode\",\"file\");\nif (TOP76_Heating_Mode === undefined){\n    return null;\n}\n\nvar msg1={}; // payload value\n    msg1.topic = 'z1_SP_DIRECT_virt';\nvar msg2={}; // label\nvar msg3={}; // limits\nlet msg4={}; // turn off WAR function when compensation curve is active\n    msg4.payload = 0;\n\nvar z1_SP_DIRECT_virt          = global.get('F_CCC.z1.SP_DIRECT_virt',\"file\");\n\nif (msg.payload == 'check_heating_mode'){\n        if (TOP76_Heating_Mode == 1){                   // Direct mode\n            msg1.payload = z1_SP_DIRECT_virt;\n            \n            if (msg1.payload < 20 || msg1.payload === undefined) {msg1.payload = 20;}\n            \n            msg2.label = \"Water temp. z1\";\n            node.send([msg1,msg2,null,null]);\n            \n            msg3 = {ui_control:{min:+20, max:+65, step:1}};\n            node.send([null,null,msg3]);\n        }        \n        if (TOP76_Heating_Mode == 0){                   // Compensation Curve\n            msg1.payload = z1_SP_DIRECT_virt;\n            \n            if (msg1.payload > 5 || msg1.payload === undefined)   { msg1.payload = 0; }\n            \n            msg2.label = \"Shift curve\";\n            node.send([msg1,msg2,null,msg4]);\n            \n            msg3 = {ui_control:{min:-5, max:+5, step:1}};\n            node.send([null,null,msg3]);\n        }\n}\n\n\n\nif (TOP76_Heating_Mode == 0) {                          // Compensation curve mode\n    node.send([null,null,null,msg4])                    // turn off WAR function\n    \n    if (msg.topic == 'trigger'){                        \n        msg1.payload = z1_SP_DIRECT_virt;\n        //msg1.topic = 'z1_SP_DIRECT_virt';\n        if (msg1.payload === undefined) { z1_SP_DIRECT_virt = 0; }\n        node.send([msg1,null,null]);\n    }    \n    if (msg.topic == 'Water setpoint (heat shift)'){\n        msg1.payload = msg.payload;\n        node.send([msg1,null,null]);\n    }\n    msg2.label = \"Shift curve\";\n    node.send([null,msg2,null]);\n    \n    msg3 = {ui_control:{min:-5, max:+5, step:1}};\n    node.send([null,null,msg3]);\n\n    return null;\n}\n\n////////////////////////////////////\nif (TOP76_Heating_Mode == 1){                       // Direct mode\n\n    if (msg.topic == 'trigger'){    \n        msg1.payload = z1_SP_DIRECT_virt;\n            if (msg1.payload === undefined) { z1_SP_DIRECT_virt = 20; }\n        //msg1.topic = 'z1_SP_DIRECT_virt';\n        node.send([msg1,null,null]);\n    }    \n    if (msg.topic == 'Water setpoint (direct)'){\n        msg1.payload = msg.payload;\n        msg1.topic = 'z1_SP_DIRECT_virt';\n        node.send([msg1,null,null]);\n    }\n    msg2.label = \"Water temp.\";\n    node.send([null,msg2,null]);\n    \n    msg3 = {ui_control:{min:+20, max:+65, step:1}};\n    node.send([null,null,msg3]);\n    \n    return null;\n}\n\n",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 80,
        "wires": [
            [
                "8329aedf9204b75d"
            ],
            [
                "136e0fb8144c7c14"
            ],
            [
                "8329aedf9204b75d"
            ],
            [
                "0c8eb8257035ca5f",
                "81e0133d16c51789"
            ]
        ],
        "outputLabels": [
            "payload value",
            "label",
            "limits",
            "WAR function OFF"
        ]
    },
    {
        "id": "3b06cb6fe4aba512",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "Show QuietMode add-on setup",
        "group": "c2a0123d2e2c91f0",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "QuietMode add-on setup",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "settings",
        "payload": "{\"group\":{\"show\":[\"SoftStart_Quietmode_add-on_settings\"],\"hide\":[\"SoftStart_Advanced\",\"SoftStart_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 4390,
        "y": 3200,
        "wires": [
            [
                "a9eac72958d861ac",
                "2953bc932b436d2e",
                "f52fb1c1050e067f"
            ]
        ]
    },
    {
        "id": "d7cc3d6e4843a8ad",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "Hide QuietMode add-on setup",
        "group": "778fd272c9304a44",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"SoftStart_Quietmode_add-on_settings\",\"SoftStart_Advanced\",\"SoftStart_Help\"],\"show\":[\"SoftStart_Settings\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 4390,
        "y": 3240,
        "wires": [
            [
                "a9eac72958d861ac",
                "2953bc932b436d2e"
            ]
        ]
    },
    {
        "id": "c63eb9bc210b7b1d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "order": 1,
        "width": 5,
        "height": 1,
        "name": "Quietmode add-on settings",
        "label": "QuietMode add-on settings",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4100,
        "y": 3200,
        "wires": []
    },
    {
        "id": "688af2d1eee80549",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "",
        "op1": "",
        "op2": "push button",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 4830,
        "y": 3200,
        "wires": [
            [
                "d7cc3d6e4843a8ad"
            ]
        ]
    },
    {
        "id": "2953bc932b436d2e",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4680,
        "y": 3160,
        "wires": [
            [
                "688af2d1eee80549"
            ]
        ]
    },
    {
        "id": "f52fb1c1050e067f",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4660,
        "y": 3200,
        "wires": [
            [
                "688af2d1eee80549"
            ]
        ]
    },
    {
        "id": "bab176f0addd9f32",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "num",
        "duration": "2",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 4710,
        "y": 2600,
        "wires": [
            [
                "c3c9902496136a46"
            ]
        ]
    },
    {
        "id": "c50ffc38e8d8bca7",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4560,
        "y": 2560,
        "wires": [
            [
                "bab176f0addd9f32"
            ]
        ]
    },
    {
        "id": "0244f3af4037bfe4",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4540,
        "y": 2600,
        "wires": [
            [
                "bab176f0addd9f32"
            ]
        ]
    },
    {
        "id": "5444f8ed7b1fa765",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "1 Trigger / 30 minute",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 3820,
        "y": 3240,
        "wires": [
            [
                "d080747c531f1376",
                "2746ca6bcc924e40"
            ]
        ]
    },
    {
        "id": "ab31019d5a2a15b3",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "order": 4,
        "width": 4,
        "height": 1,
        "name": "Duration",
        "label": "Duration after start",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 4040,
        "y": 3280,
        "wires": []
    },
    {
        "id": "042a326783f2a657",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "QM_duration",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "778fd272c9304a44",
        "order": 5,
        "width": 2,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "5 mins",
                "value": 5,
                "type": "num"
            },
            {
                "label": "10 mins",
                "value": 10,
                "type": "num"
            },
            {
                "label": "15 mins",
                "value": 15,
                "type": "num"
            },
            {
                "label": "20 mins",
                "value": 20,
                "type": "num"
            },
            {
                "label": "25 mins",
                "value": 25,
                "type": "num"
            },
            {
                "label": "30 mins",
                "value": 30,
                "type": "num"
            },
            {
                "label": "45 mins",
                "value": 45,
                "type": "num"
            },
            {
                "label": "1 hour",
                "value": 60,
                "type": "num"
            },
            {
                "label": "1 h 15 mins",
                "value": 75,
                "type": "num"
            },
            {
                "label": "1 h 30 mins",
                "value": 90,
                "type": "num"
            },
            {
                "label": "1 h 45 mins",
                "value": 105,
                "type": "num"
            },
            {
                "label": "2 hours",
                "value": 120,
                "type": "num"
            },
            {
                "label": "3 hours",
                "value": 180,
                "type": "num"
            },
            {
                "label": "4 hours",
                "value": 240,
                "type": "num"
            },
            {
                "label": "5 hours",
                "value": 300,
                "type": "num"
            },
            {
                "label": "6 hours",
                "value": 360,
                "type": "num"
            },
            {
                "label": "7 hours",
                "value": 420,
                "type": "num"
            },
            {
                "label": "8 hours",
                "value": 480,
                "type": "num"
            },
            {
                "label": "9 hours",
                "value": 540,
                "type": "num"
            },
            {
                "label": "10 hours",
                "value": 600,
                "type": "num"
            },
            {
                "label": "12 hours",
                "value": 720,
                "type": "num"
            },
            {
                "label": "18 hours",
                "value": 1080,
                "type": "num"
            },
            {
                "label": "24 hours",
                "value": 1440,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "QM_duration",
        "topicType": "str",
        "className": "",
        "x": 4330,
        "y": 3280,
        "wires": [
            [
                "9c7187657eb05439"
            ]
        ]
    },
    {
        "id": "2f6dcfe431b67d95",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "1179fa790d2d89ca",
        "order": 17,
        "width": 6,
        "height": 1,
        "name": "Z1-Final water temp.",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1000,
        "y": 1320,
        "wires": []
    },
    {
        "id": "1f4a153d2239272b",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "link in Final water temp",
        "links": [
            "61dfad40f76daac7",
            "76a161da01cebe9c"
        ],
        "x": 155,
        "y": 1340,
        "wires": [
            [
                "00dd6c3fd833a5cf"
            ]
        ]
    },
    {
        "id": "00dd6c3fd833a5cf",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "Label",
        "func": "var TOP76_Heating_Mode          = global.get('TOP76_Heating_Mode',\"file\");\nvar TOP20_ThreeWay_Valve_State  = global.get('TOP20_ThreeWay_Valve_State');\nvar TOP94_Zones_State           = global.get('TOP94_Zones_State',\"file\")\n\nif (TOP76_Heating_Mode === undefined || TOP20_ThreeWay_Valve_State === 1 || TOP94_Zones_State === undefined)    {return null;}\n\nlet msg1 = {};\nlet msg2 = {};\n//zone 1\nif (TOP94_Zones_State === 0 || TOP94_Zones_State === 2) {\n    if (TOP76_Heating_Mode === 0) \n        {   \n            var SHIFT_Final_z1 = global.get('SHIFT_Final_z1',\"file\")\n            msg1.label = \"Temperature shift (\" + SHIFT_Final_z1 + \")\";\n            msg1.payload = Math.ceil(SHIFT_Final_z1);\n        }\n\n    if (TOP76_Heating_Mode === 1) \n        {\n            var SP_Final_z1 = global.get('SP_Final_z1',\"file\")\n            msg1.label = \"Final water temperature (\" + SP_Final_z1 + \")\";\n            msg1.payload = Math.ceil(SP_Final_z1);\n        }\nnode.send([msg1,null]);\n}\n//zone 2\nif (TOP94_Zones_State === 1 || TOP94_Zones_State === 2) {\n    if (TOP76_Heating_Mode === 0) \n        {   \n            var SHIFT_Final_z2 = global.get('SHIFT_Final_z2',\"file\")\n            msg2.label = \"Temperature shift (\" + SHIFT_Final_z2 + \")\";\n            msg2.payload = Math.ceil(SHIFT_Final_z2);\n        }\n\n    if (TOP76_Heating_Mode === 1) \n        {\n            var SP_Final_z2 = global.get('SP_Final_z2',\"file\")\n            msg2.label = \"Final water temperature (\" + SP_Final_z2 + \")\";\n            msg2.payload = Math.ceil(SP_Final_z2);\n        }\n    node.send([null, msg2]);\n}\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1340,
        "wires": [
            [
                "2f6dcfe431b67d95"
            ],
            [
                "a12d078fa519dd37"
            ]
        ],
        "outputLabels": [
            "z1",
            "z2"
        ]
    },
    {
        "id": "2c0778f496681b41",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "name": "Line QuietMode settings",
        "order": 3,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Settings</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4090,
        "y": 3160,
        "wires": [
            []
        ]
    },
    {
        "id": "2bc0c1510a6e89c4",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 4230,
        "y": 2460,
        "wires": [
            [
                "37ae6fb47a326b5e"
            ]
        ]
    },
    {
        "id": "c33b3e865b1bd8b8",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "QM Input from manager",
        "links": [
            "0c161098aa5eeb1a",
            "5a1d6b18490ded1c",
            "9ad9e41bc15fb30b"
        ],
        "x": 2145,
        "y": 200,
        "wires": [
            [
                "0a89bc3104c3ee9b"
            ]
        ]
    },
    {
        "id": "7d9dc928c0177c74",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "QM GUI to manager",
        "mode": "link",
        "links": [
            "4ac5cc278b7439a7"
        ],
        "x": 2035,
        "y": 200,
        "wires": []
    },
    {
        "id": "9c7187657eb05439",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "set.topic_variables",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(\"F_SS.\" + msg.topic,msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4690,
        "y": 3360,
        "wires": [
            []
        ]
    },
    {
        "id": "51e9ad6273cba0ec",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "order": 12,
        "width": 2,
        "height": 1,
        "name": "Current level",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 4330,
        "y": 3440,
        "wires": []
    },
    {
        "id": "02ec5c80f142f377",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "link in 25",
        "links": [
            "0771fea18659deea"
        ],
        "x": 4225,
        "y": 3440,
        "wires": [
            [
                "51e9ad6273cba0ec"
            ]
        ]
    },
    {
        "id": "24fbbd2b93a9c9f4",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "order": 11,
        "width": 4,
        "height": 1,
        "name": "Current QuietMode level",
        "label": "Current QuietMode level",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 4090,
        "y": 3440,
        "wires": []
    },
    {
        "id": "70aea97804b35103",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "name": "Line Quietmode Result",
        "order": 10,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Result</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4080,
        "y": 3400,
        "wires": [
            []
        ]
    },
    {
        "id": "e9942046bea0d380",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "SS_Quietmode_on_off",
        "mode": "link",
        "links": [
            "6165734a2db82af9"
        ],
        "x": 4615,
        "y": 3400,
        "wires": []
    },
    {
        "id": "a423271481d5d54d",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "QM_state",
        "label": "QuietMode add-on",
        "tooltip": "",
        "group": "c2a0123d2e2c91f0",
        "order": 9,
        "width": 5,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "QM_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 4320,
        "y": 3400,
        "wires": [
            [
                "9c7187657eb05439",
                "639bc923555d743a",
                "03298033c4fd4ab5"
            ]
        ]
    },
    {
        "id": "d080747c531f1376",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "Load on boot",
        "func": "// Load all variables in one go and write all variables in one go.\n\nvar F_SS = global.get('F_SS',\"file\");\nvar save = false;\n\nif (F_SS === undefined)                                 {F_SS = {};}\n\nif (F_SS.QM_duration === undefined)                     {F_SS.QM_duration = 5; save = true;}\nif (F_SS.QM_active_level === undefined)                 {F_SS.QM_active_level = 3; save = true;}\n//  F_SS.QM_default_level does not need to be defined by default.\nif (F_SS.QM_state === undefined)                        {F_SS.QM_state = 0; save = true;}\n\nif (save === true)                                      {global.set('F_SS',F_SS,\"file\");}\n\nlet msg1={}, msg2={}, msg3={}, msg4={};\n\nmsg1.payload    =   F_SS.QM_duration;\nif (F_SS.QM_default_level !== undefined) {\n    msg2.payload    =   F_SS.QM_default_level;\n    node.send([null,msg2,null,null])\n}\nmsg3.payload    =   F_SS.QM_active_level;\nmsg4.payload    =   F_SS.QM_state;\n\n\nreturn [msg1,null,msg3,msg4];\n\n",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3830,
        "y": 3340,
        "wires": [
            [
                "f4bdf0dbe861aebc"
            ],
            [
                "8b78c607f5328303"
            ],
            [
                "e2710acd9d09b8ce"
            ],
            [
                "03298033c4fd4ab5"
            ]
        ],
        "outputLabels": [
            "F_SS.QM_duration",
            "F_SS.QM_default_level",
            "F_SS.QM_active_level",
            "F_SS.QM_state"
        ]
    },
    {
        "id": "4d6957c0b336a3cb",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "link out 38",
        "mode": "link",
        "links": [
            "c94d6bdf03f2b540"
        ],
        "x": 4615,
        "y": 3320,
        "wires": []
    },
    {
        "id": "a3d9dc45c641ff7d",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Input QuietMode dash settings ",
        "links": [
            "5a1d6b18490ded1c",
            "9ad9e41bc15fb30b"
        ],
        "x": 1565,
        "y": 160,
        "wires": [
            [
                "fadad1e2505bf86d"
            ]
        ]
    },
    {
        "id": "4270ba926708b00d",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "QM_default_level",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "778fd272c9304a44",
        "order": 7,
        "width": 2,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Level 0",
                "value": 0,
                "type": "num"
            },
            {
                "label": "Level 1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Level 2",
                "value": 2,
                "type": "num"
            },
            {
                "label": "Level 3",
                "value": 3,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "QM_default_level",
        "topicType": "str",
        "className": "",
        "x": 4350,
        "y": 3320,
        "wires": [
            [
                "9c7187657eb05439",
                "4d6957c0b336a3cb"
            ]
        ]
    },
    {
        "id": "ab242c5522877fe3",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "order": 6,
        "width": 4,
        "height": 1,
        "name": "Default QuietMode level",
        "label": "Default QuietMode level",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 4090,
        "y": 3320,
        "wires": []
    },
    {
        "id": "b530eb1ecdcd7af8",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "order": 8,
        "width": 4,
        "height": 1,
        "name": "Active QuietMode level",
        "label": "Active QuietMode level",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 4080,
        "y": 3360,
        "wires": []
    },
    {
        "id": "0834eda7cad080f5",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "QM_active_level",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "778fd272c9304a44",
        "order": 9,
        "width": 2,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Level 0",
                "value": 0,
                "type": "num"
            },
            {
                "label": "Level 1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Level 2",
                "value": 2,
                "type": "num"
            },
            {
                "label": "Level 3",
                "value": 3,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "QM_active_level",
        "topicType": "str",
        "className": "",
        "x": 4350,
        "y": 3360,
        "wires": [
            [
                "9c7187657eb05439",
                "4d6957c0b336a3cb"
            ]
        ]
    },
    {
        "id": "4125dbe2c258837c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Filter",
        "func": "//var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\n//if (last_value === undefined || last_msgid === undefined){\nif (last_msgid === undefined){    \n    //context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    msg.source = \"GUI\";\n    return msg;\n}\n\nif (last_msgid == msg._msgid){\n    return null;\n}\n\n//context.set('last_value',msg.payload);\ncontext.set('last_msgid',msg._msgid);\nmsg.source = \"GUI\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1930,
        "y": 200,
        "wires": [
            [
                "7d9dc928c0177c74"
            ]
        ]
    },
    {
        "id": "0a89bc3104c3ee9b",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 2230,
        "y": 200,
        "wires": [
            [
                "eeae40f40c5ecf87"
            ]
        ]
    },
    {
        "id": "cb4f0ebfd47b2b34",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4070,
        "y": 2600,
        "wires": [
            [
                "c3c9902496136a46"
            ]
        ]
    },
    {
        "id": "2746ca6bcc924e40",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4030,
        "y": 3240,
        "wires": [
            [
                "d7cc3d6e4843a8ad"
            ]
        ]
    },
    {
        "id": "d83ab1374f972ad1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}\n\nif (last_msgid == msg._msgid || msg.payload == last_value){\n    return null;\n}\n\ncontext.set('last_value',msg.payload);\ncontext.set('last_msgid',msg._msgid);\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4630,
        "y": 1920,
        "wires": [
            [
                "c66f65978915e688",
                "7790b731fd9a1374",
                "39c4c5d262a3065b"
            ]
        ]
    },
    {
        "id": "22addf167b287f53",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}\n\nif (last_msgid == msg._msgid || msg.payload == last_value){\n    return null;\n}\n\n\ncontext.set('last_value',msg.payload);\ncontext.set('last_msgid',msg._msgid);\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3930,
        "y": 820,
        "wires": [
            [
                "b4051f61cf6d4d65",
                "e8990d184ea1eca6",
                "25b8320badf7ef88",
                "b62de7b7b1c2c0b6",
                "54724886189b074f"
            ]
        ]
    },
    {
        "id": "639bc923555d743a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return null;\n}\n\nif (last_msgid == msg._msgid || msg.payload == last_value){\n    return null;\n}\n\ncontext.set('last_value',msg.payload);\ncontext.set('last_msgid',msg._msgid);\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4510,
        "y": 3400,
        "wires": [
            [
                "e9942046bea0d380"
            ]
        ]
    },
    {
        "id": "52a0fd0bd128ca0a",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "group": "778fd272c9304a44",
        "name": "Line Quietmode Info",
        "order": 13,
        "width": 6,
        "height": 6,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Information</left> \n</html>\n</br>\n<u>Duration after start</u>\n The duration the qm level should remain active after the compressor starts.</br></br>\n<u>Active QuietMode level</u>\n The qm level used for the duration after start</br></br>\n<u>Default QuietMode level</u>\n The normal / basic qm level. This should match the qm level when this function is not used.",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4080,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "b41f920bc63ae262",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\nvar current_value   = global.get('TOP9_DHW_Target_Temp',\"file\");\n\n\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}\n\nif (last_msgid == msg._msgid){\n    return null;\n}\n\nif (msg.payload != current_value || msg.payload != last_value){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2070,
        "y": 1000,
        "wires": [
            [
                "550d51c7fe788f9e"
            ]
        ]
    },
    {
        "id": "32840bc8d04fbb31",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "DHW SP prefilter",
        "links": [
            "7386864c75dbce5c",
            "dd45b1caa253346b"
        ],
        "x": 1865,
        "y": 980,
        "wires": [
            [
                "ac2652f2dd9df44c"
            ]
        ]
    },
    {
        "id": "61def1f2090e360a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "DHW SP to SET11",
        "links": [
            "c4cb07ae79c0bf65",
            "e7d5b3d47ad1c53a"
        ],
        "x": 2295,
        "y": 1000,
        "wires": [
            [
                "bc84f4340c3e5b0a"
            ]
        ]
    },
    {
        "id": "95590d576d789646",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "link in - personal chart info",
        "links": [
            "837706e7772c4061",
            "e813886e76951136"
        ],
        "x": 205,
        "y": 2280,
        "wires": [
            [
                "8cb1aceef81045bd"
            ]
        ]
    },
    {
        "id": "9975ddd7c9465aea",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "4e9e24cca215ad4d",
        "name": "Line - DHW",
        "order": 1,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 790,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "43464dca9fd194fa",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Link-in to SET9",
        "links": [
            "836082017500f9a9",
            "f0150106811a865b"
        ],
        "x": 2085,
        "y": 240,
        "wires": [
            [
                "585e4d6a54d44021"
            ]
        ]
    },
    {
        "id": "27d4716d98709ec9",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To OM_Manager",
        "mode": "link",
        "links": [
            "efa847198158ca2c"
        ],
        "x": 2015,
        "y": 300,
        "wires": []
    },
    {
        "id": "ac2652f2dd9df44c",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1900,
        "y": 1020,
        "wires": [
            [
                "b41f920bc63ae262"
            ]
        ]
    },
    {
        "id": "7157605d81a5de0d",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 680,
        "y": 120,
        "wires": [
            [
                "7386864c75dbce5c"
            ]
        ]
    },
    {
        "id": "476134da722ea175",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Change OM",
        "links": [
            "4ff74e2b48b1d597",
            "836082017500f9a9",
            "f0150106811a865b"
        ],
        "x": 1565,
        "y": 220,
        "wires": [
            [
                "493be73ce31c8c96"
            ]
        ]
    },
    {
        "id": "97f8288d7402bc77",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "link in 39 Z1",
        "links": [
            "a7d4b11b9c045f95",
            "a85d4f84f1b538d1"
        ],
        "x": 3085,
        "y": 60,
        "wires": [
            [
                "187c584c21359a3e"
            ]
        ]
    },
    {
        "id": "136e0fb8144c7c14",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "1179fa790d2d89ca",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "xxFinal water temp.",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3510,
        "y": 80,
        "wires": []
    },
    {
        "id": "b62de7b7b1c2c0b6",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link out 46 z1",
        "mode": "link",
        "links": [
            "c3a9e17b02222cee"
        ],
        "x": 4125,
        "y": 780,
        "wires": []
    },
    {
        "id": "a7d4b11b9c045f95",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "check limits GUI",
        "mode": "link",
        "links": [
            "97f8288d7402bc77",
            "3f0803a3a230aca2",
            "2b6cdd258a390ffe"
        ],
        "x": 2165,
        "y": 2860,
        "wires": []
    },
    {
        "id": "872ffae146541a5a",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "link out 47",
        "mode": "link",
        "links": [
            "6bdcf84066368733"
        ],
        "x": 655,
        "y": 1280,
        "wires": []
    },
    {
        "id": "5dfb70935ea409db",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "link out 48",
        "mode": "link",
        "links": [
            "7c9af6a20115c38e"
        ],
        "x": 605,
        "y": 1300,
        "wires": []
    },
    {
        "id": "939b63cd71edad9b",
        "type": "ui_toast",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "popup_class",
        "topic": "",
        "name": "",
        "x": 2470,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "45f764b22fa2979e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "function 21",
        "func": "if (msg.topic == 'DHW')   { return null }  // Do nothing. Exit function\n\n\nif (msg.payload == 1)   {\n    let msg1={};\n        \n    var OM = global.get('TOP4_Operating_Mode_State', \"file\");\n    \n    \n    if          (OM == 0)   {msg1.payload = \"Heat only\";} \n    else if     (OM == 1)   {msg1.payload = \"Cool only\";} \n    else if     (OM == 2)   {msg1.payload = \"Auto(Heat)\";} \n    else if     (OM == 7)   {msg1.payload = \"Auto(Cool)\";} \n    else                    {return null;}\n    \n    msg1.payload = \" Force DHW enabled.\" + \n        \"<br><br> Current Operating mode is: \" + msg1.payload + \"(\" + OM + \")\" +\n        \"</br> Add DHW mode (manually) to perform a DHW run.</br></br>\";\n    return msg1;\n    \n}\n\nif (msg.payload == 0) {\n    global.set('Force_DHW_active',0,\"file\");\n    return null\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2090,
        "y": 960,
        "wires": [
            [
                "939b63cd71edad9b",
                "11d6554f952a6ae3"
            ]
        ]
    },
    {
        "id": "11d6554f952a6ae3",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "[]",
        "op1type": "nul",
        "op2type": "json",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2290,
        "y": 960,
        "wires": [
            [
                "939b63cd71edad9b"
            ]
        ]
    },
    {
        "id": "8406701f07ab7886",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 45",
        "links": [
            "7708ef15cae3ed59"
        ],
        "x": 2245,
        "y": 420,
        "wires": [
            [
                "6864b73de510f046"
            ]
        ]
    },
    {
        "id": "ca6c0bce1bb90d64",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "name": "Line 7x1 automations actions",
        "order": 9,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n\t<left>Automation actions</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3440,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "7f32080d7494b6ae",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "order": 15,
        "width": 7,
        "height": 5,
        "name": "Note ",
        "label": "To use the Automations, RTC function does NOT need to be enabled.<br><br>When the temperature difference compared to the setpoint is more than the \"Trigger\" dT, the selected automation actions will be activated.<br><br>When the temperature difference is below the \"Revert\" dT, the selected automation actions will be reverted.",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3370,
        "y": 1600,
        "wires": []
    },
    {
        "id": "cfa2eec0803fe7cd",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "name": "Line 7x1 Note",
        "order": 14,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n\t<left>Note</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3400,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "6864b73de510f046",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\nvar current_value   = global.get('F_ReducePumpSpeed.PumpMaxFlowSetting',\"file\");\n\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return null;\n}\n\nif (last_msgid == msg._msgid){\n    return null;\n}\n\nif (msg.payload != current_value || msg.payload != last_value){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2330,
        "y": 460,
        "wires": [
            [
                "5eebb66e29e252f6"
            ]
        ]
    },
    {
        "id": "64d06b253783964a",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "1eb6d525c86c4977",
        "order": 11,
        "width": 12,
        "height": 2,
        "name": "extra text",
        "label": "Note: <br>If the model information is 'unknown', this means the heishamon firmware does not recognize the model (yet). It doesn't have any impact on the functionality. It is only for information purpose.",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 2560,
        "y": 1760,
        "wires": []
    },
    {
        "id": "281a5e0dca0e33dc",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 1365,
        "y": 100,
        "wires": [
            [
                "d9a7bffb1a15426e",
                "a26b41289a59dba3",
                "a45a6b8b1ac4b46d",
                "b203a1c024a72593",
                "34397163757fd58b",
                "7c74fd1faa32c81d",
                "de0e892a0157baca",
                "05d3e85b3963e4e2",
                "6db2abfba9e25737",
                "7f6107d49ab83c40",
                "22afde8747ce6ca0",
                "0897b055d53c8a84",
                "afa82ddd168a4ea4",
                "58ee259d850d95ac",
                "332fb342687e1121",
                "50f5134fb3ba9e38",
                "119d9c04e028ad98",
                "13b0a160e7f2d0a0",
                "8e9f91dd021c2ccd",
                "d9cbcc885d31c1fd",
                "00660af047d90d84",
                "fb1ef412a32707e7",
                "849755bc336c0289"
            ]
        ]
    },
    {
        "id": "e4d3b74c7c050a7d",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 155,
        "y": 60,
        "wires": [
            [
                "8c2afa46f759d9cd"
            ]
        ]
    },
    {
        "id": "a1d3737a5a110aa9",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "link in from on_change_GUI Z1",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 3045,
        "y": 300,
        "wires": [
            [
                "187c584c21359a3e",
                "ecf47b4f156ae616"
            ]
        ]
    },
    {
        "id": "2cf43683279df520",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 3795,
        "y": 1940,
        "wires": [
            [
                "296d72c4856363ff"
            ]
        ]
    },
    {
        "id": "b09ae278b516c328",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "x": 3770,
        "y": 2020,
        "wires": [
            [
                "296d72c4856363ff"
            ]
        ]
    },
    {
        "id": "e77ae78af76db973",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link in from on_change_GUI Z1",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 3075,
        "y": 880,
        "wires": [
            [
                "48ac4170551d07e2"
            ]
        ]
    },
    {
        "id": "838a27801d1da2db",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 3795,
        "y": 1980,
        "wires": [
            [
                "296d72c4856363ff"
            ]
        ]
    },
    {
        "id": "5c8427c809a8f68f",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "47b08c1184b335ce",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 3705,
        "y": 2860,
        "wires": [
            [
                "0c5c291dfef49206"
            ]
        ]
    },
    {
        "id": "e3cf888e2774fce3",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 3725,
        "y": 3360,
        "wires": [
            [
                "d080747c531f1376"
            ]
        ]
    },
    {
        "id": "7f2afa931336f755",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 650,
        "y": 2340,
        "wires": [
            [
                "9802bf01ebf45d28"
            ]
        ]
    },
    {
        "id": "c76df998b7cb23d3",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 650,
        "y": 2460,
        "wires": [
            [
                "9789265573ab4c80"
            ]
        ]
    },
    {
        "id": "063fe3316395a6c4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Filter+",
        "func": "// to SET13 (PIN1)\n// to GUI (PIN2)\n// to trigger Scheduler (PIN3)\nif (msg.topic == \"Sterilization\") {       // to set13\n    return [msg,msg,null];\n}\nif (msg.topic == \"Toggle\") {       // to trigger through scheduler\n    return [null,msg,msg];\n} ",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2070,
        "y": 1100,
        "wires": [
            [
                "7cfe771e9583a82d"
            ],
            [
                "ccb9e79ff06190fa",
                "6591faa63b1b0351"
            ],
            [
                "0a683587ca4fc25c"
            ]
        ],
        "outputLabels": [
            "to SET13 (PIN1)",
            "to GUI (PIN2)",
            "to Scheduler (PIN3)"
        ]
    },
    {
        "id": "6591faa63b1b0351",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 56",
        "mode": "link",
        "links": [
            "4982424c661376ea"
        ],
        "x": 2225,
        "y": 1100,
        "wires": []
    },
    {
        "id": "24b17d7139dc31a7",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 57",
        "mode": "link",
        "links": [
            "4982424c661376ea"
        ],
        "x": 1625,
        "y": 1120,
        "wires": []
    },
    {
        "id": "e498876c6a66fb4c",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "4e9e24cca215ad4d",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "DHW current temperature",
        "label": "Current temperature",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 910,
        "y": 380,
        "wires": []
    },
    {
        "id": "de12a1bd6b72fc0a",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "group": "4e9e24cca215ad4d",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "Sterilization (SP)",
        "label": "Sterilization setpoint",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 890,
        "y": 320,
        "wires": []
    },
    {
        "id": "7f44b9272e731114",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "link out 58",
        "mode": "link",
        "links": [
            "56131f5116b20fba"
        ],
        "x": 365,
        "y": 140,
        "wires": []
    },
    {
        "id": "3e5558127fc3402a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 55",
        "links": [
            "3d3b432c844ba87e",
            "fb5aeb896e8acc76"
        ],
        "x": 1845,
        "y": 880,
        "wires": [
            [
                "cd39dd6db4d4cbf2"
            ]
        ]
    },
    {
        "id": "70f71351c6facb1b",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "7c41aa629fb3859e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 340,
        "y": 60,
        "wires": [
            [
                "8c2afa46f759d9cd"
            ]
        ]
    },
    {
        "id": "9164f892e385d90c",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "group": "fea7672db2f050c9",
        "order": 3,
        "width": 4,
        "height": 1,
        "name": "Reset current error",
        "label": "Reset current error",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2090,
        "y": 1600,
        "wires": []
    },
    {
        "id": "e9fc5e9327936cd3",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "RESET",
        "group": "fea7672db2f050c9",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "RESET",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 2300,
        "y": 1600,
        "wires": [
            [
                "821bfc4baa75c406"
            ]
        ]
    },
    {
        "id": "30bdc6940be044bf",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "name": "Line 7x1 Status",
        "order": 12,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n\t<left>Automation status</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3680,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "a695685930d2097e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "ef3dbc543ae92bec",
        "order": 13,
        "width": 7,
        "height": 1,
        "name": "Status",
        "label": "{{msg.payload}}",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3870,
        "y": 1600,
        "wires": []
    },
    {
        "id": "d9b3ca8bfaa4c10a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link in 57 z1",
        "links": [
            "317942154b6d1cb3",
            "346a3528a7770803",
            "47cb7500b0321fc1",
            "49ebac0412d87642",
            "92b636a9597d91b2",
            "c6801a6c865543b3",
            "e62a354ce682ea6f",
            "f217f942f56cbfa9",
            "fab44b5501eca10e"
        ],
        "x": 3345,
        "y": 1780,
        "wires": [
            [
                "1728bf6be1141a5f"
            ]
        ]
    },
    {
        "id": "1728bf6be1141a5f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "automation status",
        "func": "var F_RTC = global.get('F_RTC',\"file\");\n\nif (F_RTC.automation_active === undefined) {\n    return null;    \n}\n\nlet msg1={};\nif (F_RTC.automation_active == 1) {msg1.payload = \"Action <font color = gold>TRIGGERED</font> - <font color = ''> waiting for Revert dT</font>\";}\nif (F_RTC.automation_active == 0) {msg1.payload = \"Action PENDING - waiting for Trigger dT\";}\nif (F_RTC.automation_power_state == 0 && F_RTC.automation_OM_state == 0) {msg1.payload = \"\";}\n\nreturn msg1\n\n\n// <font color= gold > {{msg.payload}} °C</font>",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3690,
        "y": 1600,
        "wires": [
            [
                "a695685930d2097e"
            ]
        ]
    },
    {
        "id": "e969a884012a60e7",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Check",
        "func": "var stored_value = flow.get(\"persistency_test\",\"file\");\nlet msg99={};   msg99.topic = \"SYSTEM\";\n\nif (stored_value !== undefined) {\n    msg99.payload = \"Persistent storage: <font color=green>OK</font>\";\n    flow.set(\"persistency_test\", undefined,\"file\");\n    flow.set(\"persistency_test\", undefined);\n    return msg99;\n}\n\nelse {\n    msg99.payload = \"Persistent storage: <font color=red>WARNING</font> - Persistent storage not configured correctly\";\n    flow.set(\"persistency_test\", undefined);\n    return msg99;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1830,
        "y": 2680,
        "wires": [
            [
                "9a7dda15052b4034"
            ]
        ]
    },
    {
        "id": "997453c0771acfc3",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1735,
        "y": 2680,
        "wires": [
            [
                "e969a884012a60e7"
            ]
        ],
        "l": false
    },
    {
        "id": "e5c16c1442eeb1cc",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "8",
        "topic": "",
        "payload": "check_heating_mode",
        "payloadType": "str",
        "x": 1540,
        "y": 2860,
        "wires": [
            [
                "a7d4b11b9c045f95"
            ]
        ]
    },
    {
        "id": "6bb32dd02ad372d4",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "Softstart togle on/off",
        "links": [
            "029c63457cab9dc0",
            "8e8c5440b14adc8f"
        ],
        "x": 4095,
        "y": 1900,
        "wires": [
            [
                "7790b731fd9a1374"
            ]
        ]
    },
    {
        "id": "354635fe353183fd",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "bf4af523ba16d457",
        "order": 4,
        "width": 6,
        "height": 1,
        "name": "Valve position",
        "label": "Valve position",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 980,
        "y": 1440,
        "wires": []
    },
    {
        "id": "cb7bd45634ebfb62",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "function 39",
        "func": "var msg1={};\nvar value;  // empty\n\nif (msg.topic == 'TOP20_ThreeWay_Valve_State') {\n    value = msg.payload;\n}\n\nif (msg.topic != 'TOP20_ThreeWay_Valve_State') {\n    value = global.get(\"TOP20_ThreeWay_Valve_State\");\n}\n\nif (value === undefined) { return null }\n\nif (value == 0) { value = 'Room' }\nif (value == 1) { value = 'DHW' }\n\nmsg1.payload = value;\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1440,
        "wires": [
            [
                "354635fe353183fd"
            ]
        ]
    },
    {
        "id": "ea31d112c91c0da9",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "name": "link in 66",
        "links": [
            "aec0cb2b18e02d8b",
            "47cb7500b0321fc1",
            "49ebac0412d87642"
        ],
        "x": 155,
        "y": 1440,
        "wires": [
            [
                "cb7bd45634ebfb62"
            ]
        ]
    },
    {
        "id": "e3b0d458cec07c21",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4700,
        "y": 2420,
        "wires": [
            [
                "2b065128513763fa"
            ]
        ]
    },
    {
        "id": "349683fa690f91a3",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 3830,
        "y": 2420,
        "wires": [
            [
                "0899698bb588f911"
            ]
        ]
    },
    {
        "id": "534ceb039d7f9812",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link in 70 Z1",
        "links": [
            "709cfb96bfb224ce"
        ],
        "x": 3165,
        "y": 1220,
        "wires": [
            [
                "6b9a0352c4460ae5"
            ]
        ]
    },
    {
        "id": "65ea8cc832ad6d50",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "023e106e50b945f6",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4760,
        "y": 1500,
        "wires": [
            [
                "72bcb750dc791f05"
            ]
        ]
    },
    {
        "id": "0899698bb588f911",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "ffa1f23278378e79",
        "name": "block",
        "func": "//\n// If compressor is off, do not listen to every input and do not show frequent data points on chart.\n\n// if (global.get('compressor_frequency', \"file\") == 0) { return null; }\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4010,
        "y": 2420,
        "wires": [
            [
                "3578d6b18ceb5727"
            ]
        ]
    },
    {
        "id": "f8cd2e5c468286a5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "FWD",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3255,
        "y": 1480,
        "wires": [
            [
                "f8d7e53aed62cd14",
                "7d582005c7d66f28"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "2d1a9fcd35c50c2a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "FWD",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3255,
        "y": 1540,
        "wires": [
            [
                "6efc9729afea79a2",
                "7d582005c7d66f28"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "280f1a6cbf825ee2",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "3151681b2157872c",
        "group": "26d9e6cf24507b4f",
        "name": "Line - Zone 2",
        "order": 11,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Zone 2</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1350,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "ab935ff6cc1d4377",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Z2-COOL Setpoint",
        "label": "Setpoint Zone 2",
        "tooltip": "",
        "group": "273f74f363a57507",
        "order": 4,
        "width": 6,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "z2_cool_setpoint",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "5",
        "max": "20",
        "step": 1,
        "className": "",
        "x": 1770,
        "y": 1980,
        "wires": [
            [
                "3abff96efac6ca31"
            ]
        ]
    },
    {
        "id": "e137742b346ad008",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 73",
        "links": [
            "3b192c4fedabf0f7"
        ],
        "x": 1465,
        "y": 1980,
        "wires": [
            [
                "ab935ff6cc1d4377"
            ]
        ]
    },
    {
        "id": "3abff96efac6ca31",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2370,
        "y": 1980,
        "wires": [
            [
                "2e4bb9c8148947e6"
            ],
            [
                "d233c56ec779154b"
            ]
        ]
    },
    {
        "id": "d233c56ec779154b",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2465,
        "y": 1980,
        "wires": []
    },
    {
        "id": "6b9a0352c4460ae5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "set topic",
        "func": "msg.topic = 'z1.setpoint';\nmsg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3215,
        "y": 1220,
        "wires": [
            [
                "1b8f5447c498c1d6",
                "11c68fc0d3095541"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "9a9be8259411b188",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP111 - Z1_Sensor_Settings",
        "topic": "panasonic_heat_pump/main/Z1_Sensor_Settings",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1940,
        "y": 3540,
        "wires": [
            [
                "53f65661269a8316",
                "4b58e0b897c474db"
            ]
        ]
    },
    {
        "id": "53f65661269a8316",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "set.TOP111_Z1_Sensor_Settings",
        "func": "let msg1 = {};\n    msg1.topic = 'SYSTEM';\nlet msg2 = {}; // to Dashboard System HW information\n\nvar TOP94_Zones_State = global.get('TOP94_Zones_State',\"file\")\n\nswitch (msg.payload) {\n    case 0:\n        msg1.payload = \"Heatpump zone 1 is set to controle water temperature\";\n        msg2.payload = \"Water temperature\";\n        break;\n    case 1:\n        msg1.payload = \"Heatpump zone 1 is controlled by thermostat (external)\";\n        msg2.payload = \"Thermostat (external)\";\n        break;\n    case 2:\n        msg1.payload = \"Heatpump zone 1 is controlled by thermostat (internal)\";\n        msg2.payload = \"Thermostat (internal)\";\n        break;\n    case 3:\n        msg1.payload = \"Heatpump zone 1 is controlled by roomsensor\";\n        msg2.payload = \"Room sensor\";\n}\n\nif (TOP94_Zones_State == 0 || TOP94_Zones_State == 2)   {msg2.enabled = true;}\nif (TOP94_Zones_State == 1)                             {msg2.enabled = false;}\n\nnode.send([msg1, null, msg2]);\n\nvar TOP111_Z1_Sensor_Settings = global.get('TOP111_Z1_Sensor_Settings', \"file\");\nif (msg.payload !== TOP111_Z1_Sensor_Settings) {\n    let msg2 = {};\n    msg2.payload = 'check_top111';\n    global.set('TOP111_Z1_Sensor_Settings', msg.payload, \"file\");\n    node.send([null, msg2, null]);\n}\n\n\n\n//TOP94_Zones_State\n//msg.enabled = true;",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 3540,
        "wires": [
            [
                "14bf5034dffa27d5"
            ],
            [
                "8987f5b6cd22b0be"
            ],
            [
                "f26b77294a794d45",
                "502ce1eab4851dc5"
            ]
        ],
        "outputLabels": [
            "to log",
            "trigger calculation",
            ""
        ]
    },
    {
        "id": "ae3b104ec8689934",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "function 88",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3645,
        "y": 80,
        "wires": [
            [
                "8329aedf9204b75d"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "8987f5b6cd22b0be",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "check limits GUI",
        "mode": "link",
        "links": [
            "3f0803a3a230aca2"
        ],
        "x": 2655,
        "y": 3540,
        "wires": []
    },
    {
        "id": "14bf5034dffa27d5",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2690,
        "y": 3500,
        "wires": [
            [
                "a4c25442b9ae52a6"
            ]
        ]
    },
    {
        "id": "f700767045104b75",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "2",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 3700,
        "y": 140,
        "wires": [
            [
                "9535722dad6d0995"
            ]
        ]
    },
    {
        "id": "d77ae32f90417f20",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP15 - panasonic_heat_pump/main/Heat_Power_Production",
        "topic": "panasonic_heat_pump/main/Heat_Power_Production",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 300,
        "y": 1580,
        "wires": [
            [
                "e7d39d4073a87d3c"
            ]
        ]
    },
    {
        "id": "6fb3c122147f795e",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP40 - panasonic_heat_pump/main/DHW_Power_Production",
        "topic": "panasonic_heat_pump/main/DHW_Power_Production",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 290,
        "y": 1680,
        "wires": [
            [
                "14789bda2966231c"
            ]
        ]
    },
    {
        "id": "b167f12e02c63359",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4040,
        "y": 240,
        "wires": [
            [
                "187c584c21359a3e"
            ]
        ]
    },
    {
        "id": "82a387f8895ef8f6",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "function 91",
        "func": "if (msg.payload == 1) { \n    msg.payload = 'check_heating_mode' ;\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3850,
        "y": 240,
        "wires": [
            [
                "b167f12e02c63359"
            ]
        ]
    },
    {
        "id": "f26b77294a794d45",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 16,
        "width": 10,
        "height": 1,
        "name": "Zone 1 sensor",
        "label": "Zone 1 control method / sensor",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2720,
        "y": 3580,
        "wires": []
    },
    {
        "id": "989ffc21b6486309",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP112 - Z2_Sensor_Settings",
        "topic": "panasonic_heat_pump/main/Z2_Sensor_Settings",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1940,
        "y": 3680,
        "wires": [
            [
                "3716ea5ed2283e0d"
            ]
        ]
    },
    {
        "id": "3716ea5ed2283e0d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "set.TOP112_Z1_Sensor_Settings",
        "func": "let msg1 = {};\n    msg1.topic = 'SYSTEM';\nlet msg2 = {}; // to Dashboard System HW information\n\nvar TOP94_Zones_State = global.get('TOP94_Zones_State',\"file\")\n\nswitch (msg.payload) {\n    case 0:\n        msg1.payload = \"Heatpump zone 2 is set to controle water temperature\";\n        msg2.payload = \"Water temperature\";\n        break;\n    case 1:\n        msg1.payload = \"Heatpump zone 2 is controlled by thermostat (external)\";\n        msg2.payload = \"Thermostat (external)\";\n        break;\n    case 2:\n        msg1.payload = \"Heatpump zone 2 is controlled by thermostat (internal)\";\n        msg2.payload = \"Thermostat (internal)\";\n        break;\n    case 3:\n        msg1.payload = \"Heatpump zone 2 is controlled by roomsensor\";\n        msg2.payload = \"Room sensor\";\n}\n\nif (TOP94_Zones_State == 1 || TOP94_Zones_State == 2)   {msg2.enabled = true;}\nif (TOP94_Zones_State == 0)                             {msg2.enabled = false;}\n\nnode.send([msg1, null, msg2]);\n\nvar TOP112_Z2_Sensor_Settings = global.get('TOP112_Z2_Sensor_Settings', \"file\");\nif (msg.payload !== TOP112_Z2_Sensor_Settings) {\n    let msg2 = {};\n    msg2.payload = 'check_top112';\n    global.set('TOP112_Z2_Sensor_Settings', msg.payload, \"file\");\n    node.send([null, msg2, null]);\n}",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 3680,
        "wires": [
            [
                "cd62b15a689efa7f"
            ],
            [],
            [
                "24d85445d68c3771"
            ]
        ],
        "outputLabels": [
            "to log",
            "trigger calculation",
            ""
        ]
    },
    {
        "id": "24d85445d68c3771",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 18,
        "width": 10,
        "height": 1,
        "name": "Zone 2 sensor",
        "label": "Zone 2 control method / sensor",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2720,
        "y": 3700,
        "wires": []
    },
    {
        "id": "cd62b15a689efa7f",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2690,
        "y": 3660,
        "wires": [
            [
                "a4c25442b9ae52a6"
            ]
        ]
    },
    {
        "id": "a4c25442b9ae52a6",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "toLog",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 2915,
        "y": 3660,
        "wires": []
    },
    {
        "id": "2009b8f539852f90",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "Startup trigger",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2100,
        "y": 3840,
        "wires": [
            [
                "f6504757ef5384ae"
            ]
        ]
    },
    {
        "id": "f6504757ef5384ae",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "op1": "",
        "op2": "PING",
        "op1type": "nul",
        "op2type": "str",
        "duration": "10",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "99",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2330,
        "y": 3820,
        "wires": [
            [
                "0ea63ebb2e6afe2b"
            ]
        ]
    },
    {
        "id": "502ce1eab4851dc5",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "99",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2130,
        "y": 3800,
        "wires": [
            [
                "f6504757ef5384ae"
            ]
        ]
    },
    {
        "id": "0ea63ebb2e6afe2b",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "function 92",
        "func": "if (msg.payload == \"PING\") {\nlet msg1={};\nlet msg2={};\nmsg1.topic = \"SYSTEM\";\n    msg1.payload = \"Warning - The heishamon firmware seems to be lower than 3.1. <br>****************<br>This NodeRed flow will not function correctly because of this. <br> Please update the heishamon firmware to 3.1 or higher.<br>See: https://github.com/Egyras/HeishaMon/tree/master/binaries<br>****************<br>\";\n\nmsg2.payload = \"GUI\";\nmsg2.topic = \"\"\nreturn [msg1,msg2];\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2570,
        "y": 3820,
        "wires": [
            [
                "fe400cf04a92e802",
                "a4c25442b9ae52a6"
            ],
            [
                "49f0d472527729fa"
            ]
        ]
    },
    {
        "id": "6a6ab2aa9b6e4348",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "ATTENTION",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2330,
        "y": 3860,
        "wires": []
    },
    {
        "id": "48519b6aabf7ba2b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "name": "Line",
        "order": 3,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2310,
        "y": 3900,
        "wires": [
            []
        ]
    },
    {
        "id": "28a530c283788d82",
        "type": "ui_dropdown",
        "z": "8c9d42231fd19d3c",
        "name": "Select your configuration",
        "label": "",
        "tooltip": "",
        "place": "Select Zone1 control",
        "group": "182f5ffccfef5c11",
        "order": 6,
        "width": 8,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Water Temperature",
                "value": 0,
                "type": "num"
            },
            {
                "label": "Thermostat (External)",
                "value": 1,
                "type": "num"
            },
            {
                "label": "Thermostat (Internal)",
                "value": 2,
                "type": "num"
            },
            {
                "label": "RoomSensor",
                "value": 3,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "TOP111",
        "topicType": "msg",
        "className": "",
        "x": 2370,
        "y": 3980,
        "wires": [
            [
                "55209d6cbc65b2d6"
            ]
        ]
    },
    {
        "id": "e866e9916737011e",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "name": "Text",
        "order": 14,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<left>\n    <b>WARNING:</b><br>\n    Since the flow has started, no value has been received from mqtt topic TOP111 (Z1_Sensor_Settings) for 10 minutes.<br>\n    Without this value, it is not possible for for the flow to operate correctly. As a result, no HEAT setpoint values will be sent to the heatpump.<br>\n    <br>\n    <b>Firmware:</b><br>\n    The reason for not receiving TOP111 values could be that the HeishaMon firmware is lower than version 3.1.<br>\n    Considder checking and updating your heishamon firmware. Here is a collection of the latest firmware versions: <br>\n    https://github.com/Egyras/HeishaMon/tree/master/binaries <br>\n    <br>\n    <b>Set TOP111 manually:</b><br>\n    In the dropdown you can manually set the required value for TOP111. <br>In the Panasonic wallmounted controller, under [System settings] > [Zone & Control], you have configured the control method. The options are:<br>\n    - Water Temperature<br>\n    - Thermostat (External)<br>\n    - Thermostat (Internal)<br>\n    - Room Sensor)<br>\n<br>\n    The Zone 1 configuration in the wallmounted controller, needs to be selected in the above dropdown.<br><br>\n\n    <br>Note:<br><br>\n    - If you have set this value manually and after some time the TOP111 value IS received from HeishaMon, it will just correct and overwrite the manually set value. <br>\n    - If you do not have firmware 3.1 (or higher) you always need to keep the manually set value in sync with the value set in the wallmounted controller. <br>This should not a major issue, because this setting is most often: \"Set and forget\".<br>\n    - Once you have set this value manually, you should be able to see it under [System] > [Hardware] on the bottom.<br>\n    - Setting this value through the dashboard will NOT send any information to HeishaMon / Panasonic heatpump. It is used only within NodeRed.<br>\n    <br>\n    </left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2310,
        "y": 4060,
        "wires": [
            []
        ]
    },
    {
        "id": "69439e3f71d2d663",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "name": "Line",
        "order": 13,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2310,
        "y": 4020,
        "wires": [
            []
        ]
    },
    {
        "id": "4c329311799e7b15",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 4,
        "width": 10,
        "height": 1,
        "name": "",
        "label": "Please select your configuration (Z1_Sensor_Settings)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2460,
        "y": 3940,
        "wires": []
    },
    {
        "id": "11003a42d2f23cde",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 9,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2190,
        "y": 4000,
        "wires": []
    },
    {
        "id": "b8bc80edf59aca76",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 12,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2190,
        "y": 4020,
        "wires": []
    },
    {
        "id": "1c7826b17fddc2d0",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "182f5ffccfef5c11",
        "order": 11,
        "width": 2,
        "height": 1,
        "passthru": true,
        "label": "Close",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "SYSTEM",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 2310,
        "y": 4100,
        "wires": [
            [
                "49f0d472527729fa"
            ]
        ]
    },
    {
        "id": "6ccf501c07a5e992",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "1eb6d525c86c4977",
        "order": 17,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "SET",
        "tooltip": "Set manually",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "GUI",
        "payloadType": "str",
        "topic": "SET",
        "topicType": "msg",
        "x": 2310,
        "y": 4140,
        "wires": [
            [
                "49f0d472527729fa"
            ]
        ]
    },
    {
        "id": "0d82e5b55b8aa98f",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "disable",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2140,
        "y": 4140,
        "wires": [
            [
                "6ccf501c07a5e992"
            ]
        ]
    },
    {
        "id": "fe400cf04a92e802",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "enable",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "topic",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2130,
        "y": 4180,
        "wires": [
            [
                "6ccf501c07a5e992"
            ]
        ]
    },
    {
        "id": "12bfd50eec6db5d2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 10,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2190,
        "y": 3980,
        "wires": []
    },
    {
        "id": "37383d58efb94aa2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 8,
        "width": 10,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2190,
        "y": 3960,
        "wires": []
    },
    {
        "id": "8a6eb442e3de3fb6",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 5,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2190,
        "y": 4040,
        "wires": []
    },
    {
        "id": "6d3e2c899d358510",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "182f5ffccfef5c11",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2190,
        "y": 4060,
        "wires": []
    },
    {
        "id": "55209d6cbc65b2d6",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "Save variable",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::TOP111_Z1_Sensor_Settings",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2580,
        "y": 3980,
        "wires": [
            [
                "53f65661269a8316"
            ]
        ]
    },
    {
        "id": "4b58e0b897c474db",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "hour",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1890,
        "y": 4140,
        "wires": [
            [
                "0d82e5b55b8aa98f"
            ]
        ]
    },
    {
        "id": "49f0d472527729fa",
        "type": "ui_ui_control",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "events": "change",
        "x": 2500,
        "y": 4120,
        "wires": [
            []
        ]
    },
    {
        "id": "bb0d73c45b82afab",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "GUI",
        "payloadType": "str",
        "x": 1970,
        "y": 4000,
        "wires": [
            [
                "49f0d472527729fa"
            ]
        ]
    },
    {
        "id": "cc930ab5b67c257e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 6,
        "width": 2,
        "height": 1,
        "name": "Room",
        "label": "Difference",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3610,
        "y": 880,
        "wires": []
    },
    {
        "id": "a2afbd9244cceed5",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "group": "e27cfec311892d88",
        "order": 7,
        "width": 2,
        "height": 1,
        "name": "Water",
        "label": "Correction",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3730,
        "y": 880,
        "wires": []
    },
    {
        "id": "368bd104ea1ba4e6",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t1_correction",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 9,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t1_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "-0.2",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 920,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "922a3b1879d1a5ec",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t2_correction",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 11,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t2_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "-0.2",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 960,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "ae00df3cd05e6b06",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t3_correction",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 13,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t3_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "-0.1",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 1000,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "470ba61639a6ba2d",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t4_correction",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 19,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t4_correction",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0.1",
        "max": "5",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 1120,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "1b0dd0c926383896",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t5_correction",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 21,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t5_correction",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0.2",
        "max": "5",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 1160,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "ce9db55d9de18296",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "z1.t6_correction",
        "label": "",
        "tooltip": "",
        "group": "e27cfec311892d88",
        "order": 23,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z1.t6_correction",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0.3",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 3620,
        "y": 1200,
        "wires": [
            [
                "7d582005c7d66f28"
            ]
        ]
    },
    {
        "id": "cd39dd6db4d4cbf2",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "function 94",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1905,
        "y": 920,
        "wires": [
            [
                "092a9db0d9b923b3"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "3f6602042d2dc015",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "RTC Correction Z1",
        "mode": "link",
        "links": [],
        "x": 3985,
        "y": 1500,
        "wires": []
    },
    {
        "id": "5a3e1810b8f2135a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "SET10 - Force DHW",
        "links": [
            "56d4bfa341d3eded",
            "f15776a167c6b44a"
        ],
        "x": 2355,
        "y": 900,
        "wires": [
            [
                "7c74eef7b504ee67"
            ]
        ]
    },
    {
        "id": "e0c5ca5db0a7df5b",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "link out 96 Z1",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 3965,
        "y": 100,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "54724886189b074f",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - RTC state",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4170,
        "y": 900,
        "wires": [
            [
                "b44fceec58293e64"
            ]
        ]
    },
    {
        "id": "4ffcf5c7dbf32067",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "changetopic",
        "func": "if (msg.topic == 'z1.t1_limit') {msg.topic = 'NR - RTC limit 1';}\nif (msg.topic == 'z1.t2_limit') {msg.topic = 'NR - RTC limit 2';}\nif (msg.topic == 'z1.t3_limit') {msg.topic = 'NR - RTC limit 3';}\nif (msg.topic == 'z1.t4_limit') {msg.topic = 'NR - RTC limit 4';}\nif (msg.topic == 'z1.t5_limit') {msg.topic = 'NR - RTC limit 5';}\nif (msg.topic == 'z1.t6_limit') {msg.topic = 'NR - RTC limit 6';}\nif (msg.topic == 'z1.t7_limit') {msg.topic = 'NR - RTC limit 7';}\n\nif (msg.topic == 'z1.t1_correction') { msg.topic = 'NR - RTC correction 1'; }\nif (msg.topic == 'z1.t2_correction') { msg.topic = 'NR - RTC correction 2'; }\nif (msg.topic == 'z1.t3_correction') { msg.topic = 'NR - RTC correction 3'; }\nif (msg.topic == 'z1.t4_correction') { msg.topic = 'NR - RTC correction 4'; }\nif (msg.topic == 'z1.t5_correction') { msg.topic = 'NR - RTC correction 5'; }\nif (msg.topic == 'z1.t6_correction') { msg.topic = 'NR - RTC correction 6'; }\nif (msg.topic == 'z1.t7_correction_value') { msg.topic = 'NR - RTC correction 7'; }\n\n\n\nif (msg.topic == 'automation_power_state') { msg.topic = 'NR - RTC automation (Power) state'; }\nif (msg.topic == 'automation_OM_state') { msg.topic = 'NR - RTC automation (Operating Mode) state'; }\n\nif (msg.topic == 'automation_on_limit') { msg.topic = 'NR - RTC automation trigger limit'; }\nif (msg.topic == 'automation_off_limit') { msg.topic = 'NR - RTC automation revert limit'; }\n\n\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4170,
        "y": 980,
        "wires": [
            [
                "b44fceec58293e64"
            ]
        ]
    },
    {
        "id": "a7d4c9f19c358e4f",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "link out 99",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 4965,
        "y": 1960,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "adc15a17d080d791",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - SS state",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4750,
        "y": 1960,
        "wires": [
            [
                "a7d4c9f19c358e4f"
            ]
        ]
    },
    {
        "id": "0bf8dbceb8cf0c93",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "function 98",
        "func": "if (msg.topic == 'Correction_0_WAR_on_off') { msg.topic = 'NR - WAR state'; return msg; }\n\nif (msg.topic == 'F_CCC.z1.ot1') { msg.topic = 'NR - WAR Outside temperature 1'; return msg; }\nif (msg.topic == 'F_CCC.z1.ot2') { msg.topic = 'NR - WAR Outside temperature 2'; return msg; }\nif (msg.topic == 'F_CCC.z1.ot3') { msg.topic = 'NR - WAR Outside temperature 3'; return msg; }\nif (msg.topic == 'F_CCC.z1.wt1') { msg.topic = 'NR - WAR water temperature 1'; return msg; }\nif (msg.topic == 'F_CCC.z1.wt2') { msg.topic = 'NR - WAR water temperature 2'; return msg; }\nif (msg.topic == 'F_CCC.z1.wt3') { msg.topic = 'NR - WAR water temperature 3'; return msg; }\n\nif (msg.topic == 'z1_SP_DIRECT_virt') { msg.topic = 'NR - CCC Zone 1 manual water temperature / shift'; return msg; }",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3850,
        "y": 100,
        "wires": [
            [
                "e0c5ca5db0a7df5b"
            ]
        ]
    },
    {
        "id": "b15c419913e8770a",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - RTC Setpoint (Room)",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4170,
        "y": 940,
        "wires": [
            [
                "b44fceec58293e64"
            ]
        ]
    },
    {
        "id": "b44fceec58293e64",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "a8ac5b148d851a6b",
        "name": "link out 100 Z1",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 4285,
        "y": 940,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "9fda0aa836fde5a4",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "nul",
        "duration": "15",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 3850,
        "y": 60,
        "wires": [
            [
                "0bf8dbceb8cf0c93"
            ]
        ]
    },
    {
        "id": "aa53a0c487c666f0",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP15 - panasonic_heat_pump/extra/Heat_Power_Production_Extra",
        "topic": "panasonic_heat_pump/extra/Heat_Power_Production_Extra",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 280,
        "y": 1580,
        "wires": [
            [
                "e7d39d4073a87d3c"
            ]
        ]
    },
    {
        "id": "e7d39d4073a87d3c",
        "type": "switch",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 530,
        "y": 1540,
        "wires": [
            [
                "4b0bb57d44bd8bb1"
            ]
        ]
    },
    {
        "id": "bed822f215bd3ddf",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "TOP40 - panasonic_heat_pump/extra/DHW_Power_Production_Extra",
        "topic": "panasonic_heat_pump/extra/DHW_Power_Production_Extra",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 290,
        "y": 1680,
        "wires": [
            [
                "14789bda2966231c"
            ]
        ]
    },
    {
        "id": "14789bda2966231c",
        "type": "switch",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 530,
        "y": 1720,
        "wires": [
            [
                "b4d652a4c0313e8a"
            ]
        ]
    },
    {
        "id": "01809486b97e6f56",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 2060,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "861b9f982a76f569",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "TimeZone",
        "func": "var NodeRed = global.get('NodeRed',\"file\");\nif (NodeRed === undefined){ NodeRed = {} ;}\n\nvar TZ = NodeRed.TZ;\nif (TZ === undefined) { TZ = \"\";}\n\nmsg.outTz = TZ;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1960,
        "y": 2380,
        "wires": [
            [
                "46c5b8fae5c96441"
            ]
        ]
    },
    {
        "id": "1d13fdc79740ec03",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "TimeZone",
        "func": "var NodeRed = global.get('NodeRed',\"file\");\nif (NodeRed === undefined){ NodeRed = {} ;}\n\nvar TZ = NodeRed.TZ;\nif (TZ === undefined) { TZ = \"\";}\n\nmsg.outTz = TZ;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 2280,
        "wires": [
            [
                "a2d45addc303107f"
            ]
        ]
    },
    {
        "id": "fc86551753d1a7c1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": ">0",
        "func": "if (msg.payload > 0) { return msg; }\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 3120,
        "wires": [
            [
                "f5f7d3b912113a33"
            ]
        ]
    },
    {
        "id": "3b28d9bcf7da39c1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f1a34e3fea473398",
        "name": ">0",
        "func": "if (msg.payload > 0) { return msg; }\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 3220,
        "wires": [
            [
                "25a5987e8a1aaf9c"
            ]
        ]
    },
    {
        "id": "b9785129f166494d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Offline counter today",
        "func": "var offline_counter_today = global.get('MQTT.offline_counter_today', \"file\");\n\n\nif (offline_counter_today === undefined) {\n    global.set('MQTT.offline_counter_today', 0, \"file\");\n    offline_counter_today = 0;\n}\n\nif (msg.payload == 'Offline') {\n    offline_counter_today = offline_counter_today + 1;\n    global.set('MQTT.offline_counter_today', offline_counter_today, \"file\");\n    msg.payload = offline_counter_today;\n    msg.topic = 'offline_counter_today'\n    return msg;\n}\n\nif (msg.payload == 'reset') {\n    var msg99 = {}                                                                  // set msg99 for logs\n    msg99.topic = 'SYSTEM';\n    msg99.payload = \"Total amount of offline messages today: \" + offline_counter_today;\n   \n    offline_counter_today = 0;                                                      // reset action\n    global.set('MQTT.offline_counter_today', offline_counter_today, \"file\");        // save reset action\n    msg.payload = offline_counter_today;\n    node.send([msg, msg99]);                                                        // send new value and log entry\n}\n\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1720,
        "y": 2540,
        "wires": [
            [],
            [
                "861b9f982a76f569"
            ]
        ],
        "outputLabels": [
            "incremental counter output",
            "msg to log during reset"
        ]
    },
    {
        "id": "8956cbf4c5618de8",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "reset",
        "payloadType": "str",
        "x": 1350,
        "y": 2540,
        "wires": [
            [
                "b9785129f166494d"
            ]
        ]
    },
    {
        "id": "59880adf86aa8db5",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Inject Offline",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Offline",
        "payloadType": "str",
        "x": 1370,
        "y": 2580,
        "wires": [
            [
                "b9785129f166494d"
            ]
        ]
    },
    {
        "id": "b8bcc572150cf1d4",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "panasonic_heat_pump/main/Error",
        "mode": "link",
        "links": [
            "63680817e29852bf"
        ],
        "x": 1685,
        "y": 1640,
        "wires": []
    },
    {
        "id": "12df328367013dd2",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "panasonic_heat_pump/commands/#",
        "mode": "link",
        "links": [
            "b65cbaafba3a948a",
            "7e328f6ed77430b5"
        ],
        "x": 1610,
        "y": 2480,
        "wires": [],
        "l": true
    },
    {
        "id": "b9a90bcc4b056db7",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "panasonic_heat_pump/main/Operations_Hours",
        "mode": "link",
        "links": [
            "5018105cf5b6fcf8"
        ],
        "x": 2585,
        "y": 3300,
        "wires": []
    },
    {
        "id": "6b27da6efcb59131",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "panasonic_heat_pump/main/Operations_Counter",
        "mode": "link",
        "links": [
            "c5514adad11b8217"
        ],
        "x": 2585,
        "y": 3340,
        "wires": []
    },
    {
        "id": "e1e13ac69b0ed0d6",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP115 - panasonic_heat_pump/main/Water_Pressure",
        "topic": "panasonic_heat_pump/main/Water_Pressure",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 2020,
        "y": 3440,
        "wires": [
            [
                "a22a26d5285e63e4"
            ]
        ]
    },
    {
        "id": "0f584d26d170ef5e",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 12,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Water pressure (bar)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2740,
        "y": 3440,
        "wires": []
    },
    {
        "id": "45fc74dd150cc9e5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "5ab5ca67951ca4de",
        "name": "DHW/HEAT setpoint",
        "func": "var TOP9_DHW_Target_Temp = global.get(\"TOP9_DHW_Target_Temp\",\"file\");\nvar TOP7_Main_Target_Temp = global.get(\"TOP7_Main_Target_Temp\");\nvar TOP20_ThreeWay_Valve_State = global.get(\"TOP20_ThreeWay_Valve_State\");\nvar msg1={};\n\nif (TOP20_ThreeWay_Valve_State === undefined)   { return null; }\n\nif (TOP20_ThreeWay_Valve_State == 0){  // HEAT\n    if (TOP7_Main_Target_Temp === undefined)    { return null; } \n    msg1.payload = TOP7_Main_Target_Temp;\n    return msg1;\n}\nif (TOP20_ThreeWay_Valve_State == 1) { // DHW\n    if (TOP9_DHW_Target_Temp === undefined)    { return null; } \n    msg1.payload = TOP9_DHW_Target_Temp;\n    return msg1;\n\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 600,
        "wires": [
            [
                "521e419dae5882e7"
            ]
        ]
    },
    {
        "id": "a22a26d5285e63e4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "-0,02 > n/a",
        "func": "if (msg.payload == -0.02) {msg.payload = 'n/a';}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2510,
        "y": 3440,
        "wires": [
            [
                "0f584d26d170ef5e"
            ]
        ]
    },
    {
        "id": "1fcb5929aa984ced",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "function 111",
        "func": "var varLastValue = context.get('LastValue');\nif (varLastValue != msg.payload) {\n    msg.rate = 0;\n    context.set('LastValue',msg.payload);\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1960,
        "wires": [
            [
                "6d77bc12fe8024ee"
            ]
        ]
    },
    {
        "id": "51306cbfdaec2dc2",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 85",
        "links": [
            "6df1fb31e6665cd4"
        ],
        "x": 2295,
        "y": 1060,
        "wires": [
            [
                "a20fe452e34c26f2"
            ]
        ]
    },
    {
        "id": "3c2858cfac17c240",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "group": "e374621a9f5ac0d6",
        "name": "Line2",
        "order": 6,
        "width": 26,
        "height": 1,
        "format": "<head>\n    <hr style=\"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\" ;>\n\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 830,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "2093edece5e11445",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "group": "e374621a9f5ac0d6",
        "name": "Line3",
        "order": 8,
        "width": 26,
        "height": 1,
        "format": "<head>\n    <hr style=\"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\" ;>\n\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 830,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "cb32ff75cb09ea95",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 18,
        "width": 2,
        "height": 1,
        "name": "Internal heater",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 960,
        "y": 1100,
        "wires": []
    },
    {
        "id": "b98f96fc98434fef",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "link in 87",
        "links": [
            "cc43490e0d963df0"
        ],
        "x": 195,
        "y": 1100,
        "wires": [
            [
                "76b462d26dcde630"
            ]
        ]
    },
    {
        "id": "76b462d26dcde630",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Convert topic/style",
        "func": "if (msg.payload == 0) {\n    msg.color = \"\";\n    msg.payload = \"Inactive\";\n    msg.enabled = false;\n    return msg\n}\nif (msg.payload == 1) {\n    msg.color = \"gold\";\n    msg.payload = \"Active\";\n    msg.enabled = true;\n    return msg\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1100,
        "wires": [
            [
                "cb32ff75cb09ea95"
            ]
        ]
    },
    {
        "id": "dd42ff7.cd1438",
        "type": "http request",
        "z": "8c9d42231fd19d3c",
        "name": "Get single flow",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/flow/{{flowId}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1260,
        "y": 3660,
        "wires": [
            [
                "6e4f731e.abe73c"
            ]
        ]
    },
    {
        "id": "6e4f731e.abe73c",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.disabled",
                "pt": "msg",
                "to": "flowStatus",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1470,
        "y": 3660,
        "wires": [
            [
                "c7dc25cd.221b18"
            ]
        ]
    },
    {
        "id": "5f57da6d.0f5b64",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "flowStatus",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 3660,
        "wires": [
            [
                "c435d2e3.28e67"
            ]
        ]
    },
    {
        "id": "c7dc25cd.221b18",
        "type": "http request",
        "z": "8c9d42231fd19d3c",
        "name": "Update flow",
        "method": "PUT",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/flow/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1690,
        "y": 3660,
        "wires": [
            []
        ]
    },
    {
        "id": "c435d2e3.28e67",
        "type": "http request",
        "z": "8c9d42231fd19d3c",
        "name": "Get flows",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:1880/flows",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 840,
        "y": 3660,
        "wires": [
            [
                "13d6bb95.3ba83c"
            ]
        ]
    },
    {
        "id": "13d6bb95.3ba83c",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "get flowId by name",
        "rules": [
            {
                "t": "set",
                "p": "flowId",
                "pt": "msg",
                "to": "*[type = 'tab' and label = $$.topic].id",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 3660,
        "wires": [
            [
                "dd42ff7.cd1438"
            ]
        ]
    },
    {
        "id": "56008fd8.ad753",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "name": "This will enable or disable a flow (tab)  The topic should be the flow name.",
        "info": "",
        "x": 320,
        "y": 3600,
        "wires": []
    },
    {
        "id": "7bcfd22b.9aa0b4",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "name": "Enable flow / payload false",
        "info": "",
        "x": 270,
        "y": 3720,
        "wires": []
    },
    {
        "id": "3145edc5.e295d2",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "name": "Disable flow / payload true",
        "info": "",
        "x": 270,
        "y": 3640,
        "wires": []
    },
    {
        "id": "a527ca2d2edacd9c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "PASS",
        "func": "/* \n------------------------------------------\nList of topics / tabs to be able to disable\n------------------------------------------\n  NAME : Location : Dashboard type\n- GUI_01 : Home>Heatpump : Indicator for active/inactive for External Heater\n- GUI_02 : Home>Heatpump : Fan 2 indicator\n\n*/\n\n//**************************************************\n//\n// if msg.hide = 'true', the node(s) need to be hidden. Which means the payload 'true' needs to be send to msg1\n// if msg.hide = 'false', the node(s) need to be shown. Which means the payload 'false' needs to be send to msg1\n//\n// First part; Catch incorrect topics. If the topic does not match the expected topics, return null. Otherwise continue. \n\n\nvar pass = false;\nvar msg99={};\nmsg99.topic = 'SYSTEM'\nif (msg.topic == 'GUI_01')          { pass = true ; msg99.payload = 'External Heater' ; }\nif (msg.topic == 'GUI_02')          { pass = true ; msg99.payload = 'Fan 2' ; }\nif (msg.topic == 'GUI_FAN_1')       { pass = true ; }\n\nif (pass === false) { return null }\n\n// Second part; hiding or showing the node(s) depending on the value of msg.hide. \n\n\nlet msg1={};\nmsg1.topic = msg.topic;\n\n//To the actual switching\nif (msg.hide === true) {\n    msg1.payload = true;\n    msg99.payload = 'Did not find ' + msg99.payload + ' - Removed from the dashboard'\n    return [msg1,msg99]\n}\n\nif (msg.hide === false) {\n    msg1.payload = false;\n  msg99.payload = 'Found ' + msg99.payload + ' - Added to the dashboard'\n    return [msg1, msg99]\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 3680,
        "wires": [
            [
                "5f57da6d.0f5b64"
            ],
            [
                "e1119d6b8e83a3a5"
            ]
        ],
        "outputLabels": [
            "pass",
            "ToLog"
        ]
    },
    {
        "id": "8a5ea7601f2f55ce",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "name": "GUI Disable Flows",
        "links": [
            "2e6f993342584047",
            "845d04d2e0ef3df8"
        ],
        "x": 250,
        "y": 3680,
        "wires": [
            [
                "a527ca2d2edacd9c"
            ]
        ],
        "l": true
    },
    {
        "id": "e1119d6b8e83a3a5",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 127",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 575,
        "y": 3700,
        "wires": []
    },
    {
        "id": "2e6f993342584047",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "link out 128",
        "mode": "link",
        "links": [
            "8a5ea7601f2f55ce"
        ],
        "x": 1045,
        "y": 1060,
        "wires": []
    },
    {
        "id": "60d36489df57e2d2",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "Convert topic/style",
        "func": "/*\n\nDisable flow to hide the node(s) by sending msg.hide = true\nEnable flow  to show the node(s) by sending msg.hide = false\n\nIf panasonic.hide_fan2 is undefined , hide the node with fan2 (msg.hide = true)\nIf panasonic.hide_fan2 is true, but a value does come in, show the node with fan 2 again (msg.hide = false)\n\n*/\n\nvar hide_fan2 = global.get('panasonic.hide_fan2',\"file\");\n\nif (hide_fan2 === undefined) {\n    global.set('panasonic.hide_fan2', true, \"file\");\n    let msg1={};\n    msg1.hide = true; // send the payload to hide the FAN2 node.\n    msg1.topic = 'GUI_02';\n    node.send([null,msg1])\n}\n\n\nif (hide_fan2 === true && msg.payload >= 1) {\n    global.set('panasonic.hide_fan2',false,\"file\");\n    let msg1={};\n    msg1.hide = false; // send the payload to hide the FAN2 node.\n    msg1.topic = 'GUI_02';\n    node.send([null,msg1])\n}\n\nreturn [msg,null];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1040,
        "wires": [
            [
                "913a3d6738a936b8"
            ],
            [
                "2e6f993342584047"
            ]
        ],
        "outputLabels": [
            "to GUI",
            "to hide/show logic"
        ]
    },
    {
        "id": "913a3d6738a936b8",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "link out 129",
        "mode": "link",
        "links": [
            "37418044a7a76657"
        ],
        "x": 1045,
        "y": 1020,
        "wires": []
    },
    {
        "id": "3ae265eeaed19245",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2460,
        "y": 160,
        "wires": [
            [
                "aad17e70a817393e"
            ]
        ]
    },
    {
        "id": "f32d55a2bec5c9da",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "Reset graph",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 2560,
        "wires": [
            [
                "fc9d3c6d1d996d3b"
            ]
        ]
    },
    {
        "id": "fc9d3c6d1d996d3b",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "Update me",
        "func": "var update_chart_01 = global.get('update_chart_01',\"file\")\n\nif (update_chart_01 === undefined || update_chart_01 < 2) { // 2025-03-14: delete history of the charts in order to create new titles in the chard (From Dutch > English)\n    global.set('update_chart_01',2,\"file\")\n    let msg1={};\n    msg1.payload = [];\n    return msg1;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 2560,
        "wires": [
            [
                "4c90346f4b405676"
            ]
        ]
    },
    {
        "id": "4c90346f4b405676",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 131",
        "mode": "link",
        "links": [
            "25210cce780a4996",
            "dcbd136bd82a4d21"
        ],
        "x": 555,
        "y": 2560,
        "wires": []
    },
    {
        "id": "25210cce780a4996",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "link in 91",
        "links": [
            "4c90346f4b405676"
        ],
        "x": 905,
        "y": 2080,
        "wires": [
            [
                "1cbdb190d6f52cb6"
            ]
        ]
    },
    {
        "id": "dcbd136bd82a4d21",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "link in 92",
        "links": [
            "4c90346f4b405676"
        ],
        "x": 485,
        "y": 2320,
        "wires": [
            [
                "8cb1aceef81045bd",
                "9802bf01ebf45d28",
                "9789265573ab4c80"
            ]
        ]
    },
    {
        "id": "13f0a9873929b3aa",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "Heater (Internal)",
        "links": [
            "cc43490e0d963df0"
        ],
        "x": 340,
        "y": 1800,
        "wires": [
            [
                "c3ef05a0c221ab0c"
            ]
        ],
        "l": true
    },
    {
        "id": "6a440038dc115f96",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Heater (Internal)",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1800,
        "wires": [
            [
                "fa2eba3089ca0ef4"
            ]
        ]
    },
    {
        "id": "c3ef05a0c221ab0c",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1800,
        "wires": [
            [
                "6a440038dc115f96"
            ]
        ]
    },
    {
        "id": "b43a80548539a4b4",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "Heater (External)",
        "links": [
            "6964a3e6459dbe34"
        ],
        "x": 340,
        "y": 1840,
        "wires": [
            [
                "ab864b203271765a"
            ]
        ],
        "l": true
    },
    {
        "id": "ab864b203271765a",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 1840,
        "wires": [
            [
                "1aa75bcd6581ca94"
            ]
        ]
    },
    {
        "id": "1aa75bcd6581ca94",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Heater (External)",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1840,
        "wires": [
            [
                "fa2eba3089ca0ef4"
            ]
        ]
    },
    {
        "id": "2ae1f0e14435e803",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "order": 17,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "Internal heater",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 480,
        "y": 1100,
        "wires": []
    },
    {
        "id": "421277fb75f3fae8",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "link in 94",
        "links": [
            "8d015b8542d0a18a"
        ],
        "x": 485,
        "y": 2460,
        "wires": [
            [
                "9789265573ab4c80"
            ]
        ]
    },
    {
        "id": "f841f2adf20f9317",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "c3b7d9597903239c",
        "name": "link in 95",
        "links": [
            "bb4a16e7f11641cb"
        ],
        "x": 365,
        "y": 2320,
        "wires": [
            [
                "9802bf01ebf45d28"
            ]
        ]
    },
    {
        "id": "3764998155e75bbb",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 96",
        "links": [
            "8e7a86930e1fd875"
        ],
        "x": 1635,
        "y": 860,
        "wires": [
            [
                "e31636baf16e3b69"
            ]
        ]
    },
    {
        "id": "f10c2c06bd9d5a5a",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "f9448182b177e40e",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 470,
        "y": 2060,
        "wires": [
            [
                "01809486b97e6f56"
            ]
        ]
    },
    {
        "id": "f4bdf0dbe861aebc",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "function 120",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3945,
        "y": 3280,
        "wires": [
            [
                "042a326783f2a657"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "8b78c607f5328303",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "function 121",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3945,
        "y": 3320,
        "wires": [
            [
                "4270ba926708b00d"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "e2710acd9d09b8ce",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "function 122",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3945,
        "y": 3360,
        "wires": [
            [
                "0834eda7cad080f5"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "03298033c4fd4ab5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "a930214064f6df4c",
        "name": "function 123",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3945,
        "y": 3400,
        "wires": [
            [
                "a423271481d5d54d"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "0476ec162f4e3c21",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 147",
        "mode": "link",
        "links": [],
        "x": 2425,
        "y": 3140,
        "wires": []
    },
    {
        "id": "ddaab01e52410fc0",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "name": "link in 111 Z1",
        "links": [
            "5f2a10d2bf1bd860"
        ],
        "x": 3045,
        "y": 220,
        "wires": [
            [
                "8329aedf9204b75d"
            ]
        ]
    },
    {
        "id": "f1eff7acb2827895",
        "type": "mqtt in",
        "z": "8c9d42231fd19d3c",
        "name": "TOP113 - Buffer_Tank_Delta",
        "topic": "panasonic_heat_pump/main/Buffer_Tank_Delta",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1940,
        "y": 3080,
        "wires": [
            [
                "cf591d202c3256c3",
                "29f0a76babd44a0d",
                "b2cbfb75d81fa060"
            ]
        ]
    },
    {
        "id": "3b2383f1b0cc3ea2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1eb6d525c86c4977",
        "order": 22,
        "width": 12,
        "height": 1,
        "name": "Buffer tank Delta",
        "label": "Buffer tank delta",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2730,
        "y": 3080,
        "wires": []
    },
    {
        "id": "e0d24e262f8ab085",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "name": "set global",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::TOP113_Buffer_Tank_Delta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2500,
        "y": 3080,
        "wires": [
            [
                "3b2383f1b0cc3ea2"
            ]
        ]
    },
    {
        "id": "3ccb1ebb3e26ef32",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2370,
        "y": 1900,
        "wires": [
            [
                "608e18424bd15979"
            ],
            [
                "86915cbe3b9c85d7"
            ]
        ]
    },
    {
        "id": "86915cbe3b9c85d7",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2465,
        "y": 1900,
        "wires": []
    },
    {
        "id": "ac6e032187db54c7",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "Buffer tank delta",
        "label": "Buffer tank delta",
        "tooltip": "Buffer tank delta (Range 0-10)",
        "group": "26d9e6cf24507b4f",
        "order": 6,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": false,
        "topic": "SetBufferDelta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "0",
        "max": "10",
        "step": 1,
        "className": "",
        "x": 1760,
        "y": 1900,
        "wires": [
            [
                "971c986d68f201a6"
            ]
        ]
    },
    {
        "id": "bafc3bac1af8d9dd",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 113",
        "links": [
            "0fbc918fd23231fd",
            "46f7abaed662ba28"
        ],
        "x": 1465,
        "y": 1900,
        "wires": [
            [
                "ac6e032187db54c7"
            ]
        ]
    },
    {
        "id": "0fbc918fd23231fd",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "TOP113 BufferTankDelta",
        "mode": "link",
        "links": [
            "bafc3bac1af8d9dd"
        ],
        "x": 2405,
        "y": 3080,
        "wires": []
    },
    {
        "id": "2c371455e77a4e11",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "function 129",
        "func": "var TOP99_Buffer_Installed = global.get('TOP99_Buffer_Installed',\"file\");\n\n\nif (TOP99_Buffer_Installed == 1) {\n    msg.enabled = true;\n}\n\nif (TOP99_Buffer_Installed == 0) {\n    msg.enabled = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2290,
        "y": 3080,
        "wires": [
            [
                "0fbc918fd23231fd"
            ]
        ]
    },
    {
        "id": "cf591d202c3256c3",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2140,
        "y": 3080,
        "wires": [
            [
                "e0d24e262f8ab085",
                "2c371455e77a4e11"
            ]
        ]
    },
    {
        "id": "558d0a739f566895",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5c6e3f50e1a2328b",
        "name": "function 130",
        "func": "if (global.get('F_CCC.z1.setpoint',\"file\") === undefined) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4190,
        "y": 560,
        "wires": [
            [
                "0d58a1e854263ec4"
            ]
        ]
    },
    {
        "id": "946d48cda7b1f717",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "b021ff109e8a2288",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "topbar filler",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5250,
        "y": 180,
        "wires": []
    },
    {
        "id": "6701660e3767bf11",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "b021ff109e8a2288",
        "order": 3,
        "width": 2,
        "height": 1,
        "passthru": true,
        "label": "Zone 1",
        "tooltip": "{{msg.tooltip}}",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"CCC_Zone2\",\"CCC_Help\"],\"show\":[\"CCC_Zone1\"]}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 5240,
        "y": 140,
        "wires": [
            [
                "04b006e187c5d449"
            ]
        ]
    },
    {
        "id": "d3c561cca61a4e6e",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "b021ff109e8a2288",
        "order": 5,
        "width": 2,
        "height": 1,
        "passthru": true,
        "label": "Zone 2",
        "tooltip": "{{msg.tooltip}}",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"CCC_Zone1\",\"CCC_Help\"],\"show\":[\"CCC_Zone2\"]}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 5240,
        "y": 220,
        "wires": [
            [
                "04b006e187c5d449"
            ]
        ]
    },
    {
        "id": "e2dfbc7a5da3dc73",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "b021ff109e8a2288",
        "order": 2,
        "width": 14,
        "height": 1,
        "name": "TOPBAR",
        "label": "<h1>Custom Compensation Curve</h>",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5240,
        "y": 100,
        "wires": []
    },
    {
        "id": "836e280d214473ba",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "name": "EnableDisableZone1Zone2",
        "links": [
            "056b20bad4b28052",
            "47cb7500b0321fc1",
            "49ebac0412d87642"
        ],
        "x": 4905,
        "y": 240,
        "wires": [
            [
                "af3d9903da14a18c"
            ]
        ]
    },
    {
        "id": "af3d9903da14a18c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "function 132",
        "func": "let msg1={};\nlet msg2={};\n\nvar TOP94_Zones_State = global.get('TOP94_Zones_State',\"file\");\nif (TOP94_Zones_State === undefined) {return null}\n\n//zone 1\nif (TOP94_Zones_State == 0)   {\n    msg1.enabled = true;  //  msg1.tooltip = 'Zone 1 enabled';\n    msg2.enabled = false; //  msg2.tooltip = 'Zone 2 disabled';\n}\n// zone 2\nif (TOP94_Zones_State == 1) {\n    msg1.enabled = false; //  msg1.tooltip = 'Zone 1 disabled';\n    msg2.enabled = true;  //  msg2.tooltip = 'Zone 2 enabled';\n}\n\n//zone 1+2\nif (TOP94_Zones_State == 2) {\n    msg1.enabled = true;  //  msg1.tooltip = 'Zone 1 enabled';\n    msg2.enabled = true;  //  msg2.tooltip = 'Zone 2 enabled';\n}\n\nreturn [msg1,msg2];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5030,
        "y": 240,
        "wires": [
            [
                "6701660e3767bf11",
                "3d5514180bd61860"
            ],
            [
                "d3c561cca61a4e6e",
                "84e3a6d29296dc42"
            ]
        ],
        "outputLabels": [
            "ToZone1",
            "ToZone2"
        ]
    },
    {
        "id": "c40f9cc2fac31d03",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 153",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 5495,
        "y": 180,
        "wires": []
    },
    {
        "id": "2f3f52dbd2a4db9d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "group": "b021ff109e8a2288",
        "order": 9,
        "width": 24,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5250,
        "y": 340,
        "wires": []
    },
    {
        "id": "ef4ade1fff94fc42",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Dash_WAR_OnOff Z2",
        "links": [
            "5f5ee90163d11747",
            "e60908ba16f0b752",
            "2080fad3ea57db19",
            "acf4d4f2d32b12c3"
        ],
        "x": 5885,
        "y": 220,
        "wires": [
            [
                "d827db9068451cb7",
                "5fdb8714ea46d7ec"
            ]
        ]
    },
    {
        "id": "ef90d986e95d7c90",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2SP_DIRECT_virt",
        "label": "",
        "tooltip": "This is the default outlet water temperature when all functions are turned off. Heating mode Direct: range: 20-65°C. Heating mode Compensation Curve: Range: -5 / +5",
        "group": "623f5d089867807d",
        "order": 4,
        "width": 3,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "z2_SP_DIRECT_virt",
        "topicType": "str",
        "format": "<font color= {{msg.color}} > {{value}} °C</font>",
        "min": "-5",
        "max": "65",
        "step": 1,
        "className": "",
        "x": 6110,
        "y": 120,
        "wires": [
            [
                "b9a0b36165cc12c5",
                "02019b7020b000c4",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "8e7355b23acb2b1e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "set.SP_Ta_(base) SP_DIRECT_virt",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set('F_CCC.z2.SP_DIRECT_virt',msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6530,
        "y": 160,
        "wires": [
            [
                "be0b1f44ea33c32a"
            ]
        ]
    },
    {
        "id": "9694fb072fae3ffe",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_war_ot1",
        "label": "",
        "tooltip": "Range -20 / 15",
        "group": "76ac95177cc46b00",
        "order": 8,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z2.ot1",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 6060,
        "y": 360,
        "wires": [
            [
                "5856ee88a056445f",
                "5c621541879bde70",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "6c3a65e3304ace9a",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_war_wt2",
        "label": "",
        "tooltip": "Range 20 / 60",
        "group": "76ac95177cc46b00",
        "order": 12,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z2.wt2",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 6220,
        "y": 400,
        "wires": [
            [
                "5856ee88a056445f",
                "5c621541879bde70",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "72433c365f544366",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_war_ot2",
        "label": "",
        "tooltip": "Range -20 / 15",
        "group": "76ac95177cc46b00",
        "order": 11,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z2.ot2",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 6060,
        "y": 400,
        "wires": [
            [
                "5856ee88a056445f",
                "5c621541879bde70",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "b5e481dd0bb09203",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_war_wt1",
        "label": "",
        "tooltip": "Range 20 / 60",
        "group": "76ac95177cc46b00",
        "order": 9,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z2.wt1",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 6220,
        "y": 360,
        "wires": [
            [
                "5856ee88a056445f",
                "5c621541879bde70",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "5fdb8714ea46d7ec",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_CCC on/off",
        "label": "",
        "tooltip": " ",
        "group": "623f5d089867807d",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "z2_Correction_0_WAR_on_off",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 6070,
        "y": 300,
        "wires": [
            [
                "69930635e26a3abb"
            ]
        ]
    },
    {
        "id": "c3d49d458ecc6039",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "set.Correction_0_WAR_on_off",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = \"Function - CCC (Zone 2)\";\nglobal.set('F_CCC.z2.state',msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6500,
        "y": 280,
        "wires": [
            [
                "5f5ee90163d11747"
            ]
        ]
    },
    {
        "id": "5f5ee90163d11747",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2 Correction_0_WAR_on_off Z2",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "a0cf9818c74cf2c5",
            "ef4ade1fff94fc42"
        ],
        "x": 6685,
        "y": 280,
        "wires": []
    },
    {
        "id": "5856ee88a056445f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "set.war_ot_wt",
        "func": "var varName = msg.topic\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(varName,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6050,
        "y": 500,
        "wires": [
            [
                "6500967add5c38cf"
            ]
        ]
    },
    {
        "id": "6500967add5c38cf",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Chart WAR",
        "func": "var war_Tb          = global.get('T_outside',\"file\");                           // Outdoor temperature.\nvar SP_war          = global.get('F_CCC.z2.setpoint',\"file\");                                   // Setpoint after the WAR calculation done in (other) function.\n\nvar war_ot1         = global.get('F_CCC.z2.ot1',\"file\");\nvar war_ot2         = global.get('F_CCC.z2.ot2',\"file\");\nvar war_ot3         = global.get('F_CCC.z2.ot3',\"file\");\n\nvar war_wt1         = global.get('F_CCC.z2.wt1',\"file\");\nvar war_wt2         = global.get('F_CCC.z2.wt2',\"file\");\nvar war_wt3         = global.get('F_CCC.z2.wt3',\"file\");\n\n// Design example\n//          OUTSIDE                 WATER\n//          Temperature     >>      Temperature\n//----------------------------------------------------------------------------\n// Range 1\n//          (OT1=)  20      >>  25  (=WT1)\n// Range 2\n//          (OT2=)  5       >>  31  (=WT2)\n// Range 3\n//          (OT3=)  -10     >>  37  (=WT3)\n// Range 4\n//----------------------------------------------------------------------------\n//\n//\n// math part \n// Y = aX + b\n// X axis = ot variable\n// Y axis = wt variable\nvar a;\nvar b;\n\nif (war_Tb <= war_ot3)                                                          // Range 1 in the graph\n    {   a = 0;\n        b = war_wt3;\n    }\n\nif (war_Tb > war_ot2)                                                           // Range 2 in the graph\n    {   a = ((war_wt2-war_wt1)/(war_ot2-war_ot1));\n        b = (war_wt1-(war_ot1*a));\n    }\n    \nif (war_Tb <= war_ot2)                                                          // Range 3 in the graph\n    {   a = ((war_wt3-war_wt2)/(war_ot3-war_ot2));\n        b = (war_wt2-(war_ot2*a));\n    }\n    \nif (war_Tb >= war_ot1)                                                          // Range 4 in the graph\n    {   a = 0;\n        b = war_wt1;\n    }\n\n// Chart part. \n// Here the chart is created with the variables.\n// Part 1 of the chart plots the WAR temperature profile set by the values on the page. \n// Part 2 of the chart plots the line which represents the actual temperature to water temperature. To read it easier.\n// Part 3 of the chart plots the ranges so the chart will be more stable on screen, not messing around with chart axis.\n\nvar chart =     [{\n    \"series\":   [\"Water\",\"Actual\",''],\n    \"data\": [\n                [\n                {\"x\":(war_ot1+15),\"y\":war_wt1},                                 // chart part 1: WAR program series\n                {\"x\":(war_ot1),\"y\":war_wt1},\n                {\"x\":(war_ot2),\"y\":war_wt2},\n                {\"x\":(war_ot3),\"y\":war_wt3},\n                {\"x\":(war_ot3-15),\"y\":war_wt3}\n                ],\n                \n                [\n                {\"x\":(war_ot3-15),  \"y\":((a*war_Tb)+b).toFixed(3)},                        // chart part 2: Actual lines which make use of the function above.\n                {\"x\":(war_Tb),      \"y\":((a*war_Tb)+b).toFixed(3)},\n                {\"x\":(war_Tb),      \"y\":(17).toFixed(3)},\n                ],\n                \n                [                                                               // chart part 3: X-Y as with fixed ranges to make it look more stable.\n                {\"x\":(war_ot3-15),\"y\":(war_wt3+5)},\n                {\"x\":(war_ot3-15),\"y\":(17)},\n                {\"x\":(war_ot1+15),\"y\":(17)}\n                ]\n\n            ],    \n    \"labels\":[ \"\",\"\" ]\n}];\n\n\n\nlet msg1={}, msg2={}, msg3={};\nmsg.payload = chart; \nmsg2.payload = war_Tb; \nmsg3.payload = SP_war;\n\nmsg2.payload = Number(msg2.payload).toFixed(1);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.topic='T outside';\n\nmsg3.payload = Number(msg3.payload).toFixed(1);\nmsg3.payload = parseFloat(msg3.payload);\nmsg3.topic='SP WAR';\n\nreturn [msg, msg2, msg3];\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6280,
        "y": 520,
        "wires": [
            [
                "cc312cf75ed71723"
            ],
            [
                "14ea107217d03045",
                "58bef76f50f2e729"
            ],
            []
        ],
        "outputLabels": [
            "Real chart",
            "T_outside",
            ""
        ]
    },
    {
        "id": "7c30bffd90c4b164",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Z2",
        "links": [
            "d625be872191a9a8"
        ],
        "x": 5975,
        "y": 600,
        "wires": [
            [
                "ae68d2f4a8da27a7",
                "c22f1a7f7dde4230"
            ]
        ]
    },
    {
        "id": "55077b783e982d30",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 5,
        "width": 3,
        "height": 1,
        "name": "z2Outside temp.",
        "label": "Outside temp.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6070,
        "y": 340,
        "wires": []
    },
    {
        "id": "4e1b202d3faac630",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "Water temp.",
        "label": "Water temp.",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6210,
        "y": 340,
        "wires": []
    },
    {
        "id": "14ea107217d03045",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 22,
        "width": 3,
        "height": 1,
        "name": "T outside",
        "label": "",
        "format": "{{msg.payload}} °C",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6450,
        "y": 460,
        "wires": []
    },
    {
        "id": "ae68d2f4a8da27a7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 23,
        "width": 3,
        "height": 1,
        "name": "SP (WAR) - Function (WAR) settings tab",
        "label": "",
        "format": "{{msg.payload}} °C",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6490,
        "y": 560,
        "wires": []
    },
    {
        "id": "6691f17402b1fe5b",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 20,
        "width": 3,
        "height": 1,
        "name": "Calculated water temp.",
        "label": "Calculated temp.",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6450,
        "y": 380,
        "wires": []
    },
    {
        "id": "d827db9068451cb7",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_CCC on/off",
        "label": "Zone 2",
        "tooltip": "",
        "group": "76ac95177cc46b00",
        "order": 1,
        "width": 8,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "z2_Correction_0_WAR_on_off",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 6070,
        "y": 260,
        "wires": [
            [
                "69930635e26a3abb"
            ]
        ]
    },
    {
        "id": "97602181c9892c0f",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 24,
        "width": 16,
        "height": 1,
        "name": "Graph description",
        "label": "X-axis: outside °C | Y-axis: water °C",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6600,
        "y": 360,
        "wires": []
    },
    {
        "id": "6bb2693c1e0ee2bf",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "WAR part",
        "info": "",
        "x": 5750,
        "y": 140,
        "wires": []
    },
    {
        "id": "ec395fd84fd32931",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "SP >>",
        "info": "",
        "x": 5740,
        "y": 180,
        "wires": []
    },
    {
        "id": "d11d6440844a6291",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Trigger interval 1m",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 6050,
        "y": 560,
        "wires": [
            [
                "6500967add5c38cf",
                "9a4c2e2328c9aa18"
            ]
        ]
    },
    {
        "id": "cc312cf75ed71723",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "name": "",
        "group": "76ac95177cc46b00",
        "order": 2,
        "width": 16,
        "height": 8,
        "label": "Zone 2 Temperature Profile",
        "chartType": "line",
        "legend": "false",
        "xformat": "x",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#ff7f0e",
            "#333333",
            "#000000",
            "#000000",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 6830,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "35b4ca755a2ac28a",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "name": "",
        "group": "76ac95177cc46b00",
        "order": 32,
        "width": 16,
        "height": 6,
        "label": "Time chart",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-10",
        "ymax": "50",
        "removeOlder": "24",
        "removeOlderPoints": "1000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#de425b",
            "#00876c",
            "#f59b56",
            "#000000",
            "#000000",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 6780,
        "y": 520,
        "wires": [
            [
                "575083448c49852d"
            ]
        ]
    },
    {
        "id": "575083448c49852d",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 7020,
        "y": 560,
        "wires": [
            [
                "de4d0e42d3721ad1"
            ]
        ]
    },
    {
        "id": "de4d0e42d3721ad1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "name": "Store information",
        "func": "var war_chart = msg;\nglobal.set(\"F_CCC.z2.chart\", war_chart,\"file\") || [];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 7030,
        "y": 600,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "cbcdf14aca1f61c8",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "group": "76ac95177cc46b00",
        "name": "Line - Setup ",
        "order": 26,
        "width": 16,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 7030,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "dcb8ba5f031d5fff",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 6770,
        "y": 600,
        "wires": [
            [
                "bef2e925b04e3690"
            ]
        ]
    },
    {
        "id": "bef2e925b04e3690",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "0be114106fc46980",
        "name": "function 1",
        "func": "if (global.get('F_CCC.z2.setpoint',\"file\") === undefined) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6800,
        "y": 560,
        "wires": [
            [
                "35b4ca755a2ac28a"
            ]
        ]
    },
    {
        "id": "055f20cc695bc789",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Load on boot WAR (Zone2)",
        "func": "\n    \nvar Correction_0_WAR_on_off = global.get('F_CCC.z2.state',\"file\");\nif (Correction_0_WAR_on_off === undefined)        {\n    global.set('F_CCC.z2.state',0,\"file\");\n    Correction_0_WAR_on_off=0;\n}\n\nvar war_ot1                 = global.get('F_CCC.z2.ot1',\"file\");                             // Outside temperature high         (warm outside)\nvar war_ot2                 = global.get('F_CCC.z2.ot2',\"file\");                             // Outside temperature intermediate (intermediate outside temperature)\nvar war_ot3                 = global.get('F_CCC.z2.ot3',\"file\");                             // Outside temperature low          (cold outside)\nvar war_wt1                 = global.get('F_CCC.z2.wt1',\"file\");                             // Water temperature low            (cold water)\nvar war_wt2                 = global.get('F_CCC.z2.wt2',\"file\");                             // Water temperature intermediate   (intermediate water temperature)\nvar war_wt3                 = global.get('F_CCC.z2.wt3',\"file\");                             // Water temperature high           (warm water)\n\nvar SP_DIRECT_virt          = global.get('F_CCC.z2.SP_DIRECT_virt',\"file\");\n\nvar check = (war_ot1+war_ot2+war_ot3+war_wt1+war_wt2+war_wt3);\nif (isNaN(check) === true || check === undefined)     // if the variables are added to eachother and the result is Not a Number, produce an error message.\n    {   \n        return null;\n    }\n\nvar msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={};\n\n///////////////////\nvar TOP76_Heating_Mode = global.get(\"TOP76_Heating_Mode\",\"file\");\nif (TOP76_Heating_Mode === undefined) { return null; }\n\nmsg1.payload = SP_DIRECT_virt;\n\nif (TOP76_Heating_Mode == 0){                 // Compensation curve mode\n    if (SP_DIRECT_virt === undefined)        {global.set('F_CCC.z2.SP_DIRECT_virt',0,\"file\"); SP_DIRECT_virt=0;}   \n    var msg1 = { ui_control: {min:-5, max:+5, step:1 } };\n    msg1.label = \"Shift water temp.\";\n}\n\nif (TOP76_Heating_Mode == 1){                 // Direct mode\n    if (SP_DIRECT_virt === undefined)        {global.set('F_CCC.z2.SP_DIRECT_virt',20,\"file\"); SP_DIRECT_virt=20;}\n    var msg1 = {ui_control:{min:20, max:65, step:1}};\n    msg1.label = \"Default water temp.\";\n}\n//////////////////\n\n\n\nmsg1.payload = SP_DIRECT_virt;\nmsg1.topic = 'SP_DIRECT_virt';\nif (SP_DIRECT_virt !== undefined) { node.send(msg1); }\n\nmsg2.payload = Correction_0_WAR_on_off;\nmsg2.topic = \"Correction_0_WAR_on_off\";\nif (Correction_0_WAR_on_off !== undefined) { node.send([null, msg2]); }\n\nmsg3.payload = war_ot1;\nmsg3.topic = \"F_CCC.z2.ot1\";\nif (war_ot1 !== undefined) { node.send([null, null, msg3, null, null, null, null, null]); }\n\nmsg4.payload = war_ot2;\nmsg4.topic = \"F_CCC.z2.ot2\";\nif (war_ot2 !== undefined) { node.send([null, null, null, msg4, null, null, null, null]); }\n\nmsg5.payload = war_ot3;\nmsg5.topic = \"F_CCC.z2.ot3\";\nif (war_ot3 !== undefined) { node.send([null, null, null, null, msg5, null, null, null]); }\n\nmsg6.payload = war_wt1;\nmsg6.topic = \"F_CCC.z2.wt1\";\nif (war_wt1 !== undefined) { node.send([null, null, null, null, null, msg6, null, null]); }\n\nmsg7.payload = war_wt2;\nmsg7.topic = \"F_CCC.z2.wt2\";\nif (war_wt2 !== undefined) { node.send([null, null, null, null, null, null, msg7, null]); }\n\nmsg8.payload = war_wt3;\nmsg8.topic = \"F_CCC.z2.wt3\";\nif (war_wt3 !== undefined) { node.send([null, null, null, null, null, null, null, msg8]); }\n\n\n//return [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8];\n\n",
        "outputs": 8,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5690,
        "y": 380,
        "wires": [
            [
                "49d95e3f016cbca3"
            ],
            [
                "d827db9068451cb7",
                "5fdb8714ea46d7ec",
                "49d95e3f016cbca3"
            ],
            [
                "9694fb072fae3ffe",
                "49d95e3f016cbca3"
            ],
            [
                "72433c365f544366",
                "49d95e3f016cbca3"
            ],
            [
                "161ade78a41df7cb",
                "49d95e3f016cbca3"
            ],
            [
                "b5e481dd0bb09203",
                "49d95e3f016cbca3"
            ],
            [
                "6c3a65e3304ace9a",
                "49d95e3f016cbca3"
            ],
            [
                "6a82bfa1f23a2871",
                "49d95e3f016cbca3"
            ]
        ],
        "outputLabels": [
            "SP_DIRECT_virt",
            "Correction_0_WAR_on_off",
            "war_ot1",
            "war_ot2",
            "war_ot3",
            "war_wt1",
            "war_wt2",
            "war_wt3"
        ]
    },
    {
        "id": "58bef76f50f2e729",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "623f5d089867807d",
        "order": 7,
        "width": 3,
        "height": 1,
        "name": "z2T outside (advanced Functions tab)",
        "label": "CCC",
        "format": "({{msg.payload}} °C)",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6500,
        "y": 420,
        "wires": []
    },
    {
        "id": "3d3667db4acd5f21",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 18,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6850,
        "y": 60,
        "wires": []
    },
    {
        "id": "3cbea5f4d5bf6c77",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 17,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6860,
        "y": 240,
        "wires": []
    },
    {
        "id": "f4342fcb9a22b0a6",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 21,
        "width": 2,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6880,
        "y": 260,
        "wires": []
    },
    {
        "id": "878266dd498c6fd1",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 33,
        "width": 2,
        "height": 3,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6880,
        "y": 320,
        "wires": []
    },
    {
        "id": "cd34df31d687b448",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Load information",
        "func": "let msg1={};\nmsg1 = global.get(\"F_CCC.z2.chart\",\"file\");\nreturn msg1;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6800,
        "y": 420,
        "wires": [
            [
                "35b4ca755a2ac28a"
            ]
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "89b5e7dfdf40917f",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 6770,
        "y": 380,
        "wires": [
            [
                "cd34df31d687b448"
            ]
        ]
    },
    {
        "id": "69930635e26a3abb",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 6220,
        "y": 280,
        "wires": [
            [
                "c3d49d458ecc6039",
                "5fdb8714ea46d7ec",
                "d827db9068451cb7",
                "5c621541879bde70",
                "a44824d776d20cde",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "6a82bfa1f23a2871",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_war_wt3",
        "label": "",
        "tooltip": "Range 20 / 60",
        "group": "76ac95177cc46b00",
        "order": 15,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z2.wt3",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "20",
        "max": "60",
        "step": 1,
        "className": "",
        "x": 6220,
        "y": 440,
        "wires": [
            [
                "5856ee88a056445f",
                "5c621541879bde70",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "161ade78a41df7cb",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "z2_war_ot3",
        "label": "",
        "tooltip": "Range -20 / 15",
        "group": "76ac95177cc46b00",
        "order": 14,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "F_CCC.z2.ot3",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 6060,
        "y": 440,
        "wires": [
            [
                "5856ee88a056445f",
                "5c621541879bde70",
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "c85eb14899eb0c55",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 7,
        "width": 2,
        "height": 1,
        "name": "warm spacer 2x1",
        "label": "Warm",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7130,
        "y": 180,
        "wires": []
    },
    {
        "id": "1903cc2166412771",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 10,
        "width": 2,
        "height": 1,
        "name": "Inter spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7120,
        "y": 220,
        "wires": []
    },
    {
        "id": "fcbc0ff07627d750",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 13,
        "width": 2,
        "height": 1,
        "name": "Cold 2x1",
        "label": "Cold",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7100,
        "y": 260,
        "wires": []
    },
    {
        "id": "b6d2d5e809c78512",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "name": "Line - Temperature profile",
        "order": 3,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Temperature profile</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 7200,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "61c9ea022d43fe83",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "Weather spacer 2x1",
        "label": "Weather",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7150,
        "y": 400,
        "wires": []
    },
    {
        "id": "1ef5b57ddac915fa",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "name": "Line - Setup ",
        "order": 16,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Result</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 7140,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "3614f0f929ce8a13",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 29,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6980,
        "y": 400,
        "wires": []
    },
    {
        "id": "be0b1f44ea33c32a",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "WAR gui changes to function trigger Z2",
        "mode": "link",
        "links": [
            "ff40b3d6f1b996fe"
        ],
        "x": 6715,
        "y": 180,
        "wires": []
    },
    {
        "id": "5c621541879bde70",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "",
        "op1": "",
        "op2": "trigger",
        "op1type": "nul",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 6320,
        "y": 200,
        "wires": [
            [
                "be0b1f44ea33c32a"
            ]
        ]
    },
    {
        "id": "6795cdc1f85ebdbe",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "623f5d089867807d",
        "order": 8,
        "width": 2,
        "height": 1,
        "name": "z2-SP (WAR) - Home HEAT Functions tab",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6490,
        "y": 600,
        "wires": []
    },
    {
        "id": "c22f1a7f7dde4230",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "Color",
        "func": "var war_state          = global.get('F_CCC.z2.state',\"file\");\n    if (war_state === undefined)    {return null;}\n\nlet msg1={};\n\n\n    if (war_state == 0) \n        {\n            msg1.color = \"gray\";\n        }\n\n\n    if (war_state == 1) \n        {\n            msg1.color = \"\";\n        }\nmsg1.payload = msg.payload;\n\nreturn [msg1];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6240,
        "y": 600,
        "wires": [
            [
                "6795cdc1f85ebdbe"
            ]
        ]
    },
    {
        "id": "152a07bab899214b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "name": "Line - Advanced setup",
        "order": 25,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Advanced</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 7090,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "da1daee0f07ec0fa",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 27,
        "width": 2,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6850,
        "y": 100,
        "wires": []
    },
    {
        "id": "6ce08e3e20985fc6",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 19,
        "width": 3,
        "height": 1,
        "name": "Outside temp.",
        "label": "Actual outside",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6450,
        "y": 340,
        "wires": []
    },
    {
        "id": "2f64e66b2021a0eb",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "trigger Loaded WAR profile from panasonic Z2",
        "links": [
            "76e65f54ff08aa50"
        ],
        "x": 5655,
        "y": 500,
        "wires": [
            [
                "055f20cc695bc789"
            ]
        ]
    },
    {
        "id": "9a4c2e2328c9aa18",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "function 2",
        "func": "let msg1={};\nlet msg2={};\nlet msg3={};\n\nvar Tb0 =   global.get(\"TOP14_Outside_Temp\",\"file\");\n    if (Tb0 === undefined)  {return null;}\nvar Tsp = global.get('F_CCC.z2.setpoint',\"file\");\n    if (Tsp === undefined)  {return null;}  \nvar Tb1 =   global.get(\"T_outside_custom\",\"file\");\n\nmsg1.payload    = Tb0;\nmsg1.payload    = Number(msg1.payload).toFixed(1);\nmsg1.payload    = parseFloat(msg1.payload);\nmsg1.topic      = 'T outside';\n\nmsg2.payload    = Tsp;\nmsg2.payload    = Number(msg2.payload).toFixed(1);\nmsg2.payload    = parseFloat(msg2.payload);\nmsg2.topic      = 'CCC Setpoint';\n\nmsg3.payload    = Tb1;\nmsg3.payload    = Number(msg3.payload).toFixed(1);\nmsg3.payload    = parseFloat(msg3.payload);\nmsg3.topic      = 'T outside custom';\n\n\nif (Tb1 === undefined)  \n    {\n        return [[msg1,msg2,null]];\n    }\nelse \n    {\n        return [[msg1,msg2,msg3]];\n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6530,
        "y": 520,
        "wires": [
            [
                "35b4ca755a2ac28a"
            ]
        ]
    },
    {
        "id": "a7f33634e3289d43",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "623f5d089867807d",
        "name": "z2Line Custom functions",
        "order": 5,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Custom functions (Zone 2)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 7300,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "d41450134c2d573e",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "shift vs direct",
        "func": "\nvar TOP76_Heating_Mode = global.get(\"TOP76_Heating_Mode\",\"file\");\nif (TOP76_Heating_Mode === undefined){\n    return null;\n}\n\nvar msg1={}; // payload value\n    msg1.topic = 'SP_DIRECT_virt';\nvar msg2={}; // label\nvar msg3={}; // limits\nlet msg4={}; // turn off WAR function when compensation curve is active\n    msg4.payload = 0;\n\nvar SP_DIRECT_virt          = global.get('F_CCC.z2.SP_DIRECT_virt',\"file\");\n\nif (msg.payload == 'check_heating_mode'){\n        if (TOP76_Heating_Mode == 1){                   // Direct mode\n            msg1.payload = SP_DIRECT_virt;\n            \n            if (msg1.payload < 20 || msg1.payload === undefined) {msg1.payload = 20;}\n            \n            msg2.label = \"Water temp. z2\";\n            node.send([msg1,msg2,null,null]);\n            \n            msg3 = {ui_control:{min:+20, max:+65, step:1}};\n            node.send([null,null,msg3]);\n        }        \n        if (TOP76_Heating_Mode == 0){                   // Compensation Curve\n            msg1.payload = SP_DIRECT_virt;\n            \n            if (msg1.payload > 5 || msg1.payload === undefined)   { msg1.payload = 0; }\n            \n            msg2.label = \"Shift curve\";\n            node.send([msg1,msg2,null,msg4]);\n            \n            msg3 = {ui_control:{min:-5, max:+5, step:1}};\n            node.send([null,null,msg3]);\n        }\n}\n\n\n\nif (TOP76_Heating_Mode == 0) {                          // Compensation curve mode\n    node.send([null,null,null,msg4])                    // turn off WAR function\n    \n    if (msg.topic == 'trigger'){                        \n        msg1.payload = SP_DIRECT_virt;\n        //msg1.topic = 'SP_DIRECT_virt';\n        if (msg1.payload === undefined) { SP_DIRECT_virt = 0; }\n        node.send([msg1,null,null]);\n    }    \n    if (msg.topic == 'Water setpoint (heat shift)'){\n        msg1.payload = msg.payload;\n        node.send([msg1,null,null]);\n    }\n    msg2.label = \"Shift curve\";\n    node.send([null,msg2,null]);\n    \n    msg3 = {ui_control:{min:-5, max:+5, step:1}};\n    node.send([null,null,msg3]);\n\n    return null;\n}\n\n////////////////////////////////////\nif (TOP76_Heating_Mode == 1){                       // Direct mode\n\n    if (msg.topic == 'trigger'){    \n        msg1.payload = SP_DIRECT_virt;\n            if (msg1.payload === undefined) { SP_DIRECT_virt = 20; }\n        //msg1.topic = 'SP_DIRECT_virt';\n        node.send([msg1,null,null]);\n    }    \n    if (msg.topic == 'Water setpoint (direct)'){\n        msg1.payload = msg.payload;\n        msg1.topic = 'SP_DIRECT_virt';\n        node.send([msg1,null,null]);\n    }\n    msg2.label = \"Water temp.\";\n    node.send([null,msg2,null]);\n    \n    msg3 = {ui_control:{min:+20, max:+65, step:1}};\n    node.send([null,null,msg3]);\n    \n    return null;\n}\n\n",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5820,
        "y": 80,
        "wires": [
            [
                "ef90d986e95d7c90"
            ],
            [
                "b218db750d106f77"
            ],
            [
                "ef90d986e95d7c90"
            ],
            [
                "d827db9068451cb7",
                "5fdb8714ea46d7ec"
            ]
        ],
        "outputLabels": [
            "payload value",
            "label",
            "limits",
            "WAR function OFF"
        ]
    },
    {
        "id": "2b6cdd258a390ffe",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "link in 4 Z2",
        "links": [
            "a7d4b11b9c045f95",
            "d7c439696ff250b8"
        ],
        "x": 5675,
        "y": 80,
        "wires": [
            [
                "d41450134c2d573e"
            ]
        ]
    },
    {
        "id": "b218db750d106f77",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "623f5d089867807d",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "Z2xxFinal water temp.",
        "label": "{{msg.label}}",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6130,
        "y": 80,
        "wires": []
    },
    {
        "id": "901c1c1dfbe65b3b",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "link in from on_change_GUI Z2",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 5655,
        "y": 300,
        "wires": [
            [
                "d41450134c2d573e",
                "055f20cc695bc789"
            ]
        ]
    },
    {
        "id": "b9a0b36165cc12c5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "function 3",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6265,
        "y": 100,
        "wires": [
            [
                "ef90d986e95d7c90"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "02019b7020b000c4",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "2",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 6310,
        "y": 160,
        "wires": [
            [
                "8e7355b23acb2b1e"
            ]
        ]
    },
    {
        "id": "824bb98cee7d05eb",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 6650,
        "y": 240,
        "wires": [
            [
                "d41450134c2d573e"
            ]
        ]
    },
    {
        "id": "a44824d776d20cde",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "function 4",
        "func": "if (msg.payload == 1) { \n    msg.payload = 'check_heating_mode' ;\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6440,
        "y": 240,
        "wires": [
            [
                "824bb98cee7d05eb"
            ]
        ]
    },
    {
        "id": "c311ce95a112969d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "link out 1 Z2",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 6575,
        "y": 100,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "a055b83be75ea0ce",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "function 5",
        "func": "if (msg.topic == 'Correction_0_WAR_on_off') { msg.topic = 'NR - WAR state'; return msg; }\n\nif (msg.topic == 'F_CCC.z2.ot1') { msg.topic = 'NR - CCC z2 Outside temperature 1'; return msg; }\nif (msg.topic == 'F_CCC.z2.ot2') { msg.topic = 'NR - CCC z2 Outside temperature 2'; return msg; }\nif (msg.topic == 'F_CCC.z2.ot3') { msg.topic = 'NR - CCC z2 Outside temperature 3'; return msg; }\nif (msg.topic == 'F_CCC.z2.wt1') { msg.topic = 'NR - CCC z2 water temperature 1'; return msg; }\nif (msg.topic == 'F_CCC.z2.wt2') { msg.topic = 'NR - CCC z2 water temperature 2'; return msg; }\nif (msg.topic == 'F_CCC.z2.wt3') { msg.topic = 'NR - CCC z2 water temperature 3'; return msg; }\n\nif (msg.topic == 'z2_SP_DIRECT_virt') { msg.topic = 'NR - CCC Zone 2 manual water temperature / shift'; return msg; }",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6460,
        "y": 100,
        "wires": [
            [
                "c311ce95a112969d"
            ]
        ]
    },
    {
        "id": "49d95e3f016cbca3",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "nul",
        "duration": "15",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 6460,
        "y": 60,
        "wires": [
            [
                "a055b83be75ea0ce"
            ]
        ]
    },
    {
        "id": "cb995415dbbbe7a9",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "name": "link in 5 Z2",
        "links": [
            "5f3349014d71b7a9"
        ],
        "x": 5655,
        "y": 220,
        "wires": [
            [
                "ef90d986e95d7c90"
            ]
        ]
    },
    {
        "id": "3afa438c44b78abd",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "822c399b9b278bd4",
        "group": "76ac95177cc46b00",
        "order": 31,
        "width": 1,
        "height": 1,
        "name": "----- spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7270,
        "y": 600,
        "wires": []
    },
    {
        "id": "ad11fe1e25f05d3a",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "enable buttons",
        "props": [
            {
                "p": "enabled",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 5040,
        "y": 120,
        "wires": [
            [
                "6701660e3767bf11",
                "d3c561cca61a4e6e"
            ]
        ]
    },
    {
        "id": "852593366f152530",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "300",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 5010,
        "y": 180,
        "wires": [
            [
                "af3d9903da14a18c"
            ]
        ]
    },
    {
        "id": "9f7444f54dcf44b7",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "1179fa790d2d89ca",
        "name": "Line Custom functions",
        "order": 2,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Zone 1</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4680,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "3d5514180bd61860",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "1db6d698669f3827",
        "order": 6,
        "width": 2,
        "height": 1,
        "passthru": true,
        "label": "Zone 1",
        "tooltip": "{{msg.tooltip}}",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"RTC_Zone2\",\"RTC_Help\",\"RTC_Automations\"],\"show\":[\"RTC_Zone1\"]}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 5220,
        "y": 880,
        "wires": [
            [
                "6d96a4b8c7c4d615"
            ]
        ]
    },
    {
        "id": "84e3a6d29296dc42",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "1db6d698669f3827",
        "order": 8,
        "width": 2,
        "height": 1,
        "passthru": true,
        "label": "Zone 2",
        "tooltip": "{{msg.tooltip}}",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"RTC_Zone1\",\"RTC_Help\",\"RTC_Automations\"],\"show\":[\"RTC_Zone2\"]}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 5220,
        "y": 960,
        "wires": [
            [
                "6d96a4b8c7c4d615"
            ]
        ]
    },
    {
        "id": "ad91dd83853df6cf",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1db6d698669f3827",
        "order": 9,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5230,
        "y": 1080,
        "wires": []
    },
    {
        "id": "3fd909993fad0be8",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1db6d698669f3827",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5230,
        "y": 1000,
        "wires": []
    },
    {
        "id": "0fa2e5caff3f31a9",
        "type": "ui_button",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "group": "1db6d698669f3827",
        "order": 3,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Automation",
        "tooltip": "{{msg.tooltip}}",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"RTC_Zone1\",\"RTC_Zone2\",\"RTC_Help\"],\"show\":[\"RTC_Automations\"]}}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 5230,
        "y": 1040,
        "wires": [
            [
                "6d96a4b8c7c4d615"
            ]
        ]
    },
    {
        "id": "4cb4c0976c75ec37",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1db6d698669f3827",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5230,
        "y": 840,
        "wires": []
    },
    {
        "id": "696c696fa1c9f28e",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "e27cfec311892d88",
        "name": "",
        "order": 2,
        "width": 1,
        "height": 15,
        "format": "<html>\n\n<head>\n    <style>\n        .box {\n            border-right: 1px solid #a39d99;\n            /* This is your left border */\n            padding-right: 10px;\n            /* Spacing between border and text */\n            margin: 5px 0;\n            height: 100%;\n            /* Adjust as needed */\n        }\n    </style>\n</head>\n\n<body>\n    <div class=\"box\">\n        \n    </div>\n</body>\n\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 5220,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "464b869477a20de7",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 20",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 5475,
        "y": 1220,
        "wires": []
    },
    {
        "id": "804d954a7e029ecc",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "enable buttons",
        "props": [
            {
                "p": "enabled",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 4960,
        "y": 520,
        "wires": [
            [
                "84e3a6d29296dc42",
                "3d5514180bd61860"
            ]
        ]
    },
    {
        "id": "c05450dcdb75572d",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Room setpoint Z2",
        "label": "Room setpoint",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 14,
        "width": 5,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.setpoint",
        "topicType": "str",
        "format": "{{value}}",
        "min": "5",
        "max": "50",
        "step": "0.1",
        "className": "",
        "x": 6130,
        "y": 1040,
        "wires": [
            [
                "e2a3adee39b5539e",
                "cc19eff0424139ee"
            ]
        ]
    },
    {
        "id": "fa7b23d8aa5a5849",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Woonkamer z2 SP (custom)",
        "mode": "link",
        "links": [
            "8d56089ccc135555"
        ],
        "x": 7345,
        "y": 1040,
        "wires": []
    },
    {
        "id": "e2a3adee39b5539e",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 6310,
        "y": 1040,
        "wires": [
            [
                "fa7b23d8aa5a5849",
                "f2fe4939eaeea42e",
                "08167bdfbbef5324",
                "b0bbbb09b63fc68a"
            ]
        ]
    },
    {
        "id": "977bb657f759948a",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "RTC on/off Home_HEAT",
        "label": "",
        "tooltip": "",
        "group": "623f5d089867807d",
        "order": 9,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 6150,
        "y": 800,
        "wires": [
            [
                "97d6c067d71e46a3"
            ]
        ]
    },
    {
        "id": "d623402b62dea86c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "set F_RTC.z2.state on/off",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = \"Function - RTC (Zone 2)\";\nglobal.set(\"F_RTC.z2.state\",msg.payload,\"file\");\n\n\n//******************************************************************************\nif (msg.payload == 0) {\n    /*\n    var F_stored_next_operating_mode    = global.get('F_stored_next_operating_mode',\"file\");\n    var F_SOLAR                         = global.get('F_SOLAR',\"file\");\n    \n    \n    if (F_stored_next_operating_mode === undefined) {\n        return null;\n    }\n    //  msg         // pin 1 - oringinal msg object. The correction.\n    let msg1={};    // pin 2 - the restored operating mode.\n    let msg99={};   // pin 3 - info to the log.\n    // return [msg,msg1,msg99]\n\n    \n    if (F_SOLAR.function_active_state === undefined) {\n        msg1.payload = F_stored_next_operating_mode;\n        msg1.topic = 'Restoring new operating mode';\n        \n        msg99.topic = 'Function RTC on/off';\n        msg99.payload = 'RTC on/off function turned off manually. Restoring operating mode';\n        \n        global.set('F_stored_next_operating_mode',undefined,\"file\");\n        \n        return [msg,msg1,msg99];\n    }\n    */\n    return msg\n}\n\n\nelse {\n    return msg;    \n}\n\n\n\n\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6970,
        "y": 820,
        "wires": [
            [
                "db1fb98ca4fdcc25"
            ],
            [
                "86d7318e73038502"
            ],
            [
                "de7c5c2916599040"
            ]
        ],
        "outputLabels": [
            "msg",
            "operating mode",
            "to log"
        ]
    },
    {
        "id": "db1fb98ca4fdcc25",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Correction_1_heatcurve_on_off z2",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "d60cb7d9078bfdaf"
        ],
        "x": 7345,
        "y": 780,
        "wires": []
    },
    {
        "id": "cf9c3b1c60839829",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "cf9c3b1c60839829 z2",
        "links": [
            "53f7c9cf40d4a870"
        ],
        "x": 5725,
        "y": 1560,
        "wires": [
            [
                "6af70d1403ec0df2",
                "b63b696d40899414"
            ]
        ]
    },
    {
        "id": "fe53451e91cfd331",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 27,
        "width": 7,
        "height": 1,
        "name": "Function RTC - Current correction",
        "label": "Current correction",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6220,
        "y": 1320,
        "wires": []
    },
    {
        "id": "05017c2ecba0a692",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t1_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 8,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t1_limit",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 920,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "3766ea44b9ca610b",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t2_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 10,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t2_limit",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 960,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "fe4f087158d008e4",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t3_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 12,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t3_limit",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 1000,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "e1529880c6a6223e",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t4_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 18,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t4_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 1120,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "f661e6e6544ebc6c",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t5_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 20,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t5_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 1160,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "e346b8726ebe9cd9",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t6_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 22,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t6_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 1200,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "bc47fd7cc80fec41",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "set.rtc_t_ranges",
        "func": "if (msg.topic == 'z2.setpoint') { return null; }\n\nvar varName = \"F_RTC.\" + msg.topic;\nmsg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(varName,msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6820,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "e25b4f60be9d81d2",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 5,
        "width": 3,
        "height": 4,
        "name": "Warm limits",
        "label": "Too warm",
        "format": "{{msg.payload}}",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5950,
        "y": 920,
        "wires": []
    },
    {
        "id": "79ef5c038efcee21",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 17,
        "width": 3,
        "height": 4,
        "name": "Cold limits",
        "label": "Too cold",
        "format": "{{msg.payload}}",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5950,
        "y": 1120,
        "wires": []
    },
    {
        "id": "cf7a6e8cc8d1ebce",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Chart RTC z2",
        "func": "var rtc_PV          = global.get('T_zone_2');                             // Measurement of room temperature\n    if (rtc_PV === undefined) { return null; }\n\nvar rtc_SP = global.get('F_RTC.z2.setpoint',\"file\");                         // SetPoint of room temperature.\n    if (rtc_SP === undefined) { global.set('F_RTC.z2.setpoint',20,\"file\"); rtc_SP=20;}\n\nvar F_RTC = global.get('F_RTC',\"file\");\n\nvar rtc_t1          = F_RTC.z2.t1_limit;\nvar rtc_t2          = F_RTC.z2.t2_limit;\nvar rtc_t3          = F_RTC.z2.t3_limit;\n\nvar rtc_t4          = F_RTC.z2.t4_limit;\nvar rtc_t5          = F_RTC.z2.t5_limit;\nvar rtc_t6          = F_RTC.z2.t6_limit;\nvar rtc_t7          = F_RTC.z2.t7_limit; //custom\nvar rtc_on          = F_RTC.automation_on_limit;\nvar rtc_off         = F_RTC.automation_off_limit;\n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={}, msg8a={}, msg9={}, msg10={}, msg11={}, msg12={};\n\nmsg1.payload = rtc_SP;                                                          //\nmsg1.payload = Number(msg1.payload).toFixed(1);\nmsg1.payload = parseFloat(msg1.payload);\nmsg1.topic='Room2 SP';                                                                // \n\nmsg2.payload = rtc_PV;                                                          // \nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.topic='Room2 PV';                                                                // \n\nmsg3.payload = (rtc_SP+rtc_t1);                                                 // \nmsg3.payload = Number(msg3.payload).toFixed(1);\nmsg3.payload = parseFloat(msg3.payload);\nmsg3.topic='-3';                                                          // \n\nmsg4.payload = (rtc_SP+rtc_t2);                                                 // \nmsg4.payload = Number(msg4.payload).toFixed(1);\nmsg4.payload = parseFloat(msg4.payload);\nmsg4.topic='-2';                                                          // \n\nmsg5.payload = (rtc_SP+rtc_t3);                                                 // \nmsg5.payload = Number(msg5.payload).toFixed(1);\nmsg5.payload = parseFloat(msg5.payload);\nmsg5.topic='-1';                                                          // \n\nmsg6.payload = (rtc_SP+rtc_t4);                                                 // \nmsg6.payload = Number(msg6.payload).toFixed(1);\nmsg6.payload = parseFloat(msg6.payload);\nmsg6.topic='+1';                                                          // \n\nmsg7.payload = (rtc_SP+rtc_t5);                                                 // \nmsg7.payload = Number(msg7.payload).toFixed(1);\nmsg7.payload = parseFloat(msg7.payload);\nmsg7.topic='+2';                                                          // \n\nmsg8.payload = (rtc_SP+rtc_t6);                                                 // \nmsg8.payload = Number(msg8.payload).toFixed(1);\nmsg8.payload = parseFloat(msg8.payload);\nmsg8.topic='+3';                                                          // \n\nmsg8a.payload = (rtc_SP+rtc_t7);                                                 // \nmsg8a.payload = Number(msg8a.payload).toFixed(1);\nmsg8a.payload = parseFloat(msg8a.payload);\nmsg8a.topic = '+custom';  //change to custom\n\nmsg11.payload = (rtc_SP+rtc_on);                                                        // \nmsg11.payload = Number(msg11.payload).toFixed(1);\nmsg11.payload = parseFloat(msg11.payload);\nmsg11.topic='Trigger';  \n\nmsg12.payload = (rtc_SP+rtc_off);                                                        // \nmsg12.payload = Number(msg12.payload).toFixed(1);\nmsg12.payload = parseFloat(msg12.payload);\nmsg12.topic='Revert';  \n\n\nreturn [[msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg8a, msg11, msg12], msg2];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6840,
        "y": 1400,
        "wires": [
            [
                "b55e98847ad8ecdf"
            ],
            [
                "8b391a05a7f52e53"
            ]
        ],
        "outputLabels": [
            "chart",
            "rtc_PV"
        ]
    },
    {
        "id": "7b4c2a95aba87e9d",
        "type": "ui_switch",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "RTC on/off RTC_Settings",
        "label": "Zone 2",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 1,
        "width": 7,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 6150,
        "y": 840,
        "wires": [
            [
                "97d6c067d71e46a3"
            ]
        ]
    },
    {
        "id": "e19e61c53578e11b",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "623f5d089867807d",
        "order": 11,
        "width": 2,
        "height": 1,
        "name": "Home Heat - Current correction value RTC",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6190,
        "y": 1560,
        "wires": []
    },
    {
        "id": "f8169608f1f35b56",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 16,
        "width": 5,
        "height": 1,
        "name": "Room actual",
        "label": "Room actual",
        "format": "{{msg.payload}} °C ",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6110,
        "y": 1080,
        "wires": []
    },
    {
        "id": "d60cb7d9078bfdaf",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "RTC toggle on/off (z2)",
        "links": [
            "1219e898e8a28b0e",
            "db1fb98ca4fdcc25",
            "e24be9e38b2cf80f"
        ],
        "x": 5995,
        "y": 760,
        "wires": [
            [
                "7b4c2a95aba87e9d",
                "977bb657f759948a"
            ]
        ]
    },
    {
        "id": "0c3797698ceb1022",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Load on boot RTC Z2",
        "func": "var F_RTC       = global.get('F_RTC',\"file\");\nvar save        = false;\n\n////////////////////////////////////\nif (F_RTC===undefined){\n    global.set('F_RTC',{},\"file\"); \n    F_RTC = {};\n}\nif (F_RTC.z2===undefined){\n    global.set('F_RTC.z2',{},\"file\"); \n    F_RTC.z2 = {};\n}\n////////////////////////////////////\nif (F_RTC.z2.state === undefined)                   { F_RTC.z2.state = 0; save = true; }\nif (F_RTC.z2.t1_limit === undefined)                { F_RTC.z2.t1_limit = 1.5; save = true; }\nif (F_RTC.z2.t2_limit === undefined)                { F_RTC.z2.t2_limit = 1; save = true; }\nif (F_RTC.z2.t3_limit === undefined)                { F_RTC.z2.t3_limit = 0.5; save = true; }\nif (F_RTC.z2.t4_limit === undefined)                { F_RTC.z2.t4_limit = -0.5; save = true; }\nif (F_RTC.z2.t5_limit === undefined)                { F_RTC.z2.t5_limit = -1; save = true; }\nif (F_RTC.z2.t6_limit === undefined)                { F_RTC.z2.t6_limit = -1.5; save = true; }\nif (F_RTC.z2.t7_correction_value === undefined)     { F_RTC.z2.t7_correction_value = 4; save = true; }\nif (F_RTC.z2.t7_limit === undefined)                { F_RTC.z2.t7_limit = -2; save = true; }\nif (F_RTC.automation_on_limit === undefined)        { F_RTC.automation_on_limit = 3; save = true; }\nif (F_RTC.automation_off_limit === undefined)       { F_RTC.automation_off_limit = 1; save = true; }\nif (F_RTC.automation_power_state === undefined)     { F_RTC.automation_power_state = 0; save = true; }\nif (F_RTC.automation_OM_state === undefined)        { F_RTC.automation_OM_state = 0; save = true; }\nif (F_RTC.incremental_setpoints_state === undefined){ F_RTC.incremental_setpoints_state = 0; save = true; }\nif (F_RTC.z2.t1_correction === undefined)              { F_RTC.z2.t1_correction = -3; save = true; }\nif (F_RTC.z2.t2_correction === undefined)              { F_RTC.z2.t2_correction = -2; save = true; }\nif (F_RTC.z2.t3_correction === undefined)              { F_RTC.z2.t3_correction = -1; save = true; }\nif (F_RTC.z2.t4_correction === undefined)              { F_RTC.z2.t4_correction = 1; save = true; }\nif (F_RTC.z2.t5_correction === undefined)              { F_RTC.z2.t5_correction = 2; save = true; }\nif (F_RTC.z2.t6_correction === undefined)              { F_RTC.z2.t6_correction = 3; save = true; }\n\nif (save === true) {global.set('F_RTC',F_RTC,\"file\");}\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nlet msg1 = {}, msg2 = {}, msg3 = {}, msg4 = {}, msg5 = {}, msg6 = {}, msg7 = {}, msg8 = {}, msg9 = {}, msg10 = {}, msg11 = {}, msg12 = {}, msg13 = {}, msg14 = {}, msg15 = {},      msg16={}, msg17={}, msg18={}, msg19={}, msg20={}, msg21={};\n\nmsg1.payload = F_RTC.z2.state;\nmsg2.payload = F_RTC.z2.setpoint; \nmsg3.payload = F_RTC.z2.t1_limit; msg3.topic = 'z2.t1_limit';\nmsg4.payload = F_RTC.z2.t2_limit; msg4.topic = 'z2.t2_limit';\nmsg5.payload = F_RTC.z2.t3_limit; msg5.topic = 'z2.t3_limit';\nmsg6.payload = F_RTC.z2.t4_limit; msg6.topic = 'z2.t4_limit';\nmsg7.payload = F_RTC.z2.t5_limit; msg7.topic = 'z2.t5_limit';\nmsg8.payload = F_RTC.z2.t6_limit; msg8.topic = 'z2.t6_limit';\nmsg9.payload = F_RTC.z2.t7_limit; msg9.topic = 'z2.t7_limit'; // custom\nmsg10.payload = F_RTC.automation_off_limit; msg10.topic = 'automation_off_limit'\nmsg11.payload = F_RTC.automation_on_limit; msg11.topic = 'automation_on_limit';\nmsg12.payload = F_RTC.automation_power_state; msg12.topic = 'automation_power_state';\nmsg13.payload = F_RTC.z2.t7_correction_value; msg13.topic = 'z2.t7_correction_value';\nmsg14.payload = F_RTC.z2.incremental_setpoints_state; msg14.custom = F_RTC.z2.t7_correction_value;\nmsg15.payload = F_RTC.automation_OM_state; msg15.topic = 'automation_OM_state';\nmsg16.payload = F_RTC.z2.t1_correction; msg16.topic = 'z2.t1_correction';\nmsg17.payload = F_RTC.z2.t2_correction; msg17.topic = 'z2.t2_correction';\nmsg18.payload = F_RTC.z2.t3_correction; msg18.topic = 'z2.t3_correction';\nmsg19.payload = F_RTC.z2.t4_correction; msg19.topic = 'z2.t4_correction';\nmsg20.payload = F_RTC.z2.t5_correction; msg20.topic = 'z2.t5_correction';\nmsg21.payload = F_RTC.z2.t6_correction; msg21.topic = 'z2.t6_correction';\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10, msg11, msg12, msg13, msg14, msg15, msg16, msg17, msg18, msg19, msg20, msg21];\n",
        "outputs": 21,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5680,
        "y": 980,
        "wires": [
            [
                "977bb657f759948a",
                "7b4c2a95aba87e9d",
                "d991366e7d67c54e"
            ],
            [
                "c05450dcdb75572d",
                "08167bdfbbef5324"
            ],
            [
                "05017c2ecba0a692",
                "58fb0b8dc1837b4d"
            ],
            [
                "3766ea44b9ca610b",
                "58fb0b8dc1837b4d"
            ],
            [
                "fe4f087158d008e4",
                "58fb0b8dc1837b4d"
            ],
            [
                "e1529880c6a6223e",
                "58fb0b8dc1837b4d"
            ],
            [
                "f661e6e6544ebc6c",
                "58fb0b8dc1837b4d"
            ],
            [
                "e346b8726ebe9cd9",
                "58fb0b8dc1837b4d"
            ],
            [
                "c40816f066cf98e5",
                "58fb0b8dc1837b4d"
            ],
            [
                "58fb0b8dc1837b4d"
            ],
            [
                "58fb0b8dc1837b4d"
            ],
            [
                "58fb0b8dc1837b4d"
            ],
            [
                "319301f2d5fc1d0e",
                "58fb0b8dc1837b4d"
            ],
            [],
            [
                "58fb0b8dc1837b4d"
            ],
            [
                "e55cae9ad63ae7cc",
                "58fb0b8dc1837b4d"
            ],
            [
                "1c8888d67418eea9",
                "58fb0b8dc1837b4d"
            ],
            [
                "4e49a10110baab19",
                "58fb0b8dc1837b4d"
            ],
            [
                "0d28cb8875bca592",
                "58fb0b8dc1837b4d"
            ],
            [
                "2775bbabf89cbb64",
                "58fb0b8dc1837b4d"
            ],
            [
                "f6ff4eff6615e0d3",
                "58fb0b8dc1837b4d"
            ]
        ],
        "outputLabels": [
            "Correction_1_RTC_on_off",
            "WoonkamerSP",
            "rtc_t1",
            "rtc_t2",
            "rtc_t3",
            "rtc_t4",
            "rtc_t5",
            "rtc_t6",
            "rtc_t7",
            "rtc_off",
            "rtc_on",
            "F_RTC_on_off2",
            "rtc_t7_correction_value",
            "incremental_setpoints_state",
            "F_RTC_on_off3_OM",
            "F_RTC.t1_correction",
            "F_RTC.t2_correction",
            "F_RTC.t3_correction",
            "F_RTC.t4_correction",
            "F_RTC.t5_correction",
            "F_RTC.t6_correction"
        ]
    },
    {
        "id": "6f43f61636b68777",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "1 Trigger / 5 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 5700,
        "y": 760,
        "wires": [
            [
                "0c3797698ceb1022"
            ]
        ]
    },
    {
        "id": "8b391a05a7f52e53",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "623f5d089867807d",
        "order": 10,
        "width": 3,
        "height": 1,
        "name": "RTC PV (Home_HEAT)",
        "label": "RTC",
        "format": "({{msg.payload}} °C)",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7090,
        "y": 1580,
        "wires": []
    },
    {
        "id": "e3bc1acee5a2cc98",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Load information",
        "func": "let msg1={};\nmsg1 = global.get(\"rtc_chart_z2\",\"file\");\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6830,
        "y": 1440,
        "wires": [
            [
                "b55e98847ad8ecdf"
            ]
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "f641073983807a8e",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 6640,
        "y": 1440,
        "wires": [
            [
                "e3bc1acee5a2cc98"
            ]
        ]
    },
    {
        "id": "ca4a07c37b9c4f18",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "name": "Line - Setup ",
        "order": 4,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Setup</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 5950,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "26ea2065af75153b",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "name": "Line - RTC results",
        "order": 26,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>RTC results</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 5930,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "49bbcdc6539f94fe",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "RTC z2 gui changes to function trigger",
        "mode": "link",
        "links": [
            "8d56089ccc135555"
        ],
        "x": 7345,
        "y": 900,
        "wires": []
    },
    {
        "id": "f2fe4939eaeea42e",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 6500,
        "y": 1220,
        "wires": [
            [
                "49bbcdc6539f94fe",
                "bc47fd7cc80fec41",
                "cf7a6e8cc8d1ebce",
                "58fb0b8dc1837b4d"
            ]
        ]
    },
    {
        "id": "6af70d1403ec0df2",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Color",
        "func": "var F_RTC_state = global.get('F_RTC.z2.state',\"file\");\n\nlet msg1={};\n\n\nif (F_RTC_state == 0) \n        {\n            msg1.color = \"gray\";\n        }\n\n\nif (F_RTC_state == 1) \n        {\n            msg1.color = \"\";\n        }\nif (msg.payload > 0){msg.payload = '+' + msg.payload;}\nmsg1.payload = msg.payload;\n\nreturn [msg1];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5930,
        "y": 1560,
        "wires": [
            [
                "e19e61c53578e11b"
            ]
        ]
    },
    {
        "id": "2ecab5900dfda9d8",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "1 Trigger / 5 minutes",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 5700,
        "y": 800,
        "wires": [
            [
                "0c3797698ceb1022"
            ]
        ]
    },
    {
        "id": "b63b696d40899414",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "+",
        "func": "if (msg.payload > 0){msg.payload = '+' + msg.payload;}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5970,
        "y": 1320,
        "wires": [
            [
                "fe53451e91cfd331",
                "e1d0b0f0b8ad655f"
            ]
        ]
    },
    {
        "id": "86d7318e73038502",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "17164836e6c57f8b",
        "name": "link out 21 Z2",
        "mode": "link",
        "links": [
            "f76db0ea91c39edd"
        ],
        "x": 7345,
        "y": 820,
        "wires": []
    },
    {
        "id": "de7c5c2916599040",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "link out 22 z2",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 7345,
        "y": 860,
        "wires": []
    },
    {
        "id": "c40816f066cf98e5",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t7_limit",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 24,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t7_limit",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "0",
        "step": "0.1",
        "className": "",
        "x": 6320,
        "y": 1240,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "319301f2d5fc1d0e",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "+custom",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 25,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t7_correction_value",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "4",
        "max": "30",
        "step": "0.1",
        "className": "",
        "x": 6100,
        "y": 1240,
        "wires": [
            [
                "48bd155428717bbe",
                "4a69ffe447263421",
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "48bd155428717bbe",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "save +custom",
        "func": "// save on change only\nvar rtc_t7_custom_cor = global.get('F_RTC.z2.t7_correction_value',\"file\");\nif (msg.payload == rtc_t7_custom_cor)   {\n    return null;\n}\nelse    {\n    global.set('F_RTC.z2.t7_correction_value', msg.payload, \"file\");\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6340,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "ebf331ab3aadaa29",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 15,
        "width": 2,
        "height": 2,
        "name": "filler b",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6310,
        "y": 1080,
        "wires": []
    },
    {
        "id": "c5473b63422c3506",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "link in 17 Z2",
        "links": [
            "f29bcd6a438f474c"
        ],
        "x": 5765,
        "y": 1260,
        "wires": [
            [
                "f8169608f1f35b56"
            ]
        ]
    },
    {
        "id": "aa08790a4d25f173",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "set F_RTC.incremental_setpoints_state on/off z2",
        "func": "\nmsg.topic = \"Function - RTC incremental_setpoints\";\nglobal.set(\"F_RTC.z2.incremental_setpoints_state\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6580,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "4a69ffe447263421",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "custom",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 5740,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "97d6c067d71e46a3",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    return msg;\n}\n\nif (last_msgid == msg._msgid || msg.payload == last_value){\n    return null;\n}\n\n\ncontext.set('last_value',msg.payload);\ncontext.set('last_msgid',msg._msgid);\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6430,
        "y": 820,
        "wires": [
            [
                "d623402b62dea86c",
                "977bb657f759948a",
                "7b4c2a95aba87e9d",
                "b6fefe59b4d89bf8",
                "d991366e7d67c54e"
            ]
        ]
    },
    {
        "id": "b6fefe59b4d89bf8",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "link out 23 z2",
        "mode": "link",
        "links": [
            "8d56089ccc135555"
        ],
        "x": 6625,
        "y": 780,
        "wires": []
    },
    {
        "id": "b5936f69e6b31d58",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "link in from on_change_GUI Z2",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 5525,
        "y": 880,
        "wires": [
            [
                "0c3797698ceb1022"
            ]
        ]
    },
    {
        "id": "b55e98847ad8ecdf",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "g": "b184ea6e4969973e",
        "name": "",
        "group": "7267dafd7dc99038",
        "order": 3,
        "width": 16,
        "height": 14,
        "label": "Zone 2 Room Temperature",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "2000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#7bd152",
            "#0011ff",
            "#b22222",
            "#dc7f27",
            "#ffd700",
            "#ffd700",
            "#dc7f27",
            "#b22222",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 7140,
        "y": 1420,
        "wires": [
            [
                "cb801098daa59e70"
            ]
        ]
    },
    {
        "id": "7a309f0c4f930c07",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "b184ea6e4969973e",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 7070,
        "y": 1380,
        "wires": [
            [
                "b55e98847ad8ecdf"
            ]
        ]
    },
    {
        "id": "41986d4acf984ff4",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "b184ea6e4969973e",
        "group": "7267dafd7dc99038",
        "order": 29,
        "width": 16,
        "height": 1,
        "name": "footnote",
        "label": "This chart shows 1 datapoint every 5 minutes",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 7060,
        "y": 1480,
        "wires": []
    },
    {
        "id": "8491b61e69fb4555",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "b184ea6e4969973e",
        "name": "Store information",
        "func": "var rtc_chart = msg;\nglobal.set(\"rtc_chart_z2\", rtc_chart,\"file\");",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 7450,
        "y": 1500,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "cb801098daa59e70",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "b184ea6e4969973e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 7260,
        "y": 1500,
        "wires": [
            [
                "8491b61e69fb4555"
            ]
        ]
    },
    {
        "id": "fc6148bf5eca289d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 6,
        "width": 2,
        "height": 1,
        "name": "Room",
        "label": "Difference",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6110,
        "y": 880,
        "wires": []
    },
    {
        "id": "e439e0d942d27b4a",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "group": "7267dafd7dc99038",
        "order": 7,
        "width": 2,
        "height": 1,
        "name": "Water",
        "label": "Correction",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 6230,
        "y": 880,
        "wires": []
    },
    {
        "id": "1c8888d67418eea9",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t2_correction",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 11,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t2_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "-0.2",
        "step": "0.1",
        "className": "",
        "x": 6120,
        "y": 960,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "e55cae9ad63ae7cc",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t1_correction",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 9,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t1_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "-0.2",
        "step": "0.1",
        "className": "",
        "x": 6120,
        "y": 920,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "4e49a10110baab19",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t3_correction",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 13,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t3_correction",
        "topicType": "str",
        "format": "{{value}}",
        "min": "-5",
        "max": "-0.1",
        "step": "0.1",
        "className": "",
        "x": 6120,
        "y": 1000,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "0d28cb8875bca592",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t4_correction",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 19,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t4_correction",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0.1",
        "max": "5",
        "step": "0.1",
        "className": "",
        "x": 6120,
        "y": 1120,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "2775bbabf89cbb64",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t5_correction",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 21,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t5_correction",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0.2",
        "max": "5",
        "step": "0.1",
        "className": "",
        "x": 6120,
        "y": 1160,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "f6ff4eff6615e0d3",
        "type": "ui_numeric",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "z2.t6_correction",
        "label": "",
        "tooltip": "",
        "group": "7267dafd7dc99038",
        "order": 23,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "z2.t6_correction",
        "topicType": "str",
        "format": "+{{value}}",
        "min": "0.3",
        "max": "+5",
        "step": "0.1",
        "className": "",
        "x": 6120,
        "y": 1200,
        "wires": [
            [
                "f2fe4939eaeea42e"
            ]
        ]
    },
    {
        "id": "cc19eff0424139ee",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "Link out to HA - Room Setpoint Z2",
        "mode": "link",
        "links": [],
        "x": 5665,
        "y": 1180,
        "wires": []
    },
    {
        "id": "6ce525811e6d0a6e",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "link in 19 Z2",
        "links": [
            "4e9c3d9ac7790814"
        ],
        "x": 5665,
        "y": 1220,
        "wires": [
            [
                "03d39f5299973789"
            ]
        ]
    },
    {
        "id": "03d39f5299973789",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "set topic",
        "func": "msg.topic = 'z2.setpoint';\nmsg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5715,
        "y": 1220,
        "wires": [
            [
                "c05450dcdb75572d",
                "e2a3adee39b5539e"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "e1d0b0f0b8ad655f",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "RTC Correction Z2",
        "mode": "link",
        "links": [],
        "x": 6485,
        "y": 1500,
        "wires": []
    },
    {
        "id": "d991366e7d67c54e",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - RTC state",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 6670,
        "y": 900,
        "wires": [
            [
                "d4595356e2536fda"
            ]
        ]
    },
    {
        "id": "58fb0b8dc1837b4d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "changetopic",
        "func": "if (msg.topic == 'z2.t1_limit') {msg.topic = 'NR - RTC limit 1';}\nif (msg.topic == 'z2.t2_limit') {msg.topic = 'NR - RTC limit 2';}\nif (msg.topic == 'z2.t3_limit') {msg.topic = 'NR - RTC limit 3';}\nif (msg.topic == 'z2.t4_limit') {msg.topic = 'NR - RTC limit 4';}\nif (msg.topic == 'z2.t5_limit') {msg.topic = 'NR - RTC limit 5';}\nif (msg.topic == 'z2.t6_limit') {msg.topic = 'NR - RTC limit 6';}\nif (msg.topic == 'z2.t7_limit') {msg.topic = 'NR - RTC limit 7';}\n\nif (msg.topic == 'z2.t1_correction') { msg.topic = 'NR - RTC correction 1'; }\nif (msg.topic == 'z2.t2_correction') { msg.topic = 'NR - RTC correction 2'; }\nif (msg.topic == 'z2.t3_correction') { msg.topic = 'NR - RTC correction 3'; }\nif (msg.topic == 'z2.t4_correction') { msg.topic = 'NR - RTC correction 4'; }\nif (msg.topic == 'z2.t5_correction') { msg.topic = 'NR - RTC correction 5'; }\nif (msg.topic == 'z2.t6_correction') { msg.topic = 'NR - RTC correction 6'; }\nif (msg.topic == 'z2.t7_correction_value') { msg.topic = 'NR - RTC correction 7'; }\n\n\n\nif (msg.topic == 'automation_power_state') { msg.topic = 'NR - RTC automation (Power) state'; }\nif (msg.topic == 'automation_OM_state') { msg.topic = 'NR - RTC automation (Operating Mode) state'; }\n\nif (msg.topic == 'automation_on_limit') { msg.topic = 'NR - RTC automation trigger limit'; }\nif (msg.topic == 'automation_off_limit') { msg.topic = 'NR - RTC automation revert limit'; }\n\n\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6670,
        "y": 980,
        "wires": [
            [
                "d4595356e2536fda"
            ]
        ]
    },
    {
        "id": "08167bdfbbef5324",
        "type": "change",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - RTC Setpoint (Room)",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 6670,
        "y": 940,
        "wires": [
            [
                "d4595356e2536fda"
            ]
        ]
    },
    {
        "id": "d4595356e2536fda",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "d": true,
        "g": "17164836e6c57f8b",
        "name": "link out 24 Z2",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 6785,
        "y": 940,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "8168b4999e302157",
        "type": "comment",
        "z": "8c9d42231fd19d3c",
        "name": "Zone 2 ToDo things",
        "info": "node: \t\"d60cb7d9078bfdaf\"\n    in Zone 1 the link IN node was connected to link out 73\n    This is the Scheduler connection\n\nnode:   \"86d7318e73038502\"\n    Exit node to WP Managers\n",
        "x": 5450,
        "y": 1660,
        "wires": []
    },
    {
        "id": "75aa3d035ca7bfae",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "group": "7267dafd7dc99038",
        "name": "",
        "order": 2,
        "width": 1,
        "height": 15,
        "format": "<html>\n\n<head>\n    <style>\n        .box {\n            border-right: 1px solid #a39d99;\n            /* This is your left border */\n            padding-right: 10px;\n            /* Spacing between border and text */\n            margin: 5px 0;\n            height: 100%;\n            /* Adjust as needed */\n        }\n    </style>\n</head>\n\n<body>\n    <div class=\"box\">\n        \n    </div>\n</body>\n\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 5220,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "b0bbbb09b63fc68a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "afd3bbb9c7da4674",
        "name": "Get Room 2 setpoint",
        "func": "global.set(\"F_RTC.z2.setpoint\", msg.payload, \"file\");\nvar setpoint_zone2 = msg.payload;\n/*    \nmsg.topic = \"RTC\"\nmsg.payload = \"Room 1 setpoint changed to: \" + setpoint_zone2 + \" °C\";\n\n//check of Night reduction room setpoint is niet actief:\nif (global.get(\"NightReductionRoomSetpoint.state\", \"file\") == 0) {\n    let msg2 = {};                  //pin2 ---> link-out to Room setpoint NORMAL on dashboard Scheduler\n    msg2.payload = setpoint_zone2; \n    if (global.get('NightReductionRoomSetpoint.NORMAL', \"file\") == setpoint_zone2) { return null; } //only send when different\n    global.set(\"NightReductionRoomSetpoint.NORMAL\", setpoint_zone2, \"file\");\n    return [msg,msg2];\n    }\n\n\nreturn [msg,null];\n\n*/",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6800,
        "y": 1080,
        "wires": [
            [
                "e4bfa259db11a5be"
            ],
            [
                "103a668576c83c1e"
            ]
        ]
    },
    {
        "id": "e4bfa259db11a5be",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "afd3bbb9c7da4674",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 6970,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "103a668576c83c1e",
        "type": "rbe",
        "z": "8c9d42231fd19d3c",
        "g": "afd3bbb9c7da4674",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 6970,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "98d5ea90df940579",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "623f5d089867807d",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "Heat status",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 970,
        "y": 1180,
        "wires": []
    },
    {
        "id": "a12d078fa519dd37",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "623f5d089867807d",
        "order": 17,
        "width": 6,
        "height": 1,
        "name": "Z2-Final water temp.",
        "label": "{{msg.label}}",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1000,
        "y": 1360,
        "wires": []
    },
    {
        "id": "45a77ca7212de80c",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "e7187e0c9dc038f0",
        "group": "1179fa790d2d89ca",
        "name": "Line",
        "order": 16,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 730,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "f37c739180bdbc6e",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "bf4af523ba16d457",
        "name": "Line - HeatPump",
        "order": 21,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Custom functions (Multi-Zone)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 690,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "fbb9ab3b17c06559",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "623f5d089867807d",
        "order": 15,
        "width": 5,
        "height": 1,
        "name": "HeatZ2 - Current correction (SS)",
        "label": "<font color= {{msg.color}} >SoftStart</font>",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4870,
        "y": 2220,
        "wires": []
    },
    {
        "id": "3b21b99348cb6165",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "1179fa790d2d89ca",
        "order": 15,
        "width": 5,
        "height": 1,
        "name": "HeatZ1 - Current correction (SS)",
        "label": "<font color= {{msg.color}} >SoftStart</font>",
        "format": "<font color= {{msg.color}} > {{msg.payload}} °C</font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4870,
        "y": 2180,
        "wires": []
    },
    {
        "id": "be39fba32e4d8824",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "1179fa790d2d89ca",
        "order": 12,
        "width": 1,
        "height": 1,
        "name": "spacerz1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 4640,
        "y": 2140,
        "wires": []
    },
    {
        "id": "bab678598cd122e7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "623f5d089867807d",
        "order": 12,
        "width": 1,
        "height": 1,
        "name": "spacerz2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 4780,
        "y": 2140,
        "wires": []
    },
    {
        "id": "e2252ed3891a3e62",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "17164836e6c57f8b",
        "name": "on boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "trigger",
        "payloadType": "str",
        "x": 6640,
        "y": 1400,
        "wires": [
            [
                "cf7a6e8cc8d1ebce"
            ]
        ]
    },
    {
        "id": "6d96a4b8c7c4d615",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "Strip",
        "func": "delete msg.event;\ndelete msg.socketid;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5390,
        "y": 1220,
        "wires": [
            [
                "464b869477a20de7"
            ]
        ]
    },
    {
        "id": "04b006e187c5d449",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "Strip",
        "func": "delete msg.event;\ndelete msg.socketid;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5410,
        "y": 180,
        "wires": [
            [
                "c40f9cc2fac31d03"
            ]
        ]
    },
    {
        "id": "1da8a2bfaa2b82b8",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Boot note",
        "func": "let msg1={};\nmsg1.topic = 'SYSTEM';\nmsg1.payload = 'Flow restart detected. !! Please be aware!! It could take up to 10 minutes befor all values and variables have been received, set and correctly processed'\nreturn msg1;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 2340,
        "wires": [
            [
                "a2d45addc303107f"
            ]
        ]
    },
    {
        "id": "631cb9906b885a9d",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.01",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1350,
        "y": 2340,
        "wires": [
            [
                "1da8a2bfaa2b82b8"
            ]
        ]
    },
    {
        "id": "79e2f9225b931e16",
        "type": "delay",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1970,
        "y": 100,
        "wires": [
            [
                "f6e0cc6687051bf1",
                "7b3d20aa8c9abb1e"
            ]
        ]
    },
    {
        "id": "607aa2de7f1a0f59",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 3",
        "links": [
            "7c891c6c1a9c67aa"
        ],
        "x": 1575,
        "y": 360,
        "wires": [
            [
                "d286bfab06c854b3"
            ]
        ]
    },
    {
        "id": "9b6df7cf166fd06a",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 4",
        "links": [
            "5ee632164032ad96"
        ],
        "x": 1375,
        "y": 1480,
        "wires": [
            [
                "4694bfeaa76d43f1"
            ]
        ]
    },
    {
        "id": "96bfb59824d94a5e",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 6",
        "links": [
            "7e815d34fedff804"
        ],
        "x": 1375,
        "y": 1520,
        "wires": [
            [
                "db41038f69a63144"
            ]
        ]
    },
    {
        "id": "c7956753cc63cfc4",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 8",
        "links": [
            "3b9df53eebf87cec"
        ],
        "x": 1375,
        "y": 1440,
        "wires": [
            [
                "c2baf1abae4e4441"
            ]
        ]
    },
    {
        "id": "83544a490499e99c",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 11",
        "links": [
            "9872c95f0807bb0b"
        ],
        "x": 1375,
        "y": 1560,
        "wires": [
            [
                "88e644ce965a6890"
            ]
        ]
    },
    {
        "id": "d8cbe45733f62ad2",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 17",
        "links": [
            "d766dacd9c621c38"
        ],
        "x": 1375,
        "y": 1280,
        "wires": [
            [
                "5b0e15b0804a4452"
            ]
        ]
    },
    {
        "id": "fec855b6c7ec4694",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 20",
        "links": [
            "91e37aab30bd7432"
        ],
        "x": 1375,
        "y": 1320,
        "wires": [
            [
                "a89b41c6600cac07"
            ]
        ]
    },
    {
        "id": "971c986d68f201a6",
        "type": "trigger",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1920,
        "y": 1900,
        "wires": [
            [
                "3ccb1ebb3e26ef32",
                "ac6e032187db54c7"
            ]
        ]
    },
    {
        "id": "d0304b43f08fc247",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 28",
        "links": [
            "3f6dbb8624fe8240"
        ],
        "x": 1375,
        "y": 1160,
        "wires": [
            [
                "9170caebad3acdcf"
            ]
        ]
    },
    {
        "id": "96a5cf433a98a371",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 29",
        "links": [
            "a7fa67221ae9e9a2"
        ],
        "x": 1375,
        "y": 1200,
        "wires": [
            [
                "58d199ee200d7b16"
            ]
        ]
    },
    {
        "id": "83b1be8ea1390fad",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "function 16",
        "func": "msg.ui_control = {\"ymax\": 50, \"ymin\": 10, \"xmax\": 25, \"xmin\": -25  }\nreturn msg;\n\n\n//{\"options\":{\"pointer\":false,\"gaugeWidthScale\":1.5}}\nmsg.ui_control = {\n  options: {\n    scales: {\n      xAxis: { \"min\": -20, \"max\": 30  },\n      yAxis: { \"min\": 0, \"max\": 35  }\n    }\n  }\n};\nreturn msg;\n  ",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5370,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "e95d11e7d9aaec9c",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 5170,
        "y": 560,
        "wires": [
            [
                "83b1be8ea1390fad"
            ]
        ]
    },
    {
        "id": "cb558d1ed1daa37e",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 5000,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "21ebdaf0c28e39ab",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link in 78",
        "links": [
            "0120ee291e0d56d2"
        ],
        "x": 1375,
        "y": 1400,
        "wires": [
            [
                "e85a5bbd08082721"
            ]
        ]
    },
    {
        "id": "d2881ea90b259ad7",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "b021ff109e8a2288",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "spacer 6x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "x": 4230,
        "y": 180,
        "wires": []
    },
    {
        "id": "f9b2744cbe33d17a",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "1db6d698669f3827",
        "order": 5,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5230,
        "y": 740,
        "wires": []
    },
    {
        "id": "b9bd5ab11e9743ef",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "c4606d0174cdbef4",
        "order": 2,
        "width": 13,
        "height": 1,
        "name": "SoftStart Header",
        "label": "<h1>SoftStart</h>",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5230,
        "y": 2140,
        "wires": []
    },
    {
        "id": "6da2eb2fe8a51414",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "c4606d0174cdbef4",
        "order": 1,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5190,
        "y": 2100,
        "wires": []
    },
    {
        "id": "8305b7f8df3333fb",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "c4606d0174cdbef4",
        "order": 3,
        "width": 8,
        "height": 1,
        "name": "",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5189,
        "y": 2175,
        "wires": []
    },
    {
        "id": "30a8e90354d6eb5d",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "c2a0123d2e2c91f0",
        "order": 21,
        "width": 6,
        "height": 1,
        "name": "SS Outlet actual",
        "label": "-- Outlet actual",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 660,
        "wires": []
    },
    {
        "id": "c77191faf1a057ff",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "c2a0123d2e2c91f0",
        "order": 18,
        "width": 6,
        "height": 1,
        "name": "SS Outlet setpoint",
        "label": "Outlet setpoint ({{msg.label}} °C)",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 810,
        "y": 560,
        "wires": []
    },
    {
        "id": "029ab88c49c78658",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "group": "c2a0123d2e2c91f0",
        "order": 17,
        "width": 6,
        "height": 1,
        "name": "SS - Current correction (Final)",
        "label": "Current correction (Final)",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4530,
        "y": 2300,
        "wires": []
    },
    {
        "id": "4e6e20a608cd21dd",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "name": "Label",
        "func": "var TOP76_Heating_Mode          = global.get('TOP76_Heating_Mode',\"file\");\n        if (TOP76_Heating_Mode === undefined)    {return null;}\nvar TOP20_ThreeWay_Valve_State  = global.get('TOP20_ThreeWay_Valve_State');\n\nlet msg1 = {};\nmsg1.label = \"Temperature shift\";\nmsg1.payload = global.get('SHIFT_Final',\"file\");           \n\nreturn msg1\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3970,
        "y": 2300,
        "wires": [
            [
                "029ab88c49c78658"
            ]
        ],
        "outputLabels": [
            "Final"
        ]
    },
    {
        "id": "7db58dec4e2e21ad",
        "type": "link in",
        "z": "8c9d42231fd19d3c",
        "name": "link in 103",
        "links": [
            "16054e8334890ad8"
        ],
        "x": 3755,
        "y": 2300,
        "wires": [
            [
                "4e6e20a608cd21dd"
            ]
        ]
    },
    {
        "id": "03eb627418b8268e",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 3460,
        "y": 2320,
        "wires": [
            [
                "4e6e20a608cd21dd"
            ]
        ]
    },
    {
        "id": "f4c3147c72aeb7b5",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "3476743a7b29da0d",
        "group": "c2a0123d2e2c91f0",
        "order": 15,
        "width": 6,
        "height": 1,
        "name": "SP (CCC) - Home HEAT Functions tab",
        "label": "Initial target",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3870,
        "y": 640,
        "wires": []
    },
    {
        "id": "1f8e0da618a71c16",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "name": "function 19",
        "func": "var SHIFT_Final = (Math.round(global.get('SHIFT_Final',\"file\") * 10 )) / 10;\nvar Start_temp = (Math.round(Math.max(global.get('F_CCC.z1.setpoint',\"file\"),global.get('F_CCC.z2.setpoint',\"file\"))) * 10) / 10;\n\nmsg.label = SHIFT_Final + Start_temp;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 560,
        "wires": [
            [
                "c77191faf1a057ff"
            ]
        ]
    },
    {
        "id": "c48cd6bad07ce428",
        "type": "ui_chart",
        "z": "8c9d42231fd19d3c",
        "name": "SS chart",
        "group": "c2a0123d2e2c91f0",
        "order": 16,
        "width": 18,
        "height": 7,
        "label": "Last hour",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "-6",
        "ymax": "",
        "removeOlder": "1",
        "removeOlderPoints": "2000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 4511,
        "y": 2370,
        "wires": [
            []
        ]
    },
    {
        "id": "3f9cda20118a9a8a",
        "type": "ui_text",
        "z": "8c9d42231fd19d3c",
        "g": "5ab5ca67951ca4de",
        "group": "c2a0123d2e2c91f0",
        "order": 22,
        "width": 6,
        "height": 1,
        "name": "SS Intlet actual",
        "label": "-- Inlet actual",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 720,
        "wires": []
    },
    {
        "id": "f9a25376cfab94a8",
        "type": "ui_template",
        "z": "8c9d42231fd19d3c",
        "g": "4d3178806b1f0577",
        "group": "c2a0123d2e2c91f0",
        "name": "Line WaterTemperature",
        "order": 20,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Water temperature</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3890,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "282b457abad9d46c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "Startup message",
        "func": "msg.topic = '-- IMPORTANT --'\nvar TOP76_Heating_Mode = global.get('TOP76_Heating_Mode',\"file\");\n\nif (TOP76_Heating_Mode === undefined) {return null}\n\nif (TOP76_Heating_Mode === 0) {\n    msg.payload = 'Step 4: Continue setting up the pump'\n    node.send(msg);\n\n    msg.payload = 'Step 3: Press [Export]'\n    node.send(msg);\n    \n    msg.payload = 'Step 2: Go to CCC tab and set your desired profile';\n    node.send(msg);\n    \n    msg.payload = 'Step 1: Make sure you have ALL functions disabled. Corrections should be 0 (zero)';\n    node.send(msg); \n\n    msg.payload = 'For correct Compensation Curve operation...'\n    node.send(msg); \n\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2270,
        "y": 2500,
        "wires": [
            [
                "861b9f982a76f569"
            ]
        ]
    },
    {
        "id": "f34af83eb1ed2250",
        "type": "inject",
        "z": "8c9d42231fd19d3c",
        "g": "4f352fdae09316c2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "30",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2070,
        "y": 2500,
        "wires": [
            [
                "282b457abad9d46c"
            ]
        ]
    },
    {
        "id": "29f0a76babd44a0d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 168",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 2285,
        "y": 2980,
        "wires": []
    },
    {
        "id": "b2cbfb75d81fa060",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "name": "link out 172",
        "mode": "link",
        "links": [
            "52855bedeec34357"
        ],
        "x": 2095,
        "y": 2940,
        "wires": []
    },
    {
        "id": "5b42252823e24321",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetDHWTemp\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1000,
        "wires": [
            [
                "b5dc51a590bfb68d"
            ]
        ]
    },
    {
        "id": "b5dc51a590bfb68d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 174",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1000,
        "wires": []
    },
    {
        "id": "e581d28cc362452a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetHeatpump\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 100,
        "wires": [
            [
                "26788a9c5068d2e2"
            ]
        ]
    },
    {
        "id": "26788a9c5068d2e2",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 180",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 100,
        "wires": []
    },
    {
        "id": "369a3b80fea31b09",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetQuietMode\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 200,
        "wires": [
            [
                "2ee6fe83b8cf0f17"
            ]
        ]
    },
    {
        "id": "2ee6fe83b8cf0f17",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 181",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 200,
        "wires": []
    },
    {
        "id": "79ad31b84520b767",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetOperationMode\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 280,
        "wires": [
            [
                "62b3c7c6d8895b1d"
            ]
        ]
    },
    {
        "id": "62b3c7c6d8895b1d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 182",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 280,
        "wires": []
    },
    {
        "id": "42d50b95f8eb32a4",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetPump\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 360,
        "wires": [
            [
                "34a886f1f91573fc"
            ]
        ]
    },
    {
        "id": "34a886f1f91573fc",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 183",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 360,
        "wires": []
    },
    {
        "id": "9a8085c30aee2250",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetMaxPumpDuty\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 480,
        "wires": [
            [
                "830637fbcb7ec1bd"
            ]
        ]
    },
    {
        "id": "830637fbcb7ec1bd",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 184",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 460,
        "wires": []
    },
    {
        "id": "bff0cc5ed79c971d",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetHolidayMode\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 780,
        "wires": [
            [
                "c4def6c29af1c95d"
            ]
        ]
    },
    {
        "id": "c4def6c29af1c95d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 185",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 780,
        "wires": []
    },
    {
        "id": "3c42519dcb347603",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetPowerfulMode\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 840,
        "wires": [
            [
                "14952d2a7782cba8"
            ]
        ]
    },
    {
        "id": "14952d2a7782cba8",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 186",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 840,
        "wires": []
    },
    {
        "id": "318d8d4097066143",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetForceDHW\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 900,
        "wires": [
            [
                "066124d57fbb907f"
            ]
        ]
    },
    {
        "id": "066124d57fbb907f",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 187",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 900,
        "wires": []
    },
    {
        "id": "c15682752982ae1f",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetZones\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1280,
        "wires": [
            [
                "1f91269e8e062b61"
            ]
        ]
    },
    {
        "id": "1f91269e8e062b61",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 188",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1280,
        "wires": []
    },
    {
        "id": "4b254ad728752964",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetForceDefrost\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1060,
        "wires": [
            [
                "18ac97b7c4a2f6b4"
            ]
        ]
    },
    {
        "id": "18ac97b7c4a2f6b4",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 189",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1060,
        "wires": []
    },
    {
        "id": "eec290acaa090189",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetForceSterilization\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1100,
        "wires": [
            [
                "e1989aa130fcf7fa"
            ]
        ]
    },
    {
        "id": "e1989aa130fcf7fa",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 190",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1100,
        "wires": []
    },
    {
        "id": "a4a8967bca76bcae",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetFloorHeatDelta\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1320,
        "wires": [
            [
                "f042572825758948"
            ]
        ]
    },
    {
        "id": "f042572825758948",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 191",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1320,
        "wires": []
    },
    {
        "id": "16725b9ae83a775a",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetFloorCoolDelta\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1360,
        "wires": [
            [
                "328368282a2df12d"
            ]
        ]
    },
    {
        "id": "328368282a2df12d",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 192",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1360,
        "wires": []
    },
    {
        "id": "9f3d499b78d6688a",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 193",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1400,
        "wires": []
    },
    {
        "id": "52354b3c465d574c",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetDHWHeatDelta\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1400,
        "wires": [
            [
                "9f3d499b78d6688a"
            ]
        ]
    },
    {
        "id": "eb9141c8d2afe9b5",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetHeaterDelayTime\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1440,
        "wires": [
            [
                "ce57d6123654286a"
            ]
        ]
    },
    {
        "id": "ce57d6123654286a",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 194",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1440,
        "wires": []
    },
    {
        "id": "e9e3d0d0ef897ed5",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 195",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1480,
        "wires": []
    },
    {
        "id": "20842e7fa662ab81",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetHeaterStartDelta\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1480,
        "wires": [
            [
                "e9e3d0d0ef897ed5"
            ]
        ]
    },
    {
        "id": "e0ba83b784e2b218",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetHeaterStopDelta\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1520,
        "wires": [
            [
                "2d0e4fd78a0e7edf"
            ]
        ]
    },
    {
        "id": "2d0e4fd78a0e7edf",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 196",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1520,
        "wires": []
    },
    {
        "id": "970ccad2654b34c1",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 197",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1560,
        "wires": []
    },
    {
        "id": "8fce19c6455342d1",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetMainSchedule\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1560,
        "wires": [
            [
                "970ccad2654b34c1"
            ]
        ]
    },
    {
        "id": "7a69672de5ef63dc",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 198",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1600,
        "wires": []
    },
    {
        "id": "821bfc4baa75c406",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetReset\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1600,
        "wires": [
            [
                "7a69672de5ef63dc"
            ]
        ]
    },
    {
        "id": "608e18424bd15979",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetBufferDelta\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1900,
        "wires": [
            [
                "1198aff12514253c"
            ]
        ]
    },
    {
        "id": "1198aff12514253c",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 199",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1900,
        "wires": []
    },
    {
        "id": "2e4bb9c8148947e6",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetZ2CoolRequestTemperature\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 1980,
        "wires": [
            [
                "880307044a34f772"
            ]
        ]
    },
    {
        "id": "880307044a34f772",
        "type": "link out",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "link out 200",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 2785,
        "y": 1980,
        "wires": []
    },
    {
        "id": "1b1ddea1350cb5ce",
        "type": "function",
        "z": "8c9d42231fd19d3c",
        "g": "3151681b2157872c",
        "name": "FW",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1835,
        "y": 1360,
        "wires": [
            [
                "2d364a067e4a7b4a",
                "7139256ff024b872",
                "f66e9fca72401ab4"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "ad980a450f532e53",
        "type": "tab",
        "label": "WP Input",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "82fd5c42e59889c9",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "",
        "style": {
            "label": true
        },
        "nodes": [
            "6bd234b67b830924",
            "0fe684f74775324c",
            "93cacebad7e74573",
            "eaf23ae574103f75"
        ],
        "x": 154,
        "y": 2939,
        "w": 872,
        "h": 162
    },
    {
        "id": "4267db13778ecba3",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "",
        "style": {
            "fill": "#c8e7a7",
            "label": true
        },
        "nodes": [
            "07ea01ca5f3dd948",
            "a73990662fc6dc84",
            "05bc11ef8fc2b3c6",
            "5d7cec9b89cfdcce"
        ],
        "x": 54,
        "y": 159,
        "w": 612,
        "h": 202
    },
    {
        "id": "3643538ecafdae97",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "HOME tab - HEATPUMP",
        "style": {
            "label": true,
            "fill": "#e3f3d3",
            "color": "#000000"
        },
        "nodes": [
            "025597cef8c50d11",
            "73f39764feab525c",
            "f7f21cce882495d8",
            "03a4aa238afc1981",
            "9abf6494d65a1390",
            "828498df89e0ce03",
            "850453d49df4bcd0",
            "ccdcb6582052a00e",
            "5dab59668d1258c8",
            "3973cf9c88c35871",
            "8e8c5440b14adc8f",
            "3c84c5b3facc643d",
            "3c9d31e1cff6eee5",
            "d10d22a53b6cc13e",
            "f513edeb57d7dfd4",
            "73d3ab6818c4daf2"
        ],
        "x": 3114,
        "y": 59,
        "w": 1832,
        "h": 222
    },
    {
        "id": "f0315d6daee8edb3",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "HOME tab - HEAT",
        "style": {
            "fill": "#e3f3d3",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "0d82688afa5de780",
            "3c482b65be488c84",
            "b21f4682fc8d0b9c",
            "2b39cca96f04ab29",
            "3511e342c1fb7c3f",
            "aa4dd3b07f9cb7ed",
            "f971bd6378b8c09d",
            "fb07535531026f0a",
            "424df4c604c9b4fb",
            "518eaac0afd76a49",
            "cc68aac684b9df7b",
            "5f2a10d2bf1bd860",
            "d6cef73c0a1296a8",
            "5d234163ccd6b5fa",
            "1f2b375b51b2abed",
            "17dc7d07b633910c",
            "779bb57a0d8072a1",
            "be7dc51d4e1fe4de",
            "5f3349014d71b7a9",
            "262b47de81481e01",
            "0afb79d6572270c7",
            "e60908ba16f0b752",
            "e3a7d36ecf2a7ee1",
            "e1ac20962cd7e152",
            "de760957c755b9fe",
            "1219e898e8a28b0e",
            "a3aaecacd0b72876"
        ],
        "x": 3114,
        "y": 299,
        "w": 1832,
        "h": 302
    },
    {
        "id": "cceb6bd8d8813dc3",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "HOME tab - DHW",
        "style": {
            "fill": "#e3f3d3",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3b0c5855d9f81d85",
            "50510191e3d7f7fc",
            "8ddf5bc907dd5bea",
            "b7948d0dfa748885",
            "f706c72d01f5f905",
            "9e6b649a9373fdc7",
            "476f6e4aa5bc2c0a",
            "91c75ca9f3471bd5",
            "445a8a46abb0d733",
            "cbedb4c9168e53f0",
            "18038fcd6bb30412",
            "16667133a18234e6",
            "41826750c369e474",
            "48e6808b29b0f8e9",
            "986a82328a195e5c",
            "e20399c7ef5a8bec",
            "c42f8ce44ca4ca57",
            "1d318ee169215c26",
            "3c6e6a48e1e28146",
            "e1d4bb0b2ec3c099",
            "3b1d3340821ec488",
            "7dcb2797cf862ed0",
            "2881215209154d75",
            "87bb4a4a750b5719"
        ],
        "x": 3114,
        "y": 619,
        "w": 1852,
        "h": 282
    },
    {
        "id": "448f01b40762d074",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "HOME - COOL",
        "style": {
            "fill": "#bfdbef",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "c3ba3e3df371f60d",
            "6d804f32d2ecf24b",
            "e5b0e6d0b0b7a2dd",
            "520597253ecb5a45",
            "fac31892b7108bc7"
        ],
        "x": 3114,
        "y": 919,
        "w": 1712,
        "h": 82
    },
    {
        "id": "b37109182aa09362",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "SETTINGS tab - Operation",
        "style": {
            "label": true,
            "fill": "#ffffbf",
            "color": "#000000"
        },
        "nodes": [
            "ed74c1ebbc04bb2b",
            "aaad5e68b3b9bf5e",
            "f0150106811a865b",
            "fbaf7140575589b7",
            "75cba13a1df7c9c8",
            "39f05c9459e65ad4",
            "a77c1a7ddd9cd088",
            "7412d52e84e226e1",
            "65e79bc507918e26",
            "9872c95f0807bb0b",
            "fc6bfed04af10f02",
            "9ad9e41bc15fb30b",
            "9ce4a5f0ac4ca8e8",
            "edca81bfc8bb2eb0",
            "7a3eb413e95bdf25"
        ],
        "x": 3594,
        "y": 1299,
        "w": 1352,
        "h": 222
    },
    {
        "id": "11fd1901e23b1c4b",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "SETTINGS tab - Heat Pump",
        "style": {
            "fill": "#ffffbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "74ed14018ce311df",
            "a4cfc4e8117d1675",
            "2fae7de3640b6380",
            "f484ab216ac6829a",
            "4126d390518edb2d",
            "4465669ce511f5e2",
            "11822306257b3b3a",
            "255e838a7433d3c1",
            "7c891c6c1a9c67aa",
            "5ee632164032ad96",
            "7e815d34fedff804",
            "3b9df53eebf87cec",
            "d4b1190308774750",
            "9a4252db1617da40",
            "090f50e8d33fc329",
            "787fd9a58ada1803",
            "271252a59e1d14ae",
            "15398a18d556c530",
            "84634fd8ec8f1f7a",
            "e2fbab42ba4d85d7"
        ],
        "x": 3594,
        "y": 1039,
        "w": 1352,
        "h": 242
    },
    {
        "id": "539143ccb5c25993",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "SETTINGS tab - HEAT",
        "style": {
            "fill": "#ffffbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "427b8d8c87716450",
            "ab40e61164a31442",
            "75e3d2d0ae71782e",
            "7f081b8d28d5b365",
            "8356f617756a64f6",
            "b965d21815c813aa",
            "ef10424709a45fd2",
            "51eb57799ea1ebcb",
            "a0d2782a2d438f21",
            "f32092254914605c",
            "c5ef1c23d768f2b7",
            "cb46c80445de7874",
            "f40fd54dd3c8a770",
            "d766dacd9c621c38",
            "476092c14d80e376",
            "91e37aab30bd7432",
            "46f7abaed662ba28",
            "94fca17199ef198f",
            "3f6dbb8624fe8240",
            "a7fa67221ae9e9a2",
            "990eadcaf7919e73",
            "3006427919e8aff2",
            "293dabdb7dc9d90e",
            "0f9dfedd3bbaf56f",
            "5d3b9da1f396e6cd",
            "f6776de159ce85f8",
            "bd637b6a2e4ef723",
            "c5d46676a3fbdfdc"
        ],
        "x": 3594,
        "y": 1539,
        "w": 1212,
        "h": 322
    },
    {
        "id": "57c0160eb601916d",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "SETTINGS tab - DHW",
        "style": {
            "stroke": "#777777",
            "label": true,
            "fill": "#ffffbf",
            "color": "#000000"
        },
        "nodes": [
            "a47610438b54e602",
            "5fdc034f44ac48f9",
            "5c677fecb54920ff",
            "8c9808071334d371",
            "f19d9753da86f709",
            "6303eae8f8d9cba1",
            "f4637a99af0d109d",
            "9eafb5002ff4185b",
            "53dba3f23c3b38f0",
            "ce692e24838cd878",
            "d68588990514e718",
            "f3f961c698c9fc05",
            "06c80c8b77607750",
            "0120ee291e0d56d2",
            "e0e8a190d72f032e",
            "a0211d49e6faafb5",
            "1d1e5de9b348e918",
            "f84f8c597d2d0d6f",
            "f918bf51a72255c8",
            "03acb67d75e482b0",
            "48590274b94061fc"
        ],
        "x": 3594,
        "y": 1899,
        "w": 1372,
        "h": 242
    },
    {
        "id": "d05b81876b2bc829",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "FUNCTION - PumpSpeed",
        "style": {
            "fill": "#e3f3d3",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "7a4290e8610e8c41",
            "be09347ce3851979",
            "4d0ef717fa8fdb71",
            "eb50dc8e437e15e5",
            "a3259f9fb12aaeab",
            "3324f544a948dffe",
            "83c2f96c129c90c1",
            "1525c8d920e353c1",
            "ba2a9abddd106a27",
            "e3ab6d1315c83c96",
            "3147336ddd86584b",
            "9030db4c675089c7",
            "d97eb42241468fce",
            "27c919a4983a17cb",
            "4a7aad6ff4700b55",
            "cbe8f31c5e1c3d86"
        ],
        "x": 3594,
        "y": 2239,
        "w": 1352,
        "h": 202
    },
    {
        "id": "56210128cf250ab6",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "FUNCTION - RTC",
        "style": {
            "fill": "#bfc7d7",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "37a9bdb8b839b309",
            "58b2a9d63158de30",
            "d753a5f9f1a20f9c",
            "0b39bf222fed6e10",
            "18718ae4da5874d7",
            "ca9a595c52a3a3e0",
            "66268d37129a3cb7",
            "b2dcf5fbac5c6aa1",
            "709cfb96bfb224ce",
            "9a106cdefc873348",
            "dd6b26f7bb82f306",
            "4e9c3d9ac7790814",
            "4cb7233d92a85c8d",
            "9b4a5dde571a13ad"
        ],
        "x": 3594,
        "y": 2639,
        "w": 1452,
        "h": 222
    },
    {
        "id": "2b1d0b65b039c37f",
        "type": "group",
        "z": "ad980a450f532e53",
        "name": "FUNCTION - CCC",
        "style": {
            "fill": "#bfc7d7",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "7345f72588d4818b",
            "0b3c6bdf1e084890",
            "2aa5bdf4854f2bb9",
            "fee559e4b979d2fd",
            "a296aca86d2ccb4c",
            "03228a1da0e6d87d"
        ],
        "x": 3594,
        "y": 2479,
        "w": 1352,
        "h": 122
    },
    {
        "id": "8636d9f25052ddde",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor1",
        "func": "if (typeof msg.payload === 'object') { return null ;}\n\nconst i = 1;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) {msg.topic = 'no_topic';}\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'WAR'; \nnode.send([null, msg2, msg2]);\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 720,
        "wires": [
            [
                "371e34dbb6b8846f"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "0ab54fe81efa0626"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output output",
            "value output reading"
        ]
    },
    {
        "id": "371e34dbb6b8846f",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "1Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 13,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 720,
        "wires": [
            [
                "3e88f48f6f308168"
            ]
        ]
    },
    {
        "id": "0ab54fe81efa0626",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 15,
        "width": 2,
        "height": 1,
        "name": "Value1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 720,
        "wires": []
    },
    {
        "id": "3d23b01db5990a1a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Load",
        "func": "var HW_sensors = global.get('HW_sensors', \"file\");\nif (HW_sensors === undefined) {return null}\n\nlet msg1={};\n\nfor (let i = 1; i < 16; i++){\n\n    var sensor = global.get('HW_sensors.sensor'+i,\"file\")\n    if (sensor !== undefined) {\n        msg1.payload = sensor;\n        msg1.source = i;\n        var opt = flow.get('mqtt_sensor'+i,\"file\");\n        msg1.options = opt;\n        msg1.tooltip = '<font size= 4px >' + sensor + '</font>';\n        \n        node.send(msg1)\n    }\n}\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 480,
        "wires": [
            [
                "78de25a085d3a0cd"
            ]
        ]
    },
    {
        "id": "594763cfd3f3a68c",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "2Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 19,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 820,
        "wires": [
            [
                "bcdbd8036c062075"
            ]
        ]
    },
    {
        "id": "9c6be0d9e6ecbbf2",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 21,
        "width": 2,
        "height": 1,
        "name": "Value2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 820,
        "wires": []
    },
    {
        "id": "725f538b26776db4",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "link in 67",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 675,
        "y": 480,
        "wires": [
            [
                "284e8f8f263c52b4"
            ]
        ]
    },
    {
        "id": "78de25a085d3a0cd",
        "type": "switch",
        "z": "ad980a450f532e53",
        "name": "",
        "property": "source",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "8",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "9",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "11",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "12",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "13",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "14",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "15",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 15,
        "x": 1050,
        "y": 480,
        "wires": [
            [
                "371e34dbb6b8846f"
            ],
            [
                "594763cfd3f3a68c"
            ],
            [
                "a4d558d17067a238"
            ],
            [
                "802b990067d507a8"
            ],
            [
                "ecfd76da3da1072c"
            ],
            [
                "605ace8f1792af16"
            ],
            [
                "4074c70638b70122"
            ],
            [
                "782d5fae5e99e803"
            ],
            [
                "b538cfd6049620d0"
            ],
            [
                "4f33cb432b1cec46"
            ],
            [
                "d6a68b4efe67cdc8"
            ],
            [
                "0a6adcb22e4cf244"
            ],
            [
                "3c0ab7076bb1b08e"
            ],
            [
                "6589ddd914516e95"
            ],
            [
                "6c91fb90fee0aae4"
            ]
        ]
    },
    {
        "id": "dbff8d67a1ee86ab",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete1",
        "group": "24b2fad95360cd29",
        "order": 17,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 720,
        "wires": [
            [
                "90a05912c04b8882"
            ]
        ]
    },
    {
        "id": "b3e01801963cc151",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 7,
        "width": 10,
        "height": 1,
        "name": "H_Sensor topic",
        "label": "MQTT sensor topic",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1240,
        "y": 680,
        "wires": []
    },
    {
        "id": "0033376c5f1f6690",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 8,
        "width": 4,
        "height": 1,
        "name": "H_Description",
        "label": "Description",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1560,
        "y": 680,
        "wires": []
    },
    {
        "id": "0583ede0e656f496",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 9,
        "width": 2,
        "height": 1,
        "name": "H_Value",
        "label": "Value",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 680,
        "wires": []
    },
    {
        "id": "86fb1b40ca0a082a",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description1",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 14,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "1",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 720,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "2cd4742b27468e62",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 6,
        "width": 1,
        "height": 1,
        "name": "H_ID",
        "label": "ID",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 640,
        "wires": []
    },
    {
        "id": "7aba309b4cd4d45e",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 12,
        "width": 1,
        "height": 1,
        "name": "1",
        "label": "1",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 680,
        "wires": []
    },
    {
        "id": "5a1ffad4d9b340b3",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 18,
        "width": 1,
        "height": 1,
        "name": "2",
        "label": "2",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 780,
        "wires": []
    },
    {
        "id": "07a9f4efe7d73c33",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description2",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 20,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "2",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 820,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "925212b5cd4e0b66",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete2",
        "group": "24b2fad95360cd29",
        "order": 23,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 820,
        "wires": [
            [
                "46b3b881fb73df0b"
            ]
        ]
    },
    {
        "id": "8119024c9280afb9",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 10,
        "width": 6,
        "height": 1,
        "name": "Purpose",
        "label": "Purpose",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 680,
        "wires": []
    },
    {
        "id": "90a05912c04b8882",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 49",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 1;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined,\"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\");\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n/*\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}\n*/",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 720,
        "wires": [
            [
                "0ab54fe81efa0626",
                "86fb1b40ca0a082a",
                "a3d891d7a4fccb03"
            ]
        ],
        "outputLabels": [
            "delete"
        ]
    },
    {
        "id": "cf4b81e94bf08b6a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor2",
        "func": "if (typeof msg.payload === 'object') { return null; }\n\nconst i = 2;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'RTC_Z1';\nnode.send([null, msg2, msg2]);\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 820,
        "wires": [
            [
                "594763cfd3f3a68c"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "9c6be0d9e6ecbbf2"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "46b3b881fb73df0b",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 50",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 2;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\");\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 820,
        "wires": [
            [
                "9c6be0d9e6ecbbf2",
                "07a9f4efe7d73c33",
                "601ee222a3ec99a4"
            ]
        ]
    },
    {
        "id": "3e88f48f6f308168",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor1",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor1_purpose",
                "pt": "global",
                "to": "WAR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 760,
        "wires": [
            [
                "0ab54fe81efa0626"
            ]
        ]
    },
    {
        "id": "bcdbd8036c062075",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor2",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor2_purpose",
                "pt": "global",
                "to": "RTC",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 860,
        "wires": [
            [
                "9c6be0d9e6ecbbf2"
            ]
        ]
    },
    {
        "id": "7559389970f919c5",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_1_Outside_Temperature",
        "links": [
            "aef33455c0475736"
        ],
        "x": 390,
        "y": 720,
        "wires": [
            [
                "8636d9f25052ddde",
                "9c6f177b9315e543"
            ]
        ],
        "l": true
    },
    {
        "id": "73bf30cdf65e98ac",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_2_Room_Zone1_Temperature",
        "links": [
            "18a84dfee519330f",
            "18cfa3b7a0a0e9dc"
        ],
        "x": 370,
        "y": 820,
        "wires": [
            [
                "cf4b81e94bf08b6a",
                "e78f0ebbd0a9f531"
            ]
        ],
        "l": true
    },
    {
        "id": "a4d558d17067a238",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "3Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 31,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 920,
        "wires": [
            [
                "e98d4bf6a3d69054"
            ]
        ]
    },
    {
        "id": "23472cda5804dd69",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 33,
        "width": 2,
        "height": 1,
        "name": "Value3",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 920,
        "wires": []
    },
    {
        "id": "f015954f83528124",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 24,
        "width": 1,
        "height": 1,
        "name": "3",
        "label": "3",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 880,
        "wires": []
    },
    {
        "id": "4d5c5f6c333f57c1",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description3",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 32,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "3",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 920,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "f331b8b7076fddbb",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete3",
        "group": "24b2fad95360cd29",
        "order": 29,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 920,
        "wires": [
            [
                "29bcd5f13f03947a"
            ]
        ]
    },
    {
        "id": "3e9d2966af41db4b",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor3",
        "func": "if (typeof msg.payload === 'object') {return null;}\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 3;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i,\"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor,\"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'COOL_T'; \nnode.send([null, msg2, msg2])\n\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 920,
        "wires": [
            [
                "a4d558d17067a238"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "23472cda5804dd69"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "29bcd5f13f03947a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 51",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 3;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\");\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 920,
        "wires": [
            [
                "23472cda5804dd69",
                "4d5c5f6c333f57c1",
                "c23aebb28d50ecf6"
            ]
        ]
    },
    {
        "id": "e98d4bf6a3d69054",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor3",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor3_purpose",
                "pt": "global",
                "to": "COOL_T",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 960,
        "wires": [
            [
                "23472cda5804dd69"
            ]
        ]
    },
    {
        "id": "258b2cfa45727e1d",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_3_Room_Temperature",
        "links": [
            "8989ca0fcec2e153"
        ],
        "x": 400,
        "y": 920,
        "wires": [
            [
                "3e9d2966af41db4b",
                "d5870ab3915322ee"
            ]
        ],
        "l": true
    },
    {
        "id": "802b990067d507a8",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "4Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 37,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 1020,
        "wires": [
            [
                "16909872c9e956b2"
            ]
        ]
    },
    {
        "id": "7d31149797ac875a",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 39,
        "width": 2,
        "height": 1,
        "name": "Value4",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 1020,
        "wires": []
    },
    {
        "id": "519a2240a2afaf4c",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 30,
        "width": 1,
        "height": 1,
        "name": "4",
        "label": "4",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 980,
        "wires": []
    },
    {
        "id": "cbc0f89b4009e7bf",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description4",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 38,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "4",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 1020,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "e45f82ef6a10641b",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete4",
        "group": "24b2fad95360cd29",
        "order": 35,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1020,
        "wires": [
            [
                "e77596c539535ada"
            ]
        ]
    },
    {
        "id": "688c93cec2693927",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor4",
        "func": "if (typeof msg.payload === 'object') { return null }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 4;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'COOL_H'; \nnode.send([null, msg2, msg2])\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1020,
        "wires": [
            [
                "802b990067d507a8"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "7d31149797ac875a"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "e77596c539535ada",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 52",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 4;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\");\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1020,
        "wires": [
            [
                "7d31149797ac875a",
                "cbc0f89b4009e7bf",
                "7fb34139909f29f7"
            ]
        ]
    },
    {
        "id": "16909872c9e956b2",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor4",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor4_purpose",
                "pt": "global",
                "to": "COOL_H",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1060,
        "wires": [
            [
                "7d31149797ac875a"
            ]
        ]
    },
    {
        "id": "865f73de46d93700",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_4_Room_Humidity",
        "links": [
            "8989ca0fcec2e153"
        ],
        "x": 410,
        "y": 1020,
        "wires": [
            [
                "688c93cec2693927",
                "4e8c45428864189c"
            ]
        ],
        "l": true
    },
    {
        "id": "ecfd76da3da1072c",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "5Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 43,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "5",
        "topicType": "str",
        "className": "",
        "x": 1280,
        "y": 1120,
        "wires": [
            [
                "70b886c9c124e748"
            ]
        ]
    },
    {
        "id": "e68c2a7ca6b2ecec",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 45,
        "width": 2,
        "height": 1,
        "name": "Value5",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 1120,
        "wires": []
    },
    {
        "id": "0ac3875e82143928",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 36,
        "width": 1,
        "height": 1,
        "name": "5",
        "label": "5",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1080,
        "wires": []
    },
    {
        "id": "bcfa60ad0e4f95ef",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description5",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 44,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "5",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 1120,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "a36d36712340604e",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete5",
        "group": "24b2fad95360cd29",
        "order": 41,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1120,
        "wires": [
            [
                "387ae59cec92e900"
            ]
        ]
    },
    {
        "id": "9991c47e17c83b32",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor5",
        "func": "if (typeof msg.payload === 'object') { return null }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 5;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.payload = Math.abs(msg2.payload);\n//if (msg2.payload == 0) { return null ;}\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'P1_PRODUCTION';\nnode.send([null, msg2, msg2])",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1120,
        "wires": [
            [
                "ecfd76da3da1072c"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "e68c2a7ca6b2ecec"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "387ae59cec92e900",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 53",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 5;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\");\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1120,
        "wires": [
            [
                "e68c2a7ca6b2ecec",
                "bcfa60ad0e4f95ef",
                "6140d165fa484610"
            ]
        ]
    },
    {
        "id": "70b886c9c124e748",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor5",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor5_purpose",
                "pt": "global",
                "to": "P1_PRODUCTION",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1160,
        "wires": [
            [
                "e68c2a7ca6b2ecec"
            ]
        ]
    },
    {
        "id": "25b5c6c2e35987ca",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_5_Production",
        "links": [
            "c8359b76aff8f00e"
        ],
        "x": 430,
        "y": 1120,
        "wires": [
            [
                "9991c47e17c83b32",
                "51d18479d2a5ddec"
            ]
        ],
        "l": true
    },
    {
        "id": "97ed113ea97d2c38",
        "type": "switch",
        "z": "ad980a450f532e53",
        "name": "Value mapping",
        "property": "destination",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "WAR",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RTC_Z1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RTC_Z2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "COOL_H",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "COOL_T",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "P1_PRODUCTION",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "P1_CONSUMPTION",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ADD_DHW_TEMP",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ADD_ROOM_TEMP",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ADD_HEAT_TEMP",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 10,
        "x": 1240,
        "y": 2680,
        "wires": [
            [
                "6d5a394e0a78ba93"
            ],
            [
                "d686633ddf895871"
            ],
            [
                "f1802c636ff0f2f3"
            ],
            [
                "48951016bd81c603"
            ],
            [
                "21c05c592db60472"
            ],
            [
                "426ef80beb8421b0"
            ],
            [
                "cbd9f65956ab693b"
            ],
            [
                "e236904c29212096"
            ],
            [
                "4128335779e1ea94"
            ],
            [
                "fa7950ca726c297c"
            ]
        ]
    },
    {
        "id": "90c369a401f8419d",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to WAR (T outside)",
        "mode": "link",
        "links": [
            "6c6c2315d73dcb16"
        ],
        "x": 1790,
        "y": 2480,
        "wires": [],
        "l": true
    },
    {
        "id": "af24bcd85c7c6485",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to RTC Z1",
        "mode": "link",
        "links": [
            "9f6d1c245559171f"
        ],
        "x": 1770,
        "y": 2520,
        "wires": [],
        "l": true
    },
    {
        "id": "b640b7d51f9d0adf",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to COOL_H",
        "mode": "link",
        "links": [
            "3072102c9a588df4"
        ],
        "x": 1770,
        "y": 2600,
        "wires": [],
        "l": true
    },
    {
        "id": "93092472a2d44b45",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to COOL_T",
        "mode": "link",
        "links": [
            "e6d062c49d66078a"
        ],
        "x": 1770,
        "y": 2640,
        "wires": [],
        "l": true
    },
    {
        "id": "587b0d3cfd2547c8",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Store description",
        "func": "global.set('HW_sensors.sensor' + msg.topic + '_description', msg.payload, \"file\");\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "4434bbfc4fa3c88a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Load",
        "func": "var HW_sensors = global.get('HW_sensors', \"file\");\nif (HW_sensors === undefined) { return null }\n\nlet msg1 = {};\n\nfor (let i = 1; i < 16; i++) {\n\n    var sensor = global.get('HW_sensors.sensor' + i + '_description', \"file\")\n    if (sensor !== undefined) {\n        msg1.payload = sensor;\n        msg1.topic = i;\n        node.send(msg1);\n    }\n}\nreturn null;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 480,
        "wires": [
            [
                "9872b4fa74a08183"
            ]
        ]
    },
    {
        "id": "9872b4fa74a08183",
        "type": "switch",
        "z": "ad980a450f532e53",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "8",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "9",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "11",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "12",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "13",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "14",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "15",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 15,
        "x": 1370,
        "y": 480,
        "wires": [
            [
                "86fb1b40ca0a082a"
            ],
            [
                "07a9f4efe7d73c33"
            ],
            [
                "4d5c5f6c333f57c1"
            ],
            [
                "cbc0f89b4009e7bf"
            ],
            [
                "bcfa60ad0e4f95ef"
            ],
            [
                "5a5e94e2a3e655cf"
            ],
            [
                "0542c0b24d3d03bd"
            ],
            [
                "de59a5045ec08aa0"
            ],
            [
                "0f5e24d885272ec7"
            ],
            [
                "b9dd10f89ca69546"
            ],
            [
                "7457c39c2f7f9e8e"
            ],
            [
                "93dd34f905b36c39"
            ],
            [
                "d29a1ab6fee9842c"
            ],
            [
                "11e3014aeef8ecb6"
            ],
            [
                "cb89d1260993986e"
            ]
        ],
        "outputLabels": [
            "1",
            "2",
            "3",
            "4",
            "5",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
        ]
    },
    {
        "id": "810605542482fc46",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Load",
        "func": "var HW_sensors = global.get('HW_sensors', \"file\");\nif (HW_sensors === undefined) { return null }\n\nlet msg1 = {};\n\nfor (let i = 1; i < 16; i++) {\n\n    var sensor = global.get('HW_sensors.sensor' + i + '_purpose', \"file\")\n    if (sensor !== undefined) {\n        msg1.payload = sensor;\n        msg1.topic = i;\n        node.send(msg1);\n    }\n}\nreturn null;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1690,
        "y": 480,
        "wires": [
            [
                "8525e4745b22470a"
            ]
        ]
    },
    {
        "id": "8525e4745b22470a",
        "type": "switch",
        "z": "ad980a450f532e53",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "8",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "9",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "11",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "12",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "13",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "14",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "15",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 15,
        "x": 1810,
        "y": 480,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            [
                "7257386274bfc9ce"
            ],
            [
                "91e6067c70ab7883"
            ],
            [
                "463675f901a8e9bd"
            ],
            [
                "e5744c3c1ea2e735"
            ],
            [
                "f5513cf08d5f566d"
            ],
            [
                "9500347320e93faa"
            ],
            [
                "2a172983b7317926"
            ],
            [
                "48708d250b439703"
            ]
        ],
        "outputLabels": [
            "1",
            "2",
            "3",
            "4",
            "5",
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null
        ]
    },
    {
        "id": "284e8f8f263c52b4",
        "type": "delay",
        "z": "ad980a450f532e53",
        "name": "1/15min",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 780,
        "y": 480,
        "wires": [
            [
                "3d23b01db5990a1a",
                "4434bbfc4fa3c88a",
                "810605542482fc46"
            ]
        ]
    },
    {
        "id": "605ace8f1792af16",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "6Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 49,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1280,
        "y": 1220,
        "wires": [
            [
                "8c469537de611b6c"
            ]
        ]
    },
    {
        "id": "30e74f6c68acd341",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 51,
        "width": 2,
        "height": 1,
        "name": "Value6",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 1220,
        "wires": []
    },
    {
        "id": "8376eda776955c0a",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 42,
        "width": 1,
        "height": 1,
        "name": "6",
        "label": "6",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1180,
        "wires": []
    },
    {
        "id": "5a5e94e2a3e655cf",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description6",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 50,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "6",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 1220,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "963d86eb39178610",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete6",
        "group": "24b2fad95360cd29",
        "order": 47,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1220,
        "wires": [
            [
                "a98a8b8b4621fd0c"
            ]
        ]
    },
    {
        "id": "94bd798af922edc4",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor6",
        "func": "if (typeof msg.payload === 'object') { return null }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 6;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) {msg.topic = 'no_topic';}\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.payload = Math.abs(msg2.payload);\n//if (msg2.payload == 0) { return null ;}\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'P1_CONSUMPTION';\nnode.send([null, msg2, msg2])\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1220,
        "wires": [
            [
                "605ace8f1792af16"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "30e74f6c68acd341"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "a98a8b8b4621fd0c",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 54",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 6;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\");\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1220,
        "wires": [
            [
                "30e74f6c68acd341",
                "5a5e94e2a3e655cf",
                "02d74fd3273f05bd"
            ]
        ]
    },
    {
        "id": "8c469537de611b6c",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor6",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor6_purpose",
                "pt": "global",
                "to": "P1_CONSUMPTION",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1260,
        "wires": [
            [
                "30e74f6c68acd341"
            ]
        ]
    },
    {
        "id": "1c2b1f28c1ea0a2f",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 1,
        "width": 1,
        "height": 1,
        "name": "H_ID",
        "label": "ID",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1700,
        "wires": []
    },
    {
        "id": "125452d0b815cf40",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 2,
        "width": 10,
        "height": 1,
        "name": "H_Sensor wire id",
        "label": "1 Wire sensor topic",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1250,
        "y": 1700,
        "wires": []
    },
    {
        "id": "cb7c9280af0eb340",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 3,
        "width": 4,
        "height": 1,
        "name": "H_Description",
        "label": "Description",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1560,
        "y": 1700,
        "wires": []
    },
    {
        "id": "fece1e8a94dd5cff",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "H_Value",
        "label": "Value",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 1700,
        "wires": []
    },
    {
        "id": "cfe3898c0a708ecf",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "Purpose",
        "label": "Purpose",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 1700,
        "wires": []
    },
    {
        "id": "4074c70638b70122",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "7Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 25,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1280,
        "y": 1340,
        "wires": [
            [
                "cecf655071adc337"
            ]
        ]
    },
    {
        "id": "b345397281d55c5a",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 27,
        "width": 2,
        "height": 1,
        "name": "Value7",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 1340,
        "wires": []
    },
    {
        "id": "0542c0b24d3d03bd",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description7",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 26,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "7",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 1340,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "eaf9a043bee05412",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete7",
        "group": "24b2fad95360cd29",
        "order": 53,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1340,
        "wires": [
            [
                "35b8404d6480a5af"
            ]
        ]
    },
    {
        "id": "31e110399cb3ebdf",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor7",
        "func": "if (typeof msg.payload === 'object') { return null; }\n\nconst i = 7;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(2);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nmsg2.destination = 'RTC_Z2';\nnode.send([null, msg2, msg2]);\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1340,
        "wires": [
            [
                "4074c70638b70122"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "b345397281d55c5a"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "35b8404d6480a5af",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 55",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 7;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1340,
        "wires": [
            [
                "b345397281d55c5a",
                "0542c0b24d3d03bd",
                "e78c1af9bad21216"
            ]
        ]
    },
    {
        "id": "782d5fae5e99e803",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "8Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 55,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1280,
        "y": 1540,
        "wires": [
            [
                "a5882e865c218f68"
            ]
        ]
    },
    {
        "id": "7e30548c152239fd",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "d": true,
        "group": "24b2fad95360cd29",
        "order": 57,
        "width": 2,
        "height": 1,
        "name": "Value8",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 1540,
        "wires": []
    },
    {
        "id": "de59a5045ec08aa0",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "Description8",
        "label": "",
        "tooltip": "",
        "group": "24b2fad95360cd29",
        "order": 56,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "8",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 1540,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "8dbab2ebd047a5eb",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "Delete8",
        "group": "24b2fad95360cd29",
        "order": 59,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1540,
        "wires": [
            [
                "a8b2416b6df60903"
            ]
        ]
    },
    {
        "id": "7257386274bfc9ce",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "8Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "24b2fad95360cd29",
        "order": 58,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC Function - Temperature",
                "value": "RTC",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1980,
        "y": 1540,
        "wires": [
            [
                "a8b2416b6df60903"
            ]
        ]
    },
    {
        "id": "5c67d59911b90345",
        "type": "function",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "Sensor8",
        "func": "if (typeof msg.payload === 'object') { return null }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 8;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\nif (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1540,
        "wires": [
            [
                "782d5fae5e99e803"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "7e30548c152239fd"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "a8b2416b6df60903",
        "type": "function",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "function 56",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 8;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined,\"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1540,
        "wires": [
            [
                "7257386274bfc9ce",
                "7e30548c152239fd",
                "de59a5045ec08aa0",
                "79c0597bbc534417"
            ]
        ]
    },
    {
        "id": "a5882e865c218f68",
        "type": "change",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor8",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1580,
        "wires": [
            [
                "7e30548c152239fd"
            ]
        ]
    },
    {
        "id": "b538cfd6049620d0",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "9Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 8,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 1780,
        "wires": [
            [
                "a613dca44e716612"
            ]
        ]
    },
    {
        "id": "d17c08f7fc0f567f",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 10,
        "width": 2,
        "height": 1,
        "name": "Value9",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1810,
        "y": 1780,
        "wires": []
    },
    {
        "id": "0f5e24d885272ec7",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description9",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "9",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1550,
        "y": 1780,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "41599f0eaa921a42",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete9",
        "group": "4a6d0f091176e20f",
        "order": 12,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1780,
        "wires": [
            [
                "b1c57c9b5b6d3fd5"
            ]
        ]
    },
    {
        "id": "91e6067c70ab7883",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "9Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 11,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1980,
        "y": 1780,
        "wires": [
            [
                "b1c57c9b5b6d3fd5"
            ]
        ]
    },
    {
        "id": "a2b0fc2580f1371a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor9",
        "func": "if (typeof msg.payload === 'object') { return null ;}\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 9;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i,\"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) {msg.topic = 'no_topic';}\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor,\"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n\n\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1780,
        "wires": [
            [
                "b538cfd6049620d0"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "d17c08f7fc0f567f"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "b1c57c9b5b6d3fd5",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 57",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 9;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1780,
        "wires": [
            [
                "91e6067c70ab7883",
                "d17c08f7fc0f567f",
                "0f5e24d885272ec7",
                "2920c86e99161faf"
            ]
        ]
    },
    {
        "id": "a613dca44e716612",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor9",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1820,
        "wires": [
            [
                "d17c08f7fc0f567f"
            ]
        ]
    },
    {
        "id": "4f33cb432b1cec46",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "10Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 14,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 1860,
        "wires": [
            [
                "d14e4618d7ce4270"
            ]
        ]
    },
    {
        "id": "503ac85e89d2adc2",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 16,
        "width": 2,
        "height": 1,
        "name": "Value10",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 1860,
        "wires": []
    },
    {
        "id": "b9dd10f89ca69546",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description10",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 15,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "10",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1560,
        "y": 1860,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "26e639c3040a13da",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete10",
        "group": "4a6d0f091176e20f",
        "order": 18,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1860,
        "wires": [
            [
                "e0029d267dd1efba"
            ]
        ]
    },
    {
        "id": "463675f901a8e9bd",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "10Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 17,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1990,
        "y": 1860,
        "wires": [
            [
                "e0029d267dd1efba"
            ]
        ]
    },
    {
        "id": "b38d809975b77df6",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor10",
        "func": "if (typeof msg.payload === 'object') { return null ;}\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 10;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) {msg.topic = 'no_topic';}\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1860,
        "wires": [
            [
                "4f33cb432b1cec46"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "503ac85e89d2adc2"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "e0029d267dd1efba",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 58",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 10;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1860,
        "wires": [
            [
                "463675f901a8e9bd",
                "503ac85e89d2adc2",
                "b9dd10f89ca69546",
                "88a0e50150d3ed13"
            ]
        ]
    },
    {
        "id": "d14e4618d7ce4270",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor10",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1900,
        "wires": [
            [
                "503ac85e89d2adc2"
            ]
        ]
    },
    {
        "id": "d6a68b4efe67cdc8",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "11Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 20,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 1940,
        "wires": [
            [
                "1100fe314b863640"
            ]
        ]
    },
    {
        "id": "f5e144a7ce453f4a",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 22,
        "width": 2,
        "height": 1,
        "name": "Value11",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 1940,
        "wires": []
    },
    {
        "id": "7457c39c2f7f9e8e",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description11",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 21,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "11",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1560,
        "y": 1940,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "5ef131876aa697b4",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete11",
        "group": "4a6d0f091176e20f",
        "order": 24,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 1940,
        "wires": [
            [
                "8ed0b640c5b7a972"
            ]
        ]
    },
    {
        "id": "e5744c3c1ea2e735",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "11Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 23,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1990,
        "y": 1940,
        "wires": [
            [
                "8ed0b640c5b7a972"
            ]
        ]
    },
    {
        "id": "4446e1bc86e2194b",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor11",
        "func": "if (typeof msg.payload === 'object') { return null; }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 11;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1940,
        "wires": [
            [
                "d6a68b4efe67cdc8"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "f5e144a7ce453f4a"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "8ed0b640c5b7a972",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 59",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 11;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 1940,
        "wires": [
            [
                "e5744c3c1ea2e735",
                "f5e144a7ce453f4a",
                "7457c39c2f7f9e8e",
                "718cb610aeb7ff01"
            ]
        ]
    },
    {
        "id": "1100fe314b863640",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor11",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1980,
        "wires": [
            [
                "f5e144a7ce453f4a"
            ]
        ]
    },
    {
        "id": "0a6adcb22e4cf244",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "12Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 26,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 2020,
        "wires": [
            [
                "d3d684fadff317ce"
            ]
        ]
    },
    {
        "id": "848b4bf58750dc0b",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 28,
        "width": 2,
        "height": 1,
        "name": "Value12",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 2020,
        "wires": []
    },
    {
        "id": "93dd34f905b36c39",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description12",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 27,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "12",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1560,
        "y": 2020,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "4543666c4c73fb47",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete12",
        "group": "4a6d0f091176e20f",
        "order": 30,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 2020,
        "wires": [
            [
                "53619a035d70a50a"
            ]
        ]
    },
    {
        "id": "f5513cf08d5f566d",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "12Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 29,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1990,
        "y": 2020,
        "wires": [
            [
                "53619a035d70a50a"
            ]
        ]
    },
    {
        "id": "fa3d0c7433d6a768",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor12",
        "func": "if (typeof msg.payload === 'object') { return null; }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 12;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2020,
        "wires": [
            [
                "0a6adcb22e4cf244"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "848b4bf58750dc0b"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "53619a035d70a50a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 60",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 12;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 2020,
        "wires": [
            [
                "f5513cf08d5f566d",
                "848b4bf58750dc0b",
                "93dd34f905b36c39",
                "51a19b56f0f4870a"
            ]
        ]
    },
    {
        "id": "d3d684fadff317ce",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor12",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 2060,
        "wires": [
            [
                "848b4bf58750dc0b"
            ]
        ]
    },
    {
        "id": "134ad3f9e1d29211",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 48,
        "width": 1,
        "height": 1,
        "name": "7",
        "label": "7",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1300,
        "wires": []
    },
    {
        "id": "8e078e30d3dfc73f",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "d": true,
        "group": "24b2fad95360cd29",
        "order": 54,
        "width": 1,
        "height": 1,
        "name": "8",
        "label": "8",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1400,
        "wires": []
    },
    {
        "id": "736047326edeb73c",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "9",
        "label": "9",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1740,
        "wires": []
    },
    {
        "id": "35365cb9cbbcd868",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 13,
        "width": 1,
        "height": 1,
        "name": "10",
        "label": "10",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1820,
        "wires": []
    },
    {
        "id": "adfedc5266594547",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 19,
        "width": 1,
        "height": 1,
        "name": "11",
        "label": "11",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1900,
        "wires": []
    },
    {
        "id": "a633153ab281a2f3",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 25,
        "width": 1,
        "height": 1,
        "name": "12",
        "label": "12",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 1980,
        "wires": []
    },
    {
        "id": "3c0ab7076bb1b08e",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "13Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 32,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 2100,
        "wires": [
            [
                "f14e4ec0056b370b"
            ]
        ]
    },
    {
        "id": "303b0429f9fc5e84",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 34,
        "width": 2,
        "height": 1,
        "name": "Value13",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 2100,
        "wires": []
    },
    {
        "id": "d29a1ab6fee9842c",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description13",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 33,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "13",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1560,
        "y": 2100,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "69853669067c3f45",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete13",
        "group": "4a6d0f091176e20f",
        "order": 36,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 2100,
        "wires": [
            [
                "0123b24eb08974d5"
            ]
        ]
    },
    {
        "id": "9500347320e93faa",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "13Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 35,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1990,
        "y": 2100,
        "wires": [
            [
                "0123b24eb08974d5"
            ]
        ]
    },
    {
        "id": "01166a4667d3d458",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor13",
        "func": "if (typeof msg.payload === 'object') { return null; }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 13;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2100,
        "wires": [
            [
                "3c0ab7076bb1b08e"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "303b0429f9fc5e84"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "0123b24eb08974d5",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 61",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 13;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 2100,
        "wires": [
            [
                "9500347320e93faa",
                "303b0429f9fc5e84",
                "d29a1ab6fee9842c",
                "c74bd5ecdd3f768f"
            ]
        ]
    },
    {
        "id": "f14e4ec0056b370b",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor13",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 2140,
        "wires": [
            [
                "303b0429f9fc5e84"
            ]
        ]
    },
    {
        "id": "b25a8ebef4f6a55c",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 31,
        "width": 1,
        "height": 1,
        "name": "13",
        "label": "13",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 2060,
        "wires": []
    },
    {
        "id": "6589ddd914516e95",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "14Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 38,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 2180,
        "wires": [
            [
                "0d94653efcac1805"
            ]
        ]
    },
    {
        "id": "20cd5ff90a9fac8f",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 40,
        "width": 2,
        "height": 1,
        "name": "Value14",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 2180,
        "wires": []
    },
    {
        "id": "11e3014aeef8ecb6",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description14",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 39,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "14",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1560,
        "y": 2180,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "3f7589dde9789232",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete14",
        "group": "4a6d0f091176e20f",
        "order": 42,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 2180,
        "wires": [
            [
                "53ab9d97751e314c"
            ]
        ]
    },
    {
        "id": "2a172983b7317926",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "14Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 41,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1990,
        "y": 2180,
        "wires": [
            [
                "53ab9d97751e314c"
            ]
        ]
    },
    {
        "id": "8174fd99e6dae811",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor14",
        "func": "if (typeof msg.payload === 'object') { return null; }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 14;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2180,
        "wires": [
            [
                "6589ddd914516e95"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "20cd5ff90a9fac8f"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "53ab9d97751e314c",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 62",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 14;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 2180,
        "wires": [
            [
                "2a172983b7317926",
                "20cd5ff90a9fac8f",
                "11e3014aeef8ecb6",
                "0ae7e6e93053c91b"
            ]
        ]
    },
    {
        "id": "0d94653efcac1805",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor14",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 2220,
        "wires": [
            [
                "20cd5ff90a9fac8f"
            ]
        ]
    },
    {
        "id": "d1412cf531e79cdc",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 37,
        "width": 1,
        "height": 1,
        "name": "14",
        "label": "14",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 2140,
        "wires": []
    },
    {
        "id": "6c91fb90fee0aae4",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "15Populate dropdown",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 44,
        "width": 10,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 1260,
        "y": 2260,
        "wires": [
            [
                "8f67f776bebc592a"
            ]
        ]
    },
    {
        "id": "1bc3b8588f59c195",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 46,
        "width": 2,
        "height": 1,
        "name": "Value15",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1820,
        "y": 2260,
        "wires": []
    },
    {
        "id": "cb89d1260993986e",
        "type": "ui_text_input",
        "z": "ad980a450f532e53",
        "name": "Description15",
        "label": "",
        "tooltip": "",
        "group": "4a6d0f091176e20f",
        "order": 45,
        "width": 4,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "15",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1560,
        "y": 2260,
        "wires": [
            [
                "587b0d3cfd2547c8"
            ]
        ]
    },
    {
        "id": "93cf94c71c6da1e6",
        "type": "ui_button",
        "z": "ad980a450f532e53",
        "name": "Delete15",
        "group": "4a6d0f091176e20f",
        "order": 48,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "delete",
        "topicType": "str",
        "x": 2140,
        "y": 2260,
        "wires": [
            [
                "27f84a7160e0b789"
            ]
        ]
    },
    {
        "id": "48708d250b439703",
        "type": "ui_dropdown",
        "z": "ad980a450f532e53",
        "name": "15Purpose",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "",
        "group": "4a6d0f091176e20f",
        "order": 47,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "None - Reading",
                "value": "none",
                "type": "str"
            },
            {
                "label": "WAR Function - Temperature",
                "value": "WAR",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 1)",
                "value": "RTC_Z1",
                "type": "str"
            },
            {
                "label": "RTC function (Temperature Zone 2)",
                "value": "RTC_Z2",
                "type": "str"
            },
            {
                "label": "COOL Function - Humidity",
                "value": "COOL_H",
                "type": "str"
            },
            {
                "label": "COOL Function - Temperature",
                "value": "COOL_T",
                "type": "str"
            },
            {
                "label": "Power production",
                "value": "P1_PRODUCTION",
                "type": "str"
            },
            {
                "label": "Power consumption",
                "value": "P1_CONSUMPTION",
                "type": "str"
            },
            {
                "label": "DHW temperature (extra)",
                "value": "ADD_DHW_TEMP",
                "type": "str"
            },
            {
                "label": "HEAT temperature (extra)",
                "value": "ADD_HEAT_TEMP",
                "type": "str"
            },
            {
                "label": "Room temperature (extra)",
                "value": "ADD_ROOM_TEMP",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "purpose",
        "topicType": "str",
        "className": "",
        "x": 1990,
        "y": 2260,
        "wires": [
            [
                "27f84a7160e0b789"
            ]
        ]
    },
    {
        "id": "b616241a6fb1333a",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Sensor15",
        "func": "if (typeof msg.payload === 'object') { return null; }\nif (msg.topic == 'zero_value') { return [null, null, msg]; }\n\nconst i = 15;      // <<<<<<<<<<<<<<< change this one !!!\n\nvar mqtt_sensor = flow.get('mqtt_sensor' + i, \"file\");\nif (mqtt_sensor === undefined) { mqtt_sensor = [] }                         // Check if the array exists\n\n//if (msg.topic === undefined) { msg.topic = 'no_topic'; }\n\nif (mqtt_sensor.includes(msg.topic) !== true) {\n    mqtt_sensor.push(msg.topic);                                            // Add to Array \n    mqtt_sensor = [...new Set(mqtt_sensor)];                                // Make unique\n    flow.set('mqtt_sensor' + i, mqtt_sensor, \"file\");                               // Store\n\n    var msg1 = {};\n    msg1.options = mqtt_sensor;\n    node.send([msg1, null])\n}\n\nvar selectedSensor = global.get('HW_sensors.sensor' + i, \"file\");\n//if (selectedSensor === undefined) { return null }\nif (msg.topic != selectedSensor) { return null }\n\nlet msg2 = {};\nmsg2.payload = msg.payload;\nmsg2.payload = Number(msg2.payload).toFixed(3);\nmsg2.payload = parseFloat(msg2.payload);\nmsg2.sensor = 'HW_sensors.sensor' + i;\n\nvar destinations = global.get('HW_sensors.sensor' + i + '_purpose', \"file\") || 'none';\nif (destinations == '' || destinations == 'none') { return [null, null, msg2] }\n\nif (destinations.includes('WAR') === true) { msg2.destination = 'WAR'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z1') === true) { msg2.destination = 'RTC_Z1'; node.send([null, msg2, msg2]) }\nif (destinations.includes('RTC_Z2') === true) { msg2.destination = 'RTC_Z2'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_H') === true) { msg2.destination = 'COOL_H'; node.send([null, msg2, msg2]) }\nif (destinations.includes('COOL_T') === true) { msg2.destination = 'COOL_T'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_PRODUCTION') === true) { msg2.destination = 'P1_PRODUCTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('P1_CONSUMPTION') === true) { msg2.destination = 'P1_CONSUMPTION'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_DHW_TEMP') === true) { msg2.destination = 'ADD_DHW_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_ROOM_TEMP') === true) { msg2.destination = 'ADD_ROOM_TEMP'; node.send([null, msg2, msg2]) }\nif (destinations.includes('ADD_HEAT_TEMP') === true) { msg2.destination = 'ADD_HEAT_TEMP'; node.send([null, msg2, msg2]) }\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2260,
        "wires": [
            [
                "6c91fb90fee0aae4"
            ],
            [
                "97ed113ea97d2c38"
            ],
            [
                "1bc3b8588f59c195"
            ]
        ],
        "outputLabels": [
            "read data",
            "value output",
            ""
        ]
    },
    {
        "id": "27f84a7160e0b789",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "function 63",
        "func": "let msg1 = {};\n\n///////////////////////\nconst i = 15;\n///////////////////////\n\nif (msg.topic == 'delete') {\n    flow.set('mqtt_sensor' + i, undefined, \"file\");\n    global.set('HW_sensors.sensor' + i, undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\")\n    global.set('HW_sensors.sensor' + i + '_description', undefined, \"file\")\n\n    msg1.payload = '';\n    msg1.options = undefined;\n    msg1.tooltip = undefined;\n\n    return msg1;\n}\n\nif (msg.topic == 'purpose' && msg.payload != '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', msg.payload, \"file\");\n    return null;\n}\n\nif (msg.topic == 'purpose' && msg.payload == '') {\n    global.set('HW_sensors.sensor' + i + '_purpose', undefined, \"file\");\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 2260,
        "wires": [
            [
                "48708d250b439703",
                "1bc3b8588f59c195",
                "cb89d1260993986e",
                "bb13a496767d5bd7"
            ]
        ]
    },
    {
        "id": "8f67f776bebc592a",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor15",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 2300,
        "wires": [
            [
                "1bc3b8588f59c195"
            ]
        ]
    },
    {
        "id": "4cefae84214312b1",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 43,
        "width": 1,
        "height": 1,
        "name": "15",
        "label": "15",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1030,
        "y": 2220,
        "wires": []
    },
    {
        "id": "f53a7616ad4546de",
        "type": "mqtt in",
        "z": "ad980a450f532e53",
        "name": "",
        "topic": "panasonic_heat_pump/1wire/#",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 790,
        "y": 1700,
        "wires": [
            [
                "b38d809975b77df6",
                "4446e1bc86e2194b",
                "fa3d0c7433d6a768",
                "01166a4667d3d458",
                "8174fd99e6dae811",
                "b616241a6fb1333a",
                "a2b0fc2580f1371a",
                "23cd009564548241"
            ]
        ]
    },
    {
        "id": "489c94fc685ea205",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 11,
        "width": 1,
        "height": 1,
        "name": "1x1",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2130,
        "y": 680,
        "wires": []
    },
    {
        "id": "6ee226c94ec7b41a",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "4a6d0f091176e20f",
        "order": 6,
        "width": 1,
        "height": 1,
        "name": "1x1",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 2110,
        "y": 1700,
        "wires": []
    },
    {
        "id": "16e1fd4b8eca9c45",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "INSTRUCTION",
        "info": "",
        "x": 100,
        "y": 140,
        "wires": [],
        "icon": "node-red-contrib-miio-roborock/homekit-logo.png"
    },
    {
        "id": "270bcb8d12aabc2a",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "Connect 1 sensor per each link-in node",
        "info": "",
        "x": 250,
        "y": 500,
        "wires": []
    },
    {
        "id": "bb8114e65fb3d698",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "You can connect a node with the output of a generic topic, like: \" esp32_devkit_2/sensor/# \"",
        "info": "",
        "x": 410,
        "y": 540,
        "wires": []
    },
    {
        "id": "54565eb5cafae91d",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "If the sensor value is not used for a function, you do not have to set a purpose, or select 'None - Reading'",
        "info": "",
        "x": 460,
        "y": 660,
        "wires": []
    },
    {
        "id": "559b3cc14fec8e78",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "Through the GUI you select the exact topic of interest, and what is is used for.",
        "info": "One value can be used for multiple purposes, 1 temperature reading can be used for \"COOL Temp\"-function and \"RTC\"-function ",
        "x": 370,
        "y": 620,
        "wires": []
    },
    {
        "id": "51357d89242e9577",
        "type": "inject",
        "z": "ad980a450f532e53",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "14",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 750,
        "y": 440,
        "wires": [
            [
                "3d23b01db5990a1a"
            ]
        ]
    },
    {
        "id": "6d5a394e0a78ba93",
        "type": "delay",
        "z": "ad980a450f532e53",
        "name": "rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1540,
        "y": 2480,
        "wires": [
            [
                "90c369a401f8419d"
            ]
        ]
    },
    {
        "id": "d686633ddf895871",
        "type": "delay",
        "z": "ad980a450f532e53",
        "name": "rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1540,
        "y": 2520,
        "wires": [
            [
                "af24bcd85c7c6485"
            ]
        ]
    },
    {
        "id": "48951016bd81c603",
        "type": "delay",
        "z": "ad980a450f532e53",
        "name": "rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1540,
        "y": 2600,
        "wires": [
            [
                "b640b7d51f9d0adf"
            ]
        ]
    },
    {
        "id": "21c05c592db60472",
        "type": "delay",
        "z": "ad980a450f532e53",
        "name": "rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1540,
        "y": 2640,
        "wires": [
            [
                "93092472a2d44b45"
            ]
        ]
    },
    {
        "id": "6140d165fa484610",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1120,
        "wires": [
            [
                "ecfd76da3da1072c"
            ]
        ]
    },
    {
        "id": "7fb34139909f29f7",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1020,
        "wires": [
            [
                "802b990067d507a8"
            ]
        ]
    },
    {
        "id": "a3d891d7a4fccb03",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 720,
        "wires": [
            [
                "371e34dbb6b8846f"
            ]
        ]
    },
    {
        "id": "601ee222a3ec99a4",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 820,
        "wires": [
            [
                "594763cfd3f3a68c"
            ]
        ]
    },
    {
        "id": "c23aebb28d50ecf6",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 920,
        "wires": [
            [
                "a4d558d17067a238"
            ]
        ]
    },
    {
        "id": "02d74fd3273f05bd",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1220,
        "wires": [
            [
                "605ace8f1792af16"
            ]
        ]
    },
    {
        "id": "e78c1af9bad21216",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1340,
        "wires": [
            [
                "4074c70638b70122"
            ]
        ]
    },
    {
        "id": "79c0597bbc534417",
        "type": "change",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1540,
        "wires": [
            [
                "782d5fae5e99e803"
            ]
        ]
    },
    {
        "id": "2920c86e99161faf",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1780,
        "wires": [
            [
                "b538cfd6049620d0"
            ]
        ]
    },
    {
        "id": "88a0e50150d3ed13",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1860,
        "wires": [
            [
                "4f33cb432b1cec46"
            ]
        ]
    },
    {
        "id": "718cb610aeb7ff01",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 1940,
        "wires": [
            [
                "d6a68b4efe67cdc8"
            ]
        ]
    },
    {
        "id": "51a19b56f0f4870a",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 2020,
        "wires": [
            [
                "0a6adcb22e4cf244"
            ]
        ]
    },
    {
        "id": "c74bd5ecdd3f768f",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 2100,
        "wires": [
            [
                "3c0ab7076bb1b08e"
            ]
        ]
    },
    {
        "id": "0ae7e6e93053c91b",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 2180,
        "wires": [
            [
                "6589ddd914516e95"
            ]
        ]
    },
    {
        "id": "bb13a496767d5bd7",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2520,
        "y": 2260,
        "wires": [
            [
                "6c91fb90fee0aae4"
            ]
        ]
    },
    {
        "id": "9d14f9dbabd85620",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_6_Consumption",
        "links": [
            "6c183b3f2bf4e8a8"
        ],
        "x": 420,
        "y": 1220,
        "wires": [
            [
                "94bd798af922edc4",
                "9efd1ffb79b1e0ee"
            ]
        ],
        "l": true
    },
    {
        "id": "c76b6e95176071a3",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "MQTT/HomeAssistant/Domoticz_2_Room_Zone2_Temperature",
        "links": [
            "baca3c05f54f13c8"
        ],
        "x": 370,
        "y": 1340,
        "wires": [
            [
                "31e110399cb3ebdf",
                "5bc4e626d1754115"
            ]
        ],
        "l": true
    },
    {
        "id": "8da654a0e3cdf0f5",
        "type": "link in",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "MQTT/HomeAssistant/Domoticz_8_INPUT",
        "links": [],
        "x": 440,
        "y": 1540,
        "wires": [
            [
                "5c67d59911b90345",
                "7c5353231519ee53"
            ]
        ],
        "l": true
    },
    {
        "id": "cbd9f65956ab693b",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to P1 power consumption",
        "mode": "link",
        "links": [
            "d557c110dc040f11"
        ],
        "x": 1810,
        "y": 2720,
        "wires": [],
        "l": true
    },
    {
        "id": "426ef80beb8421b0",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to P1 power production",
        "mode": "link",
        "links": [
            "4005ad2197c7fdc7"
        ],
        "x": 1810,
        "y": 2680,
        "wires": [],
        "l": true
    },
    {
        "id": "3a4124d31bd3489a",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 890,
        "y": 1140,
        "wires": [
            [
                "9991c47e17c83b32"
            ]
        ]
    },
    {
        "id": "51d18479d2a5ddec",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { \n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1140,
        "wires": [
            [
                "3a4124d31bd3489a"
            ]
        ]
    },
    {
        "id": "d67d62969ebd2aad",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload",
        "x": 890,
        "y": 740,
        "wires": [
            [
                "8636d9f25052ddde"
            ]
        ]
    },
    {
        "id": "9c6f177b9315e543",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { \n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 740,
        "wires": [
            [
                "d67d62969ebd2aad"
            ]
        ]
    },
    {
        "id": "3bfd4df493544ceb",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload",
        "x": 890,
        "y": 840,
        "wires": [
            [
                "cf4b81e94bf08b6a"
            ]
        ]
    },
    {
        "id": "e78f0ebbd0a9f531",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { \n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 840,
        "wires": [
            [
                "3bfd4df493544ceb"
            ]
        ]
    },
    {
        "id": "93311fb7d79e2be4",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload",
        "x": 890,
        "y": 940,
        "wires": [
            [
                "3e9d2966af41db4b"
            ]
        ]
    },
    {
        "id": "d5870ab3915322ee",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { \n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 940,
        "wires": [
            [
                "93311fb7d79e2be4"
            ]
        ]
    },
    {
        "id": "d6d4ca9cc6ecb7b4",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 890,
        "y": 1040,
        "wires": [
            [
                "688c93cec2693927"
            ]
        ]
    },
    {
        "id": "4e8c45428864189c",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { \n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1040,
        "wires": [
            [
                "d6d4ca9cc6ecb7b4"
            ]
        ]
    },
    {
        "id": "4681f4a6e8fd5419",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 890,
        "y": 1240,
        "wires": [
            [
                "94bd798af922edc4"
            ]
        ]
    },
    {
        "id": "9efd1ffb79b1e0ee",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { \n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1240,
        "wires": [
            [
                "4681f4a6e8fd5419"
            ]
        ]
    },
    {
        "id": "f3e7f70a1b14e8fa",
        "type": "split",
        "z": "ad980a450f532e53",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload",
        "x": 890,
        "y": 1360,
        "wires": [
            [
                "31e110399cb3ebdf"
            ]
        ]
    },
    {
        "id": "5bc4e626d1754115",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') {\n    //node.warn('object') ; \n    return msg\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1360,
        "wires": [
            [
                "f3e7f70a1b14e8fa"
            ]
        ]
    },
    {
        "id": "d0b42f9a7172be6a",
        "type": "split",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 890,
        "y": 1560,
        "wires": [
            [
                "5c67d59911b90345"
            ]
        ]
    },
    {
        "id": "7c5353231519ee53",
        "type": "function",
        "z": "ad980a450f532e53",
        "d": true,
        "name": "object detection",
        "func": "if (typeof msg.payload === 'object') { node.warn('object') ; return msg}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1560,
        "wires": [
            [
                "d0b42f9a7172be6a"
            ]
        ]
    },
    {
        "id": "e5c7fc26bfec3457",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 16,
        "width": 6,
        "height": 1,
        "name": "WAR function",
        "label": "WAR function (Temperature)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 720,
        "wires": []
    },
    {
        "id": "a38cecd106543753",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 22,
        "width": 6,
        "height": 1,
        "name": "RTC function1",
        "label": "RTC function (Temperature Zone 1)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 820,
        "wires": []
    },
    {
        "id": "b46a41fa21ca0939",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 34,
        "width": 6,
        "height": 1,
        "name": "COOL Temp",
        "label": "COOL Function (Temperature)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1970,
        "y": 920,
        "wires": []
    },
    {
        "id": "cfaed235c0d02d72",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 40,
        "width": 6,
        "height": 1,
        "name": "COOL Hum",
        "label": "COOL Function (Humidity)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1970,
        "y": 1020,
        "wires": []
    },
    {
        "id": "0e29793f1a0f6920",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 46,
        "width": 6,
        "height": 1,
        "name": "P1 production",
        "label": "Power production (Export)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 1120,
        "wires": []
    },
    {
        "id": "9ceca3b0f2da3359",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 52,
        "width": 6,
        "height": 1,
        "name": "P1 consumption",
        "label": "Power consumption (Import)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 1220,
        "wires": []
    },
    {
        "id": "66268d37129a3cb7",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "Connect your signal for Zone 1 Room Setpoint here. The expected input is a single numeric value",
        "info": "",
        "x": 4690,
        "y": 2720,
        "wires": []
    },
    {
        "id": "a47610438b54e602",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "Connect any signal to the 'Start Force-DHW Link-in\". No expected value / data type.",
        "info": "",
        "x": 4650,
        "y": 1980,
        "wires": []
    },
    {
        "id": "5fdc034f44ac48f9",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "* to trigger",
        "func": "let msg1={};\nmsg1.payload = 1;\nmsg1.topic = \"DHW\";\nmsg1.force = 1;\n\nreturn msg1;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4110,
        "y": 1980,
        "wires": [
            [
                "5c677fecb54920ff"
            ]
        ]
    },
    {
        "id": "b2dcf5fbac5c6aa1",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2720,
        "wires": [
            [
                "709cfb96bfb224ce"
            ]
        ]
    },
    {
        "id": "709cfb96bfb224ce",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "link out 85",
        "mode": "link",
        "links": [
            "534ceb039d7f9812"
        ],
        "x": 4225,
        "y": 2720,
        "wires": []
    },
    {
        "id": "9a106cdefc873348",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "Room Setpoint Link-in (ZONE 1)",
        "links": [
            "1911fbfbf89866a8",
            "7a27b2c8c4721ed9",
            "b7f73bfb87c771de",
            "ca6a3a25d3074b64"
        ],
        "x": 3750,
        "y": 2720,
        "wires": [
            [
                "b2dcf5fbac5c6aa1"
            ]
        ],
        "l": true
    },
    {
        "id": "5c677fecb54920ff",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "link out 86",
        "mode": "link",
        "links": [
            "efe3dd019498a583"
        ],
        "x": 4225,
        "y": 1980,
        "wires": []
    },
    {
        "id": "8c9808071334d371",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "Start Force-DHW Link-in",
        "links": [
            "557098e076cd05f7",
            "e1d4bb0b2ec3c099"
        ],
        "x": 3730,
        "y": 1980,
        "wires": [
            [
                "5fdc034f44ac48f9"
            ]
        ],
        "l": true
    },
    {
        "id": "21999808907fb8ca",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "External Sensors ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",
        "info": "",
        "x": 1350,
        "y": 40,
        "wires": []
    },
    {
        "id": "7a38e025d311caac",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "The 1 Wire sensors should automatically populate the dropdown list",
        "info": "",
        "x": 340,
        "y": 580,
        "wires": []
    },
    {
        "id": "3b0c5855d9f81d85",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "link out 90",
        "mode": "link",
        "links": [
            "ce5a606d14d7a2fe"
        ],
        "x": 4215,
        "y": 860,
        "wires": []
    },
    {
        "id": "50510191e3d7f7fc",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Boost DHW now",
        "links": [],
        "x": 3700,
        "y": 860,
        "wires": [
            [
                "b7948d0dfa748885"
            ]
        ],
        "l": true
    },
    {
        "id": "8ddf5bc907dd5bea",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Connect external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4630,
        "y": 860,
        "wires": []
    },
    {
        "id": "b7948d0dfa748885",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "toNum",
        "func": "msg.topic = 'GUI_boost_state'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 860,
        "wires": [
            [
                "3b0c5855d9f81d85"
            ]
        ]
    },
    {
        "id": "f706c72d01f5f905",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Press [Boost DHW now] button on the dashboard. ",
        "info": "",
        "x": 3320,
        "y": 860,
        "wires": []
    },
    {
        "id": "4fa10ace7df30e83",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "WAR Function - Sensor with Temperature Outside",
        "info": "",
        "x": 420,
        "y": 740,
        "wires": []
    },
    {
        "id": "1bed5868aeaba949",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "RTC Zone 1 Function - Sensor with ROOM temperature",
        "info": "",
        "x": 400,
        "y": 840,
        "wires": []
    },
    {
        "id": "ecc2c917451ccb26",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "COOL Function - Sensor with ROOM Humidity",
        "info": "",
        "x": 430,
        "y": 1040,
        "wires": []
    },
    {
        "id": "ea79797327a3ba43",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "P1 - Sensor with POWER PRODUCTION",
        "info": "",
        "x": 440,
        "y": 1140,
        "wires": []
    },
    {
        "id": "3722227ec53e566c",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "P1 - Sensor with POWER CONSUMPTION",
        "info": "",
        "x": 440,
        "y": 1240,
        "wires": []
    },
    {
        "id": "c94d34a2e1a091ad",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "COOL Function - Sensor with ROOM temperature",
        "info": "",
        "x": 420,
        "y": 940,
        "wires": []
    },
    {
        "id": "6bd234b67b830924",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "82fd5c42e59889c9",
        "name": "Source flow variables",
        "links": [
            "a7d4c9f19c358e4f",
            "b44fceec58293e64",
            "e0c5ca5db0a7df5b",
            "6766b92901602397",
            "c311ce95a112969d",
            "d4595356e2536fda",
            "359356ccc6a21d72"
        ],
        "x": 300,
        "y": 3020,
        "wires": [
            [
                "0fe684f74775324c"
            ]
        ],
        "l": true
    },
    {
        "id": "0fe684f74775324c",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "82fd5c42e59889c9",
        "name": "Flow variables to InfluxDB (WP Personal)",
        "mode": "link",
        "links": [
            "61d8764c5309caec"
        ],
        "x": 640,
        "y": 3020,
        "wires": [],
        "icon": "node-red/leveldb.svg",
        "l": true
    },
    {
        "id": "93cacebad7e74573",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "82fd5c42e59889c9",
        "name": "Connect this link-out node to your DB input node on your WP Personal tab.",
        "info": "",
        "x": 740,
        "y": 3060,
        "wires": []
    },
    {
        "id": "0d82688afa5de780",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "External link CCC function on/off (ZONE 1)",
        "links": [
            "7345f72588d4818b"
        ],
        "x": 3780,
        "y": 420,
        "wires": [
            [
                "b21f4682fc8d0b9c"
            ]
        ],
        "l": true
    },
    {
        "id": "3c482b65be488c84",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "External link RTC function on/off (ZONE 1)",
        "links": [
            "657bf94dca5e4a3f",
            "37a9bdb8b839b309"
        ],
        "x": 3780,
        "y": 520,
        "wires": [
            [
                "2b39cca96f04ab29"
            ]
        ],
        "l": true
    },
    {
        "id": "5dab59668d1258c8",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "External link SoftStart function on/off",
        "links": [],
        "x": 3760,
        "y": 240,
        "wires": [
            [
                "3973cf9c88c35871"
            ]
        ],
        "l": true
    },
    {
        "id": "b21f4682fc8d0b9c",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "toNum",
        "func": "msg.topic = 'Correction_0_WAR_on_off'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 420,
        "wires": [
            [
                "3511e342c1fb7c3f"
            ]
        ]
    },
    {
        "id": "2b39cca96f04ab29",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "toNum",
        "func": "msg.topic = 'RTC toggle on/off'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 520,
        "wires": [
            [
                "aa4dd3b07f9cb7ed"
            ]
        ]
    },
    {
        "id": "3973cf9c88c35871",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "toNum",
        "func": "msg.topic = 'Softstart togle on/off'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 240,
        "wires": [
            [
                "8e8c5440b14adc8f"
            ]
        ]
    },
    {
        "id": "3511e342c1fb7c3f",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "link out Dash_WAR_OnOff",
        "mode": "link",
        "links": [
            "01d75eec1bfe68d4"
        ],
        "x": 4215,
        "y": 420,
        "wires": []
    },
    {
        "id": "aa4dd3b07f9cb7ed",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "link out RTC toggle on/off Z1",
        "mode": "link",
        "links": [
            "942f2ca34abfe8ac"
        ],
        "x": 4215,
        "y": 520,
        "wires": []
    },
    {
        "id": "8e8c5440b14adc8f",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "link out Softstart togle on/off",
        "mode": "link",
        "links": [
            "6bb32dd02ad372d4"
        ],
        "x": 4215,
        "y": 240,
        "wires": []
    },
    {
        "id": "f971bd6378b8c09d",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 420,
        "wires": []
    },
    {
        "id": "fb07535531026f0a",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 520,
        "wires": []
    },
    {
        "id": "3c84c5b3facc643d",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 240,
        "wires": []
    },
    {
        "id": "7a4290e8610e8c41",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "External link PumpSpeed function on/off",
        "links": [],
        "x": 3770,
        "y": 2280,
        "wires": [
            [
                "be09347ce3851979"
            ]
        ],
        "l": true
    },
    {
        "id": "be09347ce3851979",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "toNum",
        "func": "msg.topic = 'state'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2280,
        "wires": [
            [
                "4d0ef717fa8fdb71"
            ]
        ]
    },
    {
        "id": "4d0ef717fa8fdb71",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "link out Pumpspeed function on/off",
        "mode": "link",
        "links": [
            "6689f388c8028972"
        ],
        "x": 4225,
        "y": 2280,
        "wires": []
    },
    {
        "id": "eb50dc8e437e15e5",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 2280,
        "wires": []
    },
    {
        "id": "9e6b649a9373fdc7",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "External link Solar²DHW function on/off",
        "links": [],
        "x": 3770,
        "y": 780,
        "wires": [
            [
                "476f6e4aa5bc2c0a"
            ]
        ],
        "l": true
    },
    {
        "id": "476f6e4aa5bc2c0a",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "toNum",
        "func": "msg.topic = 'state'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 780,
        "wires": [
            [
                "91c75ca9f3471bd5"
            ]
        ]
    },
    {
        "id": "91c75ca9f3471bd5",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "link out Solar2DHW toggle on/off",
        "mode": "link",
        "links": [
            "4ed5f3924acf26ff"
        ],
        "x": 4215,
        "y": 780,
        "wires": []
    },
    {
        "id": "445a8a46abb0d733",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 780,
        "wires": []
    },
    {
        "id": "025597cef8c50d11",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "External link HEATPUMP on/off",
        "links": [],
        "x": 3750,
        "y": 100,
        "wires": [
            [
                "73f39764feab525c"
            ]
        ],
        "l": true
    },
    {
        "id": "73f39764feab525c",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "toNum",
        "func": "msg.topic = 'External'; \nmsg.source = \"External\";\n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 100,
        "wires": [
            [
                "f7f21cce882495d8"
            ]
        ]
    },
    {
        "id": "f7f21cce882495d8",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "link out HeatPump Power state",
        "mode": "link",
        "links": [
            "071ac5a0f08a8fdb"
        ],
        "x": 4215,
        "y": 100,
        "wires": []
    },
    {
        "id": "03a4aa238afc1981",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 100,
        "wires": []
    },
    {
        "id": "ed74c1ebbc04bb2b",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "External link CHANGE OPERATING MODE",
        "links": [
            "7c338d488dbbede1"
        ],
        "x": 3790,
        "y": 1380,
        "wires": [
            [
                "aaad5e68b3b9bf5e"
            ]
        ],
        "l": true
    },
    {
        "id": "aaad5e68b3b9bf5e",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "toNum",
        "func": "msg.topic = 'External'; \n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1 || msg.payload == 2 || msg.payload == 3 || msg.payload == 4 || msg.payload == 5 || msg.payload == 6) {\n    return msg;\n}\n\n\n//  READ: Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW) \n//  SET:  Operating mode (0=Heat only, 1=Cool only, 2=Auto, 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto+DHW",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1380,
        "wires": [
            [
                "f0150106811a865b",
                "75cba13a1df7c9c8"
            ]
        ]
    },
    {
        "id": "f0150106811a865b",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "link out to SET9",
        "mode": "link",
        "links": [
            "43464dca9fd194fa",
            "476134da722ea175"
        ],
        "x": 4225,
        "y": 1380,
        "wires": []
    },
    {
        "id": "9abf6494d65a1390",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "POWER. Turn the heatpump on or off",
        "info": "",
        "x": 3290,
        "y": 100,
        "wires": [],
        "icon": "node-red/alert.svg"
    },
    {
        "id": "07ea01ca5f3dd948",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "4267db13778ecba3",
        "name": "STEP 1: Connect your sensor to the below LINK-IN nodes",
        "info": "",
        "x": 290,
        "y": 200,
        "wires": []
    },
    {
        "id": "a73990662fc6dc84",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "4267db13778ecba3",
        "name": "STEP 2: IN the dashboard, go to [SYSTEM] > [SENSOR] tab. ",
        "info": "",
        "x": 300,
        "y": 240,
        "wires": []
    },
    {
        "id": "05bc11ef8fc2b3c6",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "4267db13778ecba3",
        "name": "Through drop-down selection, you can pick the correct key/value ",
        "info": "",
        "x": 370,
        "y": 280,
        "wires": []
    },
    {
        "id": "5d7cec9b89cfdcce",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "4267db13778ecba3",
        "name": "NOTE: Only after value's are received, the drop-down list is populated",
        "info": "",
        "x": 390,
        "y": 320,
        "wires": []
    },
    {
        "id": "eaf23ae574103f75",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "82fd5c42e59889c9",
        "name": "Output to Influx DB",
        "info": "",
        "x": 270,
        "y": 2980,
        "wires": []
    },
    {
        "id": "fbaf7140575589b7",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "OperatingMode Link-in",
        "links": [],
        "x": 3720,
        "y": 1380,
        "wires": [
            [
                "aaad5e68b3b9bf5e"
            ]
        ],
        "l": true
    },
    {
        "id": "75cba13a1df7c9c8",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "link out 105",
        "mode": "link",
        "links": [
            "21cf21646167ae31"
        ],
        "x": 4225,
        "y": 1380,
        "wires": []
    },
    {
        "id": "39f05c9459e65ad4",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "Expected Input [0-6] corresponding to the OperatingMode",
        "info": "",
        "x": 4570,
        "y": 1380,
        "wires": []
    },
    {
        "id": "a77c1a7ddd9cd088",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "Available operating modes: 0=Heat only, 1=Cool only, 2=Auto, 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto+DHW",
        "info": "",
        "x": 4020,
        "y": 1420,
        "wires": []
    },
    {
        "id": "90e296f8e001ac4b",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "Do not use: Legacy double functions",
        "info": "",
        "x": 320,
        "y": 3140,
        "wires": []
    },
    {
        "id": "925ca506cdec0960",
        "type": "link in",
        "z": "ad980a450f532e53",
        "name": "Start DHW Link-in",
        "links": [],
        "x": 610,
        "y": 3140,
        "wires": [
            [
                "557098e076cd05f7"
            ]
        ],
        "l": true
    },
    {
        "id": "f19d9753da86f709",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "External link DHW Sterilization run",
        "links": [
            "3b1d3340821ec488"
        ],
        "x": 3760,
        "y": 2020,
        "wires": [
            [
                "6303eae8f8d9cba1"
            ]
        ],
        "l": true
    },
    {
        "id": "6303eae8f8d9cba1",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "toNum",
        "func": "msg.topic = 'Toggle'; \nvar msg99 = {}; msg99.topic = 'External trigger';\n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On' || msg.payload == 1) {\n    msg.payload = 1;\n    msg99.payload = 'Sterilization run start';\n    return [msg, msg99];\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off' || msg.payload == 0) {\n    msg.payload = 0;\n    msg99.payload = 'Sterilization run stop';\n    return [msg,msg99];\n}",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2020,
        "wires": [
            [
                "f4637a99af0d109d"
            ],
            [
                "53dba3f23c3b38f0"
            ]
        ]
    },
    {
        "id": "f4637a99af0d109d",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "link out 111",
        "mode": "link",
        "links": [
            "20e2544a8277d8c2"
        ],
        "x": 4225,
        "y": 2020,
        "wires": []
    },
    {
        "id": "9eafb5002ff4185b",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 2020,
        "wires": []
    },
    {
        "id": "53dba3f23c3b38f0",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "ToLog",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 4285,
        "y": 2020,
        "wires": []
    },
    {
        "id": "23cd009564548241",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "panasonic_heat_pump/1wire/#",
        "mode": "link",
        "links": [
            "70220fbbb0e911d1",
            "ad5a448baa75a80e"
        ],
        "x": 995,
        "y": 1660,
        "wires": []
    },
    {
        "id": "bf67687afdea22d6",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 1,
        "width": 18,
        "height": 1,
        "name": "Balk",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1210,
        "y": 620,
        "wires": []
    },
    {
        "id": "7343db87eeaf84a3",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 5,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1410,
        "y": 640,
        "wires": []
    },
    {
        "id": "ce9a268a6846ec97",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "Connect external signals to the node red flow",
        "info": "",
        "x": 3030,
        "y": 40,
        "wires": [],
        "icon": "node-red-contrib-miio-roborock/homekit-logo.png"
    },
    {
        "id": "8d015b8542d0a18a",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "ADD_DHW_TEMP",
        "mode": "link",
        "links": [
            "421277fb75f3fae8"
        ],
        "x": 1790,
        "y": 2760,
        "wires": [],
        "l": true
    },
    {
        "id": "e813886e76951136",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "ADD_ROOM_TEMP",
        "mode": "link",
        "links": [
            "95590d576d789646"
        ],
        "x": 1800,
        "y": 2800,
        "wires": [],
        "l": true
    },
    {
        "id": "bb4a16e7f11641cb",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "ADD_HEAT_TEMP",
        "mode": "link",
        "links": [
            "f841f2adf20f9317"
        ],
        "x": 1790,
        "y": 2840,
        "wires": [],
        "l": true
    },
    {
        "id": "e236904c29212096",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Change topic",
        "func": "var description = global.get(msg.sensor + '_description', \"file\")\nmsg.topic = description;\nreturn msg\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 2760,
        "wires": [
            [
                "8d015b8542d0a18a"
            ]
        ]
    },
    {
        "id": "4128335779e1ea94",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Change topic",
        "func": "var description = global.get(msg.sensor + '_description', \"file\")\nmsg.topic = description;\nreturn msg\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 2800,
        "wires": [
            [
                "e813886e76951136"
            ]
        ]
    },
    {
        "id": "fa7950ca726c297c",
        "type": "function",
        "z": "ad980a450f532e53",
        "name": "Change topic",
        "func": "var description = global.get(msg.sensor + '_description', \"file\")\nmsg.topic = description;\nreturn msg\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 2840,
        "wires": [
            [
                "bb4a16e7f11641cb"
            ]
        ]
    },
    {
        "id": "ccdcb6582052a00e",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "External link NightReduction on/off",
        "links": [
            "ed7fbf6631d35c69"
        ],
        "x": 3760,
        "y": 200,
        "wires": [
            [
                "3c9d31e1cff6eee5"
            ]
        ],
        "l": true
    },
    {
        "id": "3c9d31e1cff6eee5",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "toNum",
        "func": "msg.topic = 'state'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 200,
        "wires": [
            [
                "d10d22a53b6cc13e"
            ]
        ]
    },
    {
        "id": "d10d22a53b6cc13e",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "link out 141",
        "mode": "link",
        "links": [
            "bab92195d66e60de"
        ],
        "x": 4215,
        "y": 200,
        "wires": []
    },
    {
        "id": "f513edeb57d7dfd4",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 200,
        "wires": []
    },
    {
        "id": "557098e076cd05f7",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "link out 148",
        "mode": "link",
        "links": [
            "8c9808071334d371"
        ],
        "x": 745,
        "y": 3140,
        "wires": []
    },
    {
        "id": "424df4c604c9b4fb",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "CCC FUNCTION: enable / disable the function",
        "info": "",
        "x": 3310,
        "y": 420,
        "wires": []
    },
    {
        "id": "518eaac0afd76a49",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "RTC FUNCTION: enable / disable the function",
        "info": "",
        "x": 3310,
        "y": 520,
        "wires": []
    },
    {
        "id": "850453d49df4bcd0",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "SOFTSTART FUNCTION: enable / disable the function",
        "info": "",
        "x": 3340,
        "y": 240,
        "wires": []
    },
    {
        "id": "cbedb4c9168e53f0",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "SOLAR²DHW FUNCTION: enable / disable the function",
        "info": "",
        "x": 3340,
        "y": 780,
        "wires": []
    },
    {
        "id": "828498df89e0ce03",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "NIGHT REDUCTION WATERTEMP: turn toggle on or off",
        "info": "",
        "x": 3350,
        "y": 200,
        "wires": []
    },
    {
        "id": "ce692e24838cd878",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "DHW target temperature",
        "links": [
            "c42f8ce44ca4ca57"
        ],
        "x": 3730,
        "y": 1940,
        "wires": [
            [
                "d68588990514e718"
            ]
        ],
        "l": true
    },
    {
        "id": "d68588990514e718",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload >= 40 && msg.payload <= 75) {\n    return msg;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1940,
        "wires": [
            [
                "f3f961c698c9fc05"
            ]
        ]
    },
    {
        "id": "f3f961c698c9fc05",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "link out 149",
        "mode": "link",
        "links": [
            "56131f5116b20fba"
        ],
        "x": 4225,
        "y": 1940,
        "wires": []
    },
    {
        "id": "06c80c8b77607750",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "The expected input is a single numeric value ranging from 40-75.",
        "info": "",
        "x": 4590,
        "y": 1940,
        "wires": []
    },
    {
        "id": "cc68aac684b9df7b",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "Water temp / shift (ZONE 1)",
        "links": [],
        "x": 3740,
        "y": 340,
        "wires": [
            [
                "d6cef73c0a1296a8"
            ]
        ],
        "l": true
    },
    {
        "id": "5f2a10d2bf1bd860",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "link out 150",
        "mode": "link",
        "links": [
            "ddaab01e52410fc0"
        ],
        "x": 4215,
        "y": 340,
        "wires": []
    },
    {
        "id": "d6cef73c0a1296a8",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif ( msg.payload >= -5 && msg.payload <= 65) {\n    return msg;\n}    ",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 340,
        "wires": [
            [
                "5f2a10d2bf1bd860"
            ]
        ]
    },
    {
        "id": "5d234163ccd6b5fa",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "HOME - Shift value or Water temperature ",
        "info": "",
        "x": 3300,
        "y": 360,
        "wires": []
    },
    {
        "id": "1f2b375b51b2abed",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "DIRECT: expected value must be between 20 and 65 degrees.",
        "info": "",
        "x": 4580,
        "y": 340,
        "wires": []
    },
    {
        "id": "17dc7d07b633910c",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "COMPENSATION CURVE: expected value must be between -5 and +5",
        "info": "",
        "x": 4610,
        "y": 380,
        "wires": []
    },
    {
        "id": "18038fcd6bb30412",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "link out 151",
        "mode": "link",
        "links": [
            "343090bf44a08674"
        ],
        "x": 4215,
        "y": 820,
        "wires": []
    },
    {
        "id": "16667133a18234e6",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Auto start DHW",
        "links": [],
        "x": 3700,
        "y": 820,
        "wires": [
            [
                "41826750c369e474"
            ]
        ],
        "l": true
    },
    {
        "id": "41826750c369e474",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "toNum",
        "func": "msg.topic = 'GUI_DHW_automation_state';\n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 820,
        "wires": [
            [
                "18038fcd6bb30412"
            ]
        ]
    },
    {
        "id": "48e6808b29b0f8e9",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "AUTO START DHW FUNCTION: enable / disable the function",
        "info": "",
        "x": 3360,
        "y": 820,
        "wires": []
    },
    {
        "id": "986a82328a195e5c",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 820,
        "wires": []
    },
    {
        "id": "c3ba3e3df371f60d",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "448f01b40762d074",
        "name": "Cool target temperature",
        "links": [],
        "x": 3720,
        "y": 960,
        "wires": [
            [
                "6d804f32d2ecf24b"
            ]
        ],
        "l": true
    },
    {
        "id": "6d804f32d2ecf24b",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "448f01b40762d074",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif ( msg.payload >= 5 && msg.payload <= 20) {\n    msg.topic = 'setpoint_requested';\n    return msg;\n}    ",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 960,
        "wires": [
            [
                "e5b0e6d0b0b7a2dd"
            ]
        ]
    },
    {
        "id": "e5b0e6d0b0b7a2dd",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "448f01b40762d074",
        "name": "link out 152",
        "mode": "link",
        "links": [
            "919df257a873566d"
        ],
        "x": 4215,
        "y": 960,
        "wires": []
    },
    {
        "id": "520597253ecb5a45",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "448f01b40762d074",
        "name": "DIRECT: expected value must be between 5 and 20 degrees.",
        "info": "",
        "x": 4580,
        "y": 960,
        "wires": []
    },
    {
        "id": "73d3ab6818c4daf2",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "3643538ecafdae97",
        "name": "! ATTENTION ! This Power on/off command is outside of all Node Red flow logic ! use at your own risk. Then can throw the running logic into chaos.",
        "info": "",
        "x": 3630,
        "y": 140,
        "wires": [],
        "icon": "font-awesome/fa-warning"
    },
    {
        "id": "779bb57a0d8072a1",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "Water temp / shift (ZONE 2)",
        "links": [],
        "x": 3740,
        "y": 380,
        "wires": [
            [
                "be7dc51d4e1fe4de"
            ]
        ],
        "l": true
    },
    {
        "id": "be7dc51d4e1fe4de",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif ( msg.payload >= -5 && msg.payload <= 65) {\n    return msg;\n}    ",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 380,
        "wires": [
            [
                "5f3349014d71b7a9"
            ]
        ]
    },
    {
        "id": "5f3349014d71b7a9",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "link out 10",
        "mode": "link",
        "links": [
            "cb995415dbbbe7a9"
        ],
        "x": 4215,
        "y": 380,
        "wires": []
    },
    {
        "id": "262b47de81481e01",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "External link CCC function on/off (ZONE 2)",
        "links": [
            "0b3c6bdf1e084890"
        ],
        "x": 3780,
        "y": 460,
        "wires": [
            [
                "0afb79d6572270c7"
            ]
        ],
        "l": true
    },
    {
        "id": "0afb79d6572270c7",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "toNum",
        "func": "msg.topic = 'Correction_0_WAR_on_off'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 460,
        "wires": [
            [
                "e60908ba16f0b752"
            ]
        ]
    },
    {
        "id": "e60908ba16f0b752",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "link out Dash_WAR_OnOff",
        "mode": "link",
        "links": [
            "ef4ade1fff94fc42"
        ],
        "x": 4215,
        "y": 460,
        "wires": []
    },
    {
        "id": "e3a7d36ecf2a7ee1",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 460,
        "wires": []
    },
    {
        "id": "dd6b26f7bb82f306",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "Connect your signal for Zone 1 Room Setpoint here. The expected input is a single numeric value",
        "info": "",
        "x": 4690,
        "y": 2820,
        "wires": []
    },
    {
        "id": "4e9c3d9ac7790814",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "link out 29",
        "mode": "link",
        "links": [
            "6ce525811e6d0a6e"
        ],
        "x": 4225,
        "y": 2820,
        "wires": []
    },
    {
        "id": "4cb7233d92a85c8d",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2820,
        "wires": [
            [
                "4e9c3d9ac7790814"
            ]
        ]
    },
    {
        "id": "9b4a5dde571a13ad",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "Room Setpoint Link-in (ZONE 2)",
        "links": [],
        "x": 3750,
        "y": 2820,
        "wires": [
            [
                "4cb7233d92a85c8d"
            ]
        ],
        "l": true
    },
    {
        "id": "e1ac20962cd7e152",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "External link RTC function on/off (ZONE 2)",
        "links": [
            "58b2a9d63158de30"
        ],
        "x": 3780,
        "y": 560,
        "wires": [
            [
                "de760957c755b9fe"
            ]
        ],
        "l": true
    },
    {
        "id": "de760957c755b9fe",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "toNum",
        "func": "msg.topic = 'RTC toggle on/off'; \n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 560,
        "wires": [
            [
                "1219e898e8a28b0e"
            ]
        ]
    },
    {
        "id": "1219e898e8a28b0e",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "link out RTC toggle on/off Z2",
        "mode": "link",
        "links": [
            "d60cb7d9078bfdaf"
        ],
        "x": 4215,
        "y": 560,
        "wires": []
    },
    {
        "id": "a3aaecacd0b72876",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "f0315d6daee8edb3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 560,
        "wires": []
    },
    {
        "id": "b3f5d59625b43b18",
        "type": "comment",
        "z": "ad980a450f532e53",
        "name": "RTC Zone 2 Function - Sensor with ROOM temperature",
        "info": "",
        "x": 400,
        "y": 1360,
        "wires": []
    },
    {
        "id": "cecf655071adc337",
        "type": "change",
        "z": "ad980a450f532e53",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor7",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "#:(file)::HW_sensors.sensor7_purpose",
                "pt": "global",
                "to": "RTC",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1380,
        "wires": [
            [
                "b345397281d55c5a"
            ]
        ]
    },
    {
        "id": "df21fe9f9aca961c",
        "type": "ui_text",
        "z": "ad980a450f532e53",
        "group": "24b2fad95360cd29",
        "order": 28,
        "width": 6,
        "height": 1,
        "name": "RTC function2",
        "label": "RTC function (Temperature Zone 2)",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1980,
        "y": 1340,
        "wires": []
    },
    {
        "id": "f1802c636ff0f2f3",
        "type": "delay",
        "z": "ad980a450f532e53",
        "name": "rate limit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1540,
        "y": 2560,
        "wires": [
            [
                "334ab3e5210e7ded"
            ]
        ]
    },
    {
        "id": "334ab3e5210e7ded",
        "type": "link out",
        "z": "ad980a450f532e53",
        "name": "to RTC Z2",
        "mode": "link",
        "links": [
            "42044f1d6aefdd8c"
        ],
        "x": 1770,
        "y": 2560,
        "wires": [],
        "l": true
    },
    {
        "id": "74ed14018ce311df",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Water pump flow setpoint (%)",
        "links": [],
        "x": 3740,
        "y": 1080,
        "wires": [
            [
                "4465669ce511f5e2"
            ]
        ],
        "l": true
    },
    {
        "id": "a4cfc4e8117d1675",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Service Mode (on/off)",
        "links": [],
        "x": 3720,
        "y": 1120,
        "wires": [
            [
                "255e838a7433d3c1"
            ]
        ],
        "l": true
    },
    {
        "id": "2fae7de3640b6380",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Backup heater - Start delta",
        "links": [],
        "x": 3730,
        "y": 1160,
        "wires": [
            [
                "090f50e8d33fc329"
            ]
        ],
        "l": true
    },
    {
        "id": "f484ab216ac6829a",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Backup heater - Stop delta",
        "links": [],
        "x": 3730,
        "y": 1200,
        "wires": [
            [
                "271252a59e1d14ae"
            ]
        ],
        "l": true
    },
    {
        "id": "4126d390518edb2d",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Backup heater - Delay time",
        "links": [],
        "x": 3730,
        "y": 1240,
        "wires": [
            [
                "15398a18d556c530"
            ]
        ],
        "l": true
    },
    {
        "id": "4465669ce511f5e2",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "toNum",
        "func": "msg.topic = 'PumpMaxFlowSetting'; \n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload < 0 || msg.payload > 100) { node.warn('Water Pump flow setpoint: not a valid input received (WP Input tab)'); return null}\n\nreturn msg\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1080,
        "wires": [
            [
                "11822306257b3b3a"
            ]
        ]
    },
    {
        "id": "11822306257b3b3a",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "link out 11",
        "mode": "link",
        "links": [
            "32c4b461266d4a6e"
        ],
        "x": 4225,
        "y": 1080,
        "wires": []
    },
    {
        "id": "255e838a7433d3c1",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "toNum",
        "func": "msg.topic = 'ServiceMode';\n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1120,
        "wires": [
            [
                "7c891c6c1a9c67aa"
            ]
        ]
    },
    {
        "id": "7c891c6c1a9c67aa",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "link out 12",
        "mode": "link",
        "links": [
            "607aa2de7f1a0f59"
        ],
        "x": 4225,
        "y": 1120,
        "wires": []
    },
    {
        "id": "5ee632164032ad96",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "link out 19",
        "mode": "link",
        "links": [
            "9b6df7cf166fd06a"
        ],
        "x": 4225,
        "y": 1160,
        "wires": []
    },
    {
        "id": "7e815d34fedff804",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "link out 21",
        "mode": "link",
        "links": [
            "96bfb59824d94a5e"
        ],
        "x": 4225,
        "y": 1200,
        "wires": []
    },
    {
        "id": "3b9df53eebf87cec",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "link out 22",
        "mode": "link",
        "links": [
            "c7956753cc63cfc4"
        ],
        "x": 4225,
        "y": 1240,
        "wires": []
    },
    {
        "id": "d4b1190308774750",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Expected Input [0-6] corresponding to the OperatingMode",
        "info": "",
        "x": 4570,
        "y": 1080,
        "wires": []
    },
    {
        "id": "9a4252db1617da40",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 1120,
        "wires": []
    },
    {
        "id": "090f50e8d33fc329",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP97_Heater_Start_Delta';\n\nif ( msg.payload >= -10 && msg.payload <= -2) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1160,
        "wires": [
            [
                "5ee632164032ad96"
            ]
        ]
    },
    {
        "id": "787fd9a58ada1803",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Expected value must be a value between -10 and -2",
        "info": "",
        "x": 4550,
        "y": 1160,
        "wires": []
    },
    {
        "id": "271252a59e1d14ae",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP98_Heater_Stop_Delta';\n\nif ( msg.payload >= -8 && msg.payload <= 0) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1200,
        "wires": [
            [
                "7e815d34fedff804"
            ]
        ]
    },
    {
        "id": "15398a18d556c530",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP96_Heater_Delay_Time';\n\nif ( msg.payload >= 0 && msg.payload <= 60 ) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1240,
        "wires": [
            [
                "3b9df53eebf87cec"
            ]
        ]
    },
    {
        "id": "84634fd8ec8f1f7a",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Expected value must be a value between -8 and 0",
        "info": "",
        "x": 4550,
        "y": 1200,
        "wires": []
    },
    {
        "id": "e2fbab42ba4d85d7",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "11fd1901e23b1c4b",
        "name": "Expected value must be a value between 0 and 60",
        "info": "",
        "x": 4550,
        "y": 1240,
        "wires": []
    },
    {
        "id": "7412d52e84e226e1",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "Panasonic Main Scheduler (on/off)",
        "links": [],
        "x": 3760,
        "y": 1340,
        "wires": [
            [
                "65e79bc507918e26"
            ]
        ],
        "l": true
    },
    {
        "id": "65e79bc507918e26",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "toNum",
        "func": "msg.topic = 'ServiceMode';\n\nif (msg.payload === true || msg.payload == 'on' || msg.payload == 'On') {\n    msg.payload = 1;\n    return msg;\n}\nif (msg.payload === false || msg.payload == 'off' || msg.payload == 'Off') {\n    msg.payload = 0;\n    return msg;\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == 0 || msg.payload == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1340,
        "wires": [
            [
                "9872c95f0807bb0b"
            ]
        ]
    },
    {
        "id": "9872c95f0807bb0b",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "link out 23",
        "mode": "link",
        "links": [
            "83544a490499e99c"
        ],
        "x": 4225,
        "y": 1340,
        "wires": []
    },
    {
        "id": "fc6bfed04af10f02",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 1340,
        "wires": []
    },
    {
        "id": "9ad9e41bc15fb30b",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "link out 27",
        "mode": "link",
        "links": [
            "a3d9dc45c641ff7d",
            "c33b3e865b1bd8b8"
        ],
        "x": 4225,
        "y": 1480,
        "wires": []
    },
    {
        "id": "9ce4a5f0ac4ca8e8",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "Quiet Mode (0-3)",
        "links": [],
        "x": 3700,
        "y": 1480,
        "wires": [
            [
                "edca81bfc8bb2eb0"
            ]
        ],
        "l": true
    },
    {
        "id": "edca81bfc8bb2eb0",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'Quiet Mode';\n\nif ( msg.payload >= 0 && msg.payload <= 3) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1480,
        "wires": [
            [
                "9ad9e41bc15fb30b"
            ]
        ]
    },
    {
        "id": "7a3eb413e95bdf25",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "b37109182aa09362",
        "name": "Expected value must be a value between 0 and 3",
        "info": "",
        "x": 4540,
        "y": 1480,
        "wires": []
    },
    {
        "id": "427b8d8c87716450",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Set Active Zones (0-2)",
        "links": [],
        "x": 3720,
        "y": 1580,
        "wires": [
            [
                "51eb57799ea1ebcb"
            ]
        ],
        "l": true
    },
    {
        "id": "ab40e61164a31442",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Powerful mode (0/1/2/3)",
        "links": [],
        "x": 3720,
        "y": 1620,
        "wires": [
            [
                "990eadcaf7919e73"
            ]
        ],
        "l": true
    },
    {
        "id": "75e3d2d0ae71782e",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Heat Delta",
        "links": [],
        "x": 3680,
        "y": 1660,
        "wires": [
            [
                "a0d2782a2d438f21"
            ]
        ],
        "l": true
    },
    {
        "id": "7f081b8d28d5b365",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Buffertank Delta",
        "links": [],
        "x": 3700,
        "y": 1700,
        "wires": [
            [
                "f32092254914605c"
            ]
        ],
        "l": true
    },
    {
        "id": "8356f617756a64f6",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Cool Delta",
        "links": [],
        "x": 3680,
        "y": 1740,
        "wires": [
            [
                "c5ef1c23d768f2b7"
            ]
        ],
        "l": true
    },
    {
        "id": "b965d21815c813aa",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Minimum Temp",
        "links": [],
        "x": 3700,
        "y": 1780,
        "wires": [
            [
                "cb46c80445de7874"
            ]
        ],
        "l": true
    },
    {
        "id": "ef10424709a45fd2",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Maximum Templ",
        "links": [],
        "x": 3700,
        "y": 1820,
        "wires": [
            [
                "f40fd54dd3c8a770"
            ]
        ],
        "l": true
    },
    {
        "id": "51eb57799ea1ebcb",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP94_Zones_State';\n\nif ( msg.payload >= 0 && msg.payload <= 2) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1580,
        "wires": [
            [
                "d766dacd9c621c38"
            ]
        ]
    },
    {
        "id": "a0d2782a2d438f21",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP23_Heat_Delta';\n\nif ( msg.payload >= 1 && msg.payload <= 15) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1660,
        "wires": [
            [
                "91e37aab30bd7432"
            ]
        ]
    },
    {
        "id": "f32092254914605c",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'SetBufferDelta';\n\nif ( msg.payload >= 0 && msg.payload <= 10) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1700,
        "wires": [
            [
                "46f7abaed662ba28"
            ]
        ]
    },
    {
        "id": "c5ef1c23d768f2b7",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP24_Cool_Delta';\n\nif ( msg.payload >= 1 && msg.payload <= 15) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1740,
        "wires": [
            [
                "94fca17199ef198f"
            ]
        ]
    },
    {
        "id": "cb46c80445de7874",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'HEAT_SP_lower_limit';\n\nif ( msg.payload >= 20 && msg.payload <= 100) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1780,
        "wires": [
            [
                "3f6dbb8624fe8240"
            ]
        ]
    },
    {
        "id": "f40fd54dd3c8a770",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'HEAT_SP_upper_limit';\n\nif ( msg.payload >= 20 && msg.payload <= 100) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1820,
        "wires": [
            [
                "a7fa67221ae9e9a2"
            ]
        ]
    },
    {
        "id": "d766dacd9c621c38",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 28",
        "mode": "link",
        "links": [
            "d8cbe45733f62ad2"
        ],
        "x": 4225,
        "y": 1580,
        "wires": []
    },
    {
        "id": "476092c14d80e376",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 32",
        "mode": "link",
        "links": [
            "f70b59196295efc0"
        ],
        "x": 4225,
        "y": 1620,
        "wires": []
    },
    {
        "id": "91e37aab30bd7432",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 33",
        "mode": "link",
        "links": [
            "fec855b6c7ec4694"
        ],
        "x": 4225,
        "y": 1660,
        "wires": []
    },
    {
        "id": "46f7abaed662ba28",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 34",
        "mode": "link",
        "links": [
            "bafc3bac1af8d9dd"
        ],
        "x": 4225,
        "y": 1700,
        "wires": []
    },
    {
        "id": "94fca17199ef198f",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 37",
        "mode": "link",
        "links": [
            "3ed1fd544412f391"
        ],
        "x": 4225,
        "y": 1740,
        "wires": []
    },
    {
        "id": "3f6dbb8624fe8240",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 39",
        "mode": "link",
        "links": [
            "d0304b43f08fc247"
        ],
        "x": 4225,
        "y": 1780,
        "wires": []
    },
    {
        "id": "a7fa67221ae9e9a2",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "link out 44",
        "mode": "link",
        "links": [
            "96a5cf433a98a371"
        ],
        "x": 4225,
        "y": 1820,
        "wires": []
    },
    {
        "id": "990eadcaf7919e73",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP17_Powerful_Mode_Time';\n\nif ( msg.payload >= 0 && msg.payload <= 3) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 1620,
        "wires": [
            [
                "476092c14d80e376"
            ]
        ]
    },
    {
        "id": "3006427919e8aff2",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected Input [0-2] corresponding to the Active Zones",
        "info": "",
        "x": 4560,
        "y": 1580,
        "wires": []
    },
    {
        "id": "293dabdb7dc9d90e",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected Input [0-3] corresponding to the Powerful modes",
        "info": "",
        "x": 4570,
        "y": 1620,
        "wires": []
    },
    {
        "id": "0f9dfedd3bbaf56f",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected value must be a value between 1 and 15",
        "info": "",
        "x": 4550,
        "y": 1660,
        "wires": []
    },
    {
        "id": "5d3b9da1f396e6cd",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected value must be a value between 0 and 10",
        "info": "",
        "x": 4550,
        "y": 1700,
        "wires": []
    },
    {
        "id": "f6776de159ce85f8",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected value must be a value between 1 and 15",
        "info": "",
        "x": 4550,
        "y": 1740,
        "wires": []
    },
    {
        "id": "bd637b6a2e4ef723",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected value must be a value between 20 and 100",
        "info": "",
        "x": 4550,
        "y": 1780,
        "wires": []
    },
    {
        "id": "c5d46676a3fbdfdc",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "539143ccb5c25993",
        "name": "Expected value must be a value between 20 and 100",
        "info": "",
        "x": 4550,
        "y": 1820,
        "wires": []
    },
    {
        "id": "0120ee291e0d56d2",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "DHW delta",
        "mode": "link",
        "links": [
            "21ebdaf0c28e39ab"
        ],
        "x": 4225,
        "y": 2060,
        "wires": []
    },
    {
        "id": "e0e8a190d72f032e",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "DHW delta",
        "links": [],
        "x": 3680,
        "y": 2060,
        "wires": [
            [
                "a0211d49e6faafb5"
            ]
        ],
        "l": true
    },
    {
        "id": "a0211d49e6faafb5",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP22_DHW_Heat_Delta';\n\nif ( msg.payload >= -12 && msg.payload <= -2) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2060,
        "wires": [
            [
                "0120ee291e0d56d2"
            ]
        ]
    },
    {
        "id": "1d1e5de9b348e918",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "Expected value must be a value between -12 and -2",
        "info": "",
        "x": 4550,
        "y": 2060,
        "wires": []
    },
    {
        "id": "f84f8c597d2d0d6f",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "Block DHW-run above",
        "links": [],
        "x": 3720,
        "y": 2100,
        "wires": [
            [
                "03acb67d75e482b0"
            ]
        ],
        "l": true
    },
    {
        "id": "f918bf51a72255c8",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "link out 97",
        "mode": "link",
        "links": [
            "a0d788b906f15297"
        ],
        "x": 4225,
        "y": 2100,
        "wires": []
    },
    {
        "id": "03acb67d75e482b0",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'DHW_threshold_upper';\n\nif ( msg.payload >= 0 && msg.payload <= 100) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2100,
        "wires": [
            [
                "f918bf51a72255c8"
            ]
        ]
    },
    {
        "id": "48590274b94061fc",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "57c0160eb601916d",
        "name": "Expected value must be a value between 0 and 100",
        "info": "",
        "x": 4550,
        "y": 2100,
        "wires": []
    },
    {
        "id": "a3259f9fb12aaeab",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "link out 98",
        "mode": "link",
        "links": [
            "6e9458431bc64a20"
        ],
        "x": 4225,
        "y": 2320,
        "wires": []
    },
    {
        "id": "3324f544a948dffe",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'LowSpeed';\n\nif ( msg.payload >= 0 && msg.payload <= 100) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2320,
        "wires": [
            [
                "a3259f9fb12aaeab"
            ]
        ]
    },
    {
        "id": "83c2f96c129c90c1",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "Expected value must be a value between 0 and 100",
        "info": "",
        "x": 4550,
        "y": 2320,
        "wires": []
    },
    {
        "id": "1525c8d920e353c1",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "LowSpeed",
        "links": [],
        "x": 3680,
        "y": 2320,
        "wires": [
            [
                "3324f544a948dffe"
            ]
        ],
        "l": true
    },
    {
        "id": "ba2a9abddd106a27",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "link out 100",
        "mode": "link",
        "links": [
            "d68787ebabf34cbf"
        ],
        "x": 4225,
        "y": 2360,
        "wires": []
    },
    {
        "id": "e3ab6d1315c83c96",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'HEATSpeed';\n\nif ( msg.payload >= 0 && msg.payload <= 100) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2360,
        "wires": [
            [
                "ba2a9abddd106a27"
            ]
        ]
    },
    {
        "id": "3147336ddd86584b",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "link out 101",
        "mode": "link",
        "links": [
            "905f86d8b81cd6bf"
        ],
        "x": 4225,
        "y": 2400,
        "wires": []
    },
    {
        "id": "9030db4c675089c7",
        "type": "function",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "toNum",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'DHWSpeed';\n\nif ( msg.payload >= 0 && msg.payload <= 100) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4090,
        "y": 2400,
        "wires": [
            [
                "3147336ddd86584b"
            ]
        ]
    },
    {
        "id": "d97eb42241468fce",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "HEATSpeed",
        "links": [],
        "x": 3690,
        "y": 2360,
        "wires": [
            [
                "e3ab6d1315c83c96"
            ]
        ],
        "l": true
    },
    {
        "id": "27c919a4983a17cb",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "DHWSpeed",
        "links": [],
        "x": 3690,
        "y": 2400,
        "wires": [
            [
                "9030db4c675089c7"
            ]
        ],
        "l": true
    },
    {
        "id": "4a7aad6ff4700b55",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "Expected value must be a value between 0 and 100",
        "info": "",
        "x": 4550,
        "y": 2360,
        "wires": []
    },
    {
        "id": "cbe8f31c5e1c3d86",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "d05b81876b2bc829",
        "name": "Expected value must be a value between 0 and 100",
        "info": "",
        "x": 4550,
        "y": 2400,
        "wires": []
    },
    {
        "id": "e20399c7ef5a8bec",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "DHW target temperature",
        "links": [],
        "x": 3730,
        "y": 660,
        "wires": [
            [
                "c42f8ce44ca4ca57"
            ]
        ],
        "l": true
    },
    {
        "id": "c42f8ce44ca4ca57",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "link out 103",
        "mode": "link",
        "links": [
            "ce692e24838cd878"
        ],
        "x": 4215,
        "y": 660,
        "wires": []
    },
    {
        "id": "1d318ee169215c26",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "The expected input is a single numeric value ranging from 40-75.",
        "info": "",
        "x": 4590,
        "y": 740,
        "wires": []
    },
    {
        "id": "3c6e6a48e1e28146",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "External link DHW Sterilization run",
        "links": [],
        "x": 3760,
        "y": 740,
        "wires": [
            [
                "3b1d3340821ec488"
            ]
        ],
        "l": true
    },
    {
        "id": "e1d4bb0b2ec3c099",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "link out 104",
        "mode": "link",
        "links": [
            "8c9808071334d371"
        ],
        "x": 4215,
        "y": 700,
        "wires": []
    },
    {
        "id": "3b1d3340821ec488",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "link out 106",
        "mode": "link",
        "links": [
            "f19d9753da86f709"
        ],
        "x": 4215,
        "y": 740,
        "wires": []
    },
    {
        "id": "7dcb2797cf862ed0",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "DHStart Force-DHW Link-in",
        "links": [],
        "x": 3740,
        "y": 700,
        "wires": [
            [
                "e1d4bb0b2ec3c099"
            ]
        ],
        "l": true
    },
    {
        "id": "2881215209154d75",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Connect any signal to the 'Start Force-DHW Link-in\". No expected value / data type.",
        "info": "",
        "x": 4650,
        "y": 660,
        "wires": []
    },
    {
        "id": "87bb4a4a750b5719",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "cceb6bd8d8813dc3",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 700,
        "wires": []
    },
    {
        "id": "37a9bdb8b839b309",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "External link RTC function on/off (ZONE 1)",
        "mode": "link",
        "links": [
            "3c482b65be488c84"
        ],
        "x": 4225,
        "y": 2680,
        "wires": []
    },
    {
        "id": "58b2a9d63158de30",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "External link RTC function on/off (ZONE 2)",
        "mode": "link",
        "links": [
            "e1ac20962cd7e152"
        ],
        "x": 4225,
        "y": 2780,
        "wires": []
    },
    {
        "id": "d753a5f9f1a20f9c",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "External link RTC function on/off (ZONE 1)",
        "links": [],
        "x": 3780,
        "y": 2680,
        "wires": [
            [
                "37a9bdb8b839b309"
            ]
        ],
        "l": true
    },
    {
        "id": "0b39bf222fed6e10",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "External link RTC function on/off (ZONE 2)",
        "links": [],
        "x": 3780,
        "y": 2780,
        "wires": [
            [
                "58b2a9d63158de30"
            ]
        ],
        "l": true
    },
    {
        "id": "18718ae4da5874d7",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "Connect your signal for Zone 1 Room Setpoint here. The expected input is a single numeric value",
        "info": "",
        "x": 4690,
        "y": 2680,
        "wires": []
    },
    {
        "id": "ca9a595c52a3a3e0",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "56210128cf250ab6",
        "name": "Connect your signal for Zone 1 Room Setpoint here. The expected input is a single numeric value",
        "info": "",
        "x": 4690,
        "y": 2780,
        "wires": []
    },
    {
        "id": "03228a1da0e6d87d",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "2b1d0b65b039c37f",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 2520,
        "wires": []
    },
    {
        "id": "a296aca86d2ccb4c",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "2b1d0b65b039c37f",
        "name": "Connect an external signal. The signal payload can be true/false or 1/0 or on/off",
        "info": "",
        "x": 4640,
        "y": 2560,
        "wires": []
    },
    {
        "id": "7345f72588d4818b",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "2b1d0b65b039c37f",
        "name": "External link CCC function on/off (ZONE 1)",
        "mode": "link",
        "links": [
            "0d82688afa5de780"
        ],
        "x": 4225,
        "y": 2520,
        "wires": []
    },
    {
        "id": "0b3c6bdf1e084890",
        "type": "link out",
        "z": "ad980a450f532e53",
        "g": "2b1d0b65b039c37f",
        "name": "External link CCC function on/off (ZONE 2)",
        "mode": "link",
        "links": [
            "262b47de81481e01"
        ],
        "x": 4225,
        "y": 2560,
        "wires": []
    },
    {
        "id": "2aa5bdf4854f2bb9",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "2b1d0b65b039c37f",
        "name": "External link CCC function on/off (ZONE 1)",
        "links": [],
        "x": 3780,
        "y": 2520,
        "wires": [
            [
                "7345f72588d4818b"
            ]
        ],
        "l": true
    },
    {
        "id": "fee559e4b979d2fd",
        "type": "link in",
        "z": "ad980a450f532e53",
        "g": "2b1d0b65b039c37f",
        "name": "External link CCC function on/off (ZONE 2)",
        "links": [],
        "x": 3780,
        "y": 2560,
        "wires": [
            [
                "0b3c6bdf1e084890"
            ]
        ],
        "l": true
    },
    {
        "id": "fac31892b7108bc7",
        "type": "comment",
        "z": "ad980a450f532e53",
        "g": "448f01b40762d074",
        "name": "COOL: Set target temperature",
        "info": "",
        "x": 3260,
        "y": 960,
        "wires": []
    },
    {
        "id": "a938de76db0b71f6",
        "type": "tab",
        "label": "WP Control",
        "disabled": false,
        "info": "\n---\n\n"
    },
    {
        "id": "5a496e1f1ea93a38",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "REQUIRED INPUTS FOR FUNCTIONS",
        "style": {
            "fill": "#ffffbf",
            "label": true,
            "stroke": "#ff0000"
        },
        "nodes": [
            "a22898dfdc4ff0ca",
            "6051d06bc75eda72",
            "d6a9c376dde9c43f",
            "df9c3a6c0a51be9b",
            "f0b20c8165a68430",
            "ea89c213947bdf26",
            "a8d51c8773f8f17f",
            "0fb10778eba34911",
            "2df41704fe34f586",
            "6c6c2315d73dcb16",
            "9f6d1c245559171f",
            "acd96dc2362a5f07",
            "f130c43288ca6830",
            "42044f1d6aefdd8c",
            "32eac6107970df96",
            "58b1674fb852d1b3",
            "f29bcd6a438f474c",
            "3fc357446eef916a",
            "e3f025f509729488",
            "90cfed64c17d4090",
            "ff74b6aae03758ee",
            "de6f11be608756eb",
            "f3d5c028ec98d42f",
            "2ea50c618294e117",
            "bf01688126aaf3e3",
            "a82ab44006a7ec33",
            "596e22688d867659"
        ],
        "x": 114,
        "y": 99,
        "w": 1512,
        "h": 402
    },
    {
        "id": "cd2050a861736ec5",
        "type": "group",
        "z": "a938de76db0b71f6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "ba4a12897a805cee",
            "3472c99aef20f07f",
            "4f8c3c7d06c1b19a",
            "eda4721e720d1975",
            "8501242129d89e2c",
            "e8684c407d602e87",
            "f70b59196295efc0",
            "690250e7cb51c576",
            "695ce56812fda3d2",
            "12e43571a8c16fa2",
            "a79fac04465c243e",
            "01744f1093a2fd51",
            "ab34ebcc109b74de",
            "10b4e15b0f3199ad",
            "cb2c4d61eeec2c6f",
            "e164eaa22e0fa1dc",
            "a25d1f5d91c84a33",
            "f9edb4875d3f2c5b",
            "9c4e9ed4c3ac1779",
            "5e35dee1374d6829",
            "e11f7d8caf20dbba",
            "3fb7221a7218435a",
            "460a1a83313cfcc5",
            "8121e5bfa638e9ab",
            "58a904f891a8e2cc",
            "7caff8b1418d65da",
            "5f758eb9af24eb35",
            "0e3197d36afc45dc",
            "ca1f0fdf0dd05c89",
            "c5cba27eac8a70a2",
            "2c34d9f3299bef00",
            "fd08994eed1621be",
            "cd3f44853ed1a6cd",
            "a0d48945187b9bf6",
            "5023bec7ba5973f3",
            "ad6a84d6161eab48",
            "d7fdd42d981a2d7d",
            "a82dac1b05afcaac",
            "a815d38c5137d852",
            "a0f14e8ff8b7b008",
            "3bab99eab669bd21",
            "182df2f14a9ca82f",
            "d90d8243969aecef",
            "8f0e209ac14bdb9a",
            "0b10bc17b24896b7",
            "6c685782864f1787",
            "a1e757cb1d79e3f9",
            "d8c3356483134cf9",
            "d7e9f20e80d48fa1",
            "64955157496ed92f",
            "f4fadebd69120ccb",
            "8e7a86930e1fd875",
            "d076ca8f3d1efe81",
            "056b20bad4b28052",
            "291e10a0936f3578",
            "42950b79a61da7e9",
            "c335163c9d8efd2c",
            "94d63d6212fc2b04",
            "cc0c6a23965435e3",
            "e2f4d021c8a23f5a",
            "38863139d1e246e6",
            "74209defc22e6b85",
            "0c4b1772fa8b09f6",
            "1e7278e92fb87f0c",
            "0457901c1832b0f8",
            "e059b8503f36c6cc",
            "5dca15fef4a08f93"
        ],
        "x": 174,
        "y": 3679,
        "w": 1232,
        "h": 1102
    },
    {
        "id": "b37318d1b7f66e33",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "NightReduction logic",
        "style": {
            "label": true
        },
        "nodes": [
            "5a629acf35a11cc1",
            "3151f56b9d086c84",
            "e3c1faa5a1fb80c6",
            "3f05f1c6e437d5d3",
            "2b04b7dd5ea852f2",
            "f0b7868c48887de4",
            "b1dbfa8badec14e4",
            "4f05df9205955fba",
            "a852d7a03c2a4cb0",
            "038f578f8cc12163",
            "64489162c0113379",
            "d283d9a5d5181aed",
            "3a9f53d1ad6ec693",
            "0884ccad88528175",
            "c77c4767a9dd84f4",
            "6815e3004fa8b341",
            "db81c5d226a5dab3",
            "afb8bfd949251c6c",
            "e8b855966cfa18d3",
            "849bb02e7d0f4dfa",
            "9fd7064be2551caa",
            "bab92195d66e60de",
            "ad1aa3d7ce882c45",
            "87bb9350c1c8ab14",
            "20f491a838e9ec1e",
            "b56e35c4e5987e45"
        ],
        "x": 194,
        "y": 4879,
        "w": 1332,
        "h": 342
    },
    {
        "id": "7987a450598985bb",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "Panasonic internal CC Zone 1 > Node Red WAR",
        "style": {
            "label": true
        },
        "nodes": [
            "4f0447af5e532d6f",
            "91e1151b60bc9a35",
            "dc036a2e660127ec",
            "5e56ba56cb2fd474",
            "246757b0d4390b0d",
            "87bd21b4647187d2",
            "123d7b6352639620",
            "b46cfcf8ce6d8f91",
            "ab60719365f6bde0",
            "8944d416f44e4183",
            "fde418209aab6a87",
            "9005e7a87f86a06e",
            "dfd98e02f46447fb",
            "c0a54684ef46f711",
            "07bfc2f9f00870d7",
            "3adf2738c40e2c50",
            "f34333d0f62bbd2d",
            "1034d22d437cc0cd"
        ],
        "x": 154,
        "y": 5319,
        "w": 1122,
        "h": 322
    },
    {
        "id": "1d8b21349d38bc85",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "CCC Zone 1 import/export",
        "style": {
            "label": true
        },
        "nodes": [
            "3a027c0cd9f8a957",
            "1acb7989b3df5970",
            "fa6cbe3250ca3abf",
            "c5bf8e25eda73442",
            "f70eae138246bae0",
            "4af0ddb4ff3ccf32",
            "418e761f03c6c9cd",
            "88e74ca7c5982d24",
            "b1bc9035edfd596b",
            "ae97f18776a1de28",
            "1d2e261567b2acba"
        ],
        "x": 1354,
        "y": 5319,
        "w": 932,
        "h": 182
    },
    {
        "id": "d2b7e1d6e85a96cf",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "FUNCTIONS Zone 1",
        "style": {
            "fill": "#ffbfbf",
            "fill-opacity": "0.75",
            "label": true
        },
        "nodes": [
            "90ec77dc04772b5c",
            "3c0adb2ef465094a",
            "3f0803a3a230aca2",
            "899964bbc5334847",
            "8b1072427fdbc1e0",
            "d16f38ef74db786a",
            "18fd7ac120089042",
            "c54efadb07816cb9",
            "e9d9dc531d3b166d",
            "346a3528a7770803",
            "fab44b5501eca10e",
            "7bd31985b9223517",
            "cc0bfd5240e5cd1c",
            "36856525108ec859",
            "c3a9e17b02222cee",
            "bedbded591fa9076",
            "d4cd561c0ac4473e",
            "4051d3cb1ad86dbd",
            "549c557827b37714",
            "0d996033de2ed84e",
            "2ade66982bca360c",
            "1a9b736187a463f7",
            "148fdf6802233c77",
            "398d29ed6f37b424",
            "2695bccfb69a52d5",
            "acd2fcbdbfe464b3",
            "079d3ecc98b9f2d0",
            "bc219d3bc7ec043e",
            "47f8da37ddbb8a39",
            "41a9c3500d63fb7e",
            "c24406bef1e6355d",
            "437a28325613c061",
            "56ae2f8cd74e99c9",
            "bf9d1ac2d5e48dd5",
            "6766b92901602397",
            "df044144e4292bd6",
            "8617219438de4f15",
            "f770f6593953cb81",
            "dccf18203888b181",
            "daf8a69452c4cc9a",
            "e06c72be3ce79609",
            "6a7dd03e7f46c1f5"
        ],
        "x": 114,
        "y": 619,
        "w": 1532,
        "h": 502
    },
    {
        "id": "cbc655a89768996f",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "Pumpspeed Chart",
        "style": {
            "label": true,
            "fill": "#bfc7d7"
        },
        "nodes": [
            "3d8e357b01de57ff",
            "05d2363eb8b5cbac",
            "0b0a84c6b2ac5946",
            "95d38a3c0dc7bfef",
            "9bbcf43a99bb4686",
            "de37787a803f74af",
            "bf06baa7b5212f0d",
            "02337b972681a94a",
            "f2ccd5d9f4518044",
            "5710a4a40d36cae6",
            "cc5d732b8a28779d",
            "5e82e401e9c3083f",
            "fab9eab71225fbf7",
            "21abbbb132d72856",
            "dd7484dc5380d24f",
            "6410b5f879c6a3ec",
            "dd1a38c2ccf4f47e",
            "9b7a14cd7f7c2870",
            "b22da9fe52b286cf"
        ],
        "x": 4124,
        "y": 1419,
        "w": 1182,
        "h": 202
    },
    {
        "id": "8464ca0ddfa2e5de",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "Pumpspeed Function",
        "style": {
            "fill": "#bfc7d7",
            "label": true
        },
        "nodes": [
            "879b071f7e013653",
            "73a3b137b4661912",
            "c2c09dbebda13484",
            "c91855502498f443",
            "9dfdd1d4ae5594b1",
            "ec44ca9b8998e3a4",
            "dc6b3a3d39fd9593",
            "ee5c4cc82116fb3a",
            "0a5194a2ae53226f",
            "62f703fc3bef4b9d",
            "07adfdd98bc7ec6f",
            "dd27a17d3914b050",
            "7d78560a43c952f3",
            "c613a0a91992893e",
            "b1e622419da850aa",
            "3bb1ed005c52a0fa",
            "dee4758644beb652",
            "ad467c3d58db0284",
            "dbb3202d2fc26245",
            "3df02652ea9f1de4",
            "0fa4a814492d2259",
            "ea04ae839e1d6b46",
            "dc99be6d3a53311d",
            "7708ef15cae3ed59",
            "7e0e6f1fd86c6d31",
            "b23ef1030db7e252",
            "b1a202d9c6da4df3",
            "ba33ab6d58b9fb8d",
            "4e3b27ed573b6399",
            "83481f0a61aed9b2",
            "bf8ce4cf96b236c2",
            "fb9db2149be4a5a9",
            "677c69e23dd934ce",
            "2cd7aab6fa9d94c2",
            "94fb2ca53932250b",
            "925216cb64196829",
            "6689f388c8028972",
            "6e9458431bc64a20",
            "d68787ebabf34cbf",
            "905f86d8b81cd6bf"
        ],
        "x": 4114,
        "y": 939,
        "w": 1342,
        "h": 442
    },
    {
        "id": "116d861b2bd34e3a",
        "type": "group",
        "z": "a938de76db0b71f6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "f50b182247afbf12",
            "513f1edff2205368",
            "82de6121db22b74a",
            "1cf36419e733671a",
            "0d915486f4ef0946",
            "b9e80ad80744b62d",
            "fdc7a953bf5abbc3",
            "d3798ceb0669cafe",
            "b9cc5f94e160078d",
            "4e973bdc6d2bfa33",
            "223d6f652b0e0dc4",
            "92ebec7316b4f003",
            "480251095571d632",
            "9e780462d79e7157",
            "393897917e4a8106",
            "40ad0556b1f55896",
            "c0c20e2e3caa81e0",
            "c860a4238803ed02",
            "12c84fbd61e2d1c2",
            "f7bdc92c0ed8e3b9",
            "8f0fdd05619b6080",
            "8effd9295d55099f",
            "2ef668070522b01d",
            "a8be0fdf50f25150",
            "376d42685ccec772",
            "ce5a606d14d7a2fe",
            "5e6950dffab43add",
            "319d7b2735937f1a",
            "9bc9b1a547ea7ef6",
            "706c5dcd5d6c136b",
            "f27d2362712f5634",
            "594db761914b5d1f",
            "cc388b93afb3633f",
            "343090bf44a08674",
            "525b14e18368ad3b",
            "a0d788b906f15297"
        ],
        "x": 4128,
        "y": 1653,
        "w": 1418,
        "h": 628
    },
    {
        "id": "992121a08b66faa3",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "COOL function",
        "style": {
            "label": true
        },
        "nodes": [
            "914dbce5e778229e",
            "5b8f3786bc1abbb1",
            "2649d773ad06b50d",
            "7c9af6a20115c38e",
            "dee73ffd96da5786",
            "13909c8cd33f26ef",
            "1cf37ff9fa4fc42b",
            "6c93a57f910e03c2",
            "f0ae9eea42cf90ea",
            "25041e53f134e3fb",
            "158b8983b1dd0aa9",
            "f5ccbd22c1c9fe22",
            "6fc958da73fbdf09",
            "4dfb2312d5cb06d5",
            "1d63998e541e4d5a",
            "dea135ecc9872411",
            "f13532d971be853e",
            "b665e9aa13d44f8e",
            "6a50ef63d9d35647",
            "0e8ca4bb561b59ed",
            "6b2644c3a510f50f",
            "b43820fd5a21f4e7",
            "71a59b9661071adc",
            "21b21c01326b2eb3",
            "25691ccde88f5530",
            "07ba09a16be50433",
            "78e42bcd53ea8133",
            "57bd8e997e9659ed",
            "b6ad3dc97e3bae93",
            "069a1e1137dff3c5",
            "31e6f728a58af434",
            "8446efaaa0db1b07",
            "af6c986b9bd32b5d",
            "de420200e2112c80",
            "bc259ef4511cfc49",
            "a0b2a8ca1de90c30",
            "967eb9e23a816211",
            "7fd8e4be18710797",
            "ab9d088e21062ff8",
            "2bb5988706fb572a",
            "37a369fd9ad03085",
            "0df0e84326dbeec7",
            "cdd89d5c10c71407",
            "b16ab0b5c23a9ca9",
            "793e8c5bacadc28c",
            "b08c0859f26b8233",
            "2cc53aa4981b4a7d",
            "c49ef874bd1fee9d",
            "f91c28a6cf174863",
            "c631c7c6b5043e9b",
            "941c0631859a870e",
            "5d82a01035854d15",
            "e6d062c49d66078a",
            "3072102c9a588df4",
            "4f5325f35beb918b",
            "0a5b5d3209c8063f",
            "ebc53031586118c3",
            "919df257a873566d",
            "021e45a59e0afc2f",
            "8107b63cf9805e1c",
            "af39798fc47f9bc1",
            "f6b785b3136bc4b5",
            "96c064c18cd18fc1",
            "8b954170d7a05c4c"
        ],
        "x": 4114,
        "y": 39,
        "w": 1932,
        "h": 842
    },
    {
        "id": "0077cf76d14c5757",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "",
        "style": {
            "label": true
        },
        "nodes": [
            "2c893b32851ad2a2",
            "fa82488bbb78cd7c",
            "9ac43b3e57349093",
            "121250d0adaabb74",
            "bec0abeb65096b50",
            "16a78ece414b3c3f",
            "d812dc07d5eb627a",
            "2cbf5dc56d038900",
            "8f95cf0d80fef38e",
            "ea494b908a0574c7",
            "cbded61fe1f8bfa6",
            "9dad0ebe8e5b9c2a",
            "820cd8755edee724",
            "df752804bad7d4c9",
            "846a789dca74329d",
            "aa66f523450fd337",
            "6c127111459a7668",
            "3614cf0c48d0f160",
            "9285cfa754ee552e",
            "a861b75804a0978a",
            "a0d8b4706f8d61b1",
            "3b23831ccc3641c6",
            "b131edf180140fb6",
            "4ff74e2b48b1d597",
            "905527b22aae9dc8",
            "35ca9241fc9fc7a1",
            "12a26bbb7c8070d7",
            "aec0cb2b18e02d8b",
            "0771fea18659deea",
            "8ed91c4260d9b758",
            "7ce3c0d525800846",
            "609ce750edb0db2b",
            "8f6938d08a85ad26",
            "75ecf6650a5109d6",
            "a5dd53dd3d0d1b7f",
            "dd45b1caa253346b",
            "d54ac3b979428b64",
            "52945322ab63b965",
            "3ec15c8e37ccda1b",
            "b9adf06497b1e231",
            "c57a81d1dee5b8a9",
            "62d663629483143e",
            "e5fb067144c27e1b",
            "ff3dd227527b76c3",
            "9de1bde370b68508",
            "8206cc922dc8874d",
            "170936d914847ac0",
            "8572da168a9397e1",
            "76803a7773afbef6",
            "3097c4184ba03f0b",
            "158cd656457b884a",
            "10ca1d93fdd1afe2",
            "a3180920b08e8108",
            "b9da2620c239be36",
            "5053e21b4c187e48",
            "2063c96f1ba07327",
            "5f7b921ab9a4ce7c",
            "61ed1c56d1ec2c21",
            "7a30c0f0dbf50e03",
            "72ecd08129670f6d",
            "7ae9d386f40efb4d",
            "d613171223cb64d2",
            "303e9746fe17030f",
            "f1055c6bf5c95540",
            "da5b21d833a80e29",
            "ab4c54e8c1061535",
            "45c90f37a7b32d68",
            "ecb3b52a28d4771f",
            "2bd2d081e8cd67e2",
            "70b76184cb3f0700",
            "ed363518f4ab4108",
            "3b192c4fedabf0f7",
            "a5eb2e2427c1608a",
            "10f3cc54edfb37d1",
            "25633efa4485f375",
            "c1c8d438953b1c8b",
            "8dc0ca4b26915b2a",
            "7430c37f5c30419b",
            "4f9a7ab2aa7cddaf",
            "64ae46079504e47e",
            "c03d9863c2a397df",
            "b975cac67ff8c566",
            "ca493cc32dbac734",
            "a48553dcdfc02694",
            "b28a85e192c0263e",
            "2cc0e76e60be0d9f",
            "08a50bcaae84671e",
            "c339f5836ed9c333",
            "b48b472f29cf9f83",
            "d75651b2bf8c087b",
            "2eb2a1faee5c5e8c",
            "05526a6dc422359b",
            "9defd4814aacc442",
            "e704c463a7eacea7",
            "6446959d03e0fc27",
            "a231fea857ba5fc4",
            "45d8b0eb6524d1f8",
            "458ff26cc8b8ba7c",
            "c28359a361158840",
            "4f2bca0fed10c688",
            "8b7cbc95996cf262",
            "9bb05cfc97431c09",
            "b3fdc52e42ac1b77"
        ],
        "x": 154,
        "y": 1999,
        "w": 1532,
        "h": 1622
    },
    {
        "id": "8ec12071fca1518a",
        "type": "group",
        "z": "a938de76db0b71f6",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "8084f5f9211ba26e",
            "df9f1d7eb2e2550e",
            "9562dc64f479308b",
            "86806db2ffd37031",
            "9712afabf73ab6d3",
            "49f2dcdba8f7fddd",
            "252dbcadc758c04d",
            "0670e77adadab99f",
            "603b83d0205b7851",
            "90e15190bf40c768",
            "1a1378859215eb51",
            "44250d331a28dc00",
            "a3792df4088fd2c4",
            "d54536cd7f377129",
            "34b1c2b1b59cfe2c",
            "35c15a4c210a4b20",
            "eef6f0607054107d",
            "22ea5e56f469dd5f",
            "656084b3eaf62cae",
            "d3625ab8f8c674e0",
            "ba628ef3a4f580da",
            "a27a939104b0f866"
        ],
        "x": 4134,
        "y": 2399,
        "w": 1398,
        "h": 502
    },
    {
        "id": "d15f78ae7f992ea0",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "Panasonic internal CC Zone 2 > Node Red WAR",
        "style": {
            "label": true
        },
        "nodes": [
            "3bc5097d830124b3",
            "8c625c2c57e7dca5",
            "1409253ad20d8836",
            "469b70130c227f33",
            "e35e41f116eee384",
            "c27eb9b957620c8c",
            "285dd5263c5648c2",
            "76e65f54ff08aa50",
            "f3c2c4ba31654905",
            "d734aa3de12a2fcd",
            "d7611dc3c0395f05",
            "34599c1422d8d7fb",
            "6172e4f89fd4f42e",
            "d7b3727f33997237",
            "23efeb5c94e4f406",
            "67f4f9e69ae5f2c5",
            "09fc4c4434798d90",
            "201f3629183826f4"
        ],
        "x": 154,
        "y": 5699,
        "w": 1122,
        "h": 322
    },
    {
        "id": "493fccf0c20ec33e",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "CCC Zone 2 import/export",
        "style": {
            "label": true
        },
        "nodes": [
            "3e99a6d2432a3865",
            "26da7cce57e11a93",
            "bb9c476d96444ae3",
            "bcc25e051f940518",
            "2d0127cea7de1c57",
            "1633e9384bfe4e2d",
            "30ebb223f4c6626c",
            "f7a58d8ca6f12678",
            "923987daed664367",
            "2bd2ce362c201c1e",
            "0eabfbc63fbfc395"
        ],
        "x": 1354,
        "y": 5699,
        "w": 932,
        "h": 182
    },
    {
        "id": "56ad661c12898edd",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "FUNCTIONS Zone 2",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "d625be872191a9a8",
            "51a6bac27fdf889f",
            "a0cf9818c74cf2c5",
            "c8ff1796f5765b64",
            "cef3b3ebc00088c1",
            "5d2870808a90b2aa",
            "5f0f7a7623604d1e",
            "35298f96729bbb46",
            "b9a805eaec78069d",
            "498550a5a539214f",
            "484ac098c5cd5b63",
            "1677fa16c9add844",
            "53f7c9cf40d4a870",
            "1dce5e2e5df0b552",
            "4c0daae12fed3fc6",
            "8d56089ccc135555",
            "e4f9fd25c1e1acf1",
            "77ec1fe312524fc4",
            "ee9ad46e6d10e080",
            "74e73eb89c169937",
            "f1bad7706107cdb2",
            "4950c49d8b368b56",
            "359356ccc6a21d72",
            "1329c5e7c891ac4b",
            "6eb2a075d7b9b798",
            "259b758b6c5f8651",
            "9689e62011c0fc0b",
            "985d031491efe805",
            "161478f41649a6fa",
            "acf4d4f2d32b12c3",
            "aacb956ae7e693cb",
            "2b5d7bc130056868",
            "700074d5ccd30dac",
            "89f32b2a9d6dc5b4"
        ],
        "x": 1714,
        "y": 619,
        "w": 1542,
        "h": 462
    },
    {
        "id": "2658bea68667a370",
        "type": "group",
        "z": "a938de76db0b71f6",
        "name": "SoftStart function",
        "style": {
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "e9b2408568d2ec7a",
            "d44ff20770c3e9a1",
            "126583bf986bb2c7",
            "16054e8334890ad8",
            "34cc66e23b5eec55",
            "663fd79ce5a1610d",
            "51526ab18642b30b",
            "c477f38740192ea9",
            "0ccf5d93deef2e68",
            "4c81e32b9d30b212",
            "7c6f02c851467bc0",
            "0f365a79d7e2857d",
            "d53e66c37991fa8e",
            "dfca926433d18402",
            "3fc220e85feb9ec9",
            "f2d08992a6b90758",
            "61beb903ec0e5a74",
            "8716fd26da93059d",
            "f27cfc9c262f0b0a",
            "71a546a3b074148f",
            "e4932a30dba95577",
            "9ece6a95a9a5c846",
            "2df56a3ae0782bfd",
            "37db709069bc2dc2",
            "a1cf343333a2e923",
            "dca26429693a97a5",
            "92b75262811f09f9",
            "44d83d4e58d63689",
            "c5506b5fe3e4d571",
            "4223b24f5dc06d8e",
            "1cbf3f3272baec48",
            "6c6c36d2fc35901c",
            "4369249a4c68c277",
            "64558e335a45bcbb",
            "31085c7b9968960b"
        ],
        "x": 114,
        "y": 1179,
        "w": 1892,
        "h": 462
    },
    {
        "id": "f7bdc92c0ed8e3b9",
        "type": "group",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "DHW Tank temperature logic",
        "style": {
            "label": true
        },
        "nodes": [
            "64021d928c59c5cd",
            "017e95185010581b",
            "f651bed25831c6f4",
            "c8b5382d8d981e31",
            "0970bfa5a14caf6b",
            "399bbbd616d3dc55",
            "3b56718868c66537"
        ],
        "x": 4154,
        "y": 1679,
        "w": 692,
        "h": 162
    },
    {
        "id": "b08c0859f26b8233",
        "type": "group",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "4a7112414493107c"
        ],
        "x": 5194,
        "y": 539,
        "w": 212,
        "h": 82
    },
    {
        "id": "d3625ab8f8c674e0",
        "type": "group",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "",
        "style": {
            "fill": "#DE425B",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "4f03d129f6b4ebf8"
        ],
        "x": 5154,
        "y": 2639,
        "w": 352,
        "h": 82
    },
    {
        "id": "ba628ef3a4f580da",
        "type": "group",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Bucket 1 - kWh calculation",
        "style": {
            "fill": "#F59B56",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "c0cfa25a2dc1851c"
        ],
        "x": 5154,
        "y": 2539,
        "w": 352,
        "h": 82
    },
    {
        "id": "2c893b32851ad2a2",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP0 - panasonic_heat_pump/main/Heatpump_State",
        "topic": "panasonic_heat_pump/main/Heatpump_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 2160,
        "wires": [
            [
                "2063c96f1ba07327",
                "9defd4814aacc442"
            ]
        ]
    },
    {
        "id": "fa82488bbb78cd7c",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP1 - panasonic_heat_pump/main/Pump_Flow",
        "topic": "panasonic_heat_pump/main/Pump_Flow",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 500,
        "y": 2220,
        "wires": [
            [
                "ea494b908a0574c7",
                "e704c463a7eacea7"
            ]
        ]
    },
    {
        "id": "9ac43b3e57349093",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP2 - panasonic_heat_pump/main/Force_DHW_State",
        "topic": "panasonic_heat_pump/main/Force_DHW_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 2280,
        "wires": [
            [
                "df752804bad7d4c9",
                "6446959d03e0fc27"
            ]
        ]
    },
    {
        "id": "121250d0adaabb74",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP5 - panasonic_heat_pump/main/Main_Inlet_Temp",
        "topic": "panasonic_heat_pump/main/Main_Inlet_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 2400,
        "wires": [
            [
                "d613171223cb64d2"
            ]
        ]
    },
    {
        "id": "bec0abeb65096b50",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP6 - panasonic_heat_pump/main/Main_Outlet_Temp",
        "topic": "panasonic_heat_pump/main/Main_Outlet_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 2460,
        "wires": [
            [
                "303e9746fe17030f"
            ]
        ]
    },
    {
        "id": "16a78ece414b3c3f",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP4 - panasonic_heat_pump/main/Operating_Mode_State",
        "topic": "panasonic_heat_pump/main/Operating_Mode_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 460,
        "y": 2340,
        "wires": [
            [
                "4ff74e2b48b1d597",
                "846a789dca74329d",
                "a231fea857ba5fc4"
            ]
        ]
    },
    {
        "id": "d812dc07d5eb627a",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP20 - panasonic_heat_pump/main/ThreeWay_Valve_State",
        "topic": "panasonic_heat_pump/main/ThreeWay_Valve_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 460,
        "y": 2700,
        "wires": [
            [
                "6c127111459a7668"
            ]
        ]
    },
    {
        "id": "2cbf5dc56d038900",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP70 - panasonic_heat_pump/main/Sterilization_Temp",
        "topic": "panasonic_heat_pump/main/Sterilization_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 470,
        "y": 2880,
        "wires": [
            [
                "a861b75804a0978a"
            ]
        ]
    },
    {
        "id": "8f95cf0d80fef38e",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP69 - panasonic_heat_pump/main/Sterilization_State",
        "topic": "panasonic_heat_pump/main/Sterilization_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 2820,
        "wires": [
            [
                "9285cfa754ee552e",
                "458ff26cc8b8ba7c"
            ]
        ]
    },
    {
        "id": "62d663629483143e",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Read values from Heishamon and put them in global variables and link out",
        "info": "",
        "x": 500,
        "y": 2040,
        "wires": []
    },
    {
        "id": "ea494b908a0574c7",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 950,
        "y": 2220,
        "wires": [
            [
                "820cd8755edee724"
            ]
        ]
    },
    {
        "id": "cbded61fe1f8bfa6",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 950,
        "y": 2760,
        "wires": [
            [
                "3614cf0c48d0f160"
            ]
        ]
    },
    {
        "id": "9dad0ebe8e5b9c2a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP0_Heatpump_State",
        "func": "var VirtualState = global.get('VirtualState');\n\nvar TOP0_Heatpump_State = global.get('TOP0_Heatpump_State',\"file\");\n\n\nif (TOP0_Heatpump_State != msg.payload)\n{\n    msg.topic = 'TOP0_Heatpump_State';\n    global.set('TOP0_Heatpump_State',msg.payload,\"file\");\n\n    let msg99={};\n    msg99.topic = '[Debug]';\n    msg99.payload = 'Real TOP0_Heatpump_State = ' + msg.payload + ', VirtualState = ' + VirtualState;\n    \n    //return msg99;           <----for debugging to log\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 2080,
        "wires": [
            [
                "5f7b921ab9a4ce7c"
            ]
        ],
        "outputLabels": [
            "original payload from mqtt topic"
        ]
    },
    {
        "id": "820cd8755edee724",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP1_Pump_Flow",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP1_Pump_Flow';\nglobal.set(\"TOP1_Pump_Flow\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 2220,
        "wires": [
            [
                "3b23831ccc3641c6"
            ]
        ]
    },
    {
        "id": "df752804bad7d4c9",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP2_Force_DHW_State",
        "func": "var current = global.get(\"TOP2_Force_DHW_State\");\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP2_Force_DHW_State';\n\nif (current != msg.payload || current === undefined)\n{\n    global.set(\"TOP2_Force_DHW_State\",msg.payload);\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2280,
        "wires": [
            [
                "b131edf180140fb6"
            ]
        ]
    },
    {
        "id": "846a789dca74329d",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP4_Operating_Mode_State",
        "func": "if (msg.payload == global.get('TOP4_Operating_Mode_State',\"file\")) {return null;}           // only send if needed\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP4_Operating_Mode_State';\n\nglobal.set(\"TOP4_Operating_Mode_State\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 2340,
        "wires": [
            [
                "08a50bcaae84671e"
            ]
        ]
    },
    {
        "id": "aa66f523450fd337",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP27_Z1_Heat_Request_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP27_Z1_Heat_Request_Temp';\nglobal.set(\"TOP27_Z1_Heat_Request_Temp\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 2580,
        "wires": [
            [
                "12a26bbb7c8070d7"
            ]
        ]
    },
    {
        "id": "6c127111459a7668",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP20_ThreeWay_Valve_State",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == global.get(\"TOP20_ThreeWay_Valve_State\")) { return null; }\n\nmsg.topic = 'TOP20_ThreeWay_Valve_State';\nglobal.set(\"TOP20_ThreeWay_Valve_State\",msg.payload);\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 2700,
        "wires": [
            [
                "aec0cb2b18e02d8b"
            ]
        ]
    },
    {
        "id": "3614cf0c48d0f160",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP18_Quiet_Mode_Level",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP18_Quiet_Mode_Level';\nglobal.set(\"TOP18_Quiet_Mode_Level\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2760,
        "wires": [
            [
                "0771fea18659deea"
            ]
        ]
    },
    {
        "id": "9285cfa754ee552e",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP69_Sterilization_State",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (msg.payload == global.get(\"TOP69_Sterilization_State\",\"file\")) {\n    return null;\n}\n\nmsg.topic = 'TOP69_Sterilization_State';\n\nglobal.set(\"TOP69_Sterilization_State\",msg.payload,\"file\");\n/*\nif (msg.payload == 0){\nglobal.set('Sterilization_active',msg.payload,\"file\");\n}\n*/\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2820,
        "wires": [
            [
                "8ed91c4260d9b758"
            ]
        ]
    },
    {
        "id": "a861b75804a0978a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP70_Sterilization_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP70_Sterilization_Temp';\nglobal.set(\"TOP70_Sterilization_Temp\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2880,
        "wires": [
            [
                "7ce3c0d525800846"
            ]
        ]
    },
    {
        "id": "a0d8b4706f8d61b1",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "to Shutdown detection",
        "mode": "link",
        "links": [
            "e5ee81fbd045b5ef"
        ],
        "x": 1515,
        "y": 2160,
        "wires": []
    },
    {
        "id": "3b23831ccc3641c6",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Pump_Flow",
        "links": [
            "43b60b667e5e5610",
            "5d54922367195a62",
            "02337b972681a94a"
        ],
        "x": 1515,
        "y": 2220,
        "wires": []
    },
    {
        "id": "b131edf180140fb6",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP2_Force_DHW_State",
        "mode": "link",
        "links": [
            "14d2ae6b4af7e45e",
            "6ae86dc05a6a3c4a",
            "e33b5a24cd58c8d2"
        ],
        "x": 1515,
        "y": 2280,
        "wires": []
    },
    {
        "id": "4ff74e2b48b1d597",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP4_Operating_Mode_State",
        "mode": "link",
        "links": [
            "702993e29cd93413",
            "83481f0a61aed9b2",
            "b51f6522ce8b3103",
            "476134da722ea175"
        ],
        "x": 1515,
        "y": 2320,
        "wires": []
    },
    {
        "id": "905527b22aae9dc8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Main_Inlet_Temp",
        "mode": "link",
        "links": [
            "126583bf986bb2c7",
            "1d97c2a9ed08db30",
            "43b60b667e5e5610",
            "8a1873117722d0f2"
        ],
        "x": 1515,
        "y": 2400,
        "wires": []
    },
    {
        "id": "35ca9241fc9fc7a1",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Main_Outlet_Temp",
        "mode": "link",
        "links": [
            "126583bf986bb2c7",
            "43b60b667e5e5610",
            "52855bedeec34357",
            "9dc0d35330d31725",
            "fb8402dcbc45015d"
        ],
        "x": 1515,
        "y": 2460,
        "wires": []
    },
    {
        "id": "12a26bbb7c8070d7",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP27_Z1_Heat_Request_Temp",
        "mode": "link",
        "links": [
            "52855bedeec34357"
        ],
        "x": 1515,
        "y": 2580,
        "wires": []
    },
    {
        "id": "aec0cb2b18e02d8b",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "ThreeWay_Valve_State",
        "mode": "link",
        "links": [
            "94a3169df392ca7e",
            "aa0fd9c437762a4e",
            "b51f6522ce8b3103",
            "c24406bef1e6355d",
            "ea31d112c91c0da9",
            "edd8cd80c43ebb50",
            "59bb512ca902e230"
        ],
        "x": 1515,
        "y": 2700,
        "wires": []
    },
    {
        "id": "0771fea18659deea",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Quiet_Mode_Level",
        "links": [
            "02ec5c80f142f377"
        ],
        "x": 1515,
        "y": 2760,
        "wires": []
    },
    {
        "id": "8ed91c4260d9b758",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Sterilization_State",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "e33b5a24cd58c8d2"
        ],
        "x": 1515,
        "y": 2820,
        "wires": []
    },
    {
        "id": "7ce3c0d525800846",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Sterilization_Temp",
        "links": [
            "6366ce3358b65976"
        ],
        "x": 1515,
        "y": 2880,
        "wires": []
    },
    {
        "id": "a22898dfdc4ff0ca",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "T_Zone_1_Temperature",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "899964bbc5334847",
            "ecbb543ba37d9962"
        ],
        "x": 1190,
        "y": 280,
        "wires": [],
        "l": true
    },
    {
        "id": "609ce750edb0db2b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP9 - panasonic_heat_pump/main/DHW_Target_Temp",
        "topic": "panasonic_heat_pump/main/DHW_Target_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 470,
        "y": 3000,
        "wires": [
            [
                "75ecf6650a5109d6",
                "05526a6dc422359b"
            ]
        ]
    },
    {
        "id": "8f6938d08a85ad26",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP10 - panasonic_heat_pump/main/DHW_Temp",
        "topic": "panasonic_heat_pump/main/DHW_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 490,
        "y": 3060,
        "wires": [
            [
                "a5dd53dd3d0d1b7f",
                "ca493cc32dbac734"
            ]
        ]
    },
    {
        "id": "75ecf6650a5109d6",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP9_DHW_Target_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'DHW_Target_Temp';\n\nvar current_value = context.get('current_value');\nif (msg.payload != current_value || current_value === undefined){\n    context.set('current_value',msg.payload);\n    node.send(msg);\n}\n\nif (msg.payload == global.get('TOP9_DHW_Target_Temp',\"file\")) {return null;}   // only send if needed\nglobal.set(\"TOP9_DHW_Target_Temp\",msg.payload,\"file\");",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 3000,
        "wires": [
            [
                "dd45b1caa253346b"
            ]
        ]
    },
    {
        "id": "a5dd53dd3d0d1b7f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP10_DHW_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP10_DHW_Temp';\nglobal.set(\"TOP10_DHW_Temp\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 3060,
        "wires": [
            [
                "d54ac3b979428b64"
            ]
        ]
    },
    {
        "id": "dd45b1caa253346b",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "DHW_Target_Temp",
        "mode": "link",
        "links": [
            "32840bc8d04fbb31"
        ],
        "x": 1515,
        "y": 3000,
        "wires": []
    },
    {
        "id": "d54ac3b979428b64",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "DHW_Temp",
        "links": [
            "4cfdc172228a42bb",
            "992b1344cc8fd4eb",
            "4e973bdc6d2bfa33",
            "0b296635b9d1406f",
            "ac09be36fb49420a"
        ],
        "x": 1515,
        "y": 3060,
        "wires": []
    },
    {
        "id": "52945322ab63b965",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Source: Panasonic MQTT",
        "info": "",
        "x": 390,
        "y": 2120,
        "wires": []
    },
    {
        "id": "3ec15c8e37ccda1b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP8 - panasonic_heat_pump/main/Compressor_Freq",
        "topic": "panasonic_heat_pump/main/Compressor_Freq",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 3120,
        "wires": [
            [
                "b9adf06497b1e231"
            ]
        ]
    },
    {
        "id": "b9adf06497b1e231",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.compressor_frequency",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'compressor_frequency';\nglobal.set(\"compressor_frequency\",msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 3120,
        "wires": [
            [
                "c57a81d1dee5b8a9"
            ]
        ]
    },
    {
        "id": "c57a81d1dee5b8a9",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP8 - panasonic_heat_pump/main/Compressor_Freq",
        "mode": "link",
        "links": [
            "1daf8c5944f23d71",
            "f3ab44f6bb3c013a",
            "32c013973096ab65",
            "73a3b137b4661912",
            "3fc220e85feb9ec9",
            "e264576f753a2915",
            "2ab400ecbc3818d6",
            "16109bc38c3d8bd5",
            "52855bedeec34357"
        ],
        "x": 1515,
        "y": 3120,
        "wires": []
    },
    {
        "id": "f4e55b938e645737",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "COP_calculated",
        "func": "var runtime =   global.get('compressor_runtime', \"file\");                                    // Get the global variable for absorbed energy of the heatpump\n\n\n\nvar TOP6_Main_Outlet_Temp=global.get('TOP6_Main_Outlet_Temp');                  // Get the global variable for water Outlet temperature\nvar TOP5_Main_Inlet_Temp=global.get('TOP5_Main_Inlet_Temp');                    // Get the global variable for water inlet temperature\nvar TOP1_Pump_Flow=global.get('TOP1_Pump_Flow');                                // Get the global variable for water flow\nvar Energy_Consumption;                                                         // declare variable\nvar TOP16_Heat_Energy_Consumption;                                              // declare variable\nvar COP_calculated;                                                             // declare variable\nvar Watt_heat_c;                                                                // declare variable\nvar TOP20_ThreeWay_Valve_State=global.get('TOP20_ThreeWay_Valve_State');        // Get the global variable for 3-way valve position.   0=HEAT / 1=DHW\n\n// Check if all required temperatures are available. If not, exit this function.\nif (TOP6_Main_Outlet_Temp === undefined || TOP5_Main_Inlet_Temp === undefined || TOP1_Pump_Flow === undefined) { return null; }\n\n\n// *********** HEAT energy consumption calculation\nif (TOP20_ThreeWay_Valve_State == 0){\n        Energy_Consumption = global.get('TOP16_Heat_Energy_Consumption');             // Get the global variable for absorbed energy of the heatpump heat\n        if (Energy_Consumption === undefined || isNaN(Energy_Consumption) === true) {\n            TOP16_Heat_Energy_Consumption = 0;\n            return null;\n        }\n}\n\n// *********** DHW energy consumption calculation\nif (TOP20_ThreeWay_Valve_State === 1){\n        Energy_Consumption = global.get('TOP41_DHW_Energy_Consumption');       // Get the global variable for absorbed energy of the heatpump dhw\n        if (Energy_Consumption === undefined || isNaN(Energy_Consumption) === true) {\n            TOP16_Heat_Energy_Consumption = 0;\n            return null;\n        }\n}\n\n        \nlet msg1={}, msg2={}, msg3={}, msg10={}, msg20={};\nmsg3.payload = 0;\n\n//msg3 is meant to send 0 for the dashboard linechart. Not to be sent to barchart.\nif (TOP20_ThreeWay_Valve_State === 0 && Energy_Consumption !== 0)    // HEAT mode\n{   msg3.topic = \"COP_DHW\"; \n    node.send([null, null, msg3]) \n}\nif (TOP20_ThreeWay_Valve_State === 0 && Energy_Consumption === 0)    // HEAT mode\n{   msg3.topic = \"COP_HEAT\"; \n    node.send([null, null, msg3])\n    msg3.topic = \"COP_DHW\";\n    node.send([null, null, msg3])\n}\nif (TOP20_ThreeWay_Valve_State === 1 && Energy_Consumption !== 0)    // DHW mode\n{   msg3.topic = \"COP_HEAT\"; \n    node.send([null, null, msg3])\n}\nif (TOP20_ThreeWay_Valve_State === 1 && Energy_Consumption === 0)    // DHW mode\n{   msg3.topic = \"COP_DHW\"; \n    node.send([null, null, msg3])\n    msg3.topic = \"COP_HEAT\";\n    node.send([null, null, msg3])\n}\n\n\nif (runtime === undefined || runtime < 2) {\n    return null;\n}\n\n//**********************************************************************\nif (TOP20_ThreeWay_Valve_State === 0 && Energy_Consumption !== 0){    //  HEAT mode\n\n    Watt_heat_c             = (TOP6_Main_Outlet_Temp - TOP5_Main_Inlet_Temp) * 4.187 * (TOP1_Pump_Flow / 60) * 1000;\n    \n    COP_calculated          = Watt_heat_c / Energy_Consumption;\n    msg1.payload            = COP_calculated\n    msg1.topic              = \"COP_HEAT\";\n    msg1.payload            = Number(msg1.payload).toFixed(2);\n    msg1.payload            = parseFloat(msg1.payload);\n    global.set('COP_HEAT', msg1.payload);\n\n    // new: heat produced\n    msg10.payload = Watt_heat_c / 1000;\n    msg10.topic = \"Prod_HEAT\";\n    msg10.payload = Number(msg10.payload).toFixed(2);\n    msg10.payload = parseFloat(msg10.payload);\n    msg20.payload = 0;\n    msg20.topic = \"Prod_DHW\";\n    // end of new\n\n\n    if (msg1.payload > 0 || msg1.payload < 0) {\n        return [msg1,null,null,msg10,msg20];\n    }\n    if (msg1.payload === undefined){\n        return [null, null, null, null, null];\n    }\n    else {\n        msg1.payload = 0;\n        return [msg1, null, null, msg10, msg20];\n    }\n    \n}\n\n//**********************************************************************\nif (TOP20_ThreeWay_Valve_State === 1 && Energy_Consumption !== 0)    // DHW mode\n    {\n        \n        Watt_heat_c             = (TOP6_Main_Outlet_Temp - TOP5_Main_Inlet_Temp) * 4.187 * (TOP1_Pump_Flow / 60) * 1000;\n        COP_calculated          = Watt_heat_c / Energy_Consumption;\n        msg2.payload            = COP_calculated\n        msg2.topic              = \"COP_DHW\";\n        msg2.payload            = Number(msg2.payload).toFixed(2);\n        msg2.payload            = parseFloat(msg2.payload);\n        global.set('COP_DHW', msg2.payload );\n    \n        // new: heat produced\n        msg10.topic = \"Prod_HEAT\";\n        msg10.payload = 0;\n        msg20.payload = Watt_heat_c / 1000;\n        msg20.topic = \"Prod_DHW\";\n        msg20.payload = Number(msg20.payload).toFixed(2);\n        msg20.payload = parseFloat(msg20.payload);\n\n        // end of new\n\n\n        msg3.topic = \"COP_HEAT\";  // send 0 value to COP_HEAT when DHW is active.\n\n        if (msg2.payload > 0) {\n            return [null, msg2, null, msg10, msg20];\n        }\n        if (msg2.payload === undefined){\n            return [null, null, null, null, null];\n        }\n        else    {\n            msg2.payload = 0;\n            return [null, msg2, null, msg10, msg20];\n        }\n}",
        "outputs": 5,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1920,
        "y": 2220,
        "wires": [
            [
                "306b69356454f3ff"
            ],
            [
                "5787c91b303f2538"
            ],
            [
                "0f227f10f68c8a90"
            ],
            [
                "37625c4ab3823016"
            ],
            [
                "28bf8173d72ae0d0"
            ]
        ],
        "outputLabels": [
            "COP HEAT [-]",
            "COP DHW [-]",
            "LineChart [0]",
            "Prod_HEAT [kW]",
            "Prod_DHW [kW]"
        ]
    },
    {
        "id": "e5fb067144c27e1b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP16 - panasonic_heat_pump/main/Heat_Energy_Consumption",
        "topic": "panasonic_heat_pump/main/Heat_Energy_Consumption",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 3180,
        "wires": [
            [
                "ff3dd227527b76c3"
            ]
        ]
    },
    {
        "id": "ff3dd227527b76c3",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP16_Heat_Energy_Consumption",
        "func": "if (msg.payload >= 0) {\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    msg.topic = 'TOP16_Heat_Energy_Consumption';\n    global.set(\"TOP16_Heat_Energy_Consumption\",msg.payload,);\n\n    return msg;\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 3180,
        "wires": [
            [
                "9de1bde370b68508"
            ],
            [
                "c03d9863c2a397df"
            ]
        ]
    },
    {
        "id": "9de1bde370b68508",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP16_Heat_Energy_Consumption",
        "mode": "link",
        "links": [
            "6a7fa8b57f2d9800",
            "8627726ba882e493"
        ],
        "x": 1525,
        "y": 3180,
        "wires": []
    },
    {
        "id": "43b60b667e5e5610",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "name": "",
        "links": [
            "35ca9241fc9fc7a1",
            "3b23831ccc3641c6",
            "905527b22aae9dc8"
        ],
        "x": 1785,
        "y": 2220,
        "wires": [
            [
                "f4e55b938e645737"
            ]
        ]
    },
    {
        "id": "306b69356454f3ff",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "COP HEAT",
        "mode": "link",
        "links": [
            "ad2577846265e4ee",
            "fe8e23b8971b868e"
        ],
        "x": 2170,
        "y": 2160,
        "wires": [],
        "l": true
    },
    {
        "id": "6051d06bc75eda72",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "TOP33 - panasonic_heat_pump/main/Room_Thermostat_Temp",
        "topic": "panasonic_heat_pump/main/Room_Thermostat_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 370,
        "y": 300,
        "wires": [
            [
                "0fb10778eba34911"
            ]
        ]
    },
    {
        "id": "d6a9c376dde9c43f",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "T_outside",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "4051d3cb1ad86dbd",
            "aacb956ae7e693cb"
        ],
        "x": 1140,
        "y": 200,
        "wires": [],
        "l": true
    },
    {
        "id": "df9c3a6c0a51be9b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "TOP14 - panasonic_heat_pump/main/Outside_Temp",
        "topic": "panasonic_heat_pump/main/Outside_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 180,
        "wires": [
            [
                "a8d51c8773f8f17f"
            ]
        ]
    },
    {
        "id": "ba4a12897a805cee",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.PumpMaxFlowSetting",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'PumpMaxFlowSetting';\n\nvar F_ReducePumpSpeed = global.get('F_ReducePumpSpeed', \"file\");\n\nif (F_ReducePumpSpeed === undefined) {\n    F_ReducePumpSpeed = {};\n    F_ReducePumpSpeed.PumpMaxFlowSetting = msg.payload;\n    global.set('F_ReducePumpSpeed', F_ReducePumpSpeed , \"file\");\n    \n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 3780,
        "wires": [
            [
                "d8c3356483134cf9"
            ]
        ]
    },
    {
        "id": "3472c99aef20f07f",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 3840,
        "wires": [
            [
                "4f8c3c7d06c1b19a"
            ]
        ]
    },
    {
        "id": "4f8c3c7d06c1b19a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP19_Holiday_Mode_State",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP19_Holiday_Mode_State';\nglobal.set(\"TOP19_Holiday_Mode_State\",msg.payload,\"file\");\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3840,
        "wires": [
            []
        ]
    },
    {
        "id": "eda4721e720d1975",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 3900,
        "wires": [
            [
                "8501242129d89e2c",
                "8e7a86930e1fd875"
            ]
        ]
    },
    {
        "id": "8501242129d89e2c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP17_Powerful_Mode_Time",
        "func": "var current_state = global.get(\"TOP17_Powerful_Mode_Time\", \"file\");\n\nif (current_state > 0 && msg.payload == 0) {\n    let msg99={};\n    msg99.topic = 'Powerful mode';\n    msg99.payload = 'Powerful mode has ended';\n    node.send([null,msg99]);\n}\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP17_Powerful_Mode_Time';\nglobal.set(\"TOP17_Powerful_Mode_Time\",msg.payload,\"file\");\n\nreturn msg;\n\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3900,
        "wires": [
            [],
            [
                "d076ca8f3d1efe81"
            ]
        ],
        "outputLabels": [
            "msg",
            "msg99"
        ]
    },
    {
        "id": "e8684c407d602e87",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "bdb7e8e0217cec66"
        ],
        "x": 675,
        "y": 3820,
        "wires": [
            [
                "3472c99aef20f07f"
            ]
        ]
    },
    {
        "id": "f70b59196295efc0",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "PowerfulModelinkin",
        "links": [
            "979c5ca99c054740",
            "476092c14d80e376"
        ],
        "x": 675,
        "y": 3880,
        "wires": [
            [
                "eda4721e720d1975"
            ]
        ]
    },
    {
        "id": "690250e7cb51c576",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 3960,
        "wires": [
            [
                "695ce56812fda3d2"
            ]
        ]
    },
    {
        "id": "695ce56812fda3d2",
        "type": "function",
        "z": "a938de76db0b71f6",
        "d": true,
        "g": "cd2050a861736ec5",
        "name": "set.ForceDHW",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'ForceDHW';\nglobal.set(\"ForceDHW\",msg.payload,\"file\");\n\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 3960,
        "wires": [
            []
        ]
    },
    {
        "id": "12e43571a8c16fa2",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "092a9db0d9b923b3"
        ],
        "x": 215,
        "y": 3960,
        "wires": [
            [
                "690250e7cb51c576"
            ]
        ]
    },
    {
        "id": "a79fac04465c243e",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP26_Defrosting_State",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP26_Defrosting_State';\nglobal.set(\"TOP26_Defrosting_State\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 4020,
        "wires": [
            [
                "6c685782864f1787"
            ]
        ]
    },
    {
        "id": "01744f1093a2fd51",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "5e3a9447502864ad"
        ],
        "x": 675,
        "y": 4000,
        "wires": [
            [
                "f4fadebd69120ccb"
            ]
        ]
    },
    {
        "id": "ab34ebcc109b74de",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 4080,
        "wires": [
            [
                "10b4e15b0f3199ad"
            ]
        ]
    },
    {
        "id": "10b4e15b0f3199ad",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP94_Zones_State",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP94_Zones_State';\nglobal.set(\"TOP94_Zones_State\",msg.payload,\"file\");\n\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 4080,
        "wires": [
            []
        ]
    },
    {
        "id": "cb2c4d61eeec2c6f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP23_Heat_Delta",
        "func": "var TOP23_Heat_Delta = global.get(\"TOP23_Heat_Delta\",\"file\");\n\nif (msg.topic === 'panasonic_heat_pump/main/Heat_Delta') {\n    if (TOP23_Heat_Delta === msg.payload) {return null}\n    \n    global.set(\"TOP23_Heat_Delta\",msg.payload,\"file\");\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 4160,
        "wires": [
            []
        ]
    },
    {
        "id": "e164eaa22e0fa1dc",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP24_Cool_Delta",
        "func": "var TOP24_Cool_Delta = global.get(\"TOP24_Cool_Delta\",\"file\");\n\nif (TOP24_Cool_Delta === msg.payload) {return null}\nglobal.set(\"TOP24_Cool_Delta\",msg.payload,\"file\");\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 4220,
        "wires": [
            []
        ]
    },
    {
        "id": "a25d1f5d91c84a33",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 4320,
        "wires": [
            [
                "f9edb4875d3f2c5b"
            ]
        ]
    },
    {
        "id": "f9edb4875d3f2c5b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP22_DHW_Heat_Delta",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP22_DHW_Heat_Delta';\nglobal.set(\"TOP22_DHW_Heat_Delta\",msg.payload,\"file\");\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 4320,
        "wires": [
            []
        ]
    },
    {
        "id": "9c4e9ed4c3ac1779",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "2ed9d626c929fb95"
        ],
        "x": 675,
        "y": 4120,
        "wires": [
            [
                "ab34ebcc109b74de"
            ]
        ]
    },
    {
        "id": "5e35dee1374d6829",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "c803b9ad018fe78e"
        ],
        "x": 675,
        "y": 4300,
        "wires": [
            [
                "a25d1f5d91c84a33"
            ]
        ]
    },
    {
        "id": "e11f7d8caf20dbba",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP96_Heater_Delay_Time",
        "func": "var TOP96_Heater_Delay_Time = global.get(\"TOP96_Heater_Delay_Time\",\"file\");\n\nif (TOP96_Heater_Delay_Time === msg.payload) {return null}\nglobal.set(\"TOP96_Heater_Delay_Time\",msg.payload,\"file\");\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 4380,
        "wires": [
            []
        ]
    },
    {
        "id": "3fb7221a7218435a",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 4440,
        "wires": [
            [
                "460a1a83313cfcc5"
            ]
        ]
    },
    {
        "id": "460a1a83313cfcc5",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP97_Heater_Start_Delta",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP97_Heater_Start_Delta';\nglobal.set(\"TOP97_Heater_Start_Delta\",msg.payload,\"file\");\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 4440,
        "wires": [
            []
        ]
    },
    {
        "id": "8121e5bfa638e9ab",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 4500,
        "wires": [
            [
                "58a904f891a8e2cc"
            ]
        ]
    },
    {
        "id": "58a904f891a8e2cc",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP98_Heater_Stop_Delta",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP98_Heater_Stop_Delta';\nglobal.set(\"TOP98_Heater_Stop_Delta\",msg.payload,\"file\");\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 4500,
        "wires": [
            []
        ]
    },
    {
        "id": "7caff8b1418d65da",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 4560,
        "wires": [
            [
                "5f758eb9af24eb35"
            ]
        ]
    },
    {
        "id": "5f758eb9af24eb35",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP13_Main_Schedule_State",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP13_Main_Schedule_State';\nglobal.set(\"TOP13_Main_Schedule_State\",msg.payload,\"file\");\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 4560,
        "wires": [
            []
        ]
    },
    {
        "id": "0e3197d36afc45dc",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "78816343589b199a"
        ],
        "x": 675,
        "y": 4420,
        "wires": [
            [
                "3fb7221a7218435a"
            ]
        ]
    },
    {
        "id": "ca1f0fdf0dd05c89",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "a2d7de4325e4bf91"
        ],
        "x": 675,
        "y": 4480,
        "wires": [
            [
                "8121e5bfa638e9ab"
            ]
        ]
    },
    {
        "id": "c5cba27eac8a70a2",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "links": [
            "089ba42c8f7f7a61"
        ],
        "x": 675,
        "y": 4540,
        "wires": [
            [
                "7caff8b1418d65da"
            ]
        ]
    },
    {
        "id": "2c34d9f3299bef00",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "Put settings from GUI - DASH into variables",
        "info": "",
        "x": 470,
        "y": 3720,
        "wires": []
    },
    {
        "id": "8206cc922dc8874d",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "links": [
            "9fcae1bec983aa1f"
        ],
        "x": 235,
        "y": 3320,
        "wires": [
            [
                "8572da168a9397e1"
            ]
        ]
    },
    {
        "id": "170936d914847ac0",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "links": [
            "887a43d150c20eb2"
        ],
        "x": 235,
        "y": 3380,
        "wires": [
            [
                "76803a7773afbef6"
            ]
        ]
    },
    {
        "id": "8572da168a9397e1",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.HEAT_SP_lower_limit",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'HEAT_SP_lower_limit';\nglobal.set(\"HEAT_SP_lower_limit\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 3320,
        "wires": [
            []
        ]
    },
    {
        "id": "76803a7773afbef6",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.HEAT_SP_upper_limit",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'HEAT_SP_upper_limit';\nglobal.set(\"HEAT_SP_upper_limit\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 3380,
        "wires": [
            []
        ]
    },
    {
        "id": "a0d48945187b9bf6",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP98 - panasonic_heat_pump/main/Heater_Stop_Delta",
        "topic": "panasonic_heat_pump/main/Heater_Stop_Delta",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 4500,
        "wires": [
            [
                "8121e5bfa638e9ab",
                "5dca15fef4a08f93"
            ]
        ]
    },
    {
        "id": "cd3f44853ed1a6cd",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP97 - panasonic_heat_pump/main/Heater_Start_Delta",
        "topic": "panasonic_heat_pump/main/Heater_Start_Delta",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 4440,
        "wires": [
            [
                "3fb7221a7218435a",
                "e059b8503f36c6cc"
            ]
        ]
    },
    {
        "id": "fd08994eed1621be",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP96 - panasonic_heat_pump/main/Heater_Delay_Time",
        "topic": "panasonic_heat_pump/main/Heater_Delay_Time",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 4380,
        "wires": [
            [
                "0457901c1832b0f8",
                "e11f7d8caf20dbba"
            ]
        ]
    },
    {
        "id": "5023bec7ba5973f3",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP22 - panasonic_heat_pump/main/DHW_Heat_Delta",
        "topic": "panasonic_heat_pump/main/DHW_Heat_Delta",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 400,
        "y": 4320,
        "wires": [
            [
                "a25d1f5d91c84a33",
                "74209defc22e6b85"
            ]
        ]
    },
    {
        "id": "ad6a84d6161eab48",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP23 - panasonic_heat_pump/main/Heat_Delta",
        "topic": "panasonic_heat_pump/main/Heat_Delta",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 380,
        "y": 4160,
        "wires": [
            [
                "e2f4d021c8a23f5a",
                "cb2c4d61eeec2c6f"
            ]
        ]
    },
    {
        "id": "d7fdd42d981a2d7d",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP24 - panasonic_heat_pump/main/Cool_Delta",
        "topic": "panasonic_heat_pump/main/Cool_Delta",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 380,
        "y": 4220,
        "wires": [
            [
                "38863139d1e246e6",
                "e164eaa22e0fa1dc"
            ]
        ]
    },
    {
        "id": "a815d38c5137d852",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP17 - panasonic_heat_pump/main/Powerful_Mode_Time",
        "topic": "panasonic_heat_pump/main/Powerful_Mode_Time",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 3900,
        "wires": [
            [
                "eda4721e720d1975",
                "cc0c6a23965435e3"
            ]
        ]
    },
    {
        "id": "a82dac1b05afcaac",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP19 - panasonic_heat_pump/main/Holiday_Mode_State",
        "topic": "panasonic_heat_pump/main/Holiday_Mode_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 3840,
        "wires": [
            [
                "3472c99aef20f07f",
                "94d63d6212fc2b04"
            ]
        ]
    },
    {
        "id": "3097c4184ba03f0b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP18 - panasonic_heat_pump/main/Quiet_Mode_Level",
        "topic": "panasonic_heat_pump/main/Quiet_Mode_Level",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 470,
        "y": 2760,
        "wires": [
            [
                "cbded61fe1f8bfa6",
                "45d8b0eb6524d1f8"
            ]
        ]
    },
    {
        "id": "a0f14e8ff8b7b008",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP13 - panasonic_heat_pump/main/Main_Schedule_State",
        "topic": "panasonic_heat_pump/main/Main_Schedule_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 4560,
        "wires": [
            [
                "7caff8b1418d65da",
                "0c4b1772fa8b09f6"
            ]
        ]
    },
    {
        "id": "3bab99eab669bd21",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP94 - panasonic_heat_pump/main/Zones_State",
        "topic": "panasonic_heat_pump/main/Zones_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 390,
        "y": 4080,
        "wires": [
            [
                "ab34ebcc109b74de",
                "056b20bad4b28052"
            ]
        ]
    },
    {
        "id": "182df2f14a9ca82f",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP26 - panasonic_heat_pump/main/Defrosting_State",
        "topic": "panasonic_heat_pump/main/Defrosting_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 400,
        "y": 4020,
        "wires": [
            [
                "a79fac04465c243e",
                "f4fadebd69120ccb",
                "1e7278e92fb87f0c"
            ]
        ]
    },
    {
        "id": "5a629acf35a11cc1",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "Night reduction",
        "label": "Change temperature with",
        "tooltip": "",
        "group": "9aec7afe54746c39",
        "order": 2,
        "width": 0,
        "height": 0,
        "wrap": true,
        "passthru": true,
        "topic": "night_reduction_correction",
        "topicType": "msg",
        "format": "{{value}} °C",
        "min": "-20",
        "max": "0",
        "step": "1",
        "className": "",
        "x": 880,
        "y": 5180,
        "wires": [
            [
                "3a9f53d1ad6ec693"
            ]
        ]
    },
    {
        "id": "3151f56b9d086c84",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "set.NightReductionWaterTemp.correction",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(\"NightReductionWaterTemp.correction\",msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 5180,
        "wires": [
            []
        ]
    },
    {
        "id": "e3c1faa5a1fb80c6",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "Load on boot nachtverlaging",
        "func": "// Pin 1 - Current_value\n// Pin 2 - State\n// Pin 3 - Correction\n\nvar NR_W = global.get('NightReductionWaterTemp', \"file\");\nif (NR_W === undefined) {\n        NR_W = {};\n        global.set('NightReductionWaterTemp', NR_W, \"file\");\n}\nif (NR_W.state === undefined) {\n        global.set('NightReductionWaterTemp.state', 0, \"file\");\n        NR_W.state = 0;\n}\nif (NR_W.correction === undefined) {\n        global.set('NightReductionWaterTemp.correction', 0, \"file\");\n        NR_W.correction = 0;\n}\n\nlet msg1 = {}, msg2 = {}, msg3 = {};\n\nmsg1.payload = NR_W.current_value;\nmsg2.payload = NR_W.state;\nmsg3.payload = NR_W.correction;\n\n//if(current_value === undefined)     { msg2=null,msg3=null;}\nif (NR_W.state === undefined) { msg2 = null, msg3 = null; }\n\nif (NR_W.state === 0) {\n        global.set(\"NightReductionWaterTemp.current_value\", 0, \"file\");\n        msg1.payload = 0;\n        node.send([msg1, null, null])\n}\n\nif (NR_W.state === 1) {\n        global.set(\"NightReductionWaterTemp.current_value\", NR_W.correction, \"file\");\n        msg1.payload = NR_W.correction;\n        node.send([msg1, null, null])\n}\n\nreturn [null, msg2, msg3];\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 5020,
        "wires": [
            [],
            [
                "f0b7868c48887de4"
            ],
            [
                "5a629acf35a11cc1",
                "afb8bfd949251c6c"
            ]
        ],
        "outputLabels": [
            "current_value",
            "state",
            "correction"
        ]
    },
    {
        "id": "3f05f1c6e437d5d3",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "group": "bf4af523ba16d457",
        "order": 24,
        "width": 2,
        "height": 1,
        "name": "nightreduction read",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 890,
        "y": 4960,
        "wires": []
    },
    {
        "id": "2b04b7dd5ea852f2",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "group": "bf4af523ba16d457",
        "order": 23,
        "width": 3,
        "height": 1,
        "name": "text nightreduction",
        "label": "Night reduction",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 4960,
        "wires": []
    },
    {
        "id": "f0b7868c48887de4",
        "type": "ui_switch",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "Nightreduction",
        "label": "",
        "tooltip": "",
        "group": "bf4af523ba16d457",
        "order": 22,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 880,
        "y": 5080,
        "wires": [
            [
                "64489162c0113379"
            ]
        ]
    },
    {
        "id": "b1dbfa8badec14e4",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "NightReductionWaterTemp.state",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(\"NightReductionWaterTemp.state\",msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1310,
        "y": 5080,
        "wires": [
            []
        ]
    },
    {
        "id": "4f05df9205955fba",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "geprogrammeerde reductie",
        "info": "",
        "x": 910,
        "y": 5140,
        "wires": []
    },
    {
        "id": "a852d7a03c2a4cb0",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "current value",
        "info": "",
        "x": 870,
        "y": 4920,
        "wires": []
    },
    {
        "id": "038f578f8cc12163",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "toggle",
        "info": "",
        "x": 850,
        "y": 5040,
        "wires": []
    },
    {
        "id": "64489162c0113379",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1050,
        "y": 5080,
        "wires": [
            [
                "b1dbfa8badec14e4",
                "e3c1faa5a1fb80c6",
                "d283d9a5d5181aed",
                "0884ccad88528175",
                "db81c5d226a5dab3"
            ]
        ]
    },
    {
        "id": "d283d9a5d5181aed",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "nightreduction_on_off",
        "mode": "link",
        "links": [
            "44d83d4e58d63689"
        ],
        "x": 1195,
        "y": 5040,
        "wires": []
    },
    {
        "id": "3a9f53d1ad6ec693",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1050,
        "y": 5180,
        "wires": [
            [
                "3151f56b9d086c84",
                "db81c5d226a5dab3"
            ]
        ]
    },
    {
        "id": "10ca1d93fdd1afe2",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP41_DHW_Energy_Consumption",
        "func": "if (msg.payload >= 0) {\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    msg.topic = 'TOP41_DHW_Energy_Consumption';\n    global.set(\"TOP41_DHW_Energy_Consumption\",msg.payload);\n    return msg;\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 3240,
        "wires": [
            [
                "a3180920b08e8108"
            ],
            [
                "b975cac67ff8c566"
            ]
        ]
    },
    {
        "id": "158cd656457b884a",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP41 - panasonic_heat_pump/main/DHW_Energy_Consumption",
        "topic": "panasonic_heat_pump/main/DHW_Energy_Consumption",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 3240,
        "wires": [
            [
                "10ca1d93fdd1afe2"
            ]
        ]
    },
    {
        "id": "5787c91b303f2538",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "COP DHW",
        "mode": "link",
        "links": [
            "c302223665944545",
            "fe8e23b8971b868e"
        ],
        "x": 2170,
        "y": 2200,
        "wires": [],
        "l": true
    },
    {
        "id": "0884ccad88528175",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Function NightReduction",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 4980,
        "wires": [
            [
                "c77c4767a9dd84f4"
            ]
        ]
    },
    {
        "id": "c77c4767a9dd84f4",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1415,
        "y": 5000,
        "wires": []
    },
    {
        "id": "f0b20c8165a68430",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "To Log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1550,
        "y": 280,
        "wires": [],
        "l": true
    },
    {
        "id": "a3180920b08e8108",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP41_DHW_Energy_Consumption",
        "mode": "link",
        "links": [
            "05c67c5f7508a04d",
            "2347fd7ebf82b618"
        ],
        "x": 1525,
        "y": 3240,
        "wires": []
    },
    {
        "id": "b9da2620c239be36",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP27 - panasonic_heat_pump/main/Z1_Heat_Request_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Heat_Request_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 2580,
        "wires": [
            [
                "aa66f523450fd337",
                "8b7cbc95996cf262"
            ]
        ]
    },
    {
        "id": "6815e3004fa8b341",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "NR gui changes to function trigger",
        "mode": "link",
        "links": [
            "44d83d4e58d63689"
        ],
        "x": 1415,
        "y": 5140,
        "wires": []
    },
    {
        "id": "db81c5d226a5dab3",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "5",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1240,
        "y": 5140,
        "wires": [
            [
                "6815e3004fa8b341"
            ]
        ]
    },
    {
        "id": "d90d8243969aecef",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP95 - panasonic_heat_pump/main/Max_Pump_Duty",
        "topic": "panasonic_heat_pump/main/Max_Pump_Duty",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 400,
        "y": 3780,
        "wires": [
            [
                "0b10bc17b24896b7",
                "ba4a12897a805cee",
                "c335163c9d8efd2c"
            ]
        ]
    },
    {
        "id": "8f0e209ac14bdb9a",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "Max_Pump_Duty_Currentvalue",
        "mode": "link",
        "links": [
            "32c4b461266d4a6e",
            "94fb2ca53932250b"
        ],
        "x": 1055,
        "y": 3740,
        "wires": []
    },
    {
        "id": "0b10bc17b24896b7",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 3740,
        "wires": [
            [
                "8f0e209ac14bdb9a"
            ]
        ]
    },
    {
        "id": "1fea7e86a5a61e8b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP92 - panasonic_heat_pump/main/Heat_Pump_Model",
        "topic": "panasonic_heat_pump/main/Heat_Pump_Model",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 5260,
        "wires": [
            [
                "8ef3101cc4e83705"
            ]
        ]
    },
    {
        "id": "8ef3101cc4e83705",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "Heatpump type (Panasonic)",
        "func": "var panasonic = global.get('panasonic', \"file\");\n\n// Source data is manually copied from\n// https://github.com/Egyras/HeishaMon/blob/master/HeatPumpType.md\n\nif (panasonic === undefined || panasonic.model === undefined || panasonic.phase === undefined || panasonic.power === undefined || panasonic.type === undefined || panasonic.TCAP === undefined || panasonic.nr === undefined || panasonic.nr != msg.payload) {\n    global.set('panasonic', undefined, \"file\");\n    panasonic = undefined;\n\n    var model;\n    var phase;\n    var type;\n    var power;\n    var nr;\n\n    if (msg.payload == 0 || msg.payload == 'E2 CF 0B 13 33 32 D1 0C 16 33') { model = 'WH-MDC05H3E5'; power = '5'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 1 || msg.payload == 'E2 CF 0B 14 33 42 D1 0B 17 33') { model = 'WH-MDC07H3E5'; power = '7'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 2 || msg.payload == 'E2 CF 0D 77 09 12 D0 0B 05 11') { model = 'WH-UX09HE5'; power = '9'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 3 || msg.payload == 'E2 CF 0C 88 05 12 D0 0B 97 05') { model = 'WH-UD09HE8'; power = '9'; phase = '3'; type = 'HP'; }\n    if (msg.payload == 4 || msg.payload == 'E2 CF 0D 85 05 12 D0 0C 94 05') { model = 'WH-UX09HE8'; power = '9'; phase = '3'; type = 'T-CAP'; }\n    if (msg.payload == 5 || msg.payload == 'E2 CF 0D 86 05 12 D0 0C 95 05') { model = 'WH-UX12HE8'; power = '12'; phase = '3'; type = 'T-CAP'; }\n    if (msg.payload == 6 || msg.payload == 'E2 CF 0D 87 05 12 D0 0C 96 05') { model = 'WH-UX16HE8'; power = '16'; phase = '3'; type = 'T-CAP'; }\n    if (msg.payload == 7 || msg.payload == 'E2 CE 0D 71 81 72 CE 0C 92 81') { model = 'WH-UD05HE5'; power = '5'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 8 || msg.payload == '62 D2 0B 43 54 42 D2 0B 72 66') { model = 'WH-UD09JE5'; power = '9'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 9 || msg.payload == 'C2 D3 0B 33 65 B2 D3 0B 94 65') { model = 'WH-MDC05J3E5'; power = '5'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 10 || msg.payload == 'E2 CF 0B 15 33 42 D1 0B 18 33') { model = 'WH-MDC09H3E5'; power = '9'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 11 || msg.payload == 'E2 CF 0B 41 34 82 D1 0B 31 35') { model = 'WH-MXC09H3E5'; power = '9'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 12 || msg.payload == '62 D2 0B 45 54 42 D2 0B 47 55') { model = 'WH-UD09JE5'; power = '9'; phase = '1'; type = 'HP - All-In-One'; }\n    if (msg.payload == 13 || msg.payload == 'E2 CF 0C 74 09 12 D0 0D 95 05') { model = 'WH-UX12HE8'; power = '12'; phase = '3'; type = 'T-CAP - All-In-One'; }\n    if (msg.payload == 14 || msg.payload == 'E2 CF 0B 82 05 12 D0 0C 91 05') { model = 'WH-UQ09HE8'; power = '9'; phase = '3'; type = 'T-CAP - Super Quiet'; }\n    if (msg.payload == 15 || msg.payload == 'E2 CF 0C 55 14 12 D0 0B 15 08') { model = 'WH-UD09HE5'; power = '9'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 16 || msg.payload == 'E2 CF 0C 43 00 12 D0 0B 15 08') { model = 'WH-UD09HE5'; power = '9'; phase = '1'; type = 'HP - All-In-One'; }\n    if (msg.payload == 17 || msg.payload == '62 D2 0B 45 54 32 D2 0C 45 55') { model = 'WH-UD05JE5'; power = '5'; phase = '1'; type = 'HP - All-In-One'; }\n    if (msg.payload == 18 || msg.payload == '62 D2 0B 43 54 42 D2 0C 46 55') { model = 'WH-UD07JE5'; power = '7'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 19 || msg.payload == 'E2 CF 0C 54 14 12 D0 0B 14 08') { model = 'WH-UD07HE5-1'; power = '7'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 20 || msg.payload == 'C2 D3 0B 34 65 B2 D3 0B 95 65') { model = 'WH-MDC07J3E5'; power = '7'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 21 || msg.payload == 'C2 D3 0B 35 65 B2 D3 0B 96 65') { model = 'WH-MDC09J3E5'; power = '9'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 22 || msg.payload == '62 D2 0B 41 54 32 D2 0C 45 55') { model = 'WH-UD05JE5'; power = '5'; phase = '1'; type = 'HP'; }\n    if (msg.payload == 23 || msg.payload == '32 D4 0B 87 84 73 90 0C 84 84') { model = 'WH-MXC09J3E8'; power = '9'; phase = '3'; type = 'T-CAP'; }\n    if (msg.payload == 24 || msg.payload == '32 D4 0B 88 84 73 90 0C 85 84') { model = 'WH-MXC12J9E8'; power = '12'; phase = '3'; type = 'T-CAP'; }\n    if (msg.payload == 25 || msg.payload == 'E2 CF 0B 75 09 12 D0 0C 06 11') { model = 'WH-UD12HE5'; power = '12'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 26 || msg.payload == '42 D4 0B 83 71 42 D2 0C 46 55') { model = 'WH-UD07JE5'; power = '7'; phase = '1'; type = 'HP - All-In-One Compact'; }\n    if (msg.payload == 27 || msg.payload == 'C2 D3 0C 34 65 B2 D3 0B 95 65') { model = 'WH-MDC07J3E5'; power = '7'; phase = '1'; type = 'HP (new version?)'; }\n    if (msg.payload == 28 || msg.payload == 'C2 D3 0C 33 65 B2 D3 0B 94 65') { model = 'WH-MDC05J3E5'; power = '5'; phase = '1'; type = 'HP (new version)'; }\n    if (msg.payload == 29 || msg.payload == 'E2 CF 0B 83 05 12 D0 0D 92 05') { model = 'WH-UQ12HE8'; power = '12'; phase = '3'; type = 'T-CAP - Super Quiet'; }\n    if (msg.payload == 30 || msg.payload == 'E2 CF 0C 78 09 12 D0 0B 06 11') { model = 'WH-UX12HE5'; power = '12'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 31 || msg.payload == 'C2 D3 0C 35 65 B2 D3 0B 96 65') { model = 'WH-MDC09J3E5'; power = '9'; phase = '1'; type = 'HP (new version?)'; }\n    if (msg.payload == 32 || msg.payload == '32 D4 0B 99 77 62 90 0B 01 78') { model = 'WH-MXC09J3E5'; power = '9'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 33 || msg.payload == '42 D4 0B 15 76 12 D0 0B 10 11') { model = 'WH-UD12HE5'; power = '12'; phase = '1'; type = 'HP - All-In-One Compact'; }\n    if (msg.payload == 34 || msg.payload == 'E2 D5 0C 29 99 83 92 0C 28 98') { model = 'WH-WDG07LE5'; power = '7'; phase = '1'; type = 'HP - All-In-One L-series'; }\n    if (msg.payload == 35 || msg.payload == 'E2 CF 0D 85 05 12 D0 0E 94 05') { model = 'WH-UX09HE8'; power = '9'; phase = '3'; type = 'T-CAP - new version'; }\n    if (msg.payload == 36 || msg.payload == 'E2 D5 0D 36 99 02 D6 0F 67 95') { model = 'WH-UDZ07KE5'; power = '7'; phase = '1'; type = 'HP - All-In-One K-series - AN'; }\n    if (msg.payload == 37 || msg.payload == 'E2 D5 0B 08 95 02 D6 0E 66 95') { model = 'WH-UDZ05KE5'; power = '5'; phase = '1'; type = 'HP - split K-series'; }\n    if (msg.payload == 38 || msg.payload == 'E2 D5 0B 34 99 83 92 0C 29 98') { model = 'WH-WDG09LE5'; power = '9'; phase = '1'; type = 'HP - split L-series 3kW elec heating'; }\n    if (msg.payload == 39 || msg.payload == 'E2 CF 0C 89 05 12 D0 0C 98 05') { model = 'WH-UD12HE8'; power = '12'; phase = '3'; type = 'HP'; }\n    if (msg.payload == 40 || msg.payload == 'E2 D5 0B 08 95 02 D6 0E 67 95') { model = 'WH-UDZ07KE5'; power = '7'; phase = '1'; type = 'HP - split K-series'; }\n    if (msg.payload == 41 || msg.payload == 'E2 CF 0C 74 09 12 D0 0C 96 05') { model = 'WH-UX16HE8'; power = '16'; phase = '3'; type = 'T-CAP - All-In-One'; }\n    if (msg.payload == 42 || msg.payload == 'E2 CF 0C 74 09 12 D0 0E 95 05') { model = 'WH-UX12HE8'; power = '12'; phase = '3'; type = 'T-CAP - All-In-One'; }\n    if (msg.payload == 43 || msg.payload == '32 D4 0B 89 84 73 90 0C 86 84') { model = 'WH-MXC16J9E8'; power = '16'; phase = '3'; type = 'T-CAP'; }\n    if (msg.payload == 44 || msg.payload == '32 D4 0B 00 78 62 90 0B 02 78') { model = 'WH-MXC12J6E5'; power = '12'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 45 || msg.payload == 'E2 CF 0B 82 05 12 D0 0D 91 05') { model = 'WH-UQ09HE8'; power = '9'; phase = '3'; type = 'T-CAP - Super Quiet revised model'; }\n    if (msg.payload == 46 || msg.payload == 'E2 D5 0D 99 94 02 D6 0D 68 95') { model = 'WH-UDZ09KE5'; power = '9'; phase = '1'; type = 'HP - K-series All-in-One R32'; }\n    if (msg.payload == 47 || msg.payload == 'E2 CF 0C 74 09 12 D0 0C 95 05') { model = 'WH-UX12HE8'; power = '12'; phase = '3'; type = 'T-CAP - All-In-One'; }\n    if (msg.payload == 48 || msg.payload == 'E2 D5 0B 34 99 83 92 0C 28 98') { model = 'WH-WDG07LE5'; power = '7'; phase = '1'; type = 'HP - split L-series 3kW elec heating'; }\n    if (msg.payload == 49 || msg.payload == 'E2 CF 0D 77 09 12 D0 0C 05 11') { model = 'WH-UX09HE5'; power = '9'; phase = '1'; type = 'T-CAP'; }\n    if (msg.payload == 51 || msg.payload == 'E2 D5 0C 67 00 83 92 0C 27 98') { model = 'WH-WDG05LE5'; power = '5'; phase = '1'; type = 'HP - split L-series 3kW elec heating - AN'; }\n    if (msg.payload == 52 || msg.payload == 'E2 D5 0B 34 99 83 92 0C 27 98') { model = 'WH-WDG05LE5'; power = '5'; phase = '1'; type = 'HP - split L-series 3kW elec heating'; }\n\n    if (model === undefined) { model = 'unknown'; }\n    if (power === undefined) { power = 'unknown'; }\n    if (phase === undefined) { phase = 'unknown'; }\n    if (type === undefined) { type = 'unknown'; }\n\n    panasonic = {};\n    panasonic.model = model;\n    panasonic.power = power;\n    panasonic.phase = phase;\n    panasonic.type  = type;\n    panasonic.nr = msg.payload;\n    \n    if (type.includes(\"T-CAP\")) { panasonic.TCAP = 1; } else { panasonic.TCAP = 0; }\n\n    global.set('panasonic', panasonic, \"file\");\n    return msg;\n}\n\n\nelse {\n    return null;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 5260,
        "wires": [
            []
        ]
    },
    {
        "id": "4f0447af5e532d6f",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "TOP30 - panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5440,
        "wires": [
            [
                "dfd98e02f46447fb",
                "5e56ba56cb2fd474",
                "1034d22d437cc0cd"
            ]
        ]
    },
    {
        "id": "91e1151b60bc9a35",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "TOP31 - panasonic_heat_pump/main/Z1_Heat_Curve_Outside_High_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Outside_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5520,
        "wires": [
            [
                "c0a54684ef46f711",
                "5e56ba56cb2fd474",
                "1034d22d437cc0cd"
            ]
        ]
    },
    {
        "id": "dc036a2e660127ec",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "TOP32 - panasonic_heat_pump/main/Z1_Heat_Curve_Outside_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Outside_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5560,
        "wires": [
            [
                "07bfc2f9f00870d7",
                "5e56ba56cb2fd474",
                "1034d22d437cc0cd"
            ]
        ]
    },
    {
        "id": "5e56ba56cb2fd474",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "Store Z1 CCC",
        "func": "var war_ot1         = global.get('F_CCC.z1.ot1',\"file\");                 // Outside temperature high         (warm outside)\nvar war_ot2         = global.get('F_CCC.z1.ot2',\"file\");                 // Outside temperature intermediate (intermediate outside temperature)\nvar war_ot3         = global.get('F_CCC.z1.ot3',\"file\");                 // Outside temperature low          (cold outside)\n\nvar war_wt1         = global.get('F_CCC.z1.wt1',\"file\");                 // Water temperature low            (cold water)\nvar war_wt2         = global.get('F_CCC.z1.wt2',\"file\");                 // Water temperature intermediate   (intermediate water temperature)\nvar war_wt3         = global.get('F_CCC.z1.wt3',\"file\");                 // Water temperature high           (warm water)\nlet msg99={};\n    msg99.topic = \"Function CCC Z1)\";\n/*\n                weer    buiten      water\n                warm    war_ot1     war_wt1\n                        war_ot2     war_wt2\n                cold    war_ot3     war_wt3\n*/\nvar varHeatMode = global.get('TOP76_Heating_Mode',\"file\")\n    if (varHeatMode === undefined) {return null}\n\n    if (varHeatMode == 0) {   // CompensationCurve\n\n    } \n    if (varHeatMode == 1) {   // Direct\n        //if (msg.topic == \"panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp\") {msg.payload = 20;}\n    } \n\nif (msg.topic == \"panasonic_heat_pump/main/Z1_Heat_Curve_Outside_Low_Temp\"  )   {global.set('Z1_Heat_Curve_Outside_Low_Temp',msg.payload);}\nif (msg.topic == \"panasonic_heat_pump/main/Z1_Heat_Curve_Outside_High_Temp\" )   {global.set('Z1_Heat_Curve_Outside_High_Temp',msg.payload);}\nif (msg.topic == \"panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp\"   )   {global.set('Z1_Heat_Curve_Target_Low_Temp',msg.payload);}\nif (msg.topic == \"panasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp\"  )   {global.set('Z1_Heat_Curve_Target_High_Temp',msg.payload);}\n\nif ((war_ot1+war_ot2+war_ot3+war_wt1+war_wt2+war_wt3)>-1000)  {\n    msg99.topic=\"SYSTEM\";\n    msg99.payload=\"CCC Zone 1 settings are OK\";\n    return [null,msg99]\n}\n\nif (varHeatMode == 1) {return null}\n\nif (war_wt2===undefined) {\n    if (msg.topic==\"panasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp\") {\n        global.set('F_CCC.z1.wt2',msg.payload,\"file\");\n        msg99.payload=\"Imported TOP29 from Panasonic (Z1_Heat_Curve_Target_High_Temp = \" + msg.payload + \"°C)\";\n        if (war_wt3===undefined) {\n            global.set('F_CCC.z1.wt3',msg.payload,\"file\");\n        }\n        return [msg,msg99]\n    }\n}\nif (war_wt1===undefined) {\n    if (msg.topic==\"panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp\") {\n        global.set('F_CCC.z1.wt1',msg.payload,\"file\");\n        msg99.payload=\"Imported TOP30 from Panasonic (Z1_Heat_Curve_Target_Low_Temp = \" + msg.payload + \"°C)\";\n        return [msg,msg99]\n    }\n}\nif (war_ot1===undefined) {\n    if (msg.topic==\"panasonic_heat_pump/main/Z1_Heat_Curve_Outside_High_Temp\") {\n        global.set('F_CCC.z1.ot1',msg.payload,\"file\");\n        msg99.payload=\"Imported TOP31 from Panasonic (Z1_Heat_Curve_Outside_High_Temp = \" + msg.payload + \"°C)\";\n        return [msg,msg99]\n    }\n}\nif (war_ot2===undefined) {\n    if (msg.topic==\"panasonic_heat_pump/main/Z1_Heat_Curve_Outside_Low_Temp\") {\n        global.set('F_CCC.z1.ot2',msg.payload,\"file\");\n        msg99.payload=\"Imported TOP32 from Panasonic (Z1_Heat_Curve_Outside_Low_Temp = \" + msg.payload + \"°C)\";\n        if (war_ot3===undefined) {\n            global.set('F_CCC.z1.ot3',msg.payload-1,\"file\");\n        }\n        return [msg,msg99]\n    }\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 5480,
        "wires": [
            [
                "123d7b6352639620"
            ],
            [
                "87bd21b4647187d2"
            ]
        ],
        "outputLabels": [
            "",
            "ToLog"
        ]
    },
    {
        "id": "246757b0d4390b0d",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1235,
        "y": 5540,
        "wires": []
    },
    {
        "id": "87bd21b4647187d2",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1130,
        "y": 5540,
        "wires": [
            [
                "246757b0d4390b0d"
            ]
        ]
    },
    {
        "id": "123d7b6352639620",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1140,
        "y": 5440,
        "wires": [
            [
                "b46cfcf8ce6d8f91"
            ]
        ]
    },
    {
        "id": "b46cfcf8ce6d8f91",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "link out 9",
        "mode": "link",
        "links": [
            "05065bbd47aa9dd3"
        ],
        "x": 1235,
        "y": 5440,
        "wires": []
    },
    {
        "id": "afb8bfd949251c6c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "Color",
        "func": "var nr_state = global.get('NightReductionWaterTemp.state',\"file\");\n    if (nr_state === undefined)    {return null;}\n\nlet msg1={};\n\n\n    if (nr_state == 0) \n        {\n            msg1.color = \"gray\";\n        }\n\n\n    if (nr_state == 1) \n        {\n            msg1.color = \"\";\n        }\nif (msg.payload > 0){msg.payload = '+' + msg.payload;}\nmsg1.payload = msg.payload;\n\n\nreturn [msg1];",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 4960,
        "wires": [
            [
                "3f05f1c6e437d5d3",
                "ad1aa3d7ce882c45",
                "87bb9350c1c8ab14"
            ]
        ]
    },
    {
        "id": "ea89c213947bdf26",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1130,
        "y": 160,
        "wires": [
            [
                "f0b20c8165a68430"
            ]
        ]
    },
    {
        "id": "fde418209aab6a87",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "name": "Line - Setup ",
        "order": 33,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Internal Panasonic profile (read-only)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 590,
        "y": 5360,
        "wires": [
            []
        ]
    },
    {
        "id": "8944d416f44e4183",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 35,
        "width": 3,
        "height": 1,
        "name": "Outside temp.",
        "label": "<font color=gray>Outside temp.</font>",
        "format": "",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 700,
        "y": 5480,
        "wires": []
    },
    {
        "id": "ab60719365f6bde0",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 36,
        "width": 3,
        "height": 1,
        "name": "Water temp.",
        "label": "<font color=gray>Water temp.</font>",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "x": 770,
        "y": 5360,
        "wires": []
    },
    {
        "id": "3a027c0cd9f8a957",
        "type": "ui_button",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "",
        "group": "9b8ec8b1b9f66309",
        "order": 30,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Export",
        "tooltip": "This will send the above temperature profile to the Panasonic heatpump (internal).",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Export current profile to heatpump?",
        "payloadType": "str",
        "topic": "Please confirm",
        "topicType": "str",
        "x": 1430,
        "y": 5400,
        "wires": [
            [
                "1acb7989b3df5970"
            ]
        ]
    },
    {
        "id": "1acb7989b3df5970",
        "type": "ui_toast",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "Abort",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Deploy?",
        "x": 1580,
        "y": 5400,
        "wires": [
            [
                "fa6cbe3250ca3abf"
            ]
        ]
    },
    {
        "id": "fa6cbe3250ca3abf",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "Confirm",
        "func": "\nif (msg.payload == 'Yes') \n    {\n            \n        var war_ot1         = global.get('F_CCC.z1.ot1',\"file\");                 // Outside temperature high         (warm outside)\n        var war_ot2         = global.get('F_CCC.z1.ot2',\"file\");                 // Outside temperature intermediate (intermediate outside temperature)\n        //var war_ot3         = global.get('F_CCC.z1.ot3',\"file\");                 // Outside temperature low          (cold outside)\n        var war_wt1         = global.get('F_CCC.z1.wt1',\"file\");                 // Water temperature low            (cold water)\n        var war_wt2         = global.get('F_CCC.z1.wt2',\"file\");                 // Water temperature intermediate   (intermediate water temperature)\n        //var war_wt3         = global.get('F_CCC.z1.wt3',\"file\");                 // Water temperature high           (warm water)\n        \n        let msg1    ={};    //  pin 1 - export JSON\n        let msg99   ={};    //  pin 2 - output to log\n        \n        msg1.topic = \"JSON_ZONE1_HEAT\"\n        msg1.payload = {\n                        \t\"zone1\": {\n                        \t\t\"heat\": {\n                        \t\t\t\"target\": {\n                        \t\t\t\t\"high\": war_wt2,\n                        \t\t\t\t\"low\": war_wt1\n                        \t\t\t},\n                        \t\t\t\"outside\": {\n                        \t\t\t\t\"high\": war_ot1,\n                        \t\t\t\t\"low\": war_ot2\n                        \t\t\t}\n                        \t\t}\n                        \t}\n                        }\n        msg99.topic = \"SYSTEM\";\n        msg99.payload = \"Exported settings with CCC Zone 1 temperature profile to Panasonic heatpump\";\n        \n        node.send([msg1,msg99]);\n    }\nreturn null;",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 5400,
        "wires": [
            [
                "c5bf8e25eda73442"
            ],
            [
                "ae97f18776a1de28"
            ]
        ],
        "outputLabels": [
            "export JSON",
            "output to log"
        ]
    },
    {
        "id": "c5bf8e25eda73442",
        "type": "json",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 1970,
        "y": 5380,
        "wires": [
            [
                "b1bc9035edfd596b"
            ]
        ]
    },
    {
        "id": "f70eae138246bae0",
        "type": "ui_button",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "",
        "group": "9b8ec8b1b9f66309",
        "order": 28,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Import",
        "tooltip": "This will read the internal Panasonic profile and save it in this Node Red flow",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Import Panasonic profile into Node Red?",
        "payloadType": "str",
        "topic": "Please confirm",
        "topicType": "str",
        "x": 1430,
        "y": 5460,
        "wires": [
            [
                "4af0ddb4ff3ccf32"
            ]
        ]
    },
    {
        "id": "4af0ddb4ff3ccf32",
        "type": "ui_toast",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "Abort",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Deploy?",
        "x": 1580,
        "y": 5460,
        "wires": [
            [
                "418e761f03c6c9cd"
            ]
        ]
    },
    {
        "id": "418e761f03c6c9cd",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "Confirm",
        "func": "\nif (msg.payload == 'Yes') \n    {\n        let msg99={};\n        var Z1_Heat_Curve_Outside_Low_Temp      = global.get('Z1_Heat_Curve_Outside_Low_Temp');\n        var Z1_Heat_Curve_Outside_High_Temp     = global.get('Z1_Heat_Curve_Outside_High_Temp');\n        var Z1_Heat_Curve_Target_Low_Temp       = global.get('Z1_Heat_Curve_Target_Low_Temp');\n        var Z1_Heat_Curve_Target_High_Temp      = global.get('Z1_Heat_Curve_Target_High_Temp');\n        \n        \n        global.set('war_ot1',Z1_Heat_Curve_Outside_High_Temp,\"file\");                 // Outside temperature high         (warm outside)\n        global.set('war_ot2',Z1_Heat_Curve_Outside_Low_Temp,\"file\");                 // Outside temperature intermediate (intermediate outside temperature)\n        global.set('war_ot3',Z1_Heat_Curve_Outside_Low_Temp-1,\"file\");                 // Outside temperature low          (cold outside)\n        \n        global.set('war_wt1',Z1_Heat_Curve_Target_Low_Temp,\"file\");                 // Water temperature low            (cold water)\n        global.set('war_wt2',Z1_Heat_Curve_Target_High_Temp,\"file\");                 // Water temperature intermediate   (intermediate water temperature)\n        global.set('war_wt3',Z1_Heat_Curve_Target_High_Temp,\"file\");\n        \n        \n        \n        msg99.topic = \"SYSTEM\";\n        msg99.payload = \"Import Zone 1 profile from Panasonic heatpump to Node Red\";\n    \n        msg.payload = \"Done\" ;\n        msg.topic = \"\";\n        \n    \n        return msg;\n        \n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 5460,
        "wires": [
            [
                "88e74ca7c5982d24"
            ]
        ]
    },
    {
        "id": "88e74ca7c5982d24",
        "type": "ui_toast",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Ok",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Done",
        "x": 1970,
        "y": 5460,
        "wires": [
            []
        ]
    },
    {
        "id": "9005e7a87f86a06e",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 40,
        "width": 3,
        "height": 1,
        "name": "war_wt2",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 5400,
        "wires": []
    },
    {
        "id": "dfd98e02f46447fb",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 38,
        "width": 3,
        "height": 1,
        "name": "war_wt1",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 5440,
        "wires": []
    },
    {
        "id": "c0a54684ef46f711",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 37,
        "width": 3,
        "height": 1,
        "name": "war_ot1",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "x": 800,
        "y": 5520,
        "wires": []
    },
    {
        "id": "07bfc2f9f00870d7",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 39,
        "width": 3,
        "height": 1,
        "name": "war_ot2",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "x": 800,
        "y": 5560,
        "wires": []
    },
    {
        "id": "a8d51c8773f8f17f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "T_outside - Input selector",
        "func": "//***********************************************************************************\nvar msg1={};            //  pin 1 - panasonic_heat_pump/main/Outside_Temp output\nvar msg99={};           //  pin 2 - To log\nvar msg2={};            //  pin 3 - custom sensor output\nvar msg3={};            //  pin 4 - final output. selected custom sensor or default panasonic_heat_pump/.. sensor\n\n//  \n//  return [msg1,msg99,msg2,msg3]\nmsg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\n\nmsg99.topic = \"SETUP - Sensors\";\n\n\nvar TOP76_Heating_Mode    = global.get('TOP76_Heating_Mode',\"file\");\n    if (TOP76_Heating_Mode === undefined)     {return null;}\n\nvar T_outside_custom = global.get(\"T_outside_custom\",\"file\");\n\n//***********************************************************************************\n// Timer how long the compressoris on. Runtime\n//\nvar CurrentTime = new Date().getTime();\nvar StartTime = context.get(\"StartTime\");\nif (StartTime === undefined)\n    {\n        context.set(\"StartTime\",CurrentTime);\n        return null;\n    }\nelse\n    {\n        var TimeElapsed = ((CurrentTime - StartTime)/1000);\n        TimeElapsed = parseFloat(TimeElapsed.toFixed(0));\n\n    }\n//***********************************************************************************\n\n//***********************************************************************************\n//\n//  Set delay after which the function will switch back from custom sensor to panasonic internal sensor. \n//  Choosen delay is 2 hours, 60 seconds x 60 x 2 = 7200 seconds\n//\n//***********************************************************************************\n\n//***********************************************************************************\n//  \nif (msg.topic === \"panasonic_heat_pump/main/Outside_Temp\")\n    {\n        msg1 = msg;\n\n        global.set(\"TOP14_Outside_Temp\",msg1.payload,\"file\");\n        \n        if (T_outside_custom === undefined)\n            {\n                msg3.payload = msg1.payload;\n                global.set(\"T_outside\", msg.payload, \"file\");\n                msg99.payload = \"Custom outside temperature sensor not found\";\n                return [msg1,null,null,msg3]\n            }\n        else if (TOP76_Heating_Mode === 1 && TimeElapsed > 7200)\n            {\n                msg3.payload = msg1.payload;\n                global.set(\"T_outside_custom\",undefined,\"file\");\n                global.set(\"T_outside\",msg.payload,\"file\");\n                msg99.payload = \"Custom outside temperature sensor LOST. Using TOP14 instead\";// (\" + msg3.payload + \"°C)\";\n                return [msg1,null,null,msg3]\n            }\n        else if (TOP76_Heating_Mode === 0)\n            {\n                msg3.payload = msg1.payload;\n                global.set(\"T_outside\",msg.payload,\"file\");\n                msg99.payload = \"Heatpump is in compensation mode (WAR). Custom outside temperature sensor ignored. Using TOP14 instead\";\n                return [msg1,null,null,msg3]\n            }\n        else\n            {\n                return [msg1,null,null,null]\n            }\n    }    \n//******************************************************************************\n\nelse\n    {\n        msg2 = msg;\n        msg2.payload = Number(msg2.payload).toFixed(1);\n        msg2.payload = parseFloat(msg2.payload);\n        global.set(\"T_outside_custom\",msg2.payload,\"file\");\n        \n        if (TOP76_Heating_Mode === 0)    // Compensation Curve\n            {\n                context.set('StartTime',CurrentTime);\n                msg99.payload = \"Custom outside temperature sensor FOUND, but not used. Heatpump is in compensation mode (WAR) and using TOP14\";\n                return [null,msg99,msg2,null];\n            }\n            \n        if (TOP76_Heating_Mode === 1)    // Direct\n            {\n                context.set('StartTime',CurrentTime);\n                msg3.payload = msg2.payload;\n                msg3.topic = \"custom sensor\";\n                msg99.payload = \"Custom outside temperature sensor FOUND and used\";// (\" + msg2.payload + \"°C)\";\n                global.set('T_outside',msg3.payload,\"file\");\n                return [null,msg99,msg2,msg3];\n            }\n    }\n",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 180,
        "wires": [
            [],
            [
                "ea89c213947bdf26"
            ],
            [],
            [
                "d6a9c376dde9c43f"
            ]
        ],
        "outputLabels": [
            "panasonic_heat_pump/main/Outside_Temp output",
            "To log",
            "custom sensor output",
            "Final output"
        ]
    },
    {
        "id": "303e9746fe17030f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP6_Main_Outlet_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(2);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP6_Main_Outlet_Temp';\nglobal.set(\"TOP6_Main_Outlet_Temp\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2460,
        "wires": [
            [
                "35ca9241fc9fc7a1"
            ]
        ]
    },
    {
        "id": "d613171223cb64d2",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP5_Main_Inlet_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(2);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = \"TOP5_Main_Inlet_Temp\";\nglobal.set(\"TOP5_Main_Inlet_Temp\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 2400,
        "wires": [
            [
                "905527b22aae9dc8"
            ]
        ]
    },
    {
        "id": "b1bc9035edfd596b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "Block?",
        "func": "if (global.get('MQTT', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 5380,
        "wires": [
            [
                "1d2e261567b2acba"
            ],
            [
                "ae97f18776a1de28"
            ]
        ]
    },
    {
        "id": "ae97f18776a1de28",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2245,
        "y": 5400,
        "wires": []
    },
    {
        "id": "6c685782864f1787",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP26 - panasonic_heat_pump/main/Defrosting_State",
        "mode": "link",
        "links": [
            "1ebb1a2803291fd7",
            "29daf0bbd602db4f",
            "4f37968e1a1ebacc",
            "702993e29cd93413",
            "afa5bf9f7c3531bc",
            "c24406bef1e6355d",
            "ffa2e7745e5aed4c"
        ],
        "x": 1315,
        "y": 4020,
        "wires": []
    },
    {
        "id": "3adf2738c40e2c50",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "group": "9b8ec8b1b9f66309",
        "order": 41,
        "width": 8,
        "height": 1,
        "name": "text: In DIRECT mode, the water temperature high is variable",
        "label": "<font color=gray>In Compensation Curve mode, the water temperature is variable</font>",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 740,
        "y": 5600,
        "wires": []
    },
    {
        "id": "5053e21b4c187e48",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "msg.source mqtt",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "mqtt",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 2160,
        "wires": [
            [
                "7ae9d386f40efb4d"
            ]
        ]
    },
    {
        "id": "2063c96f1ba07327",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 770,
        "y": 2160,
        "wires": [
            [
                "5053e21b4c187e48",
                "9dad0ebe8e5b9c2a",
                "b28a85e192c0263e",
                "c339f5836ed9c333"
            ]
        ]
    },
    {
        "id": "5f7b921ab9a4ce7c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "to log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1515,
        "y": 2080,
        "wires": []
    },
    {
        "id": "61ed1c56d1ec2c21",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "300",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1230,
        "y": 2120,
        "wires": [
            [
                "72ecd08129670f6d"
            ]
        ]
    },
    {
        "id": "7a30c0f0dbf50e03",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "to switch Heatpump_State",
        "mode": "link",
        "links": [
            "071ac5a0f08a8fdb"
        ],
        "x": 1515,
        "y": 2120,
        "wires": []
    },
    {
        "id": "72ecd08129670f6d",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Reset VirtualState",
        "func": "global.set('VirtualState', undefined); //reset every time the state is changing\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1390,
        "y": 2120,
        "wires": [
            [
                "7a30c0f0dbf50e03"
            ]
        ]
    },
    {
        "id": "7ae9d386f40efb4d",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "Filter",
        "func": "var VirtualState = global.get('VirtualState');  // Memory Only\nif (msg.payload == VirtualState) return null;   // only send if needed\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 2160,
        "wires": [
            [
                "a0d8b4706f8d61b1",
                "61ed1c56d1ec2c21"
            ]
        ]
    },
    {
        "id": "d593fd3f7b87de1c",
        "type": "complete",
        "z": "a938de76db0b71f6",
        "name": "",
        "scope": [
            "31085c7b9968960b"
        ],
        "uncaught": false,
        "x": 790,
        "y": 1800,
        "wires": [
            [
                "987d38642eaa3c4c"
            ]
        ]
    },
    {
        "id": "90ec77dc04772b5c",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 820,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "3c0adb2ef465094a",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 1040,
        "wires": [
            [
                "1a9b736187a463f7"
            ]
        ]
    },
    {
        "id": "d44ff20770c3e9a1",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "20",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 1560,
        "wires": [
            [
                "d53e66c37991fa8e"
            ]
        ]
    },
    {
        "id": "3f0803a3a230aca2",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link in WAR2DIRECT function Z1",
        "links": [
            "0380b395668eee8e",
            "8987f5b6cd22b0be",
            "a7d4b11b9c045f95"
        ],
        "x": 205,
        "y": 780,
        "wires": [
            [
                "d4cd561c0ac4473e"
            ]
        ]
    },
    {
        "id": "899964bbc5334847",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link in RTC Function z1",
        "links": [
            "a22898dfdc4ff0ca"
        ],
        "x": 205,
        "y": 960,
        "wires": [
            [
                "47f8da37ddbb8a39"
            ]
        ]
    },
    {
        "id": "126583bf986bb2c7",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Link in SoftStart function T",
        "links": [
            "35ca9241fc9fc7a1",
            "905527b22aae9dc8"
        ],
        "x": 165,
        "y": 1480,
        "wires": [
            [
                "e4932a30dba95577"
            ]
        ]
    },
    {
        "id": "92b75262811f09f9",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 1300,
        "wires": [
            [
                "1cbf3f3272baec48"
            ]
        ]
    },
    {
        "id": "44d83d4e58d63689",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "link in Nightreduction Function Z1",
        "links": [
            "6815e3004fa8b341",
            "b91f0b27e28d647b",
            "d283d9a5d5181aed"
        ],
        "x": 165,
        "y": 1220,
        "wires": [
            [
                "1cbf3f3272baec48"
            ]
        ]
    },
    {
        "id": "add6fa4d403dd143",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "Calculate new SP Zone 1 + 2",
        "func": "/*\nThis function has the purpose to regularly check the actual SP from the heatpump against the calculated setpoint in from the dashboard/functions. \nOnly when there is a deviation between the two, the new setpoint gets sent through MQTT to SET5 / SET7.\n*/\n//*****************************************************************************\nvar msg1 = {};        // pin 1 - SP_Final_z1\n    msg1.topic = \"SP_Final_z1\";\nvar msg2 = {};        // pin 2 - SHIFT_Final_z1\n    msg2.topic = \"Shift_z1\";\nvar msg3 = {};        // pin 3 - SP_Final_z2\n    msg3.topic = \"SP_Final_z2\";\nvar msg4 = {};        // pin 4 - SHIFT_Final_z2\n    msg4.topic = \"Shift_z2\";\nvar msg99={};         // pin 5 - To Log\n\n\n// return [SP_Z1,shift_Z1,SP_Z2,shift_Z2,toLog]\n//\n// Getting all the relevant zone 1 and zone 2 variables\n//\nvar SP_Start_z1         = global.get('F_CCC.z1.SP_DIRECT_virt', \"file\");\nvar SP_Start_z2         = global.get('F_CCC.z2.SP_DIRECT_virt', \"file\");\n    if (SP_Start_z1     === undefined) { return null; }\n    if (SP_Start_z2     === undefined) { return null; }\n\nvar F_CCC_state_z1      = global.get('F_CCC.z1.state', \"file\");\nvar F_CCC_state_z2      = global.get('F_CCC.z2.state', \"file\");\n    if (F_CCC_state_z1  === undefined) { F_CCC_state_z1 = 0; }\n    if (F_CCC_state_z2  === undefined) { F_CCC_state_z2 = 0; }\n    \nvar F_CCC_SP_z1         = global.get('F_CCC.z1.setpoint', \"file\");\nvar F_CCC_SP_z2         = global.get('F_CCC.z2.setpoint', \"file\");\n    if (F_CCC_SP_z1     === undefined) { return null; }\n    if (F_CCC_SP_z2     === undefined) { return null; }\n\nvar F_RTC_state_z1      = global.get('F_RTC.z1.state', \"file\");\nvar F_RTC_state_z2      = global.get('F_RTC.z2.state', \"file\");\n    if (F_RTC_state_z1  === undefined) { F_RTC_state_z1 = 0; }\n    if (F_RTC_state_z2  === undefined) { F_RTC_state_z2 = 0; }\n        \nvar F_RTC_correction_z1 = global.get('F_RTC.z1.correction_value', \"file\");\nvar F_RTC_correction_z2 = global.get('F_RTC.z2.correction_value', \"file\");\n    if (F_RTC_correction_z1 === undefined) { return null; }\n    if (F_RTC_correction_z2 === undefined) { return null; }\n\nvar F_SS_state          =global.get('F_SS.state',\"file\");\n        if (F_SS_state === undefined) { F_SS_state=0; }\n        \nvar F_SS_correction     =global.get('F_SS.correction_value',\"file\");\n    if (F_SS_correction===undefined) { return null; }\n\nvar F_NR_state          =global.get('NightReductionWaterTemp.state',\"file\");\n    if (F_NR_state === undefined) {F_NR_state=0;}\n        \nvar F_NR_correction     =global.get('NightReductionWaterTemp.correction',\"file\");\n    if (F_NR_correction === undefined) {return null;}\n\n/*\nvar current_sp_z1 = global.get('TOP42_Z1_Water_Target_Temp',\"file\");\nvar current_sp_z2 = global.get('TOP43_Z2_Water_Target_Temp', \"file\");\n*/\n//var current_sp_z1 = global.get('SP_Final_z1', \"file\");\nvar current_sp_z1 = global.get('TOP42_Z1_Water_Target_Temp', \"file\");\nif (current_sp_z1 === undefined || isNaN(current_sp_z1)) {\n    global.set('SP_Final_z1', 20, \"file\");\n}\n\n//var current_sp_z2 = global.get('SP_Final_z2', \"file\");\nvar current_sp_z2 = global.get('TOP43_Z2_Water_Target_Temp', \"file\");\nif (current_sp_z2 === undefined || isNaN(current_sp_z2)) {\n    global.set('SP_Final_z2', 20, \"file\");\n}\n\nvar TOP76_Heating_Mode        =global.get('TOP76_Heating_Mode',\"file\");\n    if (TOP76_Heating_Mode === undefined) { return null; }\n\nvar Operating_Mode      =global.get('TOP4_Operating_Mode_State',\"file\");\n\nvar HEAT_SP_lower_limit =global.get('HEAT_SP_lower_limit',\"file\");\n    if (HEAT_SP_lower_limit === undefined)  {HEAT_SP_lower_limit = 20;}\n    \nvar HEAT_SP_upper_limit =global.get('HEAT_SP_upper_limit',\"file\");\n    if (HEAT_SP_upper_limit === undefined)  {HEAT_SP_upper_limit = 100;}\n\nvar TOP94_Zones_State = global.get(\"TOP94_Zones_State\", \"file\")\n    if (TOP94_Zones_State === undefined) { return null; }\n\n// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n//*****************************************************************************\nif (Operating_Mode === undefined || \n    Operating_Mode === 1 || \n    //Operating_Mode === 3 || \n    Operating_Mode === 5 || \n    Operating_Mode === 7 || \n    Operating_Mode === 8\n    ) {\n    return null;\n}\n//*****************************************************************************\n//*****************************************************************************\n\n\n///////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////\nif (TOP76_Heating_Mode === 1)                        // Direct mode\n    { \n        var SP_Final_z1 = 20;\n        var SP_Final_z2 = 20;\n        var SHIFT_Final_z1 = -5\n        var SHIFT_Final_z2 = -5\n\n        //*****************************************************************************\n        if (TOP94_Zones_State === 0 || TOP94_Zones_State === 2 ) {\n        // Zone 1 calculation\n            msg99.topic = \"Functions Final setpoint (Zone 1)\";        // ToLog    \n            \n            SP_Final_z1 = SP_Start_z1        \n            if (F_CCC_state_z1 === 1)                { SP_Final_z1   = F_CCC_SP_z1; }\n            if (F_RTC_state_z1 === 1)                { SP_Final_z1   = SP_Final_z1 + F_RTC_correction_z1; }\n            if (F_NR_state === 1)                    { SP_Final_z1   = SP_Final_z1 + F_NR_correction; }\n            if (F_SS_state === 1)                    { SP_Final_z1   = SP_Final_z1 + F_SS_correction; }\n            if (SP_Final_z1 < HEAT_SP_lower_limit)  { SP_Final_z1   = HEAT_SP_lower_limit; }\n            if (SP_Final_z1 > HEAT_SP_upper_limit)  { SP_Final_z1   = HEAT_SP_upper_limit; }\n            if (SP_Final_z1 < 20)                   { SP_Final_z1   = 20; }\n        \n            SP_Final_z1 = parseFloat(SP_Final_z1); \n            SP_Final_z1 = (Math.round(SP_Final_z1 * 10)) / 10;\n\n            if (Math.ceil(SP_Final_z1) !== current_sp_z1) { \n                msg1.payload    = SP_Final_z1;\n                msg99.payload = \"Current zone 1 setpoint: \" + Math.ceil(current_sp_z1) + \" °C. Calculated new setpoint: <b>\" + Math.ceil(SP_Final_z1) + \"</b> °C\";\n                node.send([msg1, null, null, null, msg99])\n            }\n        }\n        //*****************************************************************************\n        if (TOP94_Zones_State === 1 || TOP94_Zones_State === 2) {\n        // Zone 2 calculation\n            msg99.topic = \"Functions Final setpoint (Zone 2)\";        // ToLog\n\n            SP_Final_z2 = SP_Start_z2\n            if (F_CCC_state_z2 === 1)                { SP_Final_z2 = F_CCC_SP_z2; }\n            if (F_RTC_state_z2 === 1)                { SP_Final_z2 = SP_Final_z2 + F_RTC_correction_z2; }\n            if (F_NR_state === 1)                    { SP_Final_z2 = SP_Final_z2 + F_NR_correction; }\n            if (F_SS_state === 1)                    { SP_Final_z2 = SP_Final_z2 + F_SS_correction; }\n            if (SP_Final_z2 < HEAT_SP_lower_limit)  { SP_Final_z2 = HEAT_SP_lower_limit; }\n            if (SP_Final_z2 > HEAT_SP_upper_limit)  { SP_Final_z2 = HEAT_SP_upper_limit; }\n            if (SP_Final_z2 < 20)                   { SP_Final_z2 = 20; }\n\n            SP_Final_z2 = parseFloat(SP_Final_z2); \n            SP_Final_z2 = (Math.round(SP_Final_z2 * 10)) / 10;\n            \n\n            if (Math.ceil(SP_Final_z2) !== current_sp_z2) {\n                msg3.payload = SP_Final_z2;\n                msg99.payload = \"Current zone 2 setpoint: \" + Math.ceil(current_sp_z2) + \" °C. Calculated new setpoint: <b>\" + Math.ceil(SP_Final_z2) + \"</b> °C\";\n                node.send([null, null, msg3, null, msg99])\n            }\n        }\n\n        global.set('SP_Final_z1', SP_Final_z1, \"file\");\n        global.set('SP_Final_z2', SP_Final_z2, \"file\");\n        global.set('SP_Final',Math.max(SP_Final_z1,SP_Final_z2),\"file\");\n        \n        SHIFT_Final_z1 = (Math.round((SP_Final_z1 - F_CCC_SP_z1) * 10)) / 10;\n        SHIFT_Final_z2 = (Math.round((SP_Final_z2 - F_CCC_SP_z2) * 10)) / 10;\n\n        if (TOP94_Zones_State === 0) { var SHIFT_Final_z2 = -5 }\n        if (TOP94_Zones_State === 1) { var SHIFT_Final_z1 = -5 }\n\n        global.set('SHIFT_Final_z1', SHIFT_Final_z1,\"file\");\n        global.set('SHIFT_Final_z2', SHIFT_Final_z2, \"file\");\n\n        var SHIFT_Final = Math.max(SHIFT_Final_z1, SHIFT_Final_z2)\n        global.set('SHIFT_Final', SHIFT_Final, \"file\");\n        \n        return null;\n\n    }\n\n///////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////\nif (TOP76_Heating_Mode === 0)                        // Compensation Curve mode\n{  \n    var SHIFT_Final_z1 = -5;\n    var SHIFT_Final_z2 = -5;\n        //*****************************************************************************\n        if (TOP94_Zones_State === 0 || TOP94_Zones_State === 2) {\n        // Zone 1 calculation\n            msg99.topic = \"Functions Final setpoint (Zone 1)\";        // ToLog\n            \n            var SHIFT_Final_z1_old = global.get('SHIFT_Final_z1',\"file\");\n                if (SHIFT_Final_z1_old === undefined) { SHIFT_Final_z1_old = 0; }\n\n            if (F_RTC_state_z1 === 0)    { F_RTC_correction_z1 = 0; }\n            if (F_SS_state === 0)        { F_SS_correction = 0; }\n            if (F_NR_state === 0)        { F_NR_correction = 0; }\n\n            SHIFT_Final_z1 = (Math.round((SP_Start_z1 + F_RTC_correction_z1 + F_NR_correction + F_SS_correction) * 10 )) / 10\n            \n            if (SHIFT_Final_z1 < -5)    {SHIFT_Final_z1 = -5;}\n            if (SHIFT_Final_z1 > 5)     {SHIFT_Final_z1 = 5;}\n\n            if (SHIFT_Final_z1_old !== SHIFT_Final_z1) { \n                global.set('SHIFT_Final_z1', SHIFT_Final_z1, \"file\"); \n                msg99.payload   = \"Current zone 1 temperature shift: \" + Math.ceil(SHIFT_Final_z1_old) + \" °C. Calculated new temperature shift:  \" + Math.ceil(SHIFT_Final_z1) + \" °C\";\n                msg2.payload = SHIFT_Final_z1;\n                \n                node.send([null, msg2, null, null, msg99])\n            }\n\n            SP_Final_z1 =  (Math.round((F_CCC_SP_z1 + SHIFT_Final_z1) * 10)) / 10;\n            global.set('SP_Final_z1',SP_Final_z1,\"file\");\n        }\n\n        //*****************************************************************************\n        if (TOP94_Zones_State === 1 || TOP94_Zones_State === 2) {\n        // Zone 2 calculation\n            msg99.topic = \"Functions Final setpoint (Zone 2)\";        // ToLog\n            \n            var SHIFT_Final_z2_old = global.get('SHIFT_Final_z2',\"file\");\n                if (SHIFT_Final_z2_old === undefined) { SHIFT_Final_z2_old = 0; }\n            \n            if (F_RTC_state_z2 === 0)    { F_RTC_correction_z2 = 0; }\n            if (F_SS_state === 0)        { F_SS_correction = 0; }\n            if (F_NR_state === 0)        { F_NR_correction = 0; }\n            \n            SHIFT_Final_z2 = (Math.round((SP_Start_z2 + F_RTC_correction_z2 + F_NR_correction + F_SS_correction) * 10 )) / 10;\n\n            if (SHIFT_Final_z2 < -5)    {SHIFT_Final_z2 = -5;}\n            if (SHIFT_Final_z2 > 5)     {SHIFT_Final_z2 = 5;}\n\n            if (SHIFT_Final_z2_old !== SHIFT_Final_z2) { \n                global.set('SHIFT_Final_z2', SHIFT_Final_z2, \"file\"); \n                msg99.payload   = \"Current zone 2 temperature shift: \" + Math.ceil(SHIFT_Final_z2_old) + \" °C. Calculated new temperature shift:  \" + Math.ceil(SHIFT_Final_z2) + \" °C\";\n                msg4.payload = SHIFT_Final_z2;\n                node.send([null, null, null, msg4, msg99])\n            }\n\n            SP_Final_z2 = (Math.round((F_CCC_SP_z2 + SHIFT_Final_z2) * 10)) / 10;\n            global.set('SP_Final_z2',SP_Final_z2,\"file\");\n        }\n        \n        var SHIFT_Final = Math.max(SHIFT_Final_z1,SHIFT_Final_z2);\n        global.set('SHIFT_Final',SHIFT_Final,\"file\");\n\n        if (TOP94_Zones_State === 0) {var SP_Final_z2 = 20 }\n        if (TOP94_Zones_State === 1) {var SP_Final_z1 = 20 }\n\n        var SP_Final = Math.max(SP_Final_z1,SP_Final_z2);\n        global.set('SP_Final',SP_Final,\"file\")\n\n        return null;\n}\n//*****************************************************************************\n//*****************************************************************************\n\n",
        "outputs": 5,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 1800,
        "wires": [
            [
                "93404b62f7fb0fb2",
                "76a161da01cebe9c",
                "76f0c3b9cb8a59bb"
            ],
            [
                "93404b62f7fb0fb2",
                "76a161da01cebe9c",
                "76f0c3b9cb8a59bb"
            ],
            [
                "55c2987b65b423c8",
                "76a161da01cebe9c"
            ],
            [
                "55c2987b65b423c8",
                "76a161da01cebe9c"
            ],
            [
                "663fd79ce5a1610d"
            ]
        ],
        "outputLabels": [
            "SP_Final_Z1",
            "Shift to SET5 (Zone 1)",
            "SP_Final_Z2",
            "Shift to SET7 (Zone 2)",
            "ToLog"
        ]
    },
    {
        "id": "8b1072427fdbc1e0",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 450,
        "y": 740,
        "wires": [
            [
                "36856525108ec859"
            ]
        ]
    },
    {
        "id": "16054e8334890ad8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Link out - F_SS.state",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "4c49268a7054041c",
            "7db58dec4e2e21ad"
        ],
        "x": 1685,
        "y": 1500,
        "wires": []
    },
    {
        "id": "d16f38ef74db786a",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "SP_WAR (function on) Z1",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "080c11bcc5a2ac73"
        ],
        "x": 1605,
        "y": 800,
        "wires": []
    },
    {
        "id": "18fd7ac120089042",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Correction_1_RTC Z1",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "e6999514a091fd05"
        ],
        "x": 1605,
        "y": 920,
        "wires": []
    },
    {
        "id": "93404b62f7fb0fb2",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "SP_Final z1",
        "mode": "link",
        "links": [
            "02f25651d70831c9"
        ],
        "x": 1525,
        "y": 1780,
        "wires": []
    },
    {
        "id": "34cc66e23b5eec55",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1685,
        "y": 1560,
        "wires": []
    },
    {
        "id": "663fd79ce5a1610d",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1490,
        "y": 1560,
        "wires": [
            [
                "34cc66e23b5eec55"
            ]
        ]
    },
    {
        "id": "c54efadb07816cb9",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "SP RTC result Z1",
        "mode": "link",
        "links": [],
        "x": 1605,
        "y": 960,
        "wires": []
    },
    {
        "id": "e9d9dc531d3b166d",
        "type": "complete",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "scope": [
            "0d996033de2ed84e"
        ],
        "uncaught": false,
        "x": 260,
        "y": 1000,
        "wires": [
            [
                "1a9b736187a463f7"
            ]
        ]
    },
    {
        "id": "4369249a4c68c277",
        "type": "complete",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "scope": [
            "2ade66982bca360c",
            "498550a5a539214f"
        ],
        "uncaught": false,
        "x": 230,
        "y": 1260,
        "wires": [
            [
                "1cbf3f3272baec48"
            ]
        ]
    },
    {
        "id": "51526ab18642b30b",
        "type": "complete",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "scope": [
            "c5506b5fe3e4d571"
        ],
        "uncaught": false,
        "x": 230,
        "y": 1520,
        "wires": [
            [
                "d53e66c37991fa8e"
            ]
        ]
    },
    {
        "id": "346a3528a7770803",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link out 6 Z1",
        "mode": "link",
        "links": [
            "071ac5a0f08a8fdb",
            "d9b3ca8bfaa4c10a"
        ],
        "x": 1605,
        "y": 1000,
        "wires": []
    },
    {
        "id": "fab44b5501eca10e",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link out 7 Z1",
        "mode": "link",
        "links": [
            "d9b3ca8bfaa4c10a",
            "f76db0ea91c39edd"
        ],
        "x": 1605,
        "y": 1040,
        "wires": []
    },
    {
        "id": "fd481458ee82463b",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "name": "Result",
        "info": "",
        "x": 770,
        "y": 1720,
        "wires": []
    },
    {
        "id": "c477f38740192ea9",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "ToLog",
        "info": "",
        "x": 1790,
        "y": 1560,
        "wires": []
    },
    {
        "id": "7bd31985b9223517",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "FUNCTIONS",
        "info": "",
        "x": 1070,
        "y": 760,
        "wires": []
    },
    {
        "id": "cc0bfd5240e5cd1c",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Triggers",
        "info": "",
        "x": 200,
        "y": 660,
        "wires": []
    },
    {
        "id": "eca1e570e844713e",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "name": "SUM OF ALL ZONE 1 FUNCTIONS",
        "info": "",
        "x": 1300,
        "y": 1720,
        "wires": []
    },
    {
        "id": "36856525108ec859",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 740,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "c3a9e17b02222cee",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link in RTC Function1 Z1",
        "links": [
            "7430c37f5c30419b",
            "aad17e70a817393e",
            "b62de7b7b1c2c0b6",
            "c3c748a1b5f04d42",
            "e17b09af13812496"
        ],
        "x": 205,
        "y": 920,
        "wires": [
            [
                "bedbded591fa9076"
            ]
        ]
    },
    {
        "id": "bedbded591fa9076",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 520,
        "y": 920,
        "wires": [
            [
                "1a9b736187a463f7"
            ]
        ]
    },
    {
        "id": "d4cd561c0ac4473e",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "pauseType": "queue",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 650,
        "y": 780,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "4051d3cb1ad86dbd",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link in 8 Z1",
        "links": [
            "d6a9c376dde9c43f"
        ],
        "x": 205,
        "y": 740,
        "wires": [
            [
                "8b1072427fdbc1e0"
            ]
        ]
    },
    {
        "id": "0ccf5d93deef2e68",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "pauseType": "queue",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 470,
        "y": 1400,
        "wires": [
            [
                "d53e66c37991fa8e",
                "71a546a3b074148f",
                "dfca926433d18402"
            ]
        ]
    },
    {
        "id": "4c81e32b9d30b212",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Link in SoftStart function GUI",
        "links": [
            "84f7cbc2cc8c135d",
            "b1118094796c2de3"
        ],
        "x": 165,
        "y": 1400,
        "wires": [
            [
                "0ccf5d93deef2e68"
            ]
        ]
    },
    {
        "id": "549c557827b37714",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1470,
        "y": 980,
        "wires": [
            [
                "663fd79ce5a1610d"
            ]
        ]
    },
    {
        "id": "0d996033de2ed84e",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Function CCC (zone1)",
        "func": "// All these functions ONLY need to be executed when the heatpump is in HEAT mode. \nvar msg1 = {};        //  pin 1 - SP_CCC (function on)\nvar msg99 = {};        //  pin 2 - Log information\n\n//******************************************************************************\nvar TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');                    // Get the global variable for current possition of the three way valve. ROOM or DHW mode. (0=HEAT / 1=DHW)\n\tif (TOP20_ThreeWay_Valve_State === undefined) { return null; }\nvar Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\");\n\tif (Operating_Mode === undefined) { return null; }\nvar current_sp = global.get('TOP42_Z1_Water_Target_Temp', \"file\");                        // TOP27 >> TOP42\n\tif (current_sp === undefined) { return null; }\nvar TOP76_Heating_Mode = global.get('TOP76_Heating_Mode', \"file\");                     // TOP76 - Compensation curve or DIRECT mode\n\tif (TOP76_Heating_Mode === undefined) { return null ; }\nvar ccc_state = global.get('F_CCC.z1.state', \"file\");          // Get the global variable. Used to see if the WAR function is enabled.\n\tif (ccc_state === undefined) { ccc_state = 0; global.set('F_CCC.z1.state', 0, \"file\"); }\nvar TOP94_Zones_State = global.get(\"TOP94_Zones_State\",\"file\");\n    if (TOP94_Zones_State === undefined) { return null ; }\n\n\n//******************************************************************************\nvar war_ot1 = global.get('F_CCC.z1.ot1', \"file\");                             // Outside temperature high         (warm outside)\nvar war_ot2 = global.get('F_CCC.z1.ot2', \"file\");                             // Outside temperature intermediate (intermediate outside temperature)\nvar war_ot3 = global.get('F_CCC.z1.ot3', \"file\");                             // Outside temperature low          (cold outside)\n\nvar war_wt1 = global.get('F_CCC.z1.wt1', \"file\");                             // Water temperature low            (cold water)\nvar war_wt2 = global.get('F_CCC.z1.wt2', \"file\");                             // Water temperature intermediate   (intermediate water temperature)\nvar war_wt3 = global.get('F_CCC.z1.wt3', \"file\");                             // Water temperature high           (warm water)\n\n//******************************************************************************\n\nvar SP_start = global.get('F_CCC.z1.SP_DIRECT_virt', \"file\");                       // Get the global variable for SP_DIRECT_virt. Value is set through the dashboard\nif (TOP76_Heating_Mode === 1 && (SP_start < 20 || SP_start === undefined || TOP94_Zones_State === 1)) {\n    SP_start = 20;\n    global.set('F_CCC.z1.SP_DIRECT_virt', 20, \"file\");\n}\nif (TOP76_Heating_Mode === 0 && (SP_start > 5 || SP_start === undefined || TOP94_Zones_State === 1)) {\n    SP_start = -5;\n    global.set('F_CCC.z1.SP_DIRECT_virt', 0, \"file\");\n}\n\n\nvar check = (war_ot1 + war_ot2 + war_ot3 + war_wt1 + war_wt2 + war_wt3);\nif (isNaN(check) || check === undefined)     // if the variables are added to eachother and the result is Not a Number, produce an error message.\n{\n    msg99.payload = \"<font color=red>Profile temperatures are not correctly set in the dashboard. Waiting for Panasonic import or user input</font>\";\n    msg99.topic = \"Function CCC (Zone 1)\";\n    global.set('F_CCC.z1.state', 0, \"file\");\n    global.set('F_CCC.z1.setpoint', SP_start, \"file\");\n    return [null, msg99];\n}\n\nif (war_wt2 < war_wt1 || war_wt3 < war_wt1) {\n    msg99.payload = \"<font color=red>Temperature profile is inverted and not setup correctly. This requires your attention. CCC-function disabled</font>\";\n    msg99.topic = \"Function CCC (Zone 1)\";\n    global.set('F_CCC.z1.state', 0, \"file\");\n    global.set('F_CCC.z1.setpoint', SP_start, \"file\");\n    return [null, msg99, msg99];\n}\n\nvar SP_ccc;                                                                     // set empty starting variable\n\nvar war_Tb = global.get('T_outside', \"file\");                           // Outdoor temperature.\nif (isNaN(war_Tb) || war_Tb === undefined || war_Tb < -50)             // if the variable is Not a Number, produce an error message.\n{\n    msg99.payload = \"T_outside is not valid. Waiting for correct value.\";\n    msg99.topic = \"Function CCC (Zone 1)\";\n    //global.set('F_CCC.z1.setpoint', SP_start, \"file\");\n    return [null, msg99, msg99];\n}\n\nvar F_CCC_old_SP = global.get('F_CCC.z1.setpoint',\"file\");\nif (F_CCC_old_SP === undefined) {\n    F_CCC_old_SP = SP_start;\n    global.set('F_CCC.z1.setpoint', SP_start, \"file\");\n}\n\n\n////////////////////////////////////////////////////////////////////////////////\n//      Calculation of the NR WAR Setpoint\n////////////////////////////////////////////////////////////////////////////////\n\n\n\nif (war_Tb >= war_ot1) { SP_ccc = war_wt1; }                                         // Range 1\n\nif (war_Tb < war_ot1 && war_Tb > war_ot2)                       // Range 2\n{ SP_ccc = (((war_wt1 - war_wt2) * ((war_Tb - war_ot1) / (war_ot1 - war_ot2))) + war_wt1); }\n\n\nif (war_Tb <= war_ot2 && war_Tb > war_ot3)                      // Range 3\n{ SP_ccc = (((war_wt2 - war_wt3) * ((war_Tb - war_ot2) / (war_ot2 - war_ot3))) + war_wt2); }\n\nif (war_Tb <= war_ot3)                                          // Range 4\n{ SP_ccc = war_wt3; }\n\nSP_ccc = Number(SP_ccc).toFixed(1);\nSP_ccc = parseFloat(SP_ccc);\n\n\n////////////////////////////////////////////////////////////////////////////////\n//      Compensation curve being used. WAR function not allowed.\n////////////////////////////////////////////////////////////////////////////////\nif (TOP76_Heating_Mode === 0) {                    // Compensation Curve\n    if (ccc_state === 1) {\n        global.set('F_CCC.z1.state', 0, \"file\");\n        msg99.payload = \"Compensation curve active. Using internal Panasonic WAR function. NodeRed WAR function is now disabled\";\n        msg99.topic = \"Function CCC (Zone 1)\";\n        return [null, msg99];\n    }\n    //if (ccc_state === 0 || ccc_state === undefined) { SP_ccc = SP_start; }\n    global.set('F_CCC.z1.setpoint', SP_ccc,\"file\");\n    msg1.payload = SP_ccc;\n    return [msg1, null];\n}\n////////////////////////////\n\n// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n////////////////////////////////////////////////////////////////////////////////\n//      Direct mode > WAR function allowed.\n////////////////////////////////////////////////////////////////////////////////\nif (TOP76_Heating_Mode === 1) {                // Direct\n        if (Operating_Mode === undefined || \n            current_sp === 0 || \n            Operating_Mode === 1 || \n            //Operating_Mode === 3 || \n            Operating_Mode === 5 || \n            Operating_Mode === 7 || \n            Operating_Mode === 8\n        ){\n            return null;                                                        // If state is 1 (DHW mode), correction 0 is direclty exported to the message and the function ends here.\n        }\n\n    msg1.payload = SP_ccc;                                                         // required\n    msg1.topic = 'SP_war';\n    msg1.source = 'WAR';\n\n    if (ccc_state === 0) {                                            // If the state is 1 (enabled), AND outside temperature contains a value.\n        global.set('F_CCC.z1.setpoint', SP_start,\"file\");\n        msg1.payload = SP_start;\n        return [msg1, null];\n    }\n\n    if (ccc_state === 1) {\n        msg1.payload = SP_ccc;\n        if (SP_ccc === F_CCC_old_SP) {\n            return [msg1, null];\n        }\n        else {\n            global.set('F_CCC.z1.setpoint', SP_ccc,\"file\");\n\n            msg99.payload = \"Setpoint change: From \" + F_CCC_old_SP + \" to \" + SP_ccc + \" °C\";\n            msg99.topic = \"Function CCC (Zone 1)\";\n\n            return [msg1, msg99];\n        }\n    }\n    ////////////////////////////////////////////////////////////////////////////////\n\n}",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 820,
        "wires": [
            [
                "d16f38ef74db786a"
            ],
            [
                "663fd79ce5a1610d"
            ],
            [
                "e06c72be3ce79609"
            ]
        ],
        "outputLabels": [
            "SP_WAR (function on)",
            "ToLog",
            "ToToggle_CCC"
        ],
        "info": "# ALL IN ONE FUNCTION\n\nThis function takes care of WAR, RTC and SoftStart. Comments are within"
    },
    {
        "id": "2ade66982bca360c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Function RTC correction (Zone 1)",
        "func": "var Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\");\nvar TOP69_Sterilization_State = global.get('TOP69_Sterilization_State', \"file\");\n\n// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\nif (Operating_Mode === undefined || \n    Operating_Mode === 1 || \n    //Operating_Mode === 3 || \n    Operating_Mode === 5 || \n    Operating_Mode === 7 || \n    Operating_Mode === 8 || \n    TOP69_Sterilization_State === 1\n    ) {\n    return null;\n}\n\nelse {\n    var msg1 = {};    // pin 1 - current correction\n    var msg2 = {};    // pin 2 - current sp\n    var msg99 = {};   // pin 3\n    msg99.topic = \"Function RTC (Zone 1)\";\n    var msg3 = {};    //  pin 4 - start sp\n\n    var F_RTC = global.get('F_RTC', \"file\");\n    if (F_RTC === undefined) { F_RTC = {}; }\n    if (F_RTC.z1 === undefined) { global.set('F_RTC.z1.state',0,\"file\"); }\n\n    //if (F_RTC.z1.state === undefined) { return null; }\n\n    var F_RTC_old_correction = global.get('F_RTC.z1.correction_value', \"file\");\n    if (F_RTC_old_correction === undefined) { F_RTC_old_correction = 0; global.set('F_RTC.z1.correction_value', 0, \"file\"); }\n\n    var F_CCC_SP = global.get('F_CCC.z1.setpoint',\"file\");\n    if (F_CCC_SP === undefined) { return null; }\n\n    if (F_RTC.z1.state === 0 || F_RTC.z1.state === undefined) {\n        rtc_correction = 0;               // If RTC is disabled, set correction to 0. end if\n        msg1.payload = rtc_correction;\n        msg1.topic = \"rtc_correction (Z1)\";\n\n        msg2.payload = F_CCC_SP + rtc_correction;\n        msg2.topic = \"SP RTC result\";\n\n        msg3.payload = F_CCC_SP;\n        msg3.topic = \"Start SP\";\n\n        global.set('F_RTC.z1.correction_value', rtc_correction, \"file\");\n        return [msg1, msg2, null, msg3];\n\n    }\n\n    else {\n\n        // Declaration of variables including their values.    \n        var rtc_correction = 0;                                                // declare local variable, start with value zero\n        var rtc_PV = global.get('T_zone_1');                             // Get the global variable. THe room temperature for RoomTemperatureCompensation you want to control.\n        if (rtc_PV === undefined) {/*node.warn('RTC correction rtc_PV');*/return null; }\n        var rtc_SP = global.get('F_RTC.z1.setpoint', \"file\");                 // Virtual target temperature setpoint for RTC. Set in Dashboard.\n        if (rtc_SP === undefined) {/*node.warn('RTC correction rtc_SP');*/return null; }\n        //var rtc_Tb          = global.get('T_outside',\"file\");                   // Outdoor temperature.\n\n        var rtc_dT = (rtc_PV - rtc_SP);                                  // local variable for calculated temperature difference. If > 0 it is too warm, If < 0 it is too cold. \n        rtc_dT = Number(rtc_dT).toFixed(2);\n        rtc_dT = parseFloat(rtc_dT);\n        \n        //\n        // below are the variables containing the temperature ranges.\n        var rtc_t1 = F_RTC.z1.t1_limit;                      // Range +3\n        var rtc_t2 = F_RTC.z1.t2_limit;                      // Range +2\n        var rtc_t3 = F_RTC.z1.t3_limit;                      // Range +1\n\n        var rtc_t4 = F_RTC.z1.t4_limit;                      // Range -1\n        var rtc_t5 = F_RTC.z1.t5_limit;                      // Range -2\n        var rtc_t6 = F_RTC.z1.t6_limit;                      // Range -3\n        var rtc_t7 = F_RTC.z1.t7_limit;                      // Range -custom\n\n        var rtc_t7_custom_cor = F_RTC.z1.t7_correction_value;\n\n        if (isNaN(rtc_t1 + rtc_t2 + rtc_t3 + rtc_t4 + rtc_t5 + rtc_t6 + rtc_t7) === true)               // if the variables are added to eachother and the result is Not a Number, produce an error message.\n        {\n            msg99.payload = \"RTC function temperatures are not correctly set in the dashboard. Please correct this in the GUI.\";\n            return [null, null, msg99, null];\n        }\n        // ADJUST THE VALUES BELOW TO YOUR OWN SITUATION\n/*\n        if (rtc_dT >= rtc_t1) { rtc_correction = rtc_correction - 1; }                 // It is way too hot.\n        if (rtc_dT >= rtc_t2) { rtc_correction = rtc_correction - 1; }                 // It is too hot.\n        if (rtc_dT >= rtc_t3) { rtc_correction = rtc_correction - 1; }                 // It is a little too hot.\n\n        if (rtc_dT < rtc_t3 && rtc_dT > rtc_t4) { rtc_correction = 0; }                // It is right in the middle.... Nice\n\n        if (rtc_dT <= rtc_t4) { rtc_correction = rtc_correction + 1; }                 // It is a little too cold\n        if (rtc_dT <= rtc_t5) { rtc_correction = rtc_correction + 1; }                 // It is a little a fair bit colder\n        if (rtc_dT <= rtc_t6) { rtc_correction = 3; }                                  // It is a little way too cold\n*/\n        if (rtc_dT >= rtc_t1) { rtc_correction = F_RTC.z1.t1_correction; }                    // case 1: It is way too hot.\n        if (rtc_dT >= rtc_t2 && rtc_dT < rtc_t1) { rtc_correction = F_RTC.z1.t2_correction; } // case 2: It is too hot.\n        if (rtc_dT >= rtc_t3 && rtc_dT < rtc_t2) { rtc_correction = F_RTC.z1.t3_correction; } // case 3: It is a little too hot.\n\n        if (rtc_dT > rtc_t4 && rtc_dT < rtc_t3) { rtc_correction = 0; }                       // case 4: GOOOOD !!\n\n        if (rtc_dT > rtc_t5 && rtc_dT <= rtc_t4) { rtc_correction = F_RTC.z1.t4_correction; } // case 5: It is a little too cold\n        if (rtc_dT > rtc_t6 && rtc_dT <= rtc_t5) { rtc_correction = F_RTC.z1.t5_correction; } // case 6: It is a little a fair bit colder\n        if (rtc_dT > rtc_t7 && rtc_dT <= rtc_t6) { rtc_correction = F_RTC.z1.t6_correction; } // case 7: It is a way too cold\n        \n        // Use incremental_setpoints if switch enabled\n        var F_RTC_z1_incremental_setpoints_state = global.get('F_RTC.z1.incremental_setpoints_state', \"file\");    //switch on/off\n        if (F_RTC_z1_incremental_setpoints_state === undefined) { F_RTC_z1_incremental_setpoints_state = 0; }\n        if ((rtc_dT < rtc_t6 && rtc_dT > rtc_t7) && F_RTC_z1_incremental_setpoints_state === 1)                // in range (between +3 and +custom)\n        {\n            // calculate correction (between +3 and +custom):\n            rtc_correction = rtc_t7_custom_cor - F_RTC.z1.t6_correction;                                 // example (15-3)=12 degrees\n            // calculate temp range:\n            var Range = (rtc_t6 - rtc_t7); // -2.2 - -4.0 = 1.8                     //calculate No. steps    0.1 degrees steps?\n            Range = (Range * 10);                                                   // 18 steps\n            // devide rtc_correction through steps:\n            rtc_correction = (rtc_correction / Range);                              // 12 / 18 = 0.67 degrees-steps\n            // Calculate actual step:\n            var Actual_step = (rtc_t6 - rtc_dT) * 10;                               // stap 17 van 18\n            Actual_step = Number(Actual_step).toFixed(0);\n            // Apply correction at this step:\n            rtc_correction = (Actual_step * rtc_correction);                        // 18 * 0.67 = 11.32\n            rtc_correction = Number(rtc_correction).toFixed(1);                     // 11,3\n            rtc_correction = parseFloat(rtc_correction);\n            rtc_correction = rtc_correction + F_RTC.z1.t6_correction;                                     // 11.3 + 3 = 14.3\n            rtc_correction = Number(rtc_correction).toFixed(1);\n            rtc_correction = parseFloat(rtc_correction);\n            if (global.get('Debugging', \"file\") == 1) {                             // Show in log what incremental setpoint correction should be and continue:\n                msg99.payload = \"incremental setpoint correction at \" + rtc_PV + \"°C \" + \"--> \" + rtc_correction + \" °C\";\n                node.send([null, null, msg99, null]); // only to log and continue code from here\n            }\n        }\n\n        if (rtc_dT <= rtc_t7) { rtc_correction = rtc_t7_custom_cor; }                 // It is way too cold: use custom\n\n    }\n    //****************************************************************************** \n    msg1.payload = rtc_correction;\n    msg1.topic = \"rtc_correction\";\n\n    msg2.payload = F_CCC_SP + rtc_correction;\n    msg2.topic = \"SP RTC result\";\n\n    msg3.payload = F_CCC_SP;\n    msg3.topic = \"Start SP\";\n\n    var T_zone_1 = global.get('T_zone_1'); // memory only\n\n    if (F_RTC_old_correction === rtc_correction) {\n        return [msg1, msg2, null, msg3];\n    }\n\n    else {\n        global.set('F_RTC.z1.correction_value', msg1.payload, \"file\");\n        msg99.payload = \"Correction change: From \" + F_RTC_old_correction + \" to \" + rtc_correction + \" °C (Room actual: \" + T_zone_1 + \" °C)\";\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"function RTC Z1\"); }\n        return [msg1, msg2, msg99, msg3];\n    }\n\n}",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 960,
        "wires": [
            [
                "18fd7ac120089042",
                "df044144e4292bd6"
            ],
            [
                "c54efadb07816cb9"
            ],
            [
                "549c557827b37714"
            ]
        ],
        "outputLabels": [
            "rtc_correction",
            "SP RTC result",
            "ToLog"
        ]
    },
    {
        "id": "c5506b5fe3e4d571",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Function NightReduction z1+z2",
        "func": "\n////////////////////////////////////////////////////////////////////////////////\n// Night Reduction\nvar Operating_Mode      =global.get('TOP4_Operating_Mode_State',\"file\");\n//  Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\nif (Operating_Mode === undefined || \n    Operating_Mode==1 || \n    //Operating_Mode==3 || \n    Operating_Mode==5 || \n    Operating_Mode==7 || \n    Operating_Mode==8\n    ) { \n    return null \n}\n\nvar nr_correction = global.get('NightReductionWaterTemp.correction',\"file\");\nif (nr_correction === undefined) {\n    nr_correction = 0 ;\n}\n\nvar NR_W_state = global.get('NightReductionWaterTemp.state',\"file\");\nif (NR_W_state === undefined) {\n    NR_W_state=0;\n\n}\n////////////////////////////////////////////////////////////////////////////////\nlet msg1={}, msg99={};\nmsg1.topic = \"nr_correction\";\n\nif (NR_W_state === 1 ) { \n    global.set('NightReductionWaterTemp.current_value',nr_correction,\"file\") ;\n    msg1.payload = nr_correction;   \n}\nif (NR_W_state === 0 ) { \n    global.set('NightReductionWaterTemp.current_value',0,\"file\") ;\n    msg1.payload = 0;   \n}\n\nmsg99.payload = \"New correction: \" + nr_correction + \" °C\"; \nmsg99.topic = \"Function NightReduction\";\n\nreturn [msg1,msg99];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 1220,
        "wires": [
            [
                "4223b24f5dc06d8e"
            ],
            [
                "663fd79ce5a1610d"
            ]
        ],
        "outputLabels": [
            "nr_correction",
            "ToLog"
        ]
    },
    {
        "id": "4223b24f5dc06d8e",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "link out 12 Z1",
        "mode": "link",
        "links": [
            "9fd7064be2551caa"
        ],
        "x": 1685,
        "y": 1220,
        "wires": []
    },
    {
        "id": "987d38642eaa3c4c",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "name": "",
        "op1": "pong",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "100",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 980,
        "y": 1800,
        "wires": [
            [
                "add6fa4d403dd143"
            ]
        ]
    },
    {
        "id": "7c6f02c851467bc0",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "QM SS function to manager",
        "mode": "link",
        "links": [
            "9708d32f74bd48ae"
        ],
        "x": 1685,
        "y": 1360,
        "wires": []
    },
    {
        "id": "0f365a79d7e2857d",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Exit QM SS function to manager",
        "info": "",
        "x": 1850,
        "y": 1360,
        "wires": []
    },
    {
        "id": "d53e66c37991fa8e",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "op1": "",
        "op2": "ping",
        "op1type": "nul",
        "op2type": "str",
        "duration": "20",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 690,
        "y": 1480,
        "wires": [
            [
                "31085c7b9968960b"
            ]
        ]
    },
    {
        "id": "1cbf3f3272baec48",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "op1": "ping",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 680,
        "y": 1220,
        "wires": [
            [
                "c5506b5fe3e4d571"
            ]
        ]
    },
    {
        "id": "1a9b736187a463f7",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "op1": "ping",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 720,
        "y": 980,
        "wires": [
            [
                "daf8a69452c4cc9a"
            ]
        ]
    },
    {
        "id": "148fdf6802233c77",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "op1": "ping",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 860,
        "y": 820,
        "wires": [
            [
                "0d996033de2ed84e"
            ]
        ]
    },
    {
        "id": "398d29ed6f37b424",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1470,
        "y": 1080,
        "wires": [
            [
                "663fd79ce5a1610d"
            ]
        ]
    },
    {
        "id": "2695bccfb69a52d5",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Function RTC automation",
        "func": "////////////////////////////////////////////////////////////////////////////\n////////////////////////// RTC - ON/OFF function ///////////////////////////\n//\n//\n//  This function has the goal to act when the temperature in the room is too high.\n//  It can either turn off the heatpump, or take the [heat]-mode out of the current operating mode.\n//  \n\nvar MQTT = global.get('MQTT', \"file\");\nif (MQTT.block_active === 0 || (MQTT.block_active === 1 && MQTT.block_mode === 2 && MQTT.allow_rtc_onoff === 1)) {\n\n    var msg1 = {};        //  pin 1 - Output to power pump on/off \n    msg1.source = \"flow\";\n\n    var msg2 = {};        //  pin 2 - Output to Operating Mode\n    var msg99 = {};        //  pin 3 - Messages to Log\n    //\n    //  return [msg1,msg2,msg99]\n\n    var TOP69_Sterilization_State = global.get('TOP69_Sterilization_State', \"file\");\n\n    var Sterilization_active = global.get('Sterilization_active', \"file\");\n    if (Sterilization_active === undefined) { Sterilization_active = 0; }\n\n    var Force_DHW_active = global.get('Force_DHW_active', \"file\");\n    if (Force_DHW_active === undefined) { Force_DHW_active = 0; }\n\n    // var VirtualState = global.get('VirtualState'); //used to prevent unwanted shutdown detection \n\n    var Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\");\n    if (Operating_Mode === undefined) { return null; }\n    //  Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n    \n    var F_RTC = global.get('F_RTC', \"file\");\n\n    //\n    if (F_RTC.automation_power_state === undefined) { F_RTC.automation_power_state = 0; }          // Get the global variable. Used to see if the RTC function is enabled through GUI.\n    if (F_RTC.automation_OM_state === undefined) { F_RTC.automation_OM_state = 0; }                // Get the global variable. Used to see if the RTC function is enabled through GUI.\n\n    var F_SOLAR = global.get(\"F_SOLAR\", \"file\");\n    if (F_SOLAR === undefined) {F_SOLAR={};}\n    if (F_SOLAR.function_active_state === undefined) { F_SOLAR.function_active_state = 0; }\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\n    if (global.get('TOP20_ThreeWay_Valve_State') == 1) {return null;}\n    // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)    \n    if ((F_RTC.automation_power_state === 0 && F_RTC.automation_OM_state === 0) || Operating_Mode === undefined || Operating_Mode === 1 || Operating_Mode === 5 || Operating_Mode === 7 || Operating_Mode === 8 || Sterilization_active === 1 || Force_DHW_active === 1 || F_SOLAR.function_active_state === 1 || TOP69_Sterilization_State === 1 || global.get('TOP20_ThreeWay_Valve_State') === 1)     //  First IF\n        { return null; }\n\n    else {\n        // Declaration of variables including their values.    \n        var rtc_PV = global.get('T_zone_1');                             // Get the global variable. THe room temperature for RoomTemperatureCompensation you want to control.\n        if (rtc_PV === undefined) { return null; }\n        var rtc_SP = global.get('F_RTC.z1.setpoint', \"file\");                 // Virtual target temperature setpoint for RTC. Set in Dashboard. \n        if (rtc_SP === undefined) { return null; }\n        var rtc_dT = (rtc_PV - rtc_SP);                                  // local variable for calculated temperature difference. If > 0 it is too warm, If < 0 it is too cold. \n\n        var TOP0_Heatpump_State = global.get('TOP0_Heatpump_State', \"file\");              // get current state of the heatpump. on or off (1 or 0)\n        // below are the variables containing the temperature ranges.\n        var rtc_off = F_RTC.automation_off_limit;                               // Range turn heatpump off\n        if (rtc_off === undefined) { return null; }\n        var rtc_on = F_RTC.automation_on_limit;                               // Range turn heatpump on\n        if (rtc_on === undefined) { return null; }\n\n        var F_stored_next_operating_mode = global.get('F_stored_next_operating_mode', \"file\");\n\n        msg99.topic = \"Function RTC\";\n\n        //*****************************************************************************\n        //////////////////////////////////////////////////////////////////////////////////////////////////////\n        //////////////////////////////////////////////////////////////////////////////////////////////////////\n        // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n        if (rtc_off > rtc_on) {\n            //node.warn('RTC function: Current OFF temperature is lower than the ON temperature. You must correct this !! ');\n            msg99.payload = \"<b>ERROR:</b> Current switch-OFF-temperature is lower than the switch-ON-temperature. You must correct this !!\";\n            return [null, null, msg99];\n        }\n\n        //if (rtc_dT > rtc_off)                           {global.set('F_RTC.on_off_status',0,\"file\");}\n        //if (rtc_dT >= rtc_on && rtc_dT <= rtc_off)      {global.set('F_RTC.on_off_status',1,\"file\");}\n        //if (rtc_dT < rtc_on)                            {global.set('F_RTC.on_off_status',2,\"file\");}\n\n\n        //*****************************************************************************\n        //      Scenario 1: the roomtemperature is high and above the 'off'limit. Automation start\n        //*****************************************************************************\n        if (rtc_dT > rtc_on && TOP0_Heatpump_State == 1 && Operating_Mode != 3) {\n            //  Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n\n            if (Operating_Mode === 2 && F_RTC.automation_power_state === 1) {\n                msg1.payload = 0;\n                msg1.source = \"flow\";\n                msg1.topic = \"new_heatpump_power\";\n                msg99.payload = \"Automation 'Turn off/on power' activated - power OFF (Room temp: \" + rtc_PV + \"°C)\";\n                global.set('MQTT_Source', \"rtc automation: on/off\");\n                global.set('F_RTC.automation_active', 1, \"file\");\n                return [msg1, null, msg99];\n            }\n\n            if (Operating_Mode === 0 && F_RTC.automation_power_state === 1) {\n                global.set('F_RTC.automation_active', 1, \"file\");\n                msg1.payload = 0;\n                msg1.source = \"flow\";\n                msg1.topic = \"new_heatpump_power\";\n                msg99.payload = \"Automation 'Turn off/on power' triggered - power OFF (Room temp: \" + rtc_PV + \"°C)\";\n                global.set('MQTT_Source', \"rtc automation: on/off\");\n                return [msg1, null, msg99];\n            }\n\n            if ((Operating_Mode === 4 || Operating_Mode === 6) && F_RTC.automation_OM_state === 1) {\n                if (F_stored_next_operating_mode === undefined) {\n                    global.set('F_stored_next_operating_mode', Operating_Mode, \"file\");\n                    msg99.payload = 'Stored next operating mode is set to ' + Operating_Mode; node.send([null, null, msg99]); \n                }\n                global.set('F_RTC.automation_active', 1, \"file\");\n                msg2.payload = 3;\n                msg2.topic = \"new_Operating_Mode\";\n                if (Operating_Mode === 4) { Operating_Mode = \"Heat+DHW\"; }\n                if (Operating_Mode === 6) { Operating_Mode = \"Auto+DHW\"; }\n                msg99.payload = \"Automation 'Change operating mode' triggered - Operating mode from \" + Operating_Mode + \" to DHW only\";\n                global.set('MQTT_Source', \"rtc automation: on/off\");\n                return [null, msg2, msg99];\n            }\n        }\n        //*****************************************************************************\n        //      Scenario 2: the roomtemperature is low enough again. Automation end\n        //*****************************************************************************\n        if (rtc_dT < rtc_off && F_RTC.automation_active === 1) {\n            if (TOP0_Heatpump_State === 0) {\n                global.set('F_RTC.automation_active', 0, \"file\");\n                msg1.payload = 1;\n                msg1.source = \"flow\";\n                msg1.topic = \"new_heatpump_power\";\n                msg99.payload = \"Automation 'Turn off/on power' triggered - power ON (Room temp: \" + rtc_PV + \"°C)\";\n                global.set('MQTT_Source', \"rtc automation: on/off\");\n                return [msg1, null, msg99];\n            }\n            if (TOP0_Heatpump_State === 1) {\n                global.set('F_RTC.automation_active', 0, \"file\");\n                var OM; // create empty\n                if (F_stored_next_operating_mode === undefined) {   \n                    //  READ: Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW) \n                    //  SET:  Operating mode (0=Heat only, 1=Cool only, 2=Auto, 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto+DHW\n                    if (Operating_Mode == 0) { F_stored_next_operating_mode = 0; }\n                    if (Operating_Mode == 1) { F_stored_next_operating_mode = 1; }\n                    if (Operating_Mode == 2) { F_stored_next_operating_mode = 2; }\n                    if (Operating_Mode == 3) { F_stored_next_operating_mode = 4; }\n                    if (Operating_Mode == 4) { F_stored_next_operating_mode = 4; }\n                    if (Operating_Mode == 5) { F_stored_next_operating_mode = 5; }\n                    if (Operating_Mode == 6) { F_stored_next_operating_mode = 6; }\n                    if (Operating_Mode == 7) { F_stored_next_operating_mode = 2; }\n                    if (Operating_Mode == 8) { F_stored_next_operating_mode = 6; }\n\n                    OM = F_stored_next_operating_mode;\n                    if (OM == 0) { OM = \"Heat only\"; } if (OM === 1) { OM = \"Cool only\"; } if (OM === 2) { OM = \"Auto\"; } if (OM === 3) { OM = \"DHW only\"; } if (OM === 4) { OM = \"Heat+DHW\"; } if (OM === 5) { OM = \"Cool+DHW\"; } if (OM === 6) { OM = \"Auto+DHW\"; } if (OM === 7) { OM = \"Auto\"; } if (OM === 8) { OM = \"Auto+DHW\"; }\n                    msg99.payload = \"Automation 'Change operating mode' triggered - Operation mode set to \" + F_stored_next_operating_mode + \" (\" + OM + \")\";\n                    node.send([null, null, msg99])\n                }\n                else {\n                    OM = F_stored_next_operating_mode;\n                    if (OM == 0) { OM = \"Heat only\"; } if (OM === 1) { OM = \"Cool only\"; } if (OM === 2) { OM = \"Auto\"; } if (OM === 3) { OM = \"DHW only\"; } if (OM === 4) { OM = \"Heat+DHW\"; } if (OM === 5) { OM = \"Cool+DHW\"; } if (OM === 6) { OM = \"Auto+DHW\"; } if (OM === 7) { OM = \"Auto\"; } if (OM === 8) { OM = \"Auto+DHW\"; }\n                    msg99.payload = \"Automation 'Change operating mode' triggered - Operation mode restored to \" + F_stored_next_operating_mode + \" (\" + OM + \")\";\n                    node.send([null, null, msg99])\n                }\n\n                \n                if (global.get(\"F_SOLAR.function_active_state\", \"file\") !== 1 || global.get('DHW_automation_active', \"file\") !== 1 ) { \n                    msg2.payload = F_stored_next_operating_mode;\n                    msg2.topic = \"new_Operating_Mode\";\n                    \n                    global.set('F_stored_next_operating_mode', undefined, \"file\"); \n                    msg99.payload = 'Stored next operating mode is removed ' ; node.send([null, null, msg99]); \n                    //if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"rtc on/off\"); }\n                    return [null, msg2, null];\n                };\n\n            }\n\n        }\n        //******************************************************************************\n    }\n}",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n//global.set('F_stored_next_operating_mode',4,\"file\");",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1020,
        "wires": [
            [
                "346a3528a7770803"
            ],
            [
                "bf9d1ac2d5e48dd5"
            ],
            [
                "398d29ed6f37b424"
            ]
        ],
        "outputLabels": [
            "Output to pump on/off ",
            "Output to Operating Mode",
            "Messages to Log"
        ]
    },
    {
        "id": "acd2fcbdbfe464b3",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "RT",
        "info": "",
        "x": 310,
        "y": 960,
        "wires": []
    },
    {
        "id": "079d3ecc98b9f2d0",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "GUI",
        "info": "",
        "x": 310,
        "y": 920,
        "wires": []
    },
    {
        "id": "bc219d3bc7ec043e",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "GUI",
        "info": "",
        "x": 310,
        "y": 780,
        "wires": []
    },
    {
        "id": "e9b2408568d2ec7a",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "GUI",
        "info": "",
        "x": 250,
        "y": 1400,
        "wires": []
    },
    {
        "id": "4e320817ddcf6f7b",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "name": "INFO INSIDE: Panasonic compressor rules",
        "info": "\n**Compressor on:**\nMain inlet 4 degrees lower than setpoint\n\nFormula:    [TOP5] <= [TOP27] - 4;\n            \n                [TOP5]  Main inlet\n                [TOP27] Setpoint (in direct mode)\n\n\n\n\n**Compressor off:**\nMain outlet temperature is 2 degrees higher than setpoint, for 3 minutes\n\nFormula:    [TOP6] + 2 >= [TOP27]\n\n                [TOP6]  Main outlet\n                [TOP27] Setpoint (in direct mode)\n\n",
        "x": 1720,
        "y": 540,
        "wires": []
    },
    {
        "id": "47f8da37ddbb8a39",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Filter",
        "func": "let msg1={};\nvar value = context.get('value');\n\n                                //After boot, make sure the first message is pushed forward.\nif (value === undefined){\n    context.set('value',msg.payload);\n    return msg;\n    \n}\n\n                                // filter messages with the same value.\nif (msg.payload != value) {\n    context.set('value',msg.payload);\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 960,
        "wires": [
            [
                "1a9b736187a463f7"
            ]
        ]
    },
    {
        "id": "dfca926433d18402",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Function Quietmode Add-on",
        "func": "// Make an exception (bypass) during defrost routine:\nif (global.get('TOP26_Defrosting_State', \"file\") === 1) {\n    return [null, null, null]; // Do NOT send to log otherwise the filter node will pass this disabled-msg and SS disabled-msg in turn.\n}\nvar msg1 = {};  //  Pin 1: output to send softstart level to pump\nvar msg2 = {};  //  Pin 2: output to Input LOG\nmsg2.topic = \"Function SoftStart Quietmode\";\nvar msg3 = {};  //  pin 3: output to delay node\nmsg3.payload = 'ping';\n\n\nvar F_SS = global.get('F_SS', \"file\");\nif (F_SS === undefined) { F_SS = {}; global.set('F_SS', {}, \"file\"); return null; }\n\nvar CurrentQMLevel = global.get('TOP18_Quiet_Mode_Level', \"file\");                    // Current quiet mode level from TOP18\n\nif (F_SS.QM_state === 0 || F_SS.QM_state === undefined || F_SS.state == 0 || F_SS.state === undefined || CurrentQMLevel === undefined) {\n    return null;                                                   //leave function when parameters or settings are incorrect or unknown.\n}\n\nif (msg.topic === 'compressor_state' && msg.payload == 0) {\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart Quietmode\"); }\n    msg1.payload = F_SS.QM_active_level;\n    msg1.source = \"SoftStart Quietmode\";\n    msg2.payload = \"Compressor run ended, quiet mode set to level \" + F_SS.QM_active_level + \" for next run\";\n    msg3.topic = \"StopTimer\";\n    if (CurrentQMLevel !== F_SS.QM_active_level) { return [msg1, msg2, msg3]; }\n    msg2.payload = \"Compressor run ended, quiet mode is already set to level \" + F_SS.QM_active_level;\n    return [null, msg2, msg3];\n}\n\nif (msg.topic === 'compressor_state' && msg.payload == 1) {\n    msg2.payload = \"Timer started (\" + F_SS.QM_duration + \" minutes)\";\n    msg3.delay = F_SS.QM_duration;                                              //  delay in minutes\n    return [null, msg2, msg3];                                                    //  Send delayed trigger\n}\n\n////////////////////////////////////////////////////////////////////////////////////////////////\n// When the 'Delay timer' has ended and the payload = 'END', this part will be triggered.\n////////////////////////////////////////////////////////////////////////////////////////////////\nif (msg.payload === \"END\") {                                                                                // End signal is received when timer ends, or when timer is reset.\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart Quietmode\"); }\n    msg1.payload = F_SS.QM_default_level;                                                                   // Value to restore Quietlevel to\n    msg1.source = \"SoftStart Quietmode\";\n    msg2.payload = \"Timer ended, restoring quiet mode to level \" + F_SS.QM_default_level;                   // Log message, \n\n    if (CurrentQMLevel !== F_SS.QM_default_level) { return [msg1, msg2, null]; }                            // CurrentQMLevel will be fetched and compared with the default level. If it does not match, send the new QM level.\n    \n    msg2.payload = \"Timer ended, quiet mode is already set to level \" + F_SS.QM_default_level;              // If the above return... did not happen, automatically the below return will be executed. \n    return [null, msg2, null];\n}\n\nif (msg.topic === \"quietmode_disabled\") {\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart Quietmode\"); }\n    msg1.payload = F_SS.QM_default_level;                        //restore Quietlevel to the default level\n    msg1.source = \"SoftStart Quietmode\";\n    msg2.payload = \"Quiet mode disabled. restoring to level \" + F_SS.QM_default_level;\n    msg3.topic = \"StopTimer\";\n    if (CurrentQMLevel !== F_SS.QM_default_level) { return [msg1, msg2, msg3]; }\n    return [null, null, msg3];\n}\n\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 1400,
        "wires": [
            [
                "7c6f02c851467bc0",
                "37db709069bc2dc2"
            ],
            [
                "34cc66e23b5eec55"
            ],
            [
                "f27cfc9c262f0b0a"
            ]
        ],
        "outputLabels": [
            "to Quietmode manager",
            "to Input LOG",
            "to timer"
        ]
    },
    {
        "id": "3fc220e85feb9ec9",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Link in SoftStart function Hz",
        "links": [
            "c57a81d1dee5b8a9"
        ],
        "x": 165,
        "y": 1440,
        "wires": [
            [
                "f2d08992a6b90758"
            ]
        ]
    },
    {
        "id": "f2d08992a6b90758",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "on / off",
        "func": "var last_value = context.get('last_value');\n\nmsg.topic = 'compressor_state';\n\nif (msg.payload == 0)   {\n    if (last_value != msg.payload){\n            context.set('last_value',msg.payload);\n            return msg;\n    }\n}\n\nif (msg.payload > 0)    {\n    msg.payload = 1;\n    \n    if (last_value != msg.payload){\n            context.set('last_value',msg.payload);\n            return msg;\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1440,
        "wires": [
            [
                "d53e66c37991fa8e",
                "dfca926433d18402"
            ]
        ],
        "outputLabels": [
            "Compressor on(1) or off(0)"
        ]
    },
    {
        "id": "61beb903ec0e5a74",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Hz",
        "info": "",
        "x": 250,
        "y": 1440,
        "wires": []
    },
    {
        "id": "8716fd26da93059d",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "T",
        "info": "",
        "x": 250,
        "y": 1480,
        "wires": []
    },
    {
        "id": "f27cfc9c262f0b0a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Delay timer",
        "func": "function myDelayFunction() {\n    let t = setTimeout(myEndFunction, timer);\n    context.set('tout',t);\n}\n\nfunction myEndFunction() {\n    let t = context.get('tout');  \n    let msg1={};\n    clearTimeout(t);\n    msg1.payload = 'END';\n    msg1.topic = msg.topic;\n    node.send(msg1);\n    node.status({});\n}\n\nfunction myResetFunction() {\n    let t = context.get('tout');    \n    clearTimeout(t);\n    node.status({});\n}\n\n//==================================\n\nif (msg.topic === \"StopTimer\"){\n    myResetFunction();\n}\n\n\nelse{\n    var delay = msg.delay;                                                          //  delay in minutes\n    var timer = (delay * 60000) + 250;                                              //  timer in seconds\n    \n    node.status({fill:\"green\", shape:\"ring\", text:\"Active: \" + delay + \" minutes\"});\n    myDelayFunction();  \n}\nreturn null;\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1460,
        "wires": [
            [
                "dfca926433d18402"
            ]
        ]
    },
    {
        "id": "71a546a3b074148f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "reset",
        "func": "// Function to check status of softstart / quietmode to interact with functions.\n// The timers will run when the softstart function starts. \n// when the ss functin is toggled off during the timer, the timer needs to be reset. \nvar msg1 = {}; //   pin 1 to SS_quietmode_state\nvar msg2 = {}; //   pin 2 to SS_state\n\nvar SS_state            = global.get('F_SS.state',\"file\");\nvar SS_quietmode_state  = global.get('SS_Quietmode_on_off',\"file\");\n\nif (SS_quietmode_state == 0){\n    msg1.topic = \"quietmode_disabled\";\n    node.send(msg1,null);\n}\n\nif (SS_state == 0){\n    msg2.reset = \"reset\";\n    node.send(null,msg2);\n}\n\nreturn null;",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1400,
        "wires": [
            [
                "dfca926433d18402"
            ],
            [
                "a1cf343333a2e923"
            ]
        ],
        "outputLabels": [
            "SS_quietmode_state",
            "SS_state"
        ]
    },
    {
        "id": "6c6c36d2fc35901c",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "GUI / Scheduler",
        "info": "",
        "x": 280,
        "y": 1220,
        "wires": []
    },
    {
        "id": "e8b855966cfa18d3",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "NightReduction WATER",
        "info": "",
        "x": 320,
        "y": 4940,
        "wires": []
    },
    {
        "id": "e4932a30dba95577",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 430,
        "y": 1480,
        "wires": [
            [
                "d53e66c37991fa8e",
                "9ece6a95a9a5c846"
            ]
        ]
    },
    {
        "id": "9ece6a95a9a5c846",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "link out - To SS chart",
        "mode": "link",
        "links": [
            "4212c42fb72cce77"
        ],
        "x": 635,
        "y": 1520,
        "wires": []
    },
    {
        "id": "2df56a3ae0782bfd",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "to chart",
        "info": "",
        "x": 670,
        "y": 1540,
        "wires": []
    },
    {
        "id": "41a9c3500d63fb7e",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "T",
        "info": "",
        "x": 310,
        "y": 740,
        "wires": []
    },
    {
        "id": "0fb10778eba34911",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "T_zone_1 Input Selector",
        "func": "var TOP33 = global.get('TOP33_Room_Thermostat_Temp');             // The default heatpump outside temperature sensor\nvar T_zone_1_custom = global.get('T_zone_1_custom', \"file\");                          // Custom outside temperature sensor\nif (T_zone_1_custom === undefined) { T_zone_1_custom = {} }\nvar T_zone_1 = global.get('T_zone_1');\nvar CurrentTime = new Date().getTime();\n\n\n\n//  msg={};         // payload\nmsg.payload = Number(msg.payload).toFixed(2);\nmsg.payload = parseFloat(msg.payload);\n\nlet msg99 = {};       // Info to log\nmsg99.topic = \"SETUP - Sensors (Zone 1)\";\n\n//******************************************************************************\n// Default panasonic thermostat temperature sensor\n//******************************************************************************\nif (msg.topic === 'panasonic_heat_pump/main/Room_Thermostat_Temp') {\n\n        if (msg.payload === -128) {\n                msg99.payload = \"<font color=red>Zone 1 is not in use.</font>\";\n\n                return [null, msg99];\n        }\n\n        if (msg.payload != TOP33) {\n                global.set('TOP33_Room_Thermostat_Temp', msg.payload);\n                TOP33 = msg.payload;\n        }\n\n        if (T_zone_1_custom.value_time === undefined) {\n                global.set('T_zone_1', TOP33);\n                msg99.payload = \"<font color=red>Custom room temperature sensor not found. Using internal sensor (TOP33)</font>\";\n\n                return [msg, msg99];\n        }\n\n        if ((CurrentTime - T_zone_1_custom.value_time) > 60 * 1000 * 60 * 5) {   // 5 hours\n                global.set('T_zone_1', TOP33)\n                msg99.payload = \"<font color=red> Custom room temperature sensor lost - last value older than 5 hours. Using internal sensor (TOP33)</font>\";\n\n                return [msg, msg99];\n        }\n\n}\n//******************************************************************************\n// Custom temperature sensor\n//******************************************************************************\nif (msg.topic == 'custom_sensor') {\n\n        if (T_zone_1_custom.value_time === undefined || (CurrentTime - T_zone_1_custom.value_time) > 60 * 1000 * 60 * 5) {\n                T_zone_1_custom.value = msg.payload;\n                T_zone_1_custom.value_time = CurrentTime;\n                global.set('T_zone_1_custom', T_zone_1_custom, \"file\");\n                global.set('T_zone_1', msg.payload);\n                msg99.payload = \"<font color=green>Custom room temperature sensor found</font>\";\n\n                node.send([msg, msg99]);\n                return null\n        }\n        \n        if (msg.payload !== T_zone_1_custom.value) {\n                T_zone_1_custom.value = msg.payload;\n                T_zone_1_custom.value_time = CurrentTime;\n                global.set('T_zone_1_custom', T_zone_1_custom, \"file\");\n                global.set('T_zone_1', msg.payload);\n\n                node.send([msg, null])\n                return null\n        }\n\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 300,
        "wires": [
            [
                "a22898dfdc4ff0ca"
            ],
            [
                "2df41704fe34f586"
            ]
        ],
        "outputLabels": [
            "payload",
            "Info to log"
        ]
    },
    {
        "id": "2df41704fe34f586",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1130,
        "y": 320,
        "wires": [
            [
                "f0b20c8165a68430"
            ]
        ]
    },
    {
        "id": "76a161da01cebe9c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "SHIFT_Final z1",
        "mode": "link",
        "links": [
            "1f4a153d2239272b",
            "5d0b7390e93f7e48"
        ],
        "x": 1525,
        "y": 1820,
        "wires": []
    },
    {
        "id": "f1055c6bf5c95540",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP7 panasonic_heat_pump/main/Main_Target_Temp",
        "topic": "panasonic_heat_pump/main/Main_Target_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 480,
        "y": 2520,
        "wires": [
            [
                "da5b21d833a80e29"
            ]
        ]
    },
    {
        "id": "da5b21d833a80e29",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.TOP7_Main_Target_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP7_Main_Target_Temp';\nif (msg.payload != global.get('TOP7_Main_Target_Temp')) {\n    global.set(\"TOP7_Main_Target_Temp\",msg.payload);} \n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2520,
        "wires": [
            [
                "ab4c54e8c1061535"
            ]
        ]
    },
    {
        "id": "ab4c54e8c1061535",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP7_Main_Target_Temp",
        "mode": "link",
        "links": [
            "a0b57b747218d871"
        ],
        "x": 1515,
        "y": 2520,
        "wires": []
    },
    {
        "id": "3d8e357b01de57ff",
        "type": "ui_chart",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "",
        "group": "4fb2801b6ab7ae20",
        "order": 2,
        "width": 17,
        "height": 8,
        "label": "Water flow",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#de425b",
            "#00876c",
            "#f59b56",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 5210,
        "y": 1460,
        "wires": [
            [
                "dd1a38c2ccf4f47e"
            ]
        ]
    },
    {
        "id": "879b071f7e013653",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Function Reduce pump speed (check)",
        "func": "var msg1 = {};      // Pin 1 - Pumpspeed to set\nvar msg2 = {};      // pin 2 - output current mode (name)\nvar msg99 = {};     // pin 3 - To log\n    msg99.topic = \"Function Pump speed\";\n\n////////////////////////////////////////////////////////////////////////////////\n\nif (global.get('TOP0_Heatpump_State',\"file\") == 0)              { return null; }\n\nvar compressor_frequency = global.get('compressor_frequency',\"file\");\n    if (compressor_frequency === undefined)                     { return null; }\n\nvar F_ReducePumpSpeed = global.get('F_ReducePumpSpeed', \"file\");\n    if (F_ReducePumpSpeed === undefined)                        { return null; }\n    if (F_ReducePumpSpeed.PumpMaxFlowSetting === undefined)     { return null; }\n\nvar TOP69_Sterilization_State = global.get('TOP69_Sterilization_State',\"file\");\n    if (TOP69_Sterilization_State === undefined)                { return null; }\n\nvar TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');\n    if (TOP20_ThreeWay_Valve_State === undefined)               { return null; }\n\nvar TOP26_Defrosting_State = global.get('TOP26_Defrosting_State', \"file\");\n    if (TOP26_Defrosting_State === undefined)                   { return null; }\n    if (TOP26_Defrosting_State === 1)                           { return null; } // exit during defrosting\n\nvar ActiveMode = global.get('F_ReducePumpSpeed.ActiveMode',\"file\");\n\n\n////////////////////////////////////////////////////////////////////////////////\nif (F_ReducePumpSpeed.state === undefined)                      { return null; }\nif (F_ReducePumpSpeed.state === 0)                               { return null; }\n\n\nif (compressor_frequency === 0 && F_ReducePumpSpeed.PumpMaxFlowSetting !== F_ReducePumpSpeed.LowSpeed)      { msg1.payload = F_ReducePumpSpeed.LowSpeed; msg2.payload = \"Low\";} // low\nif (compressor_frequency === 0 && F_ReducePumpSpeed.PumpMaxFlowSetting === F_ReducePumpSpeed.LowSpeed)      { return null; }\n\nif (compressor_frequency > 0) {\n    if (TOP20_ThreeWay_Valve_State === 1)                                                { msg1.payload = F_ReducePumpSpeed.DHWSpeed; msg2.payload = \"DHW\";} // dhw\n    if (TOP20_ThreeWay_Valve_State === 0)                                                { msg1.payload = F_ReducePumpSpeed.HEATSpeed; msg2.payload = \"HEAT\";} // room\n}\n\nif (TOP69_Sterilization_State === 1)                                                     { msg1.payload = F_ReducePumpSpeed.DHWSpeed; msg2.payload = \"DHW\";}\n\n\nlet var1 = msg1.payload;\nvar1 = (var1 - 64) / 190 * 100;\nvar1 = \" (\" + Number(var1).toFixed(0) + \"%)\";\n\nif (F_ReducePumpSpeed.PumpMaxFlowSetting != msg1.payload) {\n    global.set(\"F_ReducePumpSpeed.PumpMaxFlowSetting\", msg1.payload, \"file\");\n}\n\nif (ActiveMode != msg2.payload) {\n    global.set('F_ReducePumpSpeed.ActiveMode',msg2.payload,\"file\");\n}\n\nmsg99.payload = \"Max pumpspeed set to \" + msg1.payload + var1 + \" (\" + msg2.payload + \")\";\nreturn [msg1,msg2,msg99];",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4690,
        "y": 1020,
        "wires": [
            [
                "7708ef15cae3ed59"
            ],
            [
                "b23ef1030db7e252"
            ],
            [
                "7e0e6f1fd86c6d31"
            ]
        ],
        "outputLabels": [
            "to SET15 - max pumpspeed",
            "current mode",
            "to log"
        ]
    },
    {
        "id": "73a3b137b4661912",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Frequency link-in",
        "links": [
            "c57a81d1dee5b8a9"
        ],
        "x": 4315,
        "y": 1060,
        "wires": [
            [
                "879b071f7e013653"
            ]
        ]
    },
    {
        "id": "c2c09dbebda13484",
        "type": "ui_switch",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "label": "Flexible pumpspeed",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 1,
        "width": 7,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 4640,
        "y": 1140,
        "wires": [
            [
                "dbb3202d2fc26245",
                "925216cb64196829"
            ]
        ]
    },
    {
        "id": "c91855502498f443",
        "type": "ui_slider",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Low",
        "label": "",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 5,
        "width": 4,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "LowSpeed",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4730,
        "y": 1220,
        "wires": [
            [
                "07adfdd98bc7ec6f"
            ]
        ]
    },
    {
        "id": "9dfdd1d4ae5594b1",
        "type": "ui_slider",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "DHW",
        "label": "",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 11,
        "width": 4,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "DHWSpeed",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4730,
        "y": 1340,
        "wires": [
            [
                "7d78560a43c952f3"
            ]
        ]
    },
    {
        "id": "ec44ca9b8998e3a4",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "group": "4fb2801b6ab7ae20",
        "name": "Line - Settings",
        "order": 3,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Max speed settings (%)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4620,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "05d2363eb8b5cbac",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 15,
        "width": 2,
        "height": 1,
        "name": "text actual",
        "label": "",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "className": "",
        "x": 4730,
        "y": 1500,
        "wires": []
    },
    {
        "id": "0b0a84c6b2ac5946",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 17,
        "width": 2,
        "height": 1,
        "name": "text flow",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4720,
        "y": 1540,
        "wires": []
    },
    {
        "id": "dc6b3a3d39fd9593",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "group": "4fb2801b6ab7ae20",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "Low",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4590,
        "y": 1220,
        "wires": []
    },
    {
        "id": "ee5c4cc82116fb3a",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "group": "4fb2801b6ab7ae20",
        "order": 10,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "DHW",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4590,
        "y": 1340,
        "wires": []
    },
    {
        "id": "0a5194a2ae53226f",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "group": "4fb2801b6ab7ae20",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "HEAT",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4590,
        "y": 1280,
        "wires": []
    },
    {
        "id": "62f703fc3bef4b9d",
        "type": "ui_slider",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "HEAT",
        "label": "",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 8,
        "width": 4,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "HEATSpeed",
        "topicType": "str",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4730,
        "y": 1280,
        "wires": [
            [
                "c613a0a91992893e"
            ]
        ]
    },
    {
        "id": "95d38a3c0dc7bfef",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "name": "Line - Result",
        "order": 13,
        "width": 7,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Result</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4490,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "9bbcf43a99bb4686",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "link in 43",
        "links": [
            "d8c3356483134cf9"
        ],
        "x": 4165,
        "y": 1500,
        "wires": [
            [
                "5710a4a40d36cae6"
            ]
        ]
    },
    {
        "id": "07adfdd98bc7ec6f",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 6,
        "width": 2,
        "height": 1,
        "wrap": true,
        "passthru": true,
        "topic": "LowSpeed",
        "topicType": "str",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4860,
        "y": 1220,
        "wires": [
            [
                "dd27a17d3914b050"
            ]
        ]
    },
    {
        "id": "dd27a17d3914b050",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 4990,
        "y": 1220,
        "wires": [
            [
                "c91855502498f443",
                "ad467c3d58db0284"
            ]
        ]
    },
    {
        "id": "7d78560a43c952f3",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "dhw",
        "label": "",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 12,
        "width": 2,
        "height": 1,
        "wrap": true,
        "passthru": true,
        "topic": "DHWSpeed",
        "topicType": "str",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4850,
        "y": 1340,
        "wires": [
            [
                "b1e622419da850aa"
            ]
        ]
    },
    {
        "id": "c613a0a91992893e",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "4fb2801b6ab7ae20",
        "order": 9,
        "width": 2,
        "height": 1,
        "wrap": true,
        "passthru": true,
        "topic": "HEATSpeed",
        "topicType": "str",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4860,
        "y": 1280,
        "wires": [
            [
                "3bb1ed005c52a0fa"
            ]
        ]
    },
    {
        "id": "b1e622419da850aa",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 4990,
        "y": 1340,
        "wires": [
            [
                "9dfdd1d4ae5594b1",
                "ad467c3d58db0284"
            ]
        ]
    },
    {
        "id": "3bb1ed005c52a0fa",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 4990,
        "y": 1280,
        "wires": [
            [
                "62f703fc3bef4b9d",
                "ad467c3d58db0284"
            ]
        ]
    },
    {
        "id": "a1e757cb1d79e3f9",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link-in MaxPumpDuty",
        "links": [],
        "x": 675,
        "y": 3740,
        "wires": [
            [
                "0b10bc17b24896b7"
            ]
        ]
    },
    {
        "id": "d8c3356483134cf9",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "Max_Pump_Duty_Currentvalue2",
        "mode": "link",
        "links": [
            "9bbcf43a99bb4686"
        ],
        "x": 1315,
        "y": 3780,
        "wires": []
    },
    {
        "id": "de37787a803f74af",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 14,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Actual max pumpspeed",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4530,
        "y": 1500,
        "wires": []
    },
    {
        "id": "bf06baa7b5212f0d",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 16,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Water flow (L/min)",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 4510,
        "y": 1540,
        "wires": []
    },
    {
        "id": "02337b972681a94a",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "link in 44",
        "links": [
            "3b23831ccc3641c6"
        ],
        "x": 4365,
        "y": 1540,
        "wires": [
            [
                "0b0a84c6b2ac5946"
            ]
        ]
    },
    {
        "id": "f2ccd5d9f4518044",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "Chart data",
        "func": "var TOP1_Pump_Flow = global.get('TOP1_Pump_Flow');\n\nvar F_ReducePumpSpeed = global.get('F_ReducePumpSpeed',\"file\");\n    if (F_ReducePumpSpeed === undefined || TOP1_Pump_Flow === undefined) {return null}\nvar ActiveMode = global.get('F_ReducePumpSpeed.ActiveMode',\"file\");\n\nlet msg1={}; // flow L/min\nlet msg2={}; // Actual max pumpspeed\nlet msg3={}; // Chart limits\nvar msg4={}; // Active mode\n\nmsg1.payload = null; msg1.topic = 'Flow (L/min)';\nmsg2.payload = null; msg2.topic = 'Maximum pumpspeed (%)';\nmsg3.payload = null;\nmsg4.payload = null; msg4.topic = 'Mode';\n\nif (TOP1_Pump_Flow !== undefined) {\n    msg1.payload = TOP1_Pump_Flow;\n}\n\nif (F_ReducePumpSpeed.PumpMaxFlowSetting !== undefined) {\n    msg2.payload = F_ReducePumpSpeed.PumpMaxFlowSetting - 64;\n    msg2.payload = msg2.payload / 190 * 100;    // calculate to %\n    msg2.payload = Number(msg2.payload).toFixed(0);\n}\nif (F_ReducePumpSpeed.DHWSpeed !== undefined && F_ReducePumpSpeed.HEATSpeed !== undefined && F_ReducePumpSpeed.LowSpeed !== undefined) {\n    // @ts-ignore\n    msg3 = { ui_control:{ymin:0, ymax:((Math.max(F_ReducePumpSpeed.DHWSpeed, F_ReducePumpSpeed.HEATSpeed, F_ReducePumpSpeed.LowSpeed)-64)/190*100)+5} }; \n}\n\nif (F_ReducePumpSpeed.state == 0) {\n    msg4.payload = 0;\n}\nelse {\n    if (ActiveMode !== undefined) {\n        switch (ActiveMode) \n        {\n            case \"Low\":\n            msg4.payload = 1;\n            break;\n\n            case \"HEAT\":\n            msg4.payload = 2;\n            break;\n\n            case \"DHW\":\n            msg4.payload = 3;\n            break;\n        }\n    }\n}\n\nreturn [[msg1,msg2,msg3,msg4]]",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5030,
        "y": 1460,
        "wires": [
            [
                "3d8e357b01de57ff"
            ]
        ]
    },
    {
        "id": "dee4758644beb652",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Store",
        "func": "if (msg.topic == 'LowSpeed'){\n    msg.payload = ((msg.payload) / 100 * 190) + 64; // calculation\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set('F_ReducePumpSpeed.LowSpeed',msg.payload,\"file\")\n}\n\nif (msg.topic == 'HEATSpeed'){\n    msg.payload = ((msg.payload) / 100 * 190) + 64; // calculation\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set('F_ReducePumpSpeed.HEATSpeed',msg.payload,\"file\")\n}\n\nif (msg.topic == 'DHWSpeed'){\n    msg.payload = ((msg.payload) / 100 * 190) + 64; // calculation\n    msg.payload = Number(msg.payload).toFixed(0);\n    msg.payload = parseFloat(msg.payload);\n    global.set('F_ReducePumpSpeed.DHWSpeed',msg.payload,\"file\")\n}\n\nif (msg.topic == 'state'){\n    global.set('F_ReducePumpSpeed.state',msg.payload,\"file\")\n}\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5330,
        "y": 1140,
        "wires": [
            [
                "ea04ae839e1d6b46"
            ]
        ]
    },
    {
        "id": "5710a4a40d36cae6",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "conversion function",
        "func": "var lowerlimit=64; // Lowest value\nvar upperlimit=254; // Hihghes value\nvar range=(upperlimit-lowerlimit);\n\nmsg.payload = (msg.payload - 64) / range * 100\n\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4290,
        "y": 1500,
        "wires": [
            [
                "05d2363eb8b5cbac",
                "5e82e401e9c3083f"
            ]
        ]
    },
    {
        "id": "ad467c3d58db0284",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 5160,
        "y": 1140,
        "wires": [
            [
                "dee4758644beb652"
            ]
        ]
    },
    {
        "id": "cc5d732b8a28779d",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "trigger",
        "x": 4860,
        "y": 1460,
        "wires": [
            [
                "f2ccd5d9f4518044"
            ]
        ]
    },
    {
        "id": "5e82e401e9c3083f",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4870,
        "y": 1500,
        "wires": [
            [
                "f2ccd5d9f4518044"
            ]
        ]
    },
    {
        "id": "dbb3202d2fc26245",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 4990,
        "y": 1140,
        "wires": [
            [
                "ad467c3d58db0284"
            ]
        ]
    },
    {
        "id": "fab9eab71225fbf7",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 19,
        "width": 2,
        "height": 1,
        "name": "Current",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4720,
        "y": 1580,
        "wires": []
    },
    {
        "id": "3df02652ea9f1de4",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Load trigger",
        "func": "var F_ReducePumpSpeed = global.get('F_ReducePumpSpeed',\"file\");\nvar save = false;\n\nif (F_ReducePumpSpeed === undefined)                    { global.set('F_ReducePumpSpeed',{},\"file\"); F_ReducePumpSpeed = {}; } \nif (F_ReducePumpSpeed.PumpMaxFlowSetting === undefined) { return null; }                // populated externally when mqtt message comes in.\nif (F_ReducePumpSpeed.LowSpeed === undefined)           { F_ReducePumpSpeed.LowSpeed    = F_ReducePumpSpeed.PumpMaxFlowSetting  ; save = true; }\nif (F_ReducePumpSpeed.DHWSpeed === undefined)           { F_ReducePumpSpeed.DHWSpeed    = F_ReducePumpSpeed.PumpMaxFlowSetting  ; save = true; }\nif (F_ReducePumpSpeed.HEATSpeed === undefined)          { F_ReducePumpSpeed.HEATSpeed   = F_ReducePumpSpeed.PumpMaxFlowSetting  ; save = true; }\nif (F_ReducePumpSpeed.state === undefined)              { F_ReducePumpSpeed.state       = 0                                     ; save = true; }\n\nif (save == true) { global.set('F_ReducePumpSpeed', F_ReducePumpSpeed, \"file\"); return null;}\n\nlet msg1={};    //  state\nlet msg2={};    //  low\nlet msg3={};    //  heat\nlet msg4={};    //  dhw\n\nmsg1.payload = F_ReducePumpSpeed.state; msg1.topic = 'state';\nmsg2.payload = F_ReducePumpSpeed.LowSpeed; msg2.topic = 'LowSpeed';\nmsg3.payload = F_ReducePumpSpeed.HEATSpeed; msg3.topic = 'HEATSpeed';\nmsg4.payload = F_ReducePumpSpeed.DHWSpeed; msg4.topic = 'DHWSpeed';\n\nmsg2.payload = (msg2.payload - 64) / 190 * 100; msg2.payload = Number(msg2.payload).toFixed(0);\nmsg3.payload = (msg3.payload - 64) / 190 * 100; msg3.payload = Number(msg3.payload).toFixed(0);\nmsg4.payload = (msg4.payload - 64) / 190 * 100; msg4.payload = Number(msg4.payload).toFixed(0);\n\nreturn [msg1,msg2,msg3,msg4];",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4370,
        "y": 1240,
        "wires": [
            [
                "c2c09dbebda13484"
            ],
            [
                "c91855502498f443"
            ],
            [
                "62f703fc3bef4b9d"
            ],
            [
                "9dfdd1d4ae5594b1"
            ]
        ],
        "outputLabels": [
            "F_ReducePumpSpeed.state",
            "F_ReducePumpSpeed.LowSpeed",
            "F_ReducePumpSpeed.HEATSpeed",
            "F_ReducePumpSpeed.DHWSpeed"
        ]
    },
    {
        "id": "0fa4a814492d2259",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "trigger",
        "x": 4220,
        "y": 1220,
        "wires": [
            [
                "3df02652ea9f1de4"
            ]
        ]
    },
    {
        "id": "ea04ae839e1d6b46",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link out 49",
        "mode": "link",
        "links": [
            "32c4b461266d4a6e",
            "b1a202d9c6da4df3"
        ],
        "x": 5415,
        "y": 1140,
        "wires": []
    },
    {
        "id": "21abbbb132d72856",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 18,
        "width": 5,
        "height": 1,
        "name": "Active mode",
        "label": "Active mode",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 4490,
        "y": 1580,
        "wires": []
    },
    {
        "id": "dc99be6d3a53311d",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link out 50",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 5295,
        "y": 1060,
        "wires": []
    },
    {
        "id": "7708ef15cae3ed59",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link out 51",
        "mode": "link",
        "links": [
            "8406701f07ab7886"
        ],
        "x": 5295,
        "y": 980,
        "wires": []
    },
    {
        "id": "7e0e6f1fd86c6d31",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4990,
        "y": 1060,
        "wires": [
            [
                "dc99be6d3a53311d"
            ]
        ]
    },
    {
        "id": "b23ef1030db7e252",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link out 52",
        "mode": "link",
        "links": [
            "dd7484dc5380d24f"
        ],
        "x": 5295,
        "y": 1020,
        "wires": []
    },
    {
        "id": "dd7484dc5380d24f",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "link in 46",
        "links": [
            "b23ef1030db7e252"
        ],
        "x": 4365,
        "y": 1580,
        "wires": [
            [
                "fab9eab71225fbf7"
            ]
        ]
    },
    {
        "id": "b1a202d9c6da4df3",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link in 47",
        "links": [
            "ea04ae839e1d6b46"
        ],
        "x": 4315,
        "y": 1020,
        "wires": [
            [
                "879b071f7e013653"
            ]
        ]
    },
    {
        "id": "ba33ab6d58b9fb8d",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Hz",
        "info": "",
        "x": 4390,
        "y": 1060,
        "wires": []
    },
    {
        "id": "4e3b27ed573b6399",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "GUI",
        "info": "",
        "x": 4390,
        "y": 1020,
        "wires": []
    },
    {
        "id": "83481f0a61aed9b2",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link in 48",
        "links": [
            "4ff74e2b48b1d597"
        ],
        "x": 4315,
        "y": 980,
        "wires": [
            [
                "bf8ce4cf96b236c2"
            ]
        ]
    },
    {
        "id": "bf8ce4cf96b236c2",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "OM",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4390,
        "y": 980,
        "wires": [
            [
                "879b071f7e013653"
            ]
        ]
    },
    {
        "id": "fb9db2149be4a5a9",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "to SET15",
        "info": "",
        "x": 5160,
        "y": 980,
        "wires": []
    },
    {
        "id": "677c69e23dd934ce",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "current mode",
        "info": "",
        "x": 5170,
        "y": 1020,
        "wires": []
    },
    {
        "id": "2cd7aab6fa9d94c2",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "to log",
        "info": "",
        "x": 5150,
        "y": 1060,
        "wires": []
    },
    {
        "id": "6410b5f879c6a3ec",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "Store/Load chart",
        "func": "if (msg.topic != 'trigger') {\n    flow.set('chart_pumpspeed',msg,\"file\");\n    return null\n}\n\nif (msg.topic == 'trigger') {\n    msg = flow.get('chart_pumpspeed',\"file\");\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5170,
        "y": 1580,
        "wires": [
            [
                "3d8e357b01de57ff"
            ]
        ]
    },
    {
        "id": "dd1a38c2ccf4f47e",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4980,
        "y": 1580,
        "wires": [
            [
                "6410b5f879c6a3ec"
            ]
        ]
    },
    {
        "id": "9b7a14cd7f7c2870",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "trigger",
        "x": 5000,
        "y": 1540,
        "wires": [
            [
                "6410b5f879c6a3ec"
            ]
        ]
    },
    {
        "id": "d7e9f20e80d48fa1",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP79 - panasonic_heat_pump/main/Heat_To_Cool_Temp",
        "topic": "panasonic_heat_pump/main/Heat_To_Cool_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 4680,
        "wires": [
            [
                "64955157496ed92f"
            ]
        ]
    },
    {
        "id": "64955157496ed92f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "set.TOP79_Heat_To_Cool_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP79_Heat_To_Cool_Temp';\nif (msg.payload != global.get(\"TOP79_Heat_To_Cool_Temp\",\"file\")) {\n    global.set(\"TOP79_Heat_To_Cool_Temp\",msg.payload,\"file\");\n}\n//return msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 4680,
        "wires": [
            []
        ]
    },
    {
        "id": "94fb2ca53932250b",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642",
            "8f0e209ac14bdb9a"
        ],
        "x": 4165,
        "y": 1260,
        "wires": [
            [
                "3df02652ea9f1de4"
            ]
        ]
    },
    {
        "id": "c24406bef1e6355d",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link in - Other triggers functions Z1",
        "links": [
            "2cc0e76e60be0d9f",
            "5a1d6b18490ded1c",
            "6c685782864f1787",
            "836082017500f9a9",
            "aec0cb2b18e02d8b",
            "ed2c73bf6b96d4a0"
        ],
        "x": 205,
        "y": 700,
        "wires": [
            [
                "56ae2f8cd74e99c9"
            ]
        ]
    },
    {
        "id": "437a28325613c061",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "All other triggers",
        "info": "",
        "x": 340,
        "y": 700,
        "wires": []
    },
    {
        "id": "849bb02e7d0f4dfa",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "1 Trigger",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 5020,
        "wires": [
            [
                "e3c1faa5a1fb80c6"
            ]
        ]
    },
    {
        "id": "9fd7064be2551caa",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "link in 54",
        "links": [
            "4223b24f5dc06d8e",
            "49ebac0412d87642"
        ],
        "x": 345,
        "y": 4980,
        "wires": [
            [
                "e3c1faa5a1fb80c6"
            ]
        ]
    },
    {
        "id": "f50b182247afbf12",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Block DHW-run above",
        "label": "Block DHW-run above",
        "tooltip": "",
        "group": "4e9e24cca215ad4d",
        "order": 9,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "DHW_threshold_upper",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 4800,
        "y": 1960,
        "wires": [
            [
                "fdc7a953bf5abbc3"
            ]
        ]
    },
    {
        "id": "513f1edff2205368",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "set.DHW_threshold_upper",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(\"DHW_threshold_upper\",msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5200,
        "y": 1960,
        "wires": [
            [
                "0d915486f4ef0946"
            ]
        ]
    },
    {
        "id": "82de6121db22b74a",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 4260,
        "y": 1980,
        "wires": [
            [
                "1cf36419e733671a"
            ]
        ]
    },
    {
        "id": "1cf36419e733671a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Load on boot",
        "func": "var DHW_threshold_upper = global.get('DHW_threshold_upper',\"file\");\nif  (DHW_threshold_upper === undefined)             { global.set('DHW_threshold_upper',75,\"file\"); DHW_threshold_upper = 75; }\n\nvar DHW_threshold_lower = global.get('DHW_threshold_lower',\"file\")\nif (DHW_threshold_lower === undefined)              { global.set('DHW_threshold_lower',25,\"file\"); DHW_threshold_lower = 25; }\n\nvar TOP9_DHW_Target_Temp_Secondairy = global.get('TOP9_DHW_Target_Temp_Secondairy',\"file\")\nif (TOP9_DHW_Target_Temp_Secondairy === undefined) { TOP9_DHW_Target_Temp_Secondairy = global.get('TOP9_DHW_Target_Temp', \"file\"); global.set('TOP9_DHW_Target_Temp_Secondairy', TOP9_DHW_Target_Temp_Secondairy, \"file\");} \n\nvar DHW_automation_state = global.get('DHW_automation_state',\"file\");\nif (DHW_automation_state === undefined)             { DHW_automation_state = 0; }\n\n\n//////// Trigger logic when temperature of DHW tank is lower than the DHW_threshold_lower\nlet msg1={}, msg2={}, msg3={}, msg99={}, msg4={}, msg5={};\n\nif (msg.topic === 'TOP10_DHW_Temp' && msg.payload < DHW_threshold_lower) {\n    msg3.payload = 1;\n    msg3.topic = '';\n    \n    msg99.topic = 'DHW tank'\n    msg99.payload = 'DHW temperature below threshold of ' + DHW_threshold_lower + '°C. Starting DHW run'\n    }\n\n\n\n\nmsg1.payload = DHW_threshold_upper;         // DHW_threshold_upper\nmsg2.payload = DHW_threshold_lower;         // DHW_threshold_lower\nmsg4.payload = TOP9_DHW_Target_Temp_Secondairy;\nmsg5.payload = DHW_automation_state; msg5.topic = 'GUI_DHW_automation_state';\n\nreturn [msg1, msg2, msg3, msg4, msg5];",
        "outputs": 5,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4570,
        "y": 1980,
        "wires": [
            [
                "f50b182247afbf12"
            ],
            [
                "d3798ceb0669cafe"
            ],
            [
                "480251095571d632"
            ],
            [
                "9e780462d79e7157"
            ],
            [
                "c860a4238803ed02"
            ]
        ],
        "outputLabels": [
            "DHW_threshold_upper",
            "DHW_threshold_lower",
            "Trigger DHW run",
            "TOP9_DHW_Target_Temp_Secondairy",
            "DHW_automation_state"
        ]
    },
    {
        "id": "0d915486f4ef0946",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "DHW_threshold_upper",
        "mode": "link",
        "links": [],
        "x": 5365,
        "y": 1960,
        "wires": []
    },
    {
        "id": "b9e80ad80744b62d",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "DHW_threshold ",
        "info": "",
        "x": 5160,
        "y": 1860,
        "wires": []
    },
    {
        "id": "fdc7a953bf5abbc3",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 4990,
        "y": 1960,
        "wires": [
            [
                "513f1edff2205368",
                "f50b182247afbf12"
            ]
        ]
    },
    {
        "id": "d3798ceb0669cafe",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Auto start DHW",
        "label": "Auto start DHW",
        "tooltip": "Auto start DHW: If the DHW temperature drops below this temperature, a Force DHW cycle will be started.",
        "group": "e3cc96332cd59f07",
        "order": 13,
        "width": 5,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}} °C",
        "min": "10",
        "max": "75",
        "step": 1,
        "className": "",
        "x": 5080,
        "y": 2060,
        "wires": [
            [
                "8f0fdd05619b6080"
            ]
        ]
    },
    {
        "id": "b9cc5f94e160078d",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "link in from on_change_GUI",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 4425,
        "y": 2020,
        "wires": [
            [
                "1cf36419e733671a"
            ]
        ]
    },
    {
        "id": "4e973bdc6d2bfa33",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "link in TOP10_DHW_Temp",
        "links": [
            "d54ac3b979428b64"
        ],
        "x": 4425,
        "y": 2060,
        "wires": [
            [
                "1cf36419e733671a"
            ]
        ]
    },
    {
        "id": "223d6f652b0e0dc4",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Link in TOP10_DHW_Temp",
        "info": "",
        "x": 4280,
        "y": 2060,
        "wires": []
    },
    {
        "id": "92ebec7316b4f003",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Link in GUI update",
        "info": "",
        "x": 4250,
        "y": 2020,
        "wires": []
    },
    {
        "id": "480251095571d632",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Link out to Trigger DHW run",
        "mode": "link",
        "links": [],
        "x": 5365,
        "y": 2000,
        "wires": []
    },
    {
        "id": "9e780462d79e7157",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Boost DHW now SP",
        "label": "Boost DHW now",
        "tooltip": "Boost DHW now: Force a DHW run to reach a (higher) secondairy DHW target temperature. When you temprary require more hot water",
        "group": "e3cc96332cd59f07",
        "order": 15,
        "width": 5,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}} °C",
        "min": "40",
        "max": "75",
        "step": 1,
        "className": "",
        "x": 4860,
        "y": 2240,
        "wires": [
            [
                "40ad0556b1f55896"
            ]
        ]
    },
    {
        "id": "393897917e4a8106",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "group": "4e9e24cca215ad4d",
        "name": "Line - Limits",
        "order": 8,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n\n\t<left>Limits</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 5150,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "40ad0556b1f55896",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Secondairy setpoint",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::TOP9_DHW_Target_Temp_Secondairy",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 5090,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "c0c20e2e3caa81e0",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "link out 59",
        "mode": "link",
        "links": [
            "327f3ad0eae0d7d5",
            "efa847198158ca2c"
        ],
        "x": 5015,
        "y": 2200,
        "wires": []
    },
    {
        "id": "64021d928c59c5cd",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "DHW temp",
        "links": [
            "776b44e9514fb3b1"
        ],
        "x": 4240,
        "y": 1760,
        "wires": [
            [
                "017e95185010581b"
            ]
        ],
        "l": true
    },
    {
        "id": "017e95185010581b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "function 25",
        "func": "var DHW_automation_state    = global.get('DHW_automation_state',\"file\");\nvar DHW_threshold_upper     = global.get('DHW_threshold_upper',\"file\");\nvar TOP9_DHW_Target_Temp    = global.get('TOP9_DHW_Target_Temp',\"file\");\n\nif (msg.payload >= 60 ) {                // legionella temperature. Above 60 I assume legionella in the tank will be killed. If this T is reached, this moment in time will be logged.\n    let CurrentTime = new Date().getTime();\n    global.set('Schedule_conditions.DHW_last_at_60C',CurrentTime,\"file\")\n}\nif (msg.payload >= TOP9_DHW_Target_Temp ) { \n    let CurrentTime = new Date().getTime();\n    global.set('Schedule_conditions.DHW_last_at_target_temperature',CurrentTime,\"file\")\n}\n\n///////////////////\nvar Sterilization_active = global.get('Sterilization_active', \"file\");\nvar Force_DHW_active = global.get('Force_DHW_active', \"file\");\n\nif (DHW_automation_state === 0 || DHW_automation_state === undefined) {return null;}\n\nif (DHW_threshold_upper === undefined) { return null; }\n//if (msg.payload > DHW_threshold_upper) { return null; }\nif (global.get('TOP20_ThreeWay_Valve_State') == 1) { return null; }\n\nif (Sterilization_active === 1 || Force_DHW_active === 1) { return null; }\n\nvar compressor_frequency = global.get('compressor_frequency', \"file\");\nvar msg99 = {}; msg99.topic = 'Auto-start-DHW function';\n\nvar DHW_automation_active = global.get('DHW_automation_active', \"file\")\nif (DHW_automation_active === undefined) { DHW_automation_active = 0; }\n\n////////////////////////////////////////////////////////////////////\nif (msg.topic === 'External') {\n    msg99.topic = 'External';\n    var HP_state = global.get('TOP0_Heatpump_State', \"file\"); if (HP_state === undefined) { return null; }\n    // if heatpump is off, turn it on.\n    if (HP_state === 0) {\n        let msg2 = {}; msg2.payload = 1; msg2.source = 'DHW-function'; // turn on pump\n        global.set('F_RTC.automation_active', 0, \"file\");  // set RTC turn on/off function to inactive.\n        msg99.payload = 'Heatpump is off. Turning on for Auto-start-DHW function';\n        node.send([null, msg99, msg2])\n    }\n    // store current operating mode\n    if (global.get('F_stored_next_operating_mode', \"file\") === undefined) { global.set('F_stored_next_operating_mode', (global.get('TOP4_Operating_Mode_State', \"file\")), \"file\"); }\n    // send new operating \n    let msg1 = {}; msg1.payload = 3; msg1.delay = 0; // DHW Only\n    msg99.payload = 'Start DHW-run';\n    msg99.delay = 0;\n    global.set('DHW_automation_active', 1, \"file\");\n    return [msg1, msg99, null];\n}\n\n////////////////////////////////////////////////////////////////////\nif (DHW_automation_active === 0 && msg.payload <= global.get('DHW_threshold_lower', \"file\")) {\n    if (compressor_frequency >= 1 && global.get('TOP20_ThreeWay_Valve_State') == 1) { return null; }            // if DHW is already active and compressor is running: exit.\n\n    var HP_state = global.get('TOP0_Heatpump_State', \"file\"); if (HP_state === undefined) { return null; }\n            // if heatpump is off, turn it on.\n    if (HP_state === 0) {\n        var msg2={}; msg2.payload = 1; msg2.source = 'DHW-function'; // turn on pump\n        global.set('F_RTC.automation_active', 0, \"file\");  // set RTC turn on/off function to inactive.\n        msg99.payload = 'Heatpump is off. Turning on for Auto-start-DHW function';\n        node.send([null, msg99, msg2])\n    }\n            // store current operating mode\n    if (global.get('F_stored_next_operating_mode', \"file\") === undefined) { \n        global.set('F_stored_next_operating_mode', global.get('TOP4_Operating_Mode_State',\"file\"), \"file\");\n    }\n    // send new operation mode\n    var msg1 = {}; msg1.payload = 3; msg1.delay = 5; // DHW Only\n    msg99.payload = 'DHW temperature: ' + msg.payload + '°C. Lower threshold: ' + global.get('DHW_threshold_lower',\"file\") + '°C. Starting DHW run.';\n    msg99.delay = 0;\n    global.set('DHW_automation_active', 1, \"file\");\n    return [msg1, msg99, null];\n}\n\n///////////////////////////////////////////////////////////\nif (DHW_automation_active === 1 ) {\n    if (msg.payload >= TOP9_DHW_Target_Temp && compressor_frequency === 0) {\n\n        var delay = 1 * 60 * 1000; // 15 minutes delay\n\n        if (global.get('F_stored_next_operating_mode', \"file\") !== undefined) {\n            let msg1 = {};\n            msg1.delay = delay;\n            msg1.payload = global.get('F_stored_next_operating_mode', \"file\"); \n\n            msg99.payload = 'Operating mode reverted to ' + global.get('F_stored_next_operating_mode', \"file\"); \n            msg99.delay = delay;\n            \n            global.set('F_stored_next_operating_mode',undefined, \"file\");\n            node.send([msg1, msg99,null]);\n        }   \n\n        msg99.payload = 'DHW temperature: ' + msg.payload + '°C reached. End Auto-start-DHW. Reverting operating mode in ' + delay / 1000 / 60 + ' minute.'; \n        msg99.delay = 0;\n        global.set('DHW_automation_active',0, \"file\");\n        return [null, msg99, null];\n    }\n}\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4430,
        "y": 1760,
        "wires": [
            [
                "399bbbd616d3dc55"
            ],
            [
                "3b56718868c66537"
            ],
            [
                "0970bfa5a14caf6b",
                "f27d2362712f5634"
            ]
        ],
        "outputLabels": [
            "Operating Mode",
            "To log",
            "power out"
        ]
    },
    {
        "id": "f651bed25831c6f4",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "link out 54",
        "mode": "link",
        "links": [
            "efa847198158ca2c"
        ],
        "x": 4805,
        "y": 1720,
        "wires": []
    },
    {
        "id": "c8b5382d8d981e31",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "link out 55",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 4805,
        "y": 1760,
        "wires": []
    },
    {
        "id": "c860a4238803ed02",
        "type": "ui_switch",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Auto start DHW",
        "label": "",
        "tooltip": "Auto start DHW: If the DHW temperature drops below this temperature, a Force DHW cycle will be started.",
        "group": "e3cc96332cd59f07",
        "order": 12,
        "width": 1,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "GUI_DHW_automation_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 4840,
        "y": 2100,
        "wires": [
            [
                "5e6950dffab43add"
            ]
        ]
    },
    {
        "id": "12c84fbd61e2d1c2",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::DHW_automation_state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 5140,
        "y": 2100,
        "wires": [
            [
                "706c5dcd5d6c136b"
            ]
        ]
    },
    {
        "id": "8f0fdd05619b6080",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::DHW_threshold_lower",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 5380,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "8effd9295d55099f",
        "type": "ui_switch",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "Boost DHW now",
        "label": "",
        "tooltip": "Boost DHW now: Force a DHW run to reach a (higher) secondairy DHW target temperature. When you temprary require more hot water",
        "group": "e3cc96332cd59f07",
        "order": 14,
        "width": 1,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "GUI_boost_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 4560,
        "y": 2240,
        "wires": [
            [
                "319d7b2735937f1a"
            ]
        ]
    },
    {
        "id": "2ef668070522b01d",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "GUI_boost_state status change",
        "links": [
            "56d4bfa341d3eded"
        ],
        "x": 4235,
        "y": 2240,
        "wires": [
            [
                "376d42685ccec772"
            ]
        ]
    },
    {
        "id": "a8be0fdf50f25150",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "function 26",
        "func": "global.set('DHW_boost_state', msg.payload, \"file\");\nmsg.topic = 'Start_DHW_Run_SP2';\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4830,
        "y": 2200,
        "wires": [
            [
                "c0c20e2e3caa81e0"
            ]
        ]
    },
    {
        "id": "376d42685ccec772",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "function 27",
        "func": "if (msg.topic === 'DHW End'){\n    return msg;    \n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4370,
        "y": 2240,
        "wires": [
            [
                "8effd9295d55099f"
            ]
        ]
    },
    {
        "id": "914dbce5e778229e",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "label": "Setpoint Zone 1",
        "tooltip": "Range 5-20 °C",
        "group": "273f74f363a57507",
        "order": 3,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "setpoint_requested",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "5",
        "max": "20",
        "step": 1,
        "className": "",
        "x": 4760,
        "y": 480,
        "wires": [
            [
                "57bd8e997e9659ed",
                "c631c7c6b5043e9b"
            ]
        ]
    },
    {
        "id": "5b8f3786bc1abbb1",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "TOP28 - panasonic_heat_pump/main/Z1_Cool_Request_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Cool_Request_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 4370,
        "y": 760,
        "wires": [
            [
                "f5ccbd22c1c9fe22",
                "b6ad3dc97e3bae93",
                "f6b785b3136bc4b5"
            ]
        ]
    },
    {
        "id": "2649d773ad06b50d",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "273f74f363a57507",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "Cool status",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4750,
        "y": 300,
        "wires": []
    },
    {
        "id": "7c9af6a20115c38e",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Cool status",
        "links": [
            "5dfb70935ea409db"
        ],
        "x": 4545,
        "y": 300,
        "wires": [
            [
                "2649d773ad06b50d",
                "13909c8cd33f26ef"
            ]
        ]
    },
    {
        "id": "dee73ffd96da5786",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "273f74f363a57507",
        "name": "Line - Setup ",
        "order": 2,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4250,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "13909c8cd33f26ef",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "Cool status",
        "label": "Cool status",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4750,
        "y": 340,
        "wires": []
    },
    {
        "id": "1cf37ff9fa4fc42b",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "name": "Line - Setup ",
        "order": 3,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4750,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "6c93a57f910e03c2",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "label": "Setpoint requested",
        "tooltip": "",
        "group": "830a81a1c54c6ef5",
        "order": 4,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "setpoint_requested",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "5",
        "max": "20",
        "step": 1,
        "className": "",
        "x": 4770,
        "y": 520,
        "wires": [
            [
                "57bd8e997e9659ed",
                "c631c7c6b5043e9b"
            ]
        ]
    },
    {
        "id": "f0ae9eea42cf90ea",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Cool delta",
        "label": "Cool delta",
        "tooltip": "",
        "group": "830a81a1c54c6ef5",
        "order": 17,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "TOP24_Cool_Delta",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "1",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 4740,
        "y": 840,
        "wires": [
            [
                "158b8983b1dd0aa9"
            ]
        ]
    },
    {
        "id": "25041e53f134e3fb",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "cool input",
        "links": [
            "7139256ff024b872"
        ],
        "x": 4625,
        "y": 840,
        "wires": [
            [
                "f0ae9eea42cf90ea"
            ]
        ]
    },
    {
        "id": "158b8983b1dd0aa9",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "mode": "link",
        "links": [
            "3ed1fd544412f391"
        ],
        "x": 4905,
        "y": 840,
        "wires": []
    },
    {
        "id": "f5ccbd22c1c9fe22",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "set.Z1_Cool_Request_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'Z1_Cool_Request_Temp';\nglobal.set(\"Z1_Cool_Request_Temp\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5040,
        "y": 760,
        "wires": [
            [
                "25691ccde88f5530"
            ]
        ]
    },
    {
        "id": "6fc958da73fbdf09",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "-- Dew point",
        "format": "{{msg.payload | number:2}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4750,
        "y": 580,
        "wires": []
    },
    {
        "id": "4dfb2312d5cb06d5",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "name": "Line - Setup",
        "order": 10,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Sensor value</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4750,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "2bb5988706fb572a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Save RH / T",
        "func": "msg.payload = Number(msg.payload).toFixed(2);\nmsg.payload = parseFloat(msg.payload);\n\nvar CurrentTime = new Date().getTime();\nvar F_COOL = global.get('F_COOL',\"file\");\n    if (F_COOL === undefined) {global.set('F_COOL',{},\"file\"); return null}\n\nif (msg.topic == \"RH\"){\n    global.set('F_COOL.RelativeHumidity',msg.payload,\"file\");\n    global.set('F_COOL.RelativeHumidity_timestamp',CurrentTime,\"file\");\n}\n\nif (msg.topic == \"Temperature\") {\n    global.set('F_COOL.Temperature',msg.payload,\"file\");\n    global.set('F_COOL.Temperature_timestamp',CurrentTime,\"file\");\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// if there are no values present, then exit the function.\nif (F_COOL.Temperature_timestamp === undefined || F_COOL.RelativeHumidity_timestamp === undefined) { \n    return null;\n    }\n\n\n////////////////////////////////////////////////////////////////////////////////\nif ((CurrentTime - F_COOL.Temperature_timestamp) > 60*1000*60*2) {   // 2 hours\n    global.set('F_COOL.Temperature_timestamp',undefined,\"file\");\n    return null;\n    }\nif ((CurrentTime - F_COOL.RelativeHumidity_timestamp) > 60*1000*60*2) {   // 2 hours\n    global.set('F_COOL.RelativeHumidity_timestamp',undefined,\"file\");\n    return null;\n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5330,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "37a369fd9ad03085",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "RH",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RH",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4730,
        "y": 100,
        "wires": [
            [
                "2bb5988706fb572a"
            ]
        ]
    },
    {
        "id": "0df0e84326dbeec7",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Temperature",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Temperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4750,
        "y": 140,
        "wires": [
            [
                "2bb5988706fb572a"
            ]
        ]
    },
    {
        "id": "cdd89d5c10c71407",
        "type": "ui_chart",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "group": "830a81a1c54c6ef5",
        "order": 2,
        "width": 18,
        "height": 13,
        "label": "Temperatures",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "1000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#de425b",
            "#dd6e81",
            "#f59b56",
            "#1f77b4",
            "#7f8389",
            "#afb4bb",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 5140,
        "y": 260,
        "wires": [
            [
                "6a50ef63d9d35647"
            ]
        ]
    },
    {
        "id": "1d63998e541e4d5a",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 14,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Humidity",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5320,
        "y": 80,
        "wires": []
    },
    {
        "id": "dea135ecc9872411",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 13,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Room temperature",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5350,
        "y": 160,
        "wires": []
    },
    {
        "id": "f13532d971be853e",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "COOL gui changes to function trigger2",
        "mode": "link",
        "links": [
            "ab9d088e21062ff8"
        ],
        "x": 5215,
        "y": 700,
        "wires": []
    },
    {
        "id": "b665e9aa13d44f8e",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "restore",
        "x": 4500,
        "y": 220,
        "wires": [
            [
                "0e8ca4bb561b59ed"
            ]
        ]
    },
    {
        "id": "6a50ef63d9d35647",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Store chart",
        "func": "var myArray = msg;\nglobal.set(\"F_COOL.chart\", myArray,\"file\");",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5330,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "0e8ca4bb561b59ed",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Restore chart",
        "func": "if (msg.topic == 'restore') {\n    let msg1={};\n    msg1 = global.get(\"F_COOL.chart\",\"file\");\n    if (msg1 === undefined)\n        {return null;}\n    return msg1;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4760,
        "y": 220,
        "wires": [
            [
                "cdd89d5c10c71407"
            ]
        ]
    },
    {
        "id": "6b2644c3a510f50f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Block?",
        "func": "if (global.get('MQTT.block_active', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nif (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5630,
        "y": 620,
        "wires": [
            [
                "96c064c18cd18fc1"
            ],
            [
                "b43820fd5a21f4e7"
            ]
        ]
    },
    {
        "id": "b43820fd5a21f4e7",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 5735,
        "y": 680,
        "wires": []
    },
    {
        "id": "71a59b9661071adc",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "rate",
        "pauseType": "timed",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4890,
        "y": 260,
        "wires": [
            [
                "cdd89d5c10c71407"
            ]
        ]
    },
    {
        "id": "21b21c01326b2eb3",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 18,
        "width": 18,
        "height": 1,
        "name": "text below chart",
        "label": "This chart shows 1 datapoint every 5 minutes",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 5140,
        "y": 300,
        "wires": []
    },
    {
        "id": "56ae2f8cd74e99c9",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 700,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "25691ccde88f5530",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "TOP72_Z1_Cool_Request_Temp",
        "mode": "link",
        "links": [
            "ab9d088e21062ff8",
            "ddcff50cd968534a"
        ],
        "x": 5215,
        "y": 760,
        "wires": []
    },
    {
        "id": "07ba09a16be50433",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 8,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "-- Lower limit (calc)",
        "format": "{{msg.payload | number:2}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "Century Gothic,CenturyGothic,AppleGothic,sans-serif",
        "fontSize": "",
        "color": "#000000",
        "x": 4770,
        "y": 660,
        "wires": []
    },
    {
        "id": "78e42bcd53ea8133",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Safety margin",
        "label": "-- Safety margin",
        "tooltip": "",
        "group": "830a81a1c54c6ef5",
        "order": 6,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "safety_margin",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "0",
        "max": "10",
        "step": "0.5",
        "className": "",
        "x": 4760,
        "y": 620,
        "wires": [
            [
                "57bd8e997e9659ed",
                "941c0631859a870e"
            ]
        ]
    },
    {
        "id": "57bd8e997e9659ed",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "save",
        "func": "global.set('F_COOL.' + msg.topic,msg.payload,\"file\");\nmsg.flush = true;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4970,
        "y": 700,
        "wires": [
            [
                "967eb9e23a816211"
            ]
        ]
    },
    {
        "id": "b6ad3dc97e3bae93",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "order": 11,
        "width": 6,
        "height": 1,
        "name": "Final Setpoint",
        "label": "Setpoint final",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "Century Gothic,CenturyGothic,AppleGothic,sans-serif",
        "fontSize": "",
        "color": "#000000",
        "x": 4760,
        "y": 740,
        "wires": []
    },
    {
        "id": "069a1e1137dff3c5",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "name": "Line - Setup 2",
        "order": 15,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Cool setting</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 5340,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "31e6f728a58af434",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 4980,
        "y": 360,
        "wires": [
            [
                "c49ef874bd1fee9d"
            ]
        ]
    },
    {
        "id": "8446efaaa0db1b07",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Load on boot",
        "func": "var F_COOL = global.get('F_COOL',\"file\");\nvar save;\n\nif (F_COOL === undefined)                                   { F_COOL={}; save = 1 }\nif (F_COOL.setpoint_requested === undefined)                { F_COOL.setpoint_requested = 18; save = 1}              // Default value\nif (F_COOL.safety_margin === undefined)                     { F_COOL.safety_margin = 3; save = 1 }                   // Default value\nif (F_COOL.manual_setpoint_lower_limit === undefined)       { F_COOL.manual_setpoint_lower_limit = 12; save = 1 }    // Default value\nif (F_COOL.override_safety === undefined)                   { F_COOL.override_safety = false; save = 1 }             // Default value\n\nif (save == 1)                                              { global.set('F_COOL',F_COOL,\"file\"); }\n\nlet msg1={};        // setpoint_requested\nlet msg2={};        // safety_margin\nlet msg3={};        // manual_setpoint_lower_limit\nlet msg4={};        // calculated_dew_point\nlet msg5={};        // calculated_setpoint_lower_limit\nlet msg6={};        // override_safety\n\nmsg1.payload = F_COOL.setpoint_requested;\nmsg2.payload = F_COOL.safety_margin;\nmsg3.payload = F_COOL.manual_setpoint_lower_limit; \nmsg6.payload = F_COOL.override_safety;\n\nmsg1.enabled = true;\n\nvar cooling_mode = global.get('panasonic.cooling_mode',\"file\");\nif (cooling_mode === undefined || cooling_mode == 0){\n    msg1.enabled = false;\n}\n\n\nnode.send([msg1, msg2, msg3,null,null,msg6]);\n\nif (F_COOL.calculated_dew_point !== undefined) {\n    msg4.payload = F_COOL.calculated_dew_point;\n    node.send([null,null,null,msg4,null,null]);\n}\n\nif (F_COOL.calculated_setpoint_lower_limit !== undefined) {\n    msg5.payload = F_COOL.calculated_setpoint_lower_limit;\n    node.send([null,null,null,null,msg5,null]);\n}\n\n\n\n",
        "outputs": 6,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4410,
        "y": 520,
        "wires": [
            [
                "c631c7c6b5043e9b"
            ],
            [
                "941c0631859a870e"
            ],
            [
                "5d82a01035854d15"
            ],
            [
                "6fc958da73fbdf09"
            ],
            [
                "07ba09a16be50433"
            ],
            [
                "021e45a59e0afc2f"
            ]
        ],
        "outputLabels": [
            "setpoint_requested",
            "safety_margin",
            "manual_setpoint_lower_limit",
            "calculated_dew_point",
            "calculated_setpoint_lower_limit ",
            "override_safety"
        ]
    },
    {
        "id": "af6c986b9bd32b5d",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 4230,
        "y": 500,
        "wires": [
            [
                "8446efaaa0db1b07"
            ]
        ]
    },
    {
        "id": "4a7112414493107c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "b08c0859f26b8233",
        "name": "COOL function",
        "func": "var F_COOL                      = global.get('F_COOL',\"file\");\n    if (F_COOL === undefined || F_COOL.setpoint_requested === undefined) {return null}\nvar TOP20_ThreeWay_Valve_State  = global.get('TOP20_ThreeWay_Valve_State');\nvar TOP4_Operating_Mode_State   = global.get('TOP4_Operating_Mode_State',\"file\");\nvar TOP0_Heatpump_State         = global.get('TOP0_Heatpump_State',\"file\");\n//\n//  TOP20_ThreeWay_Valve_State  = 0 (ROOM)\n//  TOP4_Operating_Mode_State  = 1, 5  TOP20=0\n//\n//// Operating mode     0=Heat only,     1=Cool only,       2=Auto(Heat),       3=DHW only,       4=Heat+DHW,      5=Cool+DHW,       6=Auto(Heat)+DHW,       7=Auto(Cool),     8=Auto(Cool)+DHW\n////////////////////////////////////////////////////////////////////////////////\n//                          DEW POINT CALCULATION                             //\n////////////////////////////////////////////////////////////////////////////////\n\nlet msg1={};    // calculated_dew_point\nlet msg2={};    // calculated_setpoint_lower_limit\nlet msg3={};    // final setpoint\n\nvar cooling_mode = global.get('panasonic.cooling_mode',\"file\");\nif (cooling_mode === undefined || cooling_mode == 0) {\n    let msg99={};\n    msg99.payload = 'COOL mode is set to Compensation Curve through the controller. Control over it through this dashboard is disabled. To use the cool mode, you must control it on the controller. If you want to use this dashboard, set the cool mode to DIRECT befor you can do this.'\n    msg99.topic = 'SYSTEM'\n    return [null,msg99]\n}\n\nif (F_COOL.RelativeHumidity !== undefined && F_COOL.Temperature !== undefined && F_COOL.safety_margin !== undefined && F_COOL.manual_setpoint_lower_limit !== undefined) {\n    \n    var A = Math.log(F_COOL.RelativeHumidity / 100) / Math.log(2.718282) + 17.62 * F_COOL.Temperature / (243.12 + F_COOL.Temperature);         // BLB 20230405 corrected Td calculation\n    var Td = 243.12 * A / (17.62 - A);\n    \n    msg1.payload = Td;\n    msg1.payload = Number(msg1.payload).toFixed(2);\n    msg1.payload = parseFloat(msg1.payload);\n    msg1.topic = \"Dew Point (°C)\";\n        global.set(\"F_COOL.calculated_dew_point\",msg1.payload,\"file\");\n\n    msg2.payload = Td + F_COOL.safety_margin;\n    msg2.payload = Number(msg2.payload).toFixed(2);\n    msg2.payload = parseFloat(msg2.payload);\n    msg2.topic = 'Setpoint lower limit';\n        global.set(\"F_COOL.calculated_setpoint_lower_limit\",msg2.payload,\"file\");\n\n    // Requested COOL Setpoint\n    msg3.payload = Math.ceil(F_COOL.setpoint_requested);\n\n        // Check if requested setpoint is lower than dew-point + safety. If so, override it.\n            if (msg3.payload < msg2.payload && F_COOL.override_safety === false) { msg3.payload = msg2.payload};\n\n        // // Check if requested setpoint is lower than manual_setpoint_lower_limit. If so, override it.\n            if (msg3.payload < F_COOL.manual_setpoint_lower_limit && F_COOL.override_safety === false)  { msg3.payload = F_COOL.manual_setpoint_lower_limit; }\n            \n        // Check if requested setpoint is above limit of the heatpump (20°C). If so, override it.\n            if (msg3.payload > 20) { msg3.payload = 20}\n\n    // Check if heatpump is on. if not, do nothing / exit\n    if (TOP0_Heatpump_State === undefined || TOP0_Heatpump_State == 0) { return null } \n    \n    // check if COOL is in the current operating mode. if not, do nothing / exit\n    if (TOP4_Operating_Mode_State === undefined || TOP4_Operating_Mode_State == 0 || TOP4_Operating_Mode_State == 2 || TOP4_Operating_Mode_State == 3 || TOP4_Operating_Mode_State == 4) { return null }\n\n    \n\n    msg3.topic = 'new setpoint';\n    return msg3 \n\n}\n\n\n// If there is no humidity or temperature sensor data, the requested setpoint will be sent.\nif (F_COOL.RelativeHumidity === undefined && F_COOL.Temperature === undefined) {\n    msg3.payload = F_COOL.setpoint_requested\n    msg3.topic = 'new setpoint';\n    return msg3 \n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5300,
        "y": 580,
        "wires": [
            [
                "793e8c5bacadc28c",
                "4f5325f35beb918b"
            ],
            [
                "ebc53031586118c3"
            ]
        ],
        "outputLabels": [
            "Setpoint Requested",
            ""
        ]
    },
    {
        "id": "de420200e2112c80",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 5090,
        "y": 580,
        "wires": [
            [
                "4a7112414493107c"
            ]
        ]
    },
    {
        "id": "bc259ef4511cfc49",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Manual lower limit",
        "label": "-- Lower limit (man)",
        "tooltip": "",
        "group": "830a81a1c54c6ef5",
        "order": 7,
        "width": 6,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "manual_setpoint_lower_limit",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": "5",
        "max": "20",
        "step": "1",
        "className": "",
        "x": 4770,
        "y": 700,
        "wires": [
            [
                "57bd8e997e9659ed",
                "5d82a01035854d15"
            ]
        ]
    },
    {
        "id": "a0b2a8ca1de90c30",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link in 59",
        "links": [
            "47cb7500b0321fc1",
            "49ebac0412d87642",
            "b16ab0b5c23a9ca9"
        ],
        "x": 4285,
        "y": 540,
        "wires": [
            [
                "8446efaaa0db1b07"
            ]
        ]
    },
    {
        "id": "967eb9e23a816211",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 5100,
        "y": 700,
        "wires": [
            [
                "4a7112414493107c",
                "f13532d971be853e"
            ]
        ]
    },
    {
        "id": "7fd8e4be18710797",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Chart data",
        "func": "let msg1={};        // setpoint final\n    msg1.topic = 'Setpoint final';\n    \nlet msg2={};        // setpoint requested\n    msg2.topic = 'Setpoint requested';\n    \nlet msg3={};        // temperature\n    msg3.topic = 'Temperature';\n    \nlet msg4={};        // dewpoint\n    msg4.topic = 'Dew Point';\n    \nlet msg5={};        // calculated lower setpoint\n    msg5.topic = 'Lower limit (calc)';\n    \nlet msg6={};        // manual lower setpoint\n    msg6.topic = 'Lower limit (man)';\n\nif (msg.flush !== undefined) {\n    msg1.flush = msg.flush;\n    msg2.flush = msg.flush;\n    msg3.flush = msg.flush;\n    msg4.flush = msg.flush;\n    msg5.flush = msg.flush;\n    msg6.flush = msg.flush;\n\n}\n\nif (msg.topic == 'Z1_Cool_Request_Temp') {\n    msg1.payload = msg.payload;\n    node.send(msg1);\n}\n\n\nvar F_COOL = global.get('F_COOL',\"file\");\nif (F_COOL === undefined) {return null}\n\n\nif (msg.topic != 'Z1_Cool_Request_Temp') {\n    msg1.payload = global.get('Z1_Cool_Request_Temp');\n    if (msg1.payload === undefined) {return null}\n    node.send(msg1);\n}\n\nif (F_COOL.setpoint_requested === undefined) {return null}\nmsg2.payload = F_COOL.setpoint_requested;\nnode.send(msg2);\n\nif (F_COOL.Temperature === undefined) {return null}\nmsg3.payload = F_COOL.Temperature;\nnode.send(msg3);\n\nif (F_COOL.calculated_dew_point === undefined) {return null}\nmsg4.payload = F_COOL.calculated_dew_point;\nnode.send(msg4);\n\nif (F_COOL.calculated_setpoint_lower_limit === undefined) {return null}\nmsg5.payload = F_COOL.calculated_setpoint_lower_limit;\nnode.send(msg5);\n\nif (F_COOL.manual_setpoint_lower_limit === undefined) {return null}\nmsg6.payload = F_COOL.manual_setpoint_lower_limit;\nnode.send(msg6);\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4750,
        "y": 260,
        "wires": [
            [
                "71a59b9661071adc"
            ]
        ]
    },
    {
        "id": "ab9d088e21062ff8",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link in 60",
        "links": [
            "f13532d971be853e",
            "25691ccde88f5530"
        ],
        "x": 4545,
        "y": 260,
        "wires": [
            [
                "7fd8e4be18710797"
            ]
        ]
    },
    {
        "id": "b16ab0b5c23a9ca9",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link out 61",
        "mode": "link",
        "links": [
            "a0b2a8ca1de90c30"
        ],
        "x": 5615,
        "y": 560,
        "wires": []
    },
    {
        "id": "793e8c5bacadc28c",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 5510,
        "y": 560,
        "wires": [
            [
                "b16ab0b5c23a9ca9"
            ]
        ]
    },
    {
        "id": "2cc53aa4981b4a7d",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "9bbcceeeb21d12ab",
        "order": 3,
        "width": 9,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 4400,
        "y": 840,
        "wires": []
    },
    {
        "id": "c49ef874bd1fee9d",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "check",
        "func": "var check = flow.get(\"chart_cool\",\"file\");\n\nif (check === undefined) { return null }\n\nelse { \n    flow.set(\"chart_cool\", undefined,\"file\");\n    return msg\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4930,
        "y": 300,
        "wires": [
            [
                "cdd89d5c10c71407"
            ]
        ]
    },
    {
        "id": "f91c28a6cf174863",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "check",
        "x": 4580,
        "y": 120,
        "wires": [
            [
                "2bb5988706fb572a"
            ]
        ]
    },
    {
        "id": "c631c7c6b5043e9b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "FWD",
        "func": "return msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4605,
        "y": 500,
        "wires": [
            [
                "914dbce5e778229e",
                "6c93a57f910e03c2"
            ]
        ],
        "icon": "node-red-contrib-home-assistant-websocket/ha-events-all.svg",
        "l": false
    },
    {
        "id": "941c0631859a870e",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "FWD",
        "func": "return msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4645,
        "y": 600,
        "wires": [
            [
                "78e42bcd53ea8133"
            ]
        ],
        "icon": "node-red-contrib-home-assistant-websocket/ha-events-all.svg",
        "l": false
    },
    {
        "id": "5d82a01035854d15",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "FWD",
        "func": "return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4645,
        "y": 680,
        "wires": [
            [
                "bc259ef4511cfc49"
            ]
        ],
        "icon": "node-red-contrib-home-assistant-websocket/ha-events-all.svg",
        "l": false
    },
    {
        "id": "925216cb64196829",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "FWD",
        "func": "return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4415,
        "y": 1140,
        "wires": [
            [
                "c2c09dbebda13484"
            ]
        ],
        "icon": "node-red-contrib-home-assistant-websocket/ha-events-all.svg",
        "l": false
    },
    {
        "id": "6c6c2315d73dcb16",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "sensor - outside temperature",
        "links": [
            "90c369a401f8419d"
        ],
        "x": 155,
        "y": 140,
        "wires": [
            [
                "de6f11be608756eb"
            ]
        ]
    },
    {
        "id": "9f6d1c245559171f",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "livingroom temperature Z1",
        "links": [
            "af24bcd85c7c6485"
        ],
        "x": 155,
        "y": 260,
        "wires": [
            [
                "90cfed64c17d4090"
            ]
        ]
    },
    {
        "id": "e6d062c49d66078a",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link in 68",
        "links": [
            "93092472a2d44b45"
        ],
        "x": 4625,
        "y": 160,
        "wires": [
            [
                "0df0e84326dbeec7",
                "dea135ecc9872411"
            ]
        ]
    },
    {
        "id": "3072102c9a588df4",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link in 69",
        "links": [
            "b640b7d51f9d0adf"
        ],
        "x": 4625,
        "y": 80,
        "wires": [
            [
                "37a369fd9ad03085",
                "1d63998e541e4d5a"
            ]
        ]
    },
    {
        "id": "37db709069bc2dc2",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "link out 87",
        "mode": "link",
        "links": [
            "4212c42fb72cce77"
        ],
        "x": 1685,
        "y": 1460,
        "wires": []
    },
    {
        "id": "45c90f37a7b32d68",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP34 - panasonic_heat_pump/main/Z2_Heat_Request_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Heat_Request_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 3440,
        "wires": [
            [
                "70b76184cb3f0700",
                "c28359a361158840"
            ]
        ]
    },
    {
        "id": "ecb3b52a28d4771f",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP35 - panasonic_heat_pump/main/Z2_Cool_Request_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Cool_Request_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 3480,
        "wires": [
            [
                "2bd2d081e8cd67e2",
                "4f2bca0fed10c688"
            ]
        ]
    },
    {
        "id": "2bd2d081e8cd67e2",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.Z2_Cool_Request_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'Z2_Cool_Request_Temp';\nglobal.set(\"TOP35_Z2_Cool_Request_Temp\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 3480,
        "wires": [
            [
                "3b192c4fedabf0f7"
            ]
        ]
    },
    {
        "id": "70b76184cb3f0700",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.Z2_Heat_Request_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'Z2_Heat_Request_Temp';\nglobal.set(\"TOP34_Z2_Heat_Request_Temp\",msg.payload,\"file\");\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 3440,
        "wires": [
            [
                "ed363518f4ab4108"
            ]
        ]
    },
    {
        "id": "ed363518f4ab4108",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 88",
        "mode": "link",
        "links": [],
        "x": 1515,
        "y": 3440,
        "wires": []
    },
    {
        "id": "3b192c4fedabf0f7",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 89",
        "mode": "link",
        "links": [
            "e137742b346ad008"
        ],
        "x": 1515,
        "y": 3480,
        "wires": []
    },
    {
        "id": "ce5a606d14d7a2fe",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "link in 74",
        "links": [
            "3b0c5855d9f81d85"
        ],
        "x": 4655,
        "y": 2160,
        "wires": [
            [
                "319d7b2735937f1a"
            ]
        ]
    },
    {
        "id": "5e6950dffab43add",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "function 65",
        "func": "if (msg.payload == 1) {\n    \n    let msg1 = {};\n    \n    msg1.payload = global.get('DHW_automation_delay', \"file\") || 0;\n    msg1.topic = 'DelayValueAutoStartDHW';\n    node.send([null,msg1])\n    \n}\nreturn msg;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4955,
        "y": 2100,
        "wires": [
            [
                "c860a4238803ed02",
                "12c84fbd61e2d1c2"
            ],
            [
                "6f7002648d65f61c",
                "525b14e18368ad3b"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "a5eb2e2427c1608a",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP42 - panasonic_heat_pump/main/Z1_Water_Target_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Water_Target_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 460,
        "y": 3540,
        "wires": [
            [
                "10f3cc54edfb37d1",
                "9bb05cfc97431c09"
            ]
        ]
    },
    {
        "id": "10f3cc54edfb37d1",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.Z1_Water_Target_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (global.get('TOP42_Z1_Water_Target_Temp', \"file\") == msg.payload) { return null; }\n\nglobal.set(\"TOP42_Z1_Water_Target_Temp\", msg.payload, \"file\");\nmsg.topic = 'TOP42_Z1_Water_Target_Temp';\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 3540,
        "wires": [
            [
                "25633efa4485f375"
            ]
        ]
    },
    {
        "id": "25633efa4485f375",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 91 z1",
        "mode": "link",
        "links": [
            "fd2003d6bc939d36"
        ],
        "x": 1515,
        "y": 3540,
        "wires": []
    },
    {
        "id": "c1c8d438953b1c8b",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP16 - panasonic_heat_pump/main/Heat_Power_Consumption",
        "topic": "panasonic_heat_pump/main/Heat_Power_Consumption",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 3180,
        "wires": [
            [
                "ff3dd227527b76c3"
            ]
        ]
    },
    {
        "id": "8dc0ca4b26915b2a",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP41 - panasonic_heat_pump/main/DHW_Power_Consumption",
        "topic": "panasonic_heat_pump/main/DHW_Power_Consumption",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 3240,
        "wires": [
            [
                "10ca1d93fdd1afe2"
            ]
        ]
    },
    {
        "id": "7430c37f5c30419b",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 92",
        "mode": "link",
        "links": [
            "c3a9e17b02222cee",
            "8d56089ccc135555"
        ],
        "x": 1645,
        "y": 2360,
        "wires": []
    },
    {
        "id": "319d7b2735937f1a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "function 95",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4695,
        "y": 2240,
        "wires": [
            [
                "8effd9295d55099f",
                "a8be0fdf50f25150"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "bf9d1ac2d5e48dd5",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1480,
        "y": 1040,
        "wires": [
            [
                "fab44b5501eca10e"
            ]
        ]
    },
    {
        "id": "4f5325f35beb918b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "Filter",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nvar last_value = context.get('last_value');\nvar Z1_Cool_Request_Temp = global.get(\"Z1_Cool_Request_Temp\");\n\nif (last_value === undefined) {\n    context.set('last_value', msg.payload);\n    return null;\n}\n\nif (msg.payload != last_value || msg.payload != Z1_Cool_Request_Temp) {\n    context.set('last_value', msg.payload);\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5490,
        "y": 620,
        "wires": [
            [
                "6b2644c3a510f50f"
            ]
        ]
    },
    {
        "id": "9bc9b1a547ea7ef6",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "link out 93",
        "mode": "link",
        "links": [
            "efe3dd019498a583"
        ],
        "x": 5505,
        "y": 2100,
        "wires": []
    },
    {
        "id": "706c5dcd5d6c136b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "function 96",
        "func": "if (msg.payload == 0) { return msg; }",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5370,
        "y": 2100,
        "wires": [
            [
                "9bc9b1a547ea7ef6"
            ]
        ]
    },
    {
        "id": "0970bfa5a14caf6b",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "link out 94",
        "mode": "link",
        "links": [
            "071ac5a0f08a8fdb"
        ],
        "x": 4635,
        "y": 1800,
        "wires": []
    },
    {
        "id": "6689f388c8028972",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "Pumpspeed function on/off",
        "links": [
            "4d0ef717fa8fdb71"
        ],
        "x": 4205,
        "y": 1160,
        "wires": [
            [
                "c2c09dbebda13484",
                "dbb3202d2fc26245"
            ]
        ]
    },
    {
        "id": "399bbbd616d3dc55",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "",
        "pauseType": "delayv",
        "timeout": "0",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4660,
        "y": 1720,
        "wires": [
            [
                "f651bed25831c6f4",
                "cc388b93afb3633f"
            ]
        ]
    },
    {
        "id": "3b56718868c66537",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "f7bdc92c0ed8e3b9",
        "name": "",
        "pauseType": "delayv",
        "timeout": "0",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4660,
        "y": 1760,
        "wires": [
            [
                "c8b5382d8d981e31",
                "594db761914b5d1f"
            ]
        ]
    },
    {
        "id": "6766b92901602397",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link out 103 Z1",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 1605,
        "y": 880,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "df044144e4292bd6",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - RTC Calculated correction",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 880,
        "wires": [
            [
                "6766b92901602397"
            ]
        ]
    },
    {
        "id": "4f9a7ab2aa7cddaf",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP16 - panasonic_heat_pump/extra/Heat_Power_Consumption_Extra",
        "topic": "panasonic_heat_pump/extra/Heat_Power_Consumption_Extra",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 430,
        "y": 3180,
        "wires": [
            [
                "ff3dd227527b76c3"
            ]
        ]
    },
    {
        "id": "64ae46079504e47e",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP41 - panasonic_heat_pump/extra/DHW_Power_Consumption_Extra",
        "topic": "panasonic_heat_pump/extra/DHW_Power_Consumption_Extra",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 430,
        "y": 3240,
        "wires": [
            [
                "10ca1d93fdd1afe2"
            ]
        ]
    },
    {
        "id": "acd96dc2362a5f07",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 260,
        "wires": [
            [
                "0fb10778eba34911"
            ]
        ]
    },
    {
        "id": "f130c43288ca6830",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 140,
        "wires": [
            [
                "a8d51c8773f8f17f"
            ]
        ]
    },
    {
        "id": "f4fadebd69120ccb",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "d": true,
        "g": "cd2050a861736ec5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 4020,
        "wires": [
            [
                "a79fac04465c243e"
            ]
        ]
    },
    {
        "id": "c03d9863c2a397df",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 108",
        "mode": "link",
        "links": [],
        "x": 1565,
        "y": 3200,
        "wires": []
    },
    {
        "id": "b975cac67ff8c566",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 109",
        "mode": "link",
        "links": [],
        "x": 1565,
        "y": 3260,
        "wires": []
    },
    {
        "id": "ca493cc32dbac734",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "panasonic_heat_pump/main/DHW_Temp",
        "mode": "link",
        "links": [],
        "x": 880,
        "y": 3040,
        "wires": [],
        "l": true
    },
    {
        "id": "f27d2362712f5634",
        "type": "debug",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "debug 351",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 4950,
        "y": 1800,
        "wires": []
    },
    {
        "id": "594db761914b5d1f",
        "type": "debug",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "debug 352",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 4950,
        "y": 1740,
        "wires": []
    },
    {
        "id": "cc388b93afb3633f",
        "type": "debug",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "debug 353",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 4950,
        "y": 1700,
        "wires": []
    },
    {
        "id": "a1cf343333a2e923",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Delay timer",
        "func": "function myDelayFunction() {\n    let t = setTimeout(myEndFunction, timer);\n    context.set('tout',t);\n}\n\nfunction myEndFunction() {\n    let msg1={};\n    if (msg.topic == 'delayed_trigger'){\n        msg1.topic = 'delayed_trigger';\n    }\n    if (msg.force == 1) {msg1.force = 1;}\n    node.send(msg1);\n    node.status({});\n}\n\nfunction myResetFunction() {\n    let t = context.get('tout');    \n    clearTimeout(t);\n    node.status({});\n}\n\n//==================================\n\nif (msg.topic == 'reset'){\n    myResetFunction();\n}\nelse{\n    var timer = msg.delay;                                                          //  timer\n    timer = (timer * 1000) + 250;                                                    // increase timer by 250ms\n    node.status({fill:\"green\", shape:\"ring\", text:\"Active: \" + timer + \"ms\"});\n    \n    myDelayFunction();  \n}\nreturn null;\n\n/*\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n*/",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1560,
        "wires": [
            [
                "31085c7b9968960b"
            ]
        ]
    },
    {
        "id": "0a5b5d3209c8063f",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link out 117",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 5615,
        "y": 680,
        "wires": []
    },
    {
        "id": "ebc53031586118c3",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 5490,
        "y": 680,
        "wires": [
            [
                "0a5b5d3209c8063f"
            ]
        ]
    },
    {
        "id": "a48553dcdfc02694",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP39 - panasonic_heat_pump/main/Cool_Power_Consumption",
        "topic": "panasonic_heat_pump/main/Cool_Power_Consumption",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 450,
        "y": 3280,
        "wires": [
            []
        ]
    },
    {
        "id": "74172f1a206bfea3",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP61 - panasonic_heat_pump/main/External_Heater_State",
        "topic": "panasonic_heat_pump/main/External_Heater_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 380,
        "y": 6280,
        "wires": [
            [
                "2fe3cc6d0796f491"
            ]
        ]
    },
    {
        "id": "ed8415410fe465e9",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP60 - panasonic_heat_pump/main/Internal_Heater_State",
        "topic": "panasonic_heat_pump/main/Internal_Heater_State",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 380,
        "y": 6220,
        "wires": [
            [
                "a5ce82c6a09b57c7"
            ]
        ]
    },
    {
        "id": "cc43490e0d963df0",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "link out 124",
        "mode": "link",
        "links": [
            "13f0a9873929b3aa",
            "b98f96fc98434fef"
        ],
        "x": 1245,
        "y": 6220,
        "wires": []
    },
    {
        "id": "2225350cef3b4949",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "link out 125",
        "mode": "link",
        "links": [
            "9125ba3c859df852"
        ],
        "x": 1245,
        "y": 6260,
        "wires": []
    },
    {
        "id": "2fe3cc6d0796f491",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "Convert topic/style",
        "func": "/*\n\nDisable flow to hide the node(s) by sending msg.hide = true\nEnable flow  to show the node(s) by sending msg.hide = false\n\nIf panasonic.hide_external_heater is undefined , hide the node with fan2 (msg.hide = true)\nIf panasonic.hide_external_heater is true, but a value does come in, show the node with fan 2 again (msg.hide = false)\n\n*/\nvar TOP61 = global.get('TOP61_External_Heater_State',\"file\");\n\nif (msg.payload != TOP61) {\n    global.set('TOP61_External_Heater_State',msg.payload,\"file\");\n}\n\n\nvar hide_external_heater = global.get('panasonic.hide_external_heater',\"file\");\n\n// external heater is found and/or active\nif (hide_external_heater === undefined ) {\n    global.set('panasonic.hide_external_heater',true,\"file\");\n    let msg1={};\n    msg1.hide = true;\n    msg1.topic = 'GUI_01';\n    node.send([null,msg1])\n}\n\nif (hide_external_heater === true && msg.payload == 1) {\n    global.set('panasonic.hide_external_heater',false,\"file\");\n    let msg1={};\n    msg1.hide = false;\n    msg1.topic = 'GUI_01';\n    node.send([null,msg1])\n}\n\nif (msg.payload == 0) {\n    msg.color = \"\";\n    msg.payload = \"Inactive\";\n}\n\nif (msg.payload == 1) {\n    msg.color = \"gold\";\n    msg.payload = \"Active\";\n}\nreturn [msg,null];\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 6280,
        "wires": [
            [
                "2225350cef3b4949"
            ],
            [
                "845d04d2e0ef3df8"
            ]
        ],
        "outputLabels": [
            "to GUI",
            "to hide logic"
        ]
    },
    {
        "id": "845d04d2e0ef3df8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "link out 126",
        "mode": "link",
        "links": [
            "8a5ea7601f2f55ce"
        ],
        "x": 1245,
        "y": 6300,
        "wires": []
    },
    {
        "id": "dca26429693a97a5",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1470,
        "y": 1460,
        "wires": [
            [
                "37db709069bc2dc2"
            ]
        ]
    },
    {
        "id": "3c2421ea4805abd7",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "variable delay",
        "func": "var varDHW_Active = global.get('DHW_automation_active', \"file\");\n\nvar varDelay = global.get('DHW_automation_delay', \"file\") || 0;\n\n\nif (varDHW_Active == 0 || varDHW_Active === undefined) {\n    msg.delay = varDelay * 1000 * 60 ;  // Convert from minutes to miliseconds.\n}\nif (varDHW_Active == 1) {\n    msg.delay = 0;\n}\n\n// Note:\n// msg.delay is a value in miliseconds. \n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 2740,
        "wires": [
            [
                "26702c45c5aebf5a"
            ]
        ]
    },
    {
        "id": "26702c45c5aebf5a",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "name": "",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2180,
        "y": 2740,
        "wires": [
            [
                "776b44e9514fb3b1"
            ]
        ]
    },
    {
        "id": "776b44e9514fb3b1",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "link out 130",
        "mode": "link",
        "links": [
            "64021d928c59c5cd"
        ],
        "x": 2285,
        "y": 2740,
        "wires": []
    },
    {
        "id": "8617219438de4f15",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 820,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "f770f6593953cb81",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "25",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 820,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "dccf18203888b181",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 820,
        "wires": [
            [
                "148fdf6802233c77"
            ]
        ]
    },
    {
        "id": "0b296635b9d1406f",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "name": "link in 93",
        "links": [
            "d54ac3b979428b64"
        ],
        "x": 1905,
        "y": 2740,
        "wires": [
            [
                "3c2421ea4805abd7"
            ]
        ]
    },
    {
        "id": "0118e175ceb85a70",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 6380,
        "wires": [
            [
                "a7cff05f05e5610c"
            ]
        ]
    },
    {
        "id": "a7cff05f05e5610c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "function 117",
        "func": "global.set('panasonic.hide_external_heater',undefined,\"file\");\nglobal.set('panasonic.hide_fan2',undefined,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 6380,
        "wires": [
            []
        ]
    },
    {
        "id": "b28a85e192c0263e",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 2080,
        "wires": [
            [
                "2cc0e76e60be0d9f"
            ]
        ]
    },
    {
        "id": "2cc0e76e60be0d9f",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 135",
        "mode": "link",
        "links": [
            "c24406bef1e6355d"
        ],
        "x": 1055,
        "y": 2080,
        "wires": []
    },
    {
        "id": "8e7a86930e1fd875",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 136",
        "mode": "link",
        "links": [
            "3764998155e75bbb"
        ],
        "x": 965,
        "y": 3920,
        "wires": []
    },
    {
        "id": "d076ca8f3d1efe81",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 137",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1365,
        "y": 3900,
        "wires": []
    },
    {
        "id": "0f227f10f68c8a90",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "LineChart (0)",
        "mode": "link",
        "links": [
            "fe8e23b8971b868e"
        ],
        "x": 2170,
        "y": 2240,
        "wires": [],
        "l": true
    },
    {
        "id": "daf8a69452c4cc9a",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "Break",
        "func": "if (global.get('Sterilization_active', \"file\") == 1 || global.get('Force_DHW_active', \"file\") == 1){\n    return null\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 835,
        "y": 980,
        "wires": [
            [
                "2ade66982bca360c",
                "2695bccfb69a52d5"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "1d2e261567b2acba",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "1d8b21349d38bc85",
        "name": "link out to SET16",
        "mode": "link",
        "links": [
            "ea62546371ce867f"
        ],
        "x": 2245,
        "y": 5360,
        "wires": []
    },
    {
        "id": "08a50bcaae84671e",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1560,
        "y": 2360,
        "wires": [
            [
                "7430c37f5c30419b"
            ]
        ]
    },
    {
        "id": "bab92195d66e60de",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "name": "ToNightReductionToggle",
        "links": [
            "d10d22a53b6cc13e"
        ],
        "x": 645,
        "y": 5080,
        "wires": [
            [
                "f0b7868c48887de4"
            ]
        ]
    },
    {
        "id": "a5ce82c6a09b57c7",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "function 125",
        "func": "var TOP60 = global.get('TOP60_Internal_Heater_State',\"file\");\n\nif (msg.payload != TOP60) {\n    global.set('TOP60_Internal_Heater_State',msg.payload,\"file\");\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 6220,
        "wires": [
            [
                "cc43490e0d963df0"
            ]
        ]
    },
    {
        "id": "c339f5836ed9c333",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 145",
        "mode": "link",
        "links": [
            "9ec6cc137f9d2879",
            "6975a9203322908e",
            "cfe952f282bf8725",
            "6aa9597642c17347"
        ],
        "x": 875,
        "y": 2040,
        "wires": []
    },
    {
        "id": "056b20bad4b28052",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 146",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7",
            "836e280d214473ba"
        ],
        "x": 765,
        "y": 4060,
        "wires": []
    },
    {
        "id": "37625c4ab3823016",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "Prod HEAT",
        "mode": "link",
        "links": [
            "49f2dcdba8f7fddd"
        ],
        "x": 2170,
        "y": 2280,
        "wires": [],
        "l": true
    },
    {
        "id": "28bf8173d72ae0d0",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "Prod DHW",
        "mode": "link",
        "links": [
            "252dbcadc758c04d"
        ],
        "x": 2170,
        "y": 2320,
        "wires": [],
        "l": true
    },
    {
        "id": "8084f5f9211ba26e",
        "type": "ui_chart",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Production DHW + HEAT (12m)",
        "group": "fb77ab43998a2f18",
        "order": 8,
        "width": 26,
        "height": 7,
        "label": "Monthly Production (kWh)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#007585",
            "#de425b",
            "#f59b56",
            "#fff18f",
            "#89bf77",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 5010,
        "y": 2760,
        "wires": [
            []
        ]
    },
    {
        "id": "df9f1d7eb2e2550e",
        "type": "bar-chart-data",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "bar-chart DHW Prod-12months",
        "x_interval": "months",
        "x_size": "12",
        "unit": "kWh",
        "precision": "1",
        "is_meter_reading": "False",
        "agg_by": "sum",
        "prevent_negative": false,
        "x": 5010,
        "y": 2680,
        "wires": [
            [
                "4f03d129f6b4ebf8"
            ]
        ]
    },
    {
        "id": "9562dc64f479308b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Load bar-chart data",
        "func": "var heat = global.get(\"HEAT_Prod_24m\",\"file\");\nvar dhw = global.get(\"DHW_Prod_24m\",\"file\");\nlet msg1 = {}, msg2 = {};\n\n// note: if you need to correct the COP monthly chart because it does not show values. Copy/paste the content of \"COP_DHW_24m\" or \"COP_HEAT_24m\" in the lines below. Line 8 or 9. \n// Uncomment the corresponding line 8 or 9. \n// adjust the incorrect value and press [Done] > [Deploy] > [Restore after boot]\n\n//dhw = {\"payload\":[{\"labels\":[\"2022-01\",\"2022-02\",\"2022-03\",\"2022-04\",\"2022-05\",\"2022-06\",\"2022-07\",\"2022-08\",\"2022-09\",\"2022-10\",\"2022-11\",\"2022-12\"],\"series\":[\"DHW\"],\"data\":[[0,0,0,0,3.84,3.05,1.13,3.65,3.68,3.89,3.29,2.79]]}],\"topic\":\"DHW\",\"_msgid\":\"46ca0b6da9dae345\",\"_event\":\"node:5787c91b303f2538\",\"bar_keys\":[\"202201\",\"202202\",\"202203\",\"202204\",\"202205\",\"202206\",\"202207\",\"202208\",\"202209\",\"202210\",\"202211\",\"202212\"],\"data_counter\":[{\"202212\":4814}],\"topics\":[\"DHW\"],\"DHW_last\":0,\"data_min\":0,\"data_max\":3.89,\"data_sum\":25.32,\"settings\":{\"unit\":\"\",\"x_size\":\"12\",\"precision\":2,\"is_meter_reading\":false,\"agg_by\":\"avg\"}};\n//heat = {\"payload\":[{\"labels\":[\"2022-01\",\"2022-02\",\"2022-03\",\"2022-04\",\"2022-05\",\"2022-06\",\"2022-07\",\"2022-08\",\"2022-09\",\"2022-10\",\"2022-11\",\"2022-12\"],\"series\":[\"HEAT\"],\"data\":[[0,0,0,0,4.86,6.01,0.64,0,6.57,7.43,6.32,4.96]]}],\"topic\":\"HEAT\",\"_msgid\":\"a3d2b37df2f169e3\",\"_event\":\"node:306b69356454f3ff\",\"bar_keys\":[\"202201\",\"202202\",\"202203\",\"202204\",\"202205\",\"202206\",\"202207\",\"202208\",\"202209\",\"202210\",\"202211\",\"202212\"],\"data_counter\":[{\"202212\":85520}],\"topics\":[\"HEAT\"],\"HEAT_last\":0,\"data_min\":0,\"data_max\":7.43,\"data_sum\":36.79,\"settings\":{\"unit\":\"\",\"x_size\":\"12\",\"precision\":\"2\",\"is_meter_reading\":false,\"agg_by\":\"avg\"}}\n\nmsg1 = heat;\nmsg2 = dhw;\n\n\n\nif (heat === undefined)     {\n    if (dhw === undefined)  {\n        return [null,null];\n    }\n    \n    return [null,msg2];\n}\n\nelse    {\n    if (dhw === undefined)  {\n        return [msg1,null];\n    }\n    \n    return [msg1,msg2];\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4590,
        "y": 2480,
        "wires": [
            [
                "44250d331a28dc00"
            ],
            [
                "df9f1d7eb2e2550e"
            ]
        ],
        "outputLabels": [
            "COP_HEAT_24m",
            "COP_DHW_24m"
        ]
    },
    {
        "id": "86806db2ffd37031",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Restore after boot",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "trigger",
        "x": 4270,
        "y": 2480,
        "wires": [
            [
                "9562dc64f479308b"
            ]
        ]
    },
    {
        "id": "9712afabf73ab6d3",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "12month information",
        "info": "",
        "x": 4250,
        "y": 2440,
        "wires": []
    },
    {
        "id": "49f2dcdba8f7fddd",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Prod_Heat",
        "links": [
            "37625c4ab3823016"
        ],
        "x": 4260,
        "y": 2580,
        "wires": [
            [
                "1a1378859215eb51"
            ]
        ],
        "l": true
    },
    {
        "id": "252dbcadc758c04d",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Prod_DHW",
        "links": [
            "28bf8173d72ae0d0"
        ],
        "x": 4270,
        "y": 2680,
        "wires": [
            [
                "90e15190bf40c768"
            ]
        ],
        "l": true
    },
    {
        "id": "0670e77adadab99f",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "!msg/min",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4600,
        "y": 2580,
        "wires": [
            [
                "eef6f0607054107d"
            ]
        ]
    },
    {
        "id": "603b83d0205b7851",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "",
        "pauseType": "rate",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 4610,
        "y": 2680,
        "wires": [
            [
                "22ea5e56f469dd5f"
            ]
        ]
    },
    {
        "id": "90e15190bf40c768",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "DHW",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "DHW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4430,
        "y": 2680,
        "wires": [
            [
                "603b83d0205b7851"
            ]
        ]
    },
    {
        "id": "1a1378859215eb51",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Topic HEAT",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "HEAT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4450,
        "y": 2580,
        "wires": [
            [
                "0670e77adadab99f"
            ]
        ]
    },
    {
        "id": "44250d331a28dc00",
        "type": "bar-chart-data",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "bar-chart HEAT Prod-12months",
        "x_interval": "months",
        "x_size": "12",
        "unit": "kWh",
        "precision": "1",
        "is_meter_reading": "False",
        "agg_by": "sum",
        "x": 5010,
        "y": 2580,
        "wires": [
            [
                "c0cfa25a2dc1851c"
            ]
        ]
    },
    {
        "id": "a3792df4088fd2c4",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Bucket 1 + 2  combined to chart",
        "info": "",
        "x": 4310,
        "y": 2720,
        "wires": []
    },
    {
        "id": "d54536cd7f377129",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Once per 15minutes",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": "5",
        "topic": "trigger",
        "x": 4300,
        "y": 2760,
        "wires": [
            [
                "35c15a4c210a4b20"
            ]
        ]
    },
    {
        "id": "34b1c2b1b59cfe2c",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "clear",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "clear",
        "payloadType": "str",
        "x": 4390,
        "y": 2800,
        "wires": [
            []
        ]
    },
    {
        "id": "35c15a4c210a4b20",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "Function - bucket 1 + 2 combined",
        "func": "/*\nvar dhw     = global.get(\"DHW_Prod_24m\",\"file\");\nvar heat    = global.get(\"HEAT_Prod_24m\",\"file\"); \nlet msg1={}, msg2={};\n\nmsg1 = dhw;\nmsg2 = heat;\n\nvar varlabels;\nif (heat === undefined){varlabels = msg1.payload[0].labels;}else{varlabels = msg2.payload[0].labels;}\n\nvar varData1;// dhw\nif (dhw === undefined){varData1 = [0,0,0,0,0,0,0,0,0,0,0,0];}else{varData1 = msg1.payload[0].data[0];}\n\nvar varData2;// heat\nif (heat === undefined){varData2 = [0,0,0,0,0,0,0,0,0,0,0,0];}else{varData2 = msg2.payload[0].data[0];}\n\nvar varSeries1     = \"DHW\"; // dhw\nvar varSeries2     = \"HEAT\"; // heat\n\nvar m={};\n    m.labels    = varlabels;\n    m.series    = [varSeries1, varSeries2];\n    m.data      = [varData1, varData2];\n\n\nreturn {payload:[m]};\n*/\n\n// Get global values\nvar dhw = global.get(\"DHW_Prod_24m\", \"file\");\nvar heat = global.get(\"HEAT_Prod_24m\", \"file\");\n\n// Safely get labels\nvar varlabels;\nif (heat && heat.payload && heat.payload[0]) {\n    varlabels = heat.payload[0].labels;\n} else if (dhw && dhw.payload && dhw.payload[0]) {\n    varlabels = dhw.payload[0].labels;\n} else {\n    varlabels = [];  // fallback if both missing\n}\n\n// Safely get DHW data\nvar varData1 = (dhw && dhw.payload && dhw.payload[0] && dhw.payload[0].data)\n    ? dhw.payload[0].data[0]\n    : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n// Safely get HEAT data\nvar varData2 = (heat && heat.payload && heat.payload[0] && heat.payload[0].data)\n    ? heat.payload[0].data[0]\n    : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n// Series labels\nvar varSeries1 = \"DHW\";\nvar varSeries2 = \"HEAT\";\n\n// Build output object\nvar m = {\n    labels: varlabels,\n    series: [varSeries1, varSeries2],\n    data: [varData1, varData2]\n};\n\n// Return as payload\nreturn { payload: [m] };\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4640,
        "y": 2760,
        "wires": [
            [
                "8084f5f9211ba26e"
            ]
        ],
        "outputLabels": [
            "graaddagen_calc"
        ]
    },
    {
        "id": "eef6f0607054107d",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "kwmin-kWh",
        "func": "var payload = msg.payload; //get payload\nmsg.payload = payload / (60);\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4770,
        "y": 2580,
        "wires": [
            [
                "44250d331a28dc00"
            ]
        ]
    },
    {
        "id": "22ea5e56f469dd5f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "kwmin-kWh",
        "func": "var payload = msg.payload; //get payload\nmsg.payload = payload / (60);\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4770,
        "y": 2680,
        "wires": [
            [
                "df9f1d7eb2e2550e"
            ]
        ]
    },
    {
        "id": "656084b3eaf62cae",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 5090,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "4f03d129f6b4ebf8",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d3625ab8f8c674e0",
        "name": "Store information to DHW_Prod_24m",
        "func": "var myArray210 = msg;\nglobal.set(\"DHW_Prod_24m\", myArray210,\"file\");\n//return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5330,
        "y": 2680,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "c0cfa25a2dc1851c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "ba628ef3a4f580da",
        "name": "Store information to COP_Prod_24m",
        "func": "var myArray4 = msg;\nglobal.set(\"HEAT_Prod_24m\", myArray4,\"file\");\n//return msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5330,
        "y": 2580,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "343090bf44a08674",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "External link",
        "links": [
            "18038fcd6bb30412"
        ],
        "x": 4775,
        "y": 2060,
        "wires": [
            [
                "5e6950dffab43add"
            ]
        ]
    },
    {
        "id": "919df257a873566d",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link in 112",
        "links": [
            "e5b0e6d0b0b7a2dd"
        ],
        "x": 4545,
        "y": 440,
        "wires": [
            [
                "c631c7c6b5043e9b",
                "57bd8e997e9659ed"
            ]
        ]
    },
    {
        "id": "b48b472f29cf9f83",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "TOP43 - panasonic_heat_pump/main/Z2_Water_Target_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Water_Target_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 460,
        "y": 3580,
        "wires": [
            [
                "d75651b2bf8c087b",
                "b3fdc52e42ac1b77"
            ]
        ]
    },
    {
        "id": "d75651b2bf8c087b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "set.Z2_Water_Target_Temp",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (global.get('TOP43_Z2_Water_Target_Temp', \"file\") == msg.payload) { return null; }\n\nglobal.set(\"TOP43_Z2_Water_Target_Temp\", msg.payload, \"file\");\nmsg.topic = 'TOP43_Z2_Water_Target_Temp';\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 3580,
        "wires": [
            [
                "2eb2a1faee5c5e8c"
            ]
        ]
    },
    {
        "id": "f34333d0f62bbd2d",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "TOP29 - panasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5400,
        "wires": [
            [
                "9005e7a87f86a06e",
                "5e56ba56cb2fd474",
                "1034d22d437cc0cd"
            ]
        ]
    },
    {
        "id": "3bc5097d830124b3",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "TOP83 - panasonic_heat_pump/main/Z2_Heat_Curve_Target_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Heat_Curve_Target_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5820,
        "wires": [
            [
                "6172e4f89fd4f42e",
                "469b70130c227f33",
                "201f3629183826f4"
            ]
        ]
    },
    {
        "id": "8c625c2c57e7dca5",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "TOP84 - panasonic_heat_pump/main/Z2_Heat_Curve_Outside_High_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Heat_Curve_Outside_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5900,
        "wires": [
            [
                "d7b3727f33997237",
                "469b70130c227f33",
                "201f3629183826f4"
            ]
        ]
    },
    {
        "id": "1409253ad20d8836",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "TOP85 - panasonic_heat_pump/main/Z2_Heat_Curve_Outside_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Heat_Curve_Outside_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5940,
        "wires": [
            [
                "23efeb5c94e4f406",
                "469b70130c227f33",
                "201f3629183826f4"
            ]
        ]
    },
    {
        "id": "469b70130c227f33",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "Store Z2 CCC",
        "func": "var war_ot1         = global.get('F_CCC.z2.ot1',\"file\");                 // Outside temperature high         (warm outside)\nvar war_ot2         = global.get('F_CCC.z2.ot2',\"file\");                 // Outside temperature intermediate (intermediate outside temperature)\nvar war_ot3         = global.get('F_CCC.z2.ot3',\"file\");                 // Outside temperature low          (cold outside)\n\nvar war_wt1         = global.get('F_CCC.z2.wt1',\"file\");                 // Water temperature low            (cold water)\nvar war_wt2         = global.get('F_CCC.z2.wt2',\"file\");                 // Water temperature intermediate   (intermediate water temperature)\nvar war_wt3         = global.get('F_CCC.z2.wt3',\"file\");                 // Water temperature high           (warm water)\nlet msg99={};\n\n/*\n                weer    buiten      water\n                warm    war_ot1     war_wt1\n                        war_ot2     war_wt2\n                cold    war_ot3     war_wt3\n*/\n\nif (msg.topic==\"panasonic_heat_pump/main/Z2_Heat_Curve_Target_High_Temp\")       { global.set('Z2_Heat_Curve_Target_High_Temp',msg.payload); }\nif (msg.topic == \"panasonic_heat_pump/main/Z2_Heat_Curve_Target_Low_Temp\")      { global.set('Z2_Heat_Curve_Target_Low_Temp', msg.payload); }\nif (msg.topic == \"panasonic_heat_pump/main/Z2_Heat_Curve_Outside_High_Temp\")    { global.set('Z2_Heat_Curve_Outside_High_Temp', msg.payload); }\nif (msg.topic == \"panasonic_heat_pump/main/Z2_Heat_Curve_Outside_Low_Temp\")     { global.set('Z2_Heat_Curve_Outside_Low_Temp', msg.payload); }\n\n\nif ((war_ot1+war_ot2+war_ot3+war_wt1+war_wt2+war_wt3)>-1000)\n    {\n        msg99.topic=\"SYSTEM\";\n        msg99.payload=\"CCC Zone 2 settings are OK\";\n        return [null,msg99]\n    }\n\nmsg99.topic=\"Function CCC Z2\";\n\nif (war_wt2===undefined)\n    {\n        if (msg.topic==\"panasonic_heat_pump/main/Z2_Heat_Curve_Target_High_Temp\")\n            {\n                global.set('F_CCC.z2.wt2',msg.payload,\"file\");\n                msg99.payload=\"Imported TOP82 from Panasonic (Z2_Heat_Curve_Target_High_Temp = \" + msg.payload + \"°C)\";\n                if (war_wt3===undefined)\n                    {\n                        global.set('F_CCC.z2.wt3',msg.payload,\"file\");\n                    }\n                return [msg,msg99]\n            }\n    }\n    \nif (war_wt1===undefined)\n    {\n        if (msg.topic==\"panasonic_heat_pump/main/Z2_Heat_Curve_Target_Low_Temp\")\n            {\n                global.set('F_CCC.z2.wt1',msg.payload,\"file\");\n                msg99.payload=\"Imported TOP83 from Panasonic (Z2_Heat_Curve_Target_Low_Temp = \" + msg.payload + \"°C)\";\n                \n                \n                return [msg,msg99]\n            }\n    }\n\nif (war_ot1===undefined)\n    {\n        if (msg.topic==\"panasonic_heat_pump/main/Z2_Heat_Curve_Outside_High_Temp\")\n            {\n                global.set('F_CCC.z2.ot1',msg.payload,\"file\");\n                msg99.payload=\"Imported TOP84 from Panasonic (Z2_Heat_Curve_Outside_High_Temp = \" + msg.payload + \"°C)\";\n                return [msg,msg99]\n            }\n    }\nif (war_ot2===undefined)\n    {\n        if (msg.topic==\"panasonic_heat_pump/main/Z2_Heat_Curve_Outside_Low_Temp\")\n            {\n                global.set('F_CCC.z2.ot2',msg.payload,\"file\");\n                msg99.payload=\"Imported TOP85 from Panasonic (Z2_Heat_Curve_Outside_Low_Temp = \" + msg.payload + \"°C)\";\n                if (war_ot3===undefined)\n                    {\n                        global.set('F_CCC.z2.ot3',msg.payload-1,\"file\");\n                    }\n                return [msg,msg99]\n            }\n    }\n\nreturn null;",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 5860,
        "wires": [
            [
                "285dd5263c5648c2"
            ],
            [
                "c27eb9b957620c8c"
            ]
        ],
        "outputLabels": [
            "",
            "ToLog"
        ]
    },
    {
        "id": "e35e41f116eee384",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1235,
        "y": 5920,
        "wires": []
    },
    {
        "id": "c27eb9b957620c8c",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1130,
        "y": 5920,
        "wires": [
            [
                "e35e41f116eee384"
            ]
        ]
    },
    {
        "id": "285dd5263c5648c2",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1140,
        "y": 5820,
        "wires": [
            [
                "76e65f54ff08aa50"
            ]
        ]
    },
    {
        "id": "76e65f54ff08aa50",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "05065bbd47aa9dd3",
            "2f64e66b2021a0eb"
        ],
        "x": 1235,
        "y": 5820,
        "wires": []
    },
    {
        "id": "f3c2c4ba31654905",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 35,
        "width": 3,
        "height": 1,
        "name": "Water temp.",
        "label": "<font color=gray>Water temp.</font>",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 770,
        "y": 5740,
        "wires": []
    },
    {
        "id": "d734aa3de12a2fcd",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 34,
        "width": 3,
        "height": 1,
        "name": "Outside temp.",
        "label": "<font color=gray>Outside temp.</font>",
        "format": "",
        "layout": "col-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 700,
        "y": 5860,
        "wires": []
    },
    {
        "id": "d7611dc3c0395f05",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "name": "Line - Setup ",
        "order": 40,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Internal Panasonic profile (read-only)</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 590,
        "y": 5740,
        "wires": [
            []
        ]
    },
    {
        "id": "34599c1422d8d7fb",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 39,
        "width": 3,
        "height": 1,
        "name": "war_wt2",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 5780,
        "wires": []
    },
    {
        "id": "6172e4f89fd4f42e",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 37,
        "width": 3,
        "height": 1,
        "name": "war_wt1",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 5820,
        "wires": []
    },
    {
        "id": "d7b3727f33997237",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 36,
        "width": 3,
        "height": 1,
        "name": "war_ot1",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 5900,
        "wires": []
    },
    {
        "id": "23efeb5c94e4f406",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 38,
        "width": 3,
        "height": 1,
        "name": "war_ot2",
        "label": "",
        "format": "<font color=gray>{{value}} °C</font>",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 800,
        "y": 5940,
        "wires": []
    },
    {
        "id": "67f4f9e69ae5f2c5",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "group": "76ac95177cc46b00",
        "order": 41,
        "width": 8,
        "height": 1,
        "name": "text: In DIRECT mode, the water temperature high is variable",
        "label": "<font color=gray>In Compensation Curve mode, the water temperature is variable</font>",
        "format": "",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 740,
        "y": 5980,
        "wires": []
    },
    {
        "id": "09fc4c4434798d90",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "TOP82 - panasonic_heat_pump/main/Z2_Heat_Curve_Target_High_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Heat_Curve_Target_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 440,
        "y": 5780,
        "wires": [
            [
                "34599c1422d8d7fb",
                "469b70130c227f33",
                "201f3629183826f4"
            ]
        ]
    },
    {
        "id": "d625be872191a9a8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link out 11 Z2",
        "mode": "link",
        "links": [
            "7c30bffd90c4b164"
        ],
        "x": 3215,
        "y": 800,
        "wires": []
    },
    {
        "id": "51a6bac27fdf889f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "Function CCC (zone2)",
        "func": "// All these functions ONLY need to be executed when the heatpump is in HEAT mode. \nvar msg1 = {};        //  pin 1 - SP_CCC (function on)\nvar msg99 = {};        //  pin 2 - Log information\n\n//******************************************************************************\nvar TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');                    // Get the global variable for current possition of the three way valve. ROOM or DHW mode. (0=HEAT / 1=DHW)\n\tif (TOP20_ThreeWay_Valve_State === undefined) { return null; }\nvar Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\");\n\tif (Operating_Mode === undefined) { return null; }\nvar current_sp = global.get('TOP43_Z2_Water_Target_Temp',\"file\");                        // TOP27\n\tif (current_sp === undefined) { return null; }\nvar TOP76_Heating_Mode = global.get('TOP76_Heating_Mode', \"file\");                     // TOP76 - Compensation curve or DIRECT mode\n\tif (TOP76_Heating_Mode === undefined) { return null; }\nvar ccc_state = global.get('F_CCC.z2.state', \"file\");          // Get the global variable. Used to see if the WAR function is enabled.\n\tif (ccc_state === undefined) { ccc_state = 0; global.set('F_CCC.z2.state', 0, \"file\"); }\nvar TOP94_Zones_State = global.get(\"TOP94_Zones_State\",\"file\");\n    if (TOP94_Zones_State === undefined) { return null ; }\n\n//******************************************************************************\nvar war_ot1 = global.get('F_CCC.z2.ot1', \"file\");                             // Outside temperature high         (warm outside)\nvar war_ot2 = global.get('F_CCC.z2.ot2', \"file\");                             // Outside temperature intermediate (intermediate outside temperature)\nvar war_ot3 = global.get('F_CCC.z2.ot3', \"file\");                             // Outside temperature low          (cold outside)\n\nvar war_wt1 = global.get('F_CCC.z2.wt1', \"file\");                             // Water temperature low            (cold water)\nvar war_wt2 = global.get('F_CCC.z2.wt2', \"file\");                             // Water temperature intermediate   (intermediate water temperature)\nvar war_wt3 = global.get('F_CCC.z2.wt3', \"file\");                             // Water temperature high           (warm water)\n\n//******************************************************************************\n\nvar SP_start = global.get('F_CCC.z2.SP_DIRECT_virt', \"file\");                       // Get the global variable for SP_DIRECT_virt. Value is set through the dashboard\nif (TOP76_Heating_Mode === 1 && (SP_start < 20 || SP_start === undefined || TOP94_Zones_State === 0)) {\n    SP_start = 20;\n    global.set('F_CCC.z2.SP_DIRECT_virt', 20, \"file\");\n}\nif (TOP76_Heating_Mode === 0 && (SP_start > 5 || SP_start === undefined || TOP94_Zones_State === 0)) {\n    SP_start = -5;\n    global.set('F_CCC.z2.SP_DIRECT_virt', 0, \"file\");\n}\n\n\nvar check = (war_ot1 + war_ot2 + war_ot3 + war_wt1 + war_wt2 + war_wt3);\nif (isNaN(check) || check === undefined)     // if the variables are added to eachother and the result is Not a Number, produce an error message.\n{\n    msg99.payload = \"<font color=red>Profile temperatures are not correctly set in the dashboard. Waiting for Panasonic import or user input</font>\";\n    msg99.topic = \"Function CCC (Zone 2)\";\n    global.set('F_CCC.z2.state', 0, \"file\");\n    global.set('F_CCC.z2.setpoint', SP_start, \"file\");\n    return [null, msg99];\n}\n\nif (war_wt2 < war_wt1 || war_wt3 < war_wt1) {\n    msg99.payload = \"<font color=red>Temperature profile is inverted and not setup correctly. This requires your attention. CCC-function disabled</font>\";\n    msg99.topic = \"Function CCC (Zone 2)\";\n    global.set('F_CCC.z2.state', 0, \"file\");\n    global.set('F_CCC.z2.setpoint', SP_start, \"file\");\n    return [null, msg99, msg99];\n}\n\nvar SP_ccc;                                                                     // set empty starting variable\n\nvar war_Tb = global.get('T_outside', \"file\");                           // Outdoor temperature.\nif (isNaN(war_Tb) || war_Tb === undefined || war_Tb < -50)             // if the variable is Not a Number, produce an error message.\n{\n    msg99.payload = \"T_outside is not valid. Waiting for correct value.\";\n    msg99.topic = \"Function CCC (Zone 2)\";\n    //global.set('F_CCC.z2.setpoint', SP_start, \"file\");\n    return [null, msg99];\n}\n\nvar F_CCC_old_SP = global.get('F_CCC.z2.setpoint', \"file\");\nif (F_CCC_old_SP === undefined) {\n    F_CCC_old_SP = SP_start;\n    global.set('F_CCC.z2.setpoint', SP_start);\n}\n\n\n////////////////////////////////////////////////////////////////////////////////\n//      Calculation of the NR WAR Setpoint\n////////////////////////////////////////////////////////////////////////////////\n\n\n\nif (war_Tb >= war_ot1) { SP_ccc = war_wt1; }                                         // Range 1\n\nif (war_Tb < war_ot1 && war_Tb > war_ot2)                       // Range 2\n{ SP_ccc = (((war_wt1 - war_wt2) * ((war_Tb - war_ot1) / (war_ot1 - war_ot2))) + war_wt1); }\n\n\nif (war_Tb <= war_ot2 && war_Tb > war_ot3)                      // Range 3\n{ SP_ccc = (((war_wt2 - war_wt3) * ((war_Tb - war_ot2) / (war_ot2 - war_ot3))) + war_wt2); }\n\nif (war_Tb <= war_ot3)                                          // Range 4\n{ SP_ccc = war_wt3; }\n\nSP_ccc = Number(SP_ccc).toFixed(1);\nSP_ccc = parseFloat(SP_ccc);\n\n\n////////////////////////////////////////////////////////////////////////////////\n//      Compensation curve being used. WAR function not allowed.\n////////////////////////////////////////////////////////////////////////////////\nif (TOP76_Heating_Mode === 0) {                    // Compensation Curve\n    if (ccc_state === 1) {\n        global.set('F_CCC.z2.state', 0, \"file\");\n        msg99.payload = \"Compensation curve active. Using internal Panasonic WAR function. NodeRed WAR function is now disabled\";\n        msg99.topic = \"Function CCC (Zone 2)\";\n        return [null, msg99];\n    }\n    //if (ccc_state === 0 || ccc_state === undefined) { SP_ccc = SP_start; }\n    global.set('F_CCC.z2.setpoint', SP_ccc, \"file\");\n    msg1.payload = SP_ccc;\n    return [msg1, null];\n}\n////////////////////////////\n\n\n////////////////////////////////////////////////////////////////////////////////\n//      Direct mode > WAR function allowed.\n////////////////////////////////////////////////////////////////////////////////\nif (TOP76_Heating_Mode === 1) {                // Direct\n    if (TOP20_ThreeWay_Valve_State === 1 || Operating_Mode === undefined || current_sp === 0 || TOP76_Heating_Mode === 0 || Operating_Mode === 1 || Operating_Mode === 3 || Operating_Mode === 5 || Operating_Mode === 7 || Operating_Mode === 8) {\n        return null;                                                        // If state is 1 (DHW mode), correction 0 is direclty exported to the message and the function ends here.\n    }\n\n    msg1.payload = SP_ccc;                                                         // required\n    msg1.topic = 'SP_war';\n    msg1.source = 'WAR';\n\n    if (ccc_state === 0) {                                            // If the state is 1 (enabled), AND outside temperature contains a value.\n        global.set('F_CCC.z2.setpoint', SP_start, \"file\");\n        msg1.payload = SP_start;\n        return [msg1, null];\n    }\n\n    if (ccc_state === 1) {\n        msg1.payload = SP_ccc;\n        if (SP_ccc === F_CCC_old_SP) {\n            return [msg1, null];\n        }\n        else {\n            global.set('F_CCC.z2.setpoint', SP_ccc, \"file\");\n\n            msg99.payload = \"Setpoint change: From \" + F_CCC_old_SP + \" to \" + SP_ccc + \" °C\";\n            msg99.topic = \"Function CCC (Zone 2)\";\n\n            return [msg1, msg99];\n        }\n    }\n    ////////////////////////////////////////////////////////////////////////////////\n\n}",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2700,
        "y": 820,
        "wires": [
            [
                "d625be872191a9a8"
            ],
            [
                "663fd79ce5a1610d"
            ],
            [
                "161478f41649a6fa"
            ]
        ],
        "outputLabels": [
            "SP_CCC_Z2 (function on)",
            "ToLog",
            ""
        ]
    },
    {
        "id": "a0cf9818c74cf2c5",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link in 6 Z2",
        "links": [
            "5f5ee90163d11747"
        ],
        "x": 1805,
        "y": 780,
        "wires": [
            [
                "cef3b3ebc00088c1"
            ]
        ]
    },
    {
        "id": "c8ff1796f5765b64",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "GUI",
        "info": "",
        "x": 1910,
        "y": 780,
        "wires": []
    },
    {
        "id": "cef3b3ebc00088c1",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "pauseType": "queue",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2250,
        "y": 780,
        "wires": [
            [
                "5d2870808a90b2aa"
            ]
        ]
    },
    {
        "id": "5d2870808a90b2aa",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "op1": "ping",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2460,
        "y": 820,
        "wires": [
            [
                "51a6bac27fdf889f"
            ]
        ]
    },
    {
        "id": "3e99a6d2432a3865",
        "type": "ui_button",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "",
        "group": "76ac95177cc46b00",
        "order": 30,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Export",
        "tooltip": "This will send the above temperature profile to the Panasonic heatpump (internal).",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Export current profile to heatpump?",
        "payloadType": "str",
        "topic": "Please confirm",
        "topicType": "str",
        "x": 1430,
        "y": 5780,
        "wires": [
            [
                "26da7cce57e11a93"
            ]
        ]
    },
    {
        "id": "26da7cce57e11a93",
        "type": "ui_toast",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "Abort",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Deploy?",
        "x": 1580,
        "y": 5780,
        "wires": [
            [
                "bb9c476d96444ae3"
            ]
        ]
    },
    {
        "id": "bb9c476d96444ae3",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "Confirm",
        "func": "\nif (msg.payload == 'Yes') \n    {\n            \n        var war_ot1         = global.get('F_CCC.z2.ot1',\"file\");                 // Outside temperature high         (warm outside)\n        var war_ot2         = global.get('F_CCC.z2.ot2',\"file\");                 // Outside temperature intermediate (intermediate outside temperature)\n        //var war_ot3         = global.get('F_CCC.z2.ot3',\"file\");                 // Outside temperature low          (cold outside)\n        var war_wt1         = global.get('F_CCC.z2.wt1',\"file\");                 // Water temperature low            (cold water)\n        var war_wt2         = global.get('F_CCC.z2.wt2',\"file\");                 // Water temperature intermediate   (intermediate water temperature)\n        //var war_wt3         = global.get('F_CCC.z2.wt3',\"file\");                 // Water temperature high           (warm water)\n        \n        let msg1    ={};    //  pin 1 - export JSON\n        let msg99   ={};    //  pin 2 - output to log\n        \n        msg1.topic = \"JSON_ZONE2_HEAT\"\n        msg1.payload = {    \"zone1\": {},\n                            \"zone2\": {\n                                \"heat\": {\n                                    \"target\": {\n                                        \"high\": war_wt2,\n                                        \"low\": war_wt1\n                                    },\n                                    \"outside\": {\n                                        \"high\": war_ot1,\n                                        \"low\": war_ot2\n                                    }\n                                }\n                            }\n                        }\n        msg99.topic = \"SYSTEM\";\n        msg99.payload = \"Exported settings from CCC zone 2 temperature profile to Panasonic heatpump\";\n        \n        node.send([msg1,msg99]);\n    }\nreturn null;\n\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 5780,
        "wires": [
            [
                "bcc25e051f940518"
            ],
            [
                "2bd2ce362c201c1e"
            ]
        ],
        "outputLabels": [
            "export JSON",
            "output to log"
        ]
    },
    {
        "id": "bcc25e051f940518",
        "type": "json",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 1970,
        "y": 5760,
        "wires": [
            [
                "923987daed664367"
            ]
        ]
    },
    {
        "id": "2d0127cea7de1c57",
        "type": "ui_button",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "",
        "group": "76ac95177cc46b00",
        "order": 28,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Import",
        "tooltip": "This will read the internal Panasonic profile and save it in this Node Red flow",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Import Panasonic profile into Node Red?",
        "payloadType": "str",
        "topic": "Please confirm",
        "topicType": "str",
        "x": 1430,
        "y": 5840,
        "wires": [
            [
                "1633e9384bfe4e2d"
            ]
        ]
    },
    {
        "id": "1633e9384bfe4e2d",
        "type": "ui_toast",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "Abort",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Deploy?",
        "x": 1580,
        "y": 5840,
        "wires": [
            [
                "30ebb223f4c6626c"
            ]
        ]
    },
    {
        "id": "30ebb223f4c6626c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "Confirm",
        "func": "\nif (msg.payload == 'Yes') \n    {\n        let msg99={};\n        var Z2_Heat_Curve_Outside_Low_Temp      = global.get('Z2_Heat_Curve_Outside_Low_Temp');\n        var Z2_Heat_Curve_Outside_High_Temp     = global.get('Z2_Heat_Curve_Outside_High_Temp');\n        var Z2_Heat_Curve_Target_Low_Temp       = global.get('Z2_Heat_Curve_Target_Low_Temp');\n        var Z2_Heat_Curve_Target_High_Temp      = global.get('Z2_Heat_Curve_Target_High_Temp');\n        \n        \n        global.set('war_ot1',Z2_Heat_Curve_Outside_High_Temp,\"file\");                 // Outside temperature high         (warm outside)\n        global.set('war_ot2',Z2_Heat_Curve_Outside_Low_Temp,\"file\");                 // Outside temperature intermediate (intermediate outside temperature)\n        global.set('war_ot3',Z2_Heat_Curve_Outside_Low_Temp-1,\"file\");                 // Outside temperature low          (cold outside)\n        \n        global.set('war_wt1',Z2_Heat_Curve_Target_Low_Temp,\"file\");                 // Water temperature low            (cold water)\n        global.set('war_wt2',Z2_Heat_Curve_Target_High_Temp,\"file\");                 // Water temperature intermediate   (intermediate water temperature)\n        global.set('war_wt3',Z2_Heat_Curve_Target_High_Temp,\"file\");\n        \n        \n        \n        msg99.topic = \"SYSTEM\";\n        msg99.payload = \"Import Zone 2 profile from Panasonic heatpump to Node Red\";\n    \n        msg.payload = \"Done\" ;\n        msg.topic = \"\";\n        \n    \n        return msg;\n        \n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 5840,
        "wires": [
            [
                "f7a58d8ca6f12678"
            ]
        ]
    },
    {
        "id": "f7a58d8ca6f12678",
        "type": "ui_toast",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Ok",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Done",
        "x": 1970,
        "y": 5840,
        "wires": [
            []
        ]
    },
    {
        "id": "923987daed664367",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "Block?",
        "func": "if (global.get('MQTT', \"file\") == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];\n    }\nreturn [msg, null];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 5760,
        "wires": [
            [
                "0eabfbc63fbfc395"
            ],
            [
                "2bd2ce362c201c1e"
            ]
        ]
    },
    {
        "id": "2bd2ce362c201c1e",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 2245,
        "y": 5780,
        "wires": []
    },
    {
        "id": "0eabfbc63fbfc395",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "493fccf0c20ec33e",
        "name": "link out to SET16",
        "mode": "link",
        "links": [
            "ea62546371ce867f"
        ],
        "x": 2245,
        "y": 5740,
        "wires": []
    },
    {
        "id": "5f0f7a7623604d1e",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1890,
        "y": 820,
        "wires": [
            [
                "5d2870808a90b2aa"
            ]
        ]
    },
    {
        "id": "35298f96729bbb46",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "Triggers",
        "info": "",
        "x": 1800,
        "y": 660,
        "wires": []
    },
    {
        "id": "b9a805eaec78069d",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "FUNCTIONS",
        "info": "",
        "x": 2670,
        "y": 760,
        "wires": []
    },
    {
        "id": "021e45a59e0afc2f",
        "type": "ui_switch",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "",
        "label": "-- Override Safety",
        "tooltip": "[Disabled] The final setpoint will always be set above the dew-point + safety margin. [Enabled] The final setpoint will always be the requested temperature",
        "group": "830a81a1c54c6ef5",
        "order": 9,
        "width": 6,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "override_safety",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 4770,
        "y": 420,
        "wires": [
            [
                "57bd8e997e9659ed",
                "8107b63cf9805e1c"
            ]
        ]
    },
    {
        "id": "8107b63cf9805e1c",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "FW",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 4645,
        "y": 400,
        "wires": [
            [
                "021e45a59e0afc2f"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "af39798fc47f9bc1",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "group": "830a81a1c54c6ef5",
        "name": "Line - Setup",
        "order": 12,
        "width": 6,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Sensor value</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 4870,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "484ac098c5cd5b63",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1890,
        "y": 1040,
        "wires": [
            [
                "ee9ad46e6d10e080"
            ]
        ]
    },
    {
        "id": "1677fa16c9add844",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link in RTC Function Z2",
        "links": [
            "f29bcd6a438f474c"
        ],
        "x": 1805,
        "y": 960,
        "wires": [
            [
                "4950c49d8b368b56"
            ]
        ]
    },
    {
        "id": "53f7c9cf40d4a870",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "Correction_1_RTC Z2",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "cf9c3b1c60839829"
        ],
        "x": 3215,
        "y": 940,
        "wires": []
    },
    {
        "id": "1dce5e2e5df0b552",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "SP RTC result Z2",
        "mode": "link",
        "links": [],
        "x": 3215,
        "y": 980,
        "wires": []
    },
    {
        "id": "4c0daae12fed3fc6",
        "type": "complete",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "scope": [
            "51a6bac27fdf889f"
        ],
        "uncaught": false,
        "x": 1860,
        "y": 1000,
        "wires": [
            [
                "ee9ad46e6d10e080"
            ]
        ]
    },
    {
        "id": "8d56089ccc135555",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link in RTC Function2 Z2",
        "links": [
            "49bbcdc6539f94fe",
            "7430c37f5c30419b",
            "aad17e70a817393e",
            "b6fefe59b4d89bf8",
            "fa7b23d8aa5a5849"
        ],
        "x": 1805,
        "y": 920,
        "wires": [
            [
                "e4f9fd25c1e1acf1"
            ]
        ]
    },
    {
        "id": "e4f9fd25c1e1acf1",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2120,
        "y": 920,
        "wires": [
            [
                "ee9ad46e6d10e080"
            ]
        ]
    },
    {
        "id": "77ec1fe312524fc4",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 3050,
        "y": 1000,
        "wires": [
            [
                "663fd79ce5a1610d"
            ]
        ]
    },
    {
        "id": "498550a5a539214f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "Function RTC correction (Zone 2)",
        "func": "var Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\");\nvar TOP69_Sterilization_State = global.get('TOP69_Sterilization_State', \"file\");\n\nif (Operating_Mode === undefined || Operating_Mode === 1 || Operating_Mode === 3 || Operating_Mode === 5 || Operating_Mode === 7 || Operating_Mode === 8 || TOP69_Sterilization_State === 1) {\n    return null;\n}\n\nelse {\n    var msg1 = {};    // pin 1 - current correction\n    var msg2 = {};    // pin 2 - current sp\n    var msg99 = {};   // pin 3\n    msg99.topic = \"Function RTC (Zone 2)\";\n    var msg3 = {};    //  pin 4 - start sp\n\n    var F_RTC = global.get('F_RTC', \"file\");\n    if (F_RTC === undefined) { F_RTC = {}; }\n    if (F_RTC.z2 === undefined) { global.set('F_RTC.z2.state',0,\"file\"); }\n\n    //if (F_RTC.z2.state === undefined) { return null; }\n\n    var F_RTC_old_correction = global.get('F_RTC.z2.correction_value', \"file\");\n    if (F_RTC_old_correction === undefined) { F_RTC_old_correction = 0; global.set('F_RTC.z2.correction_value', 0, \"file\"); }\n\n    var F_CCC_SP = global.get('F_CCC.z2.setpoint',\"file\");\n    if (F_CCC_SP === undefined) { return null; }\n\n    if (F_RTC.z2.state === 0) {\n        \n        rtc_correction = 0;               // If RTC is disabled, set correction to 0. end if\n        msg1.payload = rtc_correction;\n        msg1.topic = \"rtc_correction (Z2)\";\n\n        msg2.payload = F_CCC_SP + rtc_correction;\n        msg2.topic = \"SP RTC result\";\n\n        msg3.payload = F_CCC_SP;\n        msg3.topic = \"Start SP\";\n\n        global.set('F_RTC.z2.correction_value', rtc_correction, \"file\");\n        return [msg1, msg2, null, msg3];\n\n    }\n\n    else {\n\n        // Declaration of variables including their values.    \n        var rtc_correction = 0;                                                // declare local variable, start with value zero\n        var rtc_PV = global.get('T_zone_2');                             // Get the global variable. THe room temperature for RoomTemperatureCompensation you want to control.\n        if (rtc_PV === undefined) {/*node.warn('RTC correction rtc_PV');*/return null; }\n        var rtc_SP = global.get('F_RTC.z2.setpoint', \"file\");                 // Virtual target temperature setpoint for RTC. Set in Dashboard.\n        if (rtc_SP === undefined) {/*node.warn('RTC correction rtc_SP');*/return null; }\n        //var rtc_Tb          = global.get('T_outside',\"file\");                   // Outdoor temperature.\n\n        var rtc_dT = (rtc_PV - rtc_SP);                                  // local variable for calculated temperature difference. If > 0 it is too warm, If < 0 it is too cold. \n        rtc_dT = Number(rtc_dT).toFixed(2);\n        rtc_dT = parseFloat(rtc_dT);\n        \n        //\n        // below are the variables containing the temperature ranges.\n        var rtc_t1 = F_RTC.z2.t1_limit;                      // Range +3\n        var rtc_t2 = F_RTC.z2.t2_limit;                      // Range +2\n        var rtc_t3 = F_RTC.z2.t3_limit;                      // Range +1\n\n        var rtc_t4 = F_RTC.z2.t4_limit;                      // Range -1\n        var rtc_t5 = F_RTC.z2.t5_limit;                      // Range -2\n        var rtc_t6 = F_RTC.z2.t6_limit;                      // Range -3\n        var rtc_t7 = F_RTC.z2.t7_limit;                      // Range -custom\n\n        var rtc_t7_custom_cor = F_RTC.z2.t7_correction_value;\n\n        if (isNaN(rtc_t1 + rtc_t2 + rtc_t3 + rtc_t4 + rtc_t5 + rtc_t6 + rtc_t7) === true)               // if the variables are added to eachother and the result is Not a Number, produce an error message.\n        {\n            msg99.payload = \"RTC function temperatures are not correctly set in the dashboard. Please correct this in the GUI.\";\n            return [null, null, msg99, null];\n        }\n        // ADJUST THE VALUES BELOW TO YOUR OWN SITUATION\n/*\n        if (rtc_dT >= rtc_t1) { rtc_correction = rtc_correction - 1; }                 // It is way too hot.\n        if (rtc_dT >= rtc_t2) { rtc_correction = rtc_correction - 1; }                 // It is too hot.\n        if (rtc_dT >= rtc_t3) { rtc_correction = rtc_correction - 1; }                 // It is a little too hot.\n\n        if (rtc_dT < rtc_t3 && rtc_dT > rtc_t4) { rtc_correction = 0; }                // It is right in the middle.... Nice\n\n        if (rtc_dT <= rtc_t4) { rtc_correction = rtc_correction + 1; }                 // It is a little too cold\n        if (rtc_dT <= rtc_t5) { rtc_correction = rtc_correction + 1; }                 // It is a little a fair bit colder\n        if (rtc_dT <= rtc_t6) { rtc_correction = 3; }                                  // It is a little way too cold\n*/\n        if (rtc_dT >= rtc_t1) { rtc_correction = F_RTC.z2.t1_correction; }                    // case 1: It is way too hot.\n        if (rtc_dT >= rtc_t2 && rtc_dT < rtc_t1) { rtc_correction = F_RTC.z2.t2_correction; } // case 2: It is too hot.\n        if (rtc_dT >= rtc_t3 && rtc_dT < rtc_t2) { rtc_correction = F_RTC.z2.t3_correction; } // case 3: It is a little too hot.\n\n        if (rtc_dT > rtc_t4 && rtc_dT < rtc_t3) { rtc_correction = 0; }                       // case 4: GOOOOD !!\n\n        if (rtc_dT > rtc_t5 && rtc_dT <= rtc_t4) { rtc_correction = F_RTC.z2.t4_correction; } // case 5: It is a little too cold\n        if (rtc_dT > rtc_t6 && rtc_dT <= rtc_t5) { rtc_correction = F_RTC.z2.t5_correction; } // case 6: It is a little a fair bit colder\n        if (rtc_dT > rtc_t7 && rtc_dT <= rtc_t6) { rtc_correction = F_RTC.z2.t6_correction; } // case 7: It is a way too cold\n        \n        // Use incremental_setpoints if switch enabled\n        var F_RTC_z2_incremental_setpoints_state = global.get('F_RTC.z2.incremental_setpoints_state', \"file\");    //switch on/off\n        if (F_RTC_z2_incremental_setpoints_state === undefined) { F_RTC_z2_incremental_setpoints_state = 0; }\n        if ((rtc_dT < rtc_t6 && rtc_dT > rtc_t7) && F_RTC_z2_incremental_setpoints_state == 1)                // in range (between +3 and +custom)\n        {\n            // calculate correction (between +3 and +custom):\n            rtc_correction = rtc_t7_custom_cor - F_RTC.z2.t6_correction;                                 // example (15-3)=12 degrees\n            // calculate temp range:\n            var Range = (rtc_t6 - rtc_t7); // -2.2 - -4.0 = 1.8                     //calculate No. steps    0.1 degrees steps?\n            Range = (Range * 10);                                                   // 18 steps\n            // devide rtc_correction through steps:\n            rtc_correction = (rtc_correction / Range);                              // 12 / 18 = 0.67 degrees-steps\n            // Calculate actual step:\n            var Actual_step = (rtc_t6 - rtc_dT) * 10;                               // stap 17 van 18\n            Actual_step = Number(Actual_step).toFixed(0);\n            // Apply correction at this step:\n            rtc_correction = (Actual_step * rtc_correction);                        // 18 * 0.67 = 11.32\n            rtc_correction = Number(rtc_correction).toFixed(1);                     // 11,3\n            rtc_correction = parseFloat(rtc_correction);\n            rtc_correction = rtc_correction + F_RTC.z2.t6_correction;                                     // 11.3 + 3 = 14.3\n            rtc_correction = Number(rtc_correction).toFixed(1);\n            rtc_correction = parseFloat(rtc_correction);\n            if (global.get('Debugging', \"file\") === 1) {                             // Show in log what incremental setpoint correction should be and continue:\n                msg99.payload = \"incremental setpoint correction at \" + rtc_PV + \"°C \" + \"--> \" + rtc_correction + \" °C\";\n                node.send([null, null, msg99, null]); // only to log and continue code from here\n            }\n        }\n\n        if (rtc_dT <= rtc_t7) { rtc_correction = rtc_t7_custom_cor; }                 // It is way too cold: use custom\n\n    }\n    //****************************************************************************** \n    //node.warn('1');\n    msg1.payload = rtc_correction;\n    msg1.topic = \"rtc_correction\";\n\n    msg2.payload = F_CCC_SP + rtc_correction;\n    msg2.topic = \"SP RTC result\";\n\n    msg3.payload = F_CCC_SP;\n    msg3.topic = \"Start SP\";\n\n    var T_zone_2 = global.get('T_zone_2'); // memory only\n\n    if (F_RTC_old_correction === rtc_correction) {\n        return [msg1, msg2, null, msg3];\n    }\n\n    else {\n        global.set('F_RTC.z2.correction_value', msg1.payload, \"file\");\n        msg99.payload = \"Correction change: From \" + F_RTC_old_correction + \" to \" + rtc_correction + \" °C (Room actual: \" + T_zone_2 + \" °C)\";\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"function RTC\"); }\n        return [msg1, msg2, msg99, msg3];\n    }\n\n}",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2740,
        "y": 940,
        "wires": [
            [
                "53f7c9cf40d4a870",
                "1329c5e7c891ac4b"
            ],
            [
                "1dce5e2e5df0b552"
            ],
            [
                "77ec1fe312524fc4"
            ]
        ],
        "outputLabels": [
            "rtc_correction",
            "SP RTC result",
            "ToLog"
        ]
    },
    {
        "id": "ee9ad46e6d10e080",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "op1": "ping",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2320,
        "y": 980,
        "wires": [
            [
                "6eb2a075d7b9b798"
            ]
        ]
    },
    {
        "id": "74e73eb89c169937",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "RT",
        "info": "",
        "x": 1910,
        "y": 960,
        "wires": []
    },
    {
        "id": "f1bad7706107cdb2",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "GUI",
        "info": "",
        "x": 1910,
        "y": 920,
        "wires": []
    },
    {
        "id": "4950c49d8b368b56",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "Filter",
        "func": "let msg1={};\nvar value = context.get('value');\n\n                                //After boot, make sure the first message is pushed forward.\nif (value === undefined){\n    context.set('value',msg.payload);\n    return msg;\n    \n}\n\n                                // filter messages with the same value.\nif (msg.payload != value) {\n    context.set('value',msg.payload);\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2090,
        "y": 960,
        "wires": [
            [
                "ee9ad46e6d10e080"
            ]
        ]
    },
    {
        "id": "359356ccc6a21d72",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "d": true,
        "g": "56ad661c12898edd",
        "name": "link out 36 Z2",
        "mode": "link",
        "links": [
            "6bd234b67b830924"
        ],
        "x": 3215,
        "y": 900,
        "wires": [],
        "icon": "node-red/leveldb.svg"
    },
    {
        "id": "1329c5e7c891ac4b",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "NR - RTC Calculated correction",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3070,
        "y": 900,
        "wires": [
            [
                "359356ccc6a21d72"
            ]
        ]
    },
    {
        "id": "6eb2a075d7b9b798",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "Break",
        "func": "if (global.get('Sterilization_active', \"file\") == 1 || global.get('Force_DHW_active', \"file\") == 1){\n    return null\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2435,
        "y": 980,
        "wires": [
            [
                "498550a5a539214f"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "42044f1d6aefdd8c",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "livingroom temperature Z2",
        "links": [
            "334ab3e5210e7ded"
        ],
        "x": 155,
        "y": 380,
        "wires": [
            [
                "ff74b6aae03758ee"
            ]
        ]
    },
    {
        "id": "32eac6107970df96",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 380,
        "wires": [
            [
                "58b1674fb852d1b3",
                "f3d5c028ec98d42f"
            ]
        ]
    },
    {
        "id": "58b1674fb852d1b3",
        "type": "function",
        "z": "a938de76db0b71f6",
        "d": true,
        "g": "5a496e1f1ea93a38",
        "name": "T_Zone_2 Input Selector",
        "func": "var TOP118 = global.get('TOP118_Second_Room_Thermostat_Temp');             // The default heatpump outside temperature sensor\nvar T_zone_2_custom = global.get('T_zone_2_custom', \"file\");                          // Custom outside temperature sensor\nif (T_zone_2_custom === undefined) { T_zone_2_custom = {} }\nvar T_zone_2;\nvar CurrentTime = new Date().getTime();\n\nvar msg99 = {};       // Info to log\n    msg99.topic = \"SETUP - Sensors (Zone 2)\";\n\n\n//******************************************************************************\n// Default panasonic second thermostat temperature sensor\n//******************************************************************************\nif (msg.topic == 'panasonic_heat_pump/main/Second_Room_Thermostat_Temp') {\n\n        msg.payload = Number(msg.payload).toFixed(0);\n        msg.payload = parseFloat(msg.payload);\n\n        if (msg.payload < -100 || msg.payload > 100) {\n                msg99.payload = \"<font color=red>Zone 2 second room thermostat not found.</font>\";\n                global.set('TOP118_Second_Room_Thermostat_Temp',msg.payload);\n                return [null, msg99];\n        }\n\n        if (msg.payload != TOP118) {\n                global.set('TOP118_Second_Room_Thermostat_Temp', msg.payload);\n                TOP118 = msg.payload;\n\n        }\n\n        if (T_zone_2_custom.value_time === undefined) {\n                global.set('T_zone_2', TOP118);\n                msg99.payload = \"<font color=red>Custom room temperature sensor not found. Using internal sensor (TOP118)</font>\";\n\n                return [msg, msg99];\n        }\n\n        if ((CurrentTime - T_zone_2_custom.value_time) > 60 * 1000 * 60 * 5) {   // 5 hours\n                global.set('T_zone_2', TOP118)\n                msg99.payload = \"<font color=red> Custom room temperature sensor lost - last value older than 5 hours. Using internal sensor (TOP118) when available</font>\";\n\n                return [msg, msg99];\n        }\n\n}\n//******************************************************************************\n// Custom temperature sensor\n//******************************************************************************\nif (msg.topic != 'panasonic_heat_pump/main/Second_Room_Thermostat_Temp') {\n\n        msg.payload = Number(msg.payload).toFixed(2);\n        msg.payload = parseFloat(msg.payload);\n\n        if (T_zone_2_custom.value_time === undefined || (CurrentTime - T_zone_2_custom.value_time) > 60 * 1000 * 60 * 5) {\n                T_zone_2_custom.value = msg.payload;\n                T_zone_2_custom.value_time = CurrentTime;\n                global.set('T_zone_2_custom', T_zone_2_custom, \"file\");\n                global.set('T_zone_2', msg.payload);\n                msg99.payload = \"<font color=green>Custom room temperature sensor found</font>\";\n                node.send ([msg, msg99]);\n                return null;\n        }\n\n        if (msg.payload != T_zone_2) {\n                T_zone_2_custom.value = msg.payload;\n                T_zone_2_custom.value_time = CurrentTime;\n                global.set('T_zone_2_custom', T_zone_2_custom, \"file\");\n\n                global.set('T_zone_2', msg.payload);\n                node.send ([msg, null]);\n                return null\n        }\n\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 380,
        "wires": [
            [
                "f29bcd6a438f474c"
            ],
            [
                "3fc357446eef916a"
            ]
        ],
        "outputLabels": [
            "payload",
            "Info to log"
        ]
    },
    {
        "id": "f29bcd6a438f474c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "T_Zone_2_Temperature",
        "mode": "link",
        "links": [
            "02f25651d70831c9",
            "1677fa16c9add844",
            "c5473b63422c3506"
        ],
        "x": 1190,
        "y": 380,
        "wires": [],
        "l": true
    },
    {
        "id": "3fc357446eef916a",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1130,
        "y": 420,
        "wires": [
            [
                "f0b20c8165a68430"
            ]
        ]
    },
    {
        "id": "e3f025f509729488",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "TOP118 - panasonic_heat_pump/main/Second_Room_Thermostat_Temp",
        "topic": "panasonic_heat_pump/main/Second_Room_Thermostat_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 400,
        "y": 420,
        "wires": [
            [
                "58b1674fb852d1b3",
                "f3d5c028ec98d42f"
            ]
        ]
    },
    {
        "id": "ad1aa3d7ce882c45",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "group": "1179fa790d2d89ca",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "nightreduction read",
        "label": "<font color= {{msg.color}} >Night reduction</font>",
        "format": "<font color= {{msg.color}} > {{msg.payload}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 4920,
        "wires": []
    },
    {
        "id": "87bb9350c1c8ab14",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "group": "623f5d089867807d",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "nightreduction read",
        "label": "<font color= {{msg.color}} >Night reduction</font>",
        "format": "<font color= {{msg.color}} > {{msg.payload}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1310,
        "y": 4920,
        "wires": []
    },
    {
        "id": "20f491a838e9ec1e",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "group": "1179fa790d2d89ca",
        "order": 14,
        "width": 1,
        "height": 1,
        "name": "spacerz1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1020,
        "y": 5020,
        "wires": []
    },
    {
        "id": "b56e35c4e5987e45",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "b37318d1b7f66e33",
        "group": "623f5d089867807d",
        "order": 14,
        "width": 1,
        "height": 1,
        "name": "spacerz2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1160,
        "y": 5020,
        "wires": []
    },
    {
        "id": "259b758b6c5f8651",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link in - Other triggers functions Z2",
        "links": [
            "ed2c73bf6b96d4a0"
        ],
        "x": 1805,
        "y": 700,
        "wires": [
            [
                "985d031491efe805"
            ]
        ]
    },
    {
        "id": "9689e62011c0fc0b",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "All other triggers",
        "info": "",
        "x": 1920,
        "y": 700,
        "wires": []
    },
    {
        "id": "985d031491efe805",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2240,
        "y": 700,
        "wires": [
            [
                "5d2870808a90b2aa"
            ]
        ]
    },
    {
        "id": "55c2987b65b423c8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "SP_Final z2",
        "mode": "link",
        "links": [],
        "x": 1525,
        "y": 1860,
        "wires": []
    },
    {
        "id": "2eb2a1faee5c5e8c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 91 z2",
        "mode": "link",
        "links": [
            "fd2003d6bc939d36"
        ],
        "x": 1515,
        "y": 3580,
        "wires": []
    },
    {
        "id": "6f7002648d65f61c",
        "type": "ui_slider",
        "z": "a938de76db0b71f6",
        "name": "",
        "label": "Delay",
        "tooltip": "Delay time in minutes",
        "group": "711eac1fe69f9447",
        "order": 4,
        "width": 6,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "DelayValueAutoStartDHW",
        "topicType": "str",
        "min": 0,
        "max": "60",
        "step": 1,
        "className": "",
        "x": 5730,
        "y": 2160,
        "wires": [
            [
                "6f06d1ee28498f9e",
                "33a1135a5ee6f410",
                "cd64c63e7e7748c7"
            ]
        ]
    },
    {
        "id": "e5f3453eec506646",
        "type": "ui_button",
        "z": "a938de76db0b71f6",
        "name": "",
        "group": "711eac1fe69f9447",
        "order": 6,
        "width": 8,
        "height": 1,
        "passthru": true,
        "label": "Ok",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "SET",
        "payloadType": "str",
        "topic": "DelayValueAutoStartDHW",
        "topicType": "str",
        "x": 5730,
        "y": 2220,
        "wires": [
            [
                "33a1135a5ee6f410"
            ]
        ]
    },
    {
        "id": "6f06d1ee28498f9e",
        "type": "ui_numeric",
        "z": "a938de76db0b71f6",
        "name": "",
        "label": "",
        "tooltip": "Delay time in minutes",
        "group": "711eac1fe69f9447",
        "order": 5,
        "width": 2,
        "height": 1,
        "wrap": false,
        "passthru": false,
        "topic": "DelayValueAutoStartDHW",
        "topicType": "str",
        "format": "{{value}}",
        "min": 0,
        "max": "60",
        "step": 1,
        "className": "",
        "x": 5880,
        "y": 2160,
        "wires": [
            [
                "6f7002648d65f61c",
                "cd64c63e7e7748c7"
            ]
        ]
    },
    {
        "id": "a288988096af9668",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "group": "711eac1fe69f9447",
        "order": 1,
        "width": 8,
        "height": 1,
        "name": "",
        "label": "<h1>Auto start DHW</h1>",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 5800,
        "y": 2040,
        "wires": []
    },
    {
        "id": "d11003c72f135b81",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "group": "711eac1fe69f9447",
        "name": "Line - Delay settings",
        "order": 2,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Delay settings</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 5780,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "8c34d5a7fb9a8f27",
        "type": "ui_template",
        "z": "a938de76db0b71f6",
        "group": "711eac1fe69f9447",
        "name": "Information",
        "order": 3,
        "width": 8,
        "height": 5,
        "format": "When the temperature drops below your set temperature threshold, the DHW run will start. This is of course intended.<br>\nDuring the start of the DHW run the actual temperature of the water might drop even faster. This can lead to cold(er) water when you are using it i.e. during a shower.<br>\nWith this setting you can add a delay to the start of the DHW-run.<br>\nDefault value: 0 minutes<br>\nDelay range: 0 - 60 minutes.<br>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 5750,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "33a1135a5ee6f410",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "function 10",
        "func": "if (msg.payload != 'SET') {\n    context.set('DHW_automation_delay',msg.payload);\n\n}\n\nif (msg.payload == 'SET') {\n    global.set('DHW_automation_delay', context.get('DHW_automation_delay'), \"file\");\n    msg.payload = 'Home';\n    return msg;\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5890,
        "y": 2220,
        "wires": [
            [
                "5c78827ec68a5895"
            ]
        ]
    },
    {
        "id": "5c78827ec68a5895",
        "type": "ui_ui_control",
        "z": "a938de76db0b71f6",
        "name": "",
        "events": "change",
        "x": 6060,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "525b14e18368ad3b",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "GUIAutoStartDHW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 5080,
        "y": 2140,
        "wires": [
            [
                "5c78827ec68a5895",
                "0fc626d7476ba6d5"
            ]
        ]
    },
    {
        "id": "0fc626d7476ba6d5",
        "type": "trigger",
        "z": "a938de76db0b71f6",
        "name": "",
        "op1": "",
        "op2": "SET",
        "op1type": "nul",
        "op2type": "str",
        "duration": "15",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 6230,
        "y": 2160,
        "wires": [
            [
                "33a1135a5ee6f410"
            ]
        ]
    },
    {
        "id": "cd64c63e7e7748c7",
        "type": "function",
        "z": "a938de76db0b71f6",
        "name": "function 13",
        "func": "msg.reset = 1;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 6070,
        "y": 2160,
        "wires": [
            [
                "0fc626d7476ba6d5"
            ]
        ]
    },
    {
        "id": "e06c72be3ce79609",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "z1_Correction_0_WAR_on_off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 840,
        "wires": [
            [
                "6a7dd03e7f46c1f5"
            ]
        ]
    },
    {
        "id": "6a7dd03e7f46c1f5",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d2b7e1d6e85a96cf",
        "name": "link out 7",
        "mode": "link",
        "links": [
            "01d75eec1bfe68d4"
        ],
        "x": 1605,
        "y": 840,
        "wires": []
    },
    {
        "id": "90cfed64c17d4090",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "custom_sensor",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 260,
        "wires": [
            [
                "596e22688d867659"
            ]
        ]
    },
    {
        "id": "ff74b6aae03758ee",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "custom_sensor",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 380,
        "wires": [
            [
                "a82ab44006a7ec33"
            ]
        ]
    },
    {
        "id": "de6f11be608756eb",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "custom_sensor",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 140,
        "wires": [
            [
                "bf01688126aaf3e3"
            ]
        ]
    },
    {
        "id": "161478f41649a6fa",
        "type": "change",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "z1_Correction_0_WAR_on_off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3060,
        "y": 840,
        "wires": [
            [
                "acf4d4f2d32b12c3"
            ]
        ]
    },
    {
        "id": "acf4d4f2d32b12c3",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link out 46",
        "mode": "link",
        "links": [
            "ef4ade1fff94fc42"
        ],
        "x": 3215,
        "y": 840,
        "wires": []
    },
    {
        "id": "f3d5c028ec98d42f",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "T_Zone_2 Input Selector",
        "func": "\n// ====== Configuration ======\nconst CUSTOM_TIMEOUT_HOURS = 5; // timeout period\nconst CUSTOM_TIMEOUT_MS = CUSTOM_TIMEOUT_HOURS * 60 * 60 * 1000;\n\n// ====== Retrieve Globals ======\nlet T_zone_2_custom = global.get('T_zone_2_custom') || {}; // { value, last_update }\nlet T_zone_2 = global.get('T_zone_2');                      // current temperature\nlet CurrentTime = Date.now();\n\nlet msgLog = {};      // output 2 (logging)\nmsgLog.topic = \"SETUP - Sensors (Zone 2)\";\n\n// ====== Helper function for logging ======\nfunction sendLog(text, color = \"black\") {\n    msgLog.payload = `<font color=${color}>${text}</font>`;\n    node.send([null, msgLog]);\n}\n\n// ====== MESSAGE TYPE 1: Default sensor ======\nif (msg.topic === 'panasonic_heat_pump/main/Second_Room_Thermostat_Temp') {\n\n    // update default sensor value\n    let defaultTemp = parseFloat(msg.payload);\n    if (isNaN(defaultTemp)) return null; // Ignore invalid input\n\n    // Check if custom sensor is active & not expired\n    if (T_zone_2_custom.value !== undefined &&\n        (CurrentTime - T_zone_2_custom.last_update) < CUSTOM_TIMEOUT_MS) {\n\n        // Custom sensor is valid → use it, ignore default\n        //sendLog(\"Custom sensor active, heat pump value ignored.\", \"green\");\n        return null;\n    }\n\n    // Custom sensor missing or expired → use default\n    global.set('T_zone_2', defaultTemp);\n    sendLog(\"Custom sensor lost or absent — fallback to heat pump sensor.\", \"red\");\n\n    return [{ payload: defaultTemp }, null];\n}\n\n// ====== MESSAGE TYPE 2: Custom sensor ======\nif (msg.topic === 'custom_sensor') {\n\n    let customTemp = parseFloat(msg.payload);\n    if (isNaN(customTemp)) return null;\n\n    // update custom sensor globals\n    T_zone_2_custom = {\n        value: customTemp,\n        last_update: CurrentTime\n    };\n    global.set('T_zone_2_custom', T_zone_2_custom);\n    global.set('T_zone_2', customTemp);\n\n    sendLog(\"Custom sensor value received — switching to custom sensor\", \"green\");\n\n    return [{ payload: customTemp }, null];\n}\n\n// ====== Ignore other topics ======\nreturn null;\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 420,
        "wires": [
            [
                "f29bcd6a438f474c"
            ],
            [
                "2ea50c618294e117"
            ]
        ],
        "outputLabels": [
            "payload",
            "Info to log"
        ]
    },
    {
        "id": "2ea50c618294e117",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1130,
        "y": 460,
        "wires": [
            [
                "f0b20c8165a68430"
            ]
        ]
    },
    {
        "id": "291e10a0936f3578",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "TOP46 - panasonic_heat_pump/main/Buffer_Temp",
        "topic": "panasonic_heat_pump/main/Buffer_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 390,
        "y": 4740,
        "wires": [
            [
                "42950b79a61da7e9"
            ]
        ]
    },
    {
        "id": "42950b79a61da7e9",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "SET TOP46_Buffer_Temp",
        "func": "global.set('TOP46_Buffer_Temp',msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 4740,
        "wires": [
            []
        ]
    },
    {
        "id": "b22da9fe52b286cf",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "g": "cbc655a89768996f",
        "group": "4fb2801b6ab7ae20",
        "order": 20,
        "width": 17,
        "height": 1,
        "name": "chat legend",
        "label": "<i>Mode 0=Function off / 1=Low / 2=HEAT / 3=DHW</i>",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 5210,
        "y": 1500,
        "wires": []
    },
    {
        "id": "a0d788b906f15297",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "116d861b2bd34e3a",
        "name": "link in 83",
        "links": [
            "f918bf51a72255c8"
        ],
        "x": 4885,
        "y": 1920,
        "wires": [
            [
                "fdc7a953bf5abbc3"
            ]
        ]
    },
    {
        "id": "6e9458431bc64a20",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link in 86",
        "links": [
            "a3259f9fb12aaeab"
        ],
        "x": 5355,
        "y": 1220,
        "wires": [
            [
                "dd27a17d3914b050"
            ]
        ]
    },
    {
        "id": "d68787ebabf34cbf",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link in 88",
        "links": [
            "ba2a9abddd106a27"
        ],
        "x": 5355,
        "y": 1280,
        "wires": [
            [
                "3bb1ed005c52a0fa"
            ]
        ]
    },
    {
        "id": "905f86d8b81cd6bf",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "8464ca0ddfa2e5de",
        "name": "link in 99",
        "links": [
            "3147336ddd86584b"
        ],
        "x": 5355,
        "y": 1340,
        "wires": [
            [
                "b1e622419da850aa"
            ]
        ]
    },
    {
        "id": "aacb956ae7e693cb",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "link in 100",
        "links": [
            "d6a9c376dde9c43f"
        ],
        "x": 1805,
        "y": 740,
        "wires": [
            [
                "700074d5ccd30dac"
            ]
        ]
    },
    {
        "id": "2b5d7bc130056868",
        "type": "comment",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "T",
        "info": "",
        "x": 1910,
        "y": 740,
        "wires": []
    },
    {
        "id": "700074d5ccd30dac",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2070,
        "y": 740,
        "wires": [
            [
                "89f32b2a9d6dc5b4"
            ]
        ]
    },
    {
        "id": "89f32b2a9d6dc5b4",
        "type": "delay",
        "z": "a938de76db0b71f6",
        "g": "56ad661c12898edd",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2240,
        "y": 740,
        "wires": [
            [
                "5d2870808a90b2aa"
            ]
        ]
    },
    {
        "id": "76f0c3b9cb8a59bb",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "link out 107",
        "mode": "link",
        "links": [],
        "x": 1525,
        "y": 1740,
        "wires": []
    },
    {
        "id": "64558e335a45bcbb",
        "type": "rbe",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1490,
        "y": 1600,
        "wires": [
            [
                "34cc66e23b5eec55"
            ]
        ]
    },
    {
        "id": "4455e223f160f9a7",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "group": "4e7aaa8d2a717171",
        "order": 2,
        "width": 11,
        "height": 1,
        "name": "Flexible pumpspeed",
        "label": "<h1>Flexible pumpspeed</h>",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3960,
        "y": 1020,
        "wires": []
    },
    {
        "id": "25bd44a699dd047a",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "group": "4e7aaa8d2a717171",
        "order": 3,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3910,
        "y": 1060,
        "wires": []
    },
    {
        "id": "4af63c9a1e2c249a",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "group": "9bbcceeeb21d12ab",
        "order": 2,
        "width": 12,
        "height": 1,
        "name": "Cool",
        "label": "<h1>Cool</h>",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3930,
        "y": 80,
        "wires": []
    },
    {
        "id": "ed4446acaeea3752",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "group": "9bbcceeeb21d12ab",
        "order": 1,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3930,
        "y": 120,
        "wires": []
    },
    {
        "id": "90b263e0e93c4635",
        "type": "ui_text",
        "z": "a938de76db0b71f6",
        "group": "4e7aaa8d2a717171",
        "order": 1,
        "width": 1,
        "height": 1,
        "name": "",
        "label": "",
        "format": "",
        "layout": "row-center",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3910,
        "y": 980,
        "wires": []
    },
    {
        "id": "bf01688126aaf3e3",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "Filter",
        "func": "// ===== CONFIGURATION =====\nconst R_MIN = 0.02;    // Sensor jitter baseline\nconst R_MAX = 0.10;    // For noisy conditions\nconst Q_MIN = 0.003;   // Slightly more responsive than 0.001\nconst Q_MAX = 0.02;    // Allow faster adaptation with slower updates\n\nconst RESET_INTERVAL_DAYS = 3;\nconst EDGE_MARGIN = 0.05;        // 5% near edges considered extreme\nconst MAX_GAIN = 0.30;           // clamp K for smoothing\nconst HARD_RESET_DIFF = 0.7;     // re-seed if jump > 0.7°C\n\nconst SENSOR_KEY = 'sensor';\n\n// ===== LOAD CONTEXT =====\nlet sensor = context.get(SENSOR_KEY, 'file') || {\n    R: R_MIN,\n    Q: Q_MIN,\n    estimate: msg.payload,\n    errorCov: 1,\n    lastTimestamp: Date.now(),\n    lastReset: Date.now()\n};\n\nlet now = Date.now();\nlet dt = (now - sensor.lastTimestamp) / 1000;\nif (!Number.isFinite(dt) || dt < 0) dt = 0;\nsensor.lastTimestamp = now;\n\n// ===== RESET CONDITIONS (fixed) =====\nconst rLowerEdge = R_MIN + (R_MAX - R_MIN) * EDGE_MARGIN;\nconst rUpperEdge = R_MAX - (R_MAX - R_MIN) * EDGE_MARGIN;\nconst qLowerEdge = Q_MIN + (Q_MAX - Q_MIN) * EDGE_MARGIN;\nconst qUpperEdge = Q_MAX - (Q_MAX - Q_MIN) * EDGE_MARGIN;\n\nlet daysSinceReset = (now - sensor.lastReset) / (1000 * 60 * 60 * 24);\nlet extremeR = (sensor.R <= rLowerEdge) || (sensor.R >= rUpperEdge);\nlet extremeQ = (sensor.Q <= qLowerEdge) || (sensor.Q >= qUpperEdge);\nlet hardReset = Math.abs(msg.payload - sensor.estimate) > HARD_RESET_DIFF;\n\nif (daysSinceReset >= RESET_INTERVAL_DAYS || (extremeR && extremeQ) || hardReset) {\n    sensor.R = R_MIN;\n    sensor.Q = Q_MIN;\n    if (hardReset) sensor.estimate = msg.payload; // only re-seed on large jump\n    sensor.errorCov = 1;\n    sensor.lastReset = now;\n}\n\n// ===== AUTO-TUNE =====\nlet diff = Math.abs(msg.payload - sensor.estimate);\nlet diffCap = Math.min(diff, 0.2); // avoid letting spikes push R too high\nsensor.R = R_MIN + (diffCap / 0.2) * (R_MAX - R_MIN); \n\nlet intervalFactor = Math.min(Math.max(dt / 60, 0), 1); // 60s -> Q_MAX\nsensor.Q = Q_MIN + intervalFactor * (Q_MAX - Q_MIN);\n\n// ===== KALMAN FILTER =====\nlet predictedEstimate = sensor.estimate;\nlet predictedErrorCov = sensor.errorCov + sensor.Q;\n\nlet K = predictedErrorCov / (predictedErrorCov + sensor.R);\nif (K > MAX_GAIN) K = MAX_GAIN; // critical clamp\n\nsensor.estimate = predictedEstimate + K * (msg.payload - predictedEstimate);\nsensor.errorCov = (1 - K) * predictedErrorCov;\n\n// ===== SAVE CONTEXT =====\ncontext.set(SENSOR_KEY, sensor, 'file');\n\n// ===== OUTPUT =====\nmsg.payload = sensor.estimate;\nnode.status({fill:\"blue\", shape:\"dot\", text:`K=${K.toFixed(2)} R=${sensor.R.toFixed(3)} Q=${sensor.Q.toFixed(3)} est=${sensor.estimate.toFixed(2)}`});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 140,
        "wires": [
            [
                "f130c43288ca6830"
            ]
        ]
    },
    {
        "id": "a82ab44006a7ec33",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "Filter",
        "func": "// ===== CONFIGURATION =====\nconst R_MIN = 0.02;    // Sensor jitter baseline\nconst R_MAX = 0.10;    // For noisy conditions\nconst Q_MIN = 0.003;   // Slightly more responsive than 0.001\nconst Q_MAX = 0.02;    // Allow faster adaptation with slower updates\n\nconst RESET_INTERVAL_DAYS = 3;\nconst EDGE_MARGIN = 0.05;        // 5% near edges considered extreme\nconst MAX_GAIN = 0.30;           // clamp K for smoothing\nconst HARD_RESET_DIFF = 0.7;     // re-seed if jump > 0.7°C\n\nconst SENSOR_KEY = 'sensor';\n\n// ===== LOAD CONTEXT =====\nlet sensor = context.get(SENSOR_KEY, 'file') || {\n    R: R_MIN,\n    Q: Q_MIN,\n    estimate: msg.payload,\n    errorCov: 1,\n    lastTimestamp: Date.now(),\n    lastReset: Date.now()\n};\n\nlet now = Date.now();\nlet dt = (now - sensor.lastTimestamp) / 1000;\nif (!Number.isFinite(dt) || dt < 0) dt = 0;\nsensor.lastTimestamp = now;\n\n// ===== RESET CONDITIONS (fixed) =====\nconst rLowerEdge = R_MIN + (R_MAX - R_MIN) * EDGE_MARGIN;\nconst rUpperEdge = R_MAX - (R_MAX - R_MIN) * EDGE_MARGIN;\nconst qLowerEdge = Q_MIN + (Q_MAX - Q_MIN) * EDGE_MARGIN;\nconst qUpperEdge = Q_MAX - (Q_MAX - Q_MIN) * EDGE_MARGIN;\n\nlet daysSinceReset = (now - sensor.lastReset) / (1000 * 60 * 60 * 24);\nlet extremeR = (sensor.R <= rLowerEdge) || (sensor.R >= rUpperEdge);\nlet extremeQ = (sensor.Q <= qLowerEdge) || (sensor.Q >= qUpperEdge);\nlet hardReset = Math.abs(msg.payload - sensor.estimate) > HARD_RESET_DIFF;\n\nif (daysSinceReset >= RESET_INTERVAL_DAYS || (extremeR && extremeQ) || hardReset) {\n    sensor.R = R_MIN;\n    sensor.Q = Q_MIN;\n    if (hardReset) sensor.estimate = msg.payload; // only re-seed on large jump\n    sensor.errorCov = 1;\n    sensor.lastReset = now;\n}\n\n// ===== AUTO-TUNE =====\nlet diff = Math.abs(msg.payload - sensor.estimate);\nlet diffCap = Math.min(diff, 0.2); // avoid letting spikes push R too high\nsensor.R = R_MIN + (diffCap / 0.2) * (R_MAX - R_MIN); \n\nlet intervalFactor = Math.min(Math.max(dt / 60, 0), 1); // 60s -> Q_MAX\nsensor.Q = Q_MIN + intervalFactor * (Q_MAX - Q_MIN);\n\n// ===== KALMAN FILTER =====\nlet predictedEstimate = sensor.estimate;\nlet predictedErrorCov = sensor.errorCov + sensor.Q;\n\nlet K = predictedErrorCov / (predictedErrorCov + sensor.R);\nif (K > MAX_GAIN) K = MAX_GAIN; // critical clamp\n\nsensor.estimate = predictedEstimate + K * (msg.payload - predictedEstimate);\nsensor.errorCov = (1 - K) * predictedErrorCov;\n\n// ===== SAVE CONTEXT =====\ncontext.set(SENSOR_KEY, sensor, 'file');\n\n// ===== OUTPUT =====\nmsg.payload = sensor.estimate;\nnode.status({fill:\"blue\", shape:\"dot\", text:`K=${K.toFixed(2)} R=${sensor.R.toFixed(3)} Q=${sensor.Q.toFixed(3)} est=${sensor.estimate.toFixed(2)}`});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 380,
        "wires": [
            [
                "32eac6107970df96"
            ]
        ]
    },
    {
        "id": "596e22688d867659",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "5a496e1f1ea93a38",
        "name": "Filter",
        "func": "// ===== CONFIGURATION =====\nconst R_MIN = 0.02;    // Sensor jitter baseline\nconst R_MAX = 0.10;    // For noisy conditions\nconst Q_MIN = 0.003;   // Slightly more responsive than 0.001\nconst Q_MAX = 0.02;    // Allow faster adaptation with slower updates\n\nconst RESET_INTERVAL_DAYS = 3;\nconst EDGE_MARGIN = 0.05;        // 5% near edges considered extreme\nconst MAX_GAIN = 0.30;           // clamp K for smoothing\nconst HARD_RESET_DIFF = 0.7;     // re-seed if jump > 0.7°C\n\nconst SENSOR_KEY = 'sensor';\n\n// ===== LOAD CONTEXT =====\nlet sensor = context.get(SENSOR_KEY, 'file') || {\n    R: R_MIN,\n    Q: Q_MIN,\n    estimate: msg.payload,\n    errorCov: 1,\n    lastTimestamp: Date.now(),\n    lastReset: Date.now()\n};\n\nlet now = Date.now();\nlet dt = (now - sensor.lastTimestamp) / 1000;\nif (!Number.isFinite(dt) || dt < 0) dt = 0;\nsensor.lastTimestamp = now;\n\n// ===== RESET CONDITIONS (fixed) =====\nconst rLowerEdge = R_MIN + (R_MAX - R_MIN) * EDGE_MARGIN;\nconst rUpperEdge = R_MAX - (R_MAX - R_MIN) * EDGE_MARGIN;\nconst qLowerEdge = Q_MIN + (Q_MAX - Q_MIN) * EDGE_MARGIN;\nconst qUpperEdge = Q_MAX - (Q_MAX - Q_MIN) * EDGE_MARGIN;\n\nlet daysSinceReset = (now - sensor.lastReset) / (1000 * 60 * 60 * 24);\nlet extremeR = (sensor.R <= rLowerEdge) || (sensor.R >= rUpperEdge);\nlet extremeQ = (sensor.Q <= qLowerEdge) || (sensor.Q >= qUpperEdge);\nlet hardReset = Math.abs(msg.payload - sensor.estimate) > HARD_RESET_DIFF;\n\nif (daysSinceReset >= RESET_INTERVAL_DAYS || (extremeR && extremeQ) || hardReset) {\n    sensor.R = R_MIN;\n    sensor.Q = Q_MIN;\n    if (hardReset) sensor.estimate = msg.payload; // only re-seed on large jump\n    sensor.errorCov = 1;\n    sensor.lastReset = now;\n}\n\n// ===== AUTO-TUNE =====\nlet diff = Math.abs(msg.payload - sensor.estimate);\nlet diffCap = Math.min(diff, 0.2); // avoid letting spikes push R too high\nsensor.R = R_MIN + (diffCap / 0.2) * (R_MAX - R_MIN); \n\nlet intervalFactor = Math.min(Math.max(dt / 60, 0), 1); // 60s -> Q_MAX\nsensor.Q = Q_MIN + intervalFactor * (Q_MAX - Q_MIN);\n\n// ===== KALMAN FILTER =====\nlet predictedEstimate = sensor.estimate;\nlet predictedErrorCov = sensor.errorCov + sensor.Q;\n\nlet K = predictedErrorCov / (predictedErrorCov + sensor.R);\nif (K > MAX_GAIN) K = MAX_GAIN; // critical clamp\n\nsensor.estimate = predictedEstimate + K * (msg.payload - predictedEstimate);\nsensor.errorCov = (1 - K) * predictedErrorCov;\n\n// ===== SAVE CONTEXT =====\ncontext.set(SENSOR_KEY, sensor, 'file');\n\n// ===== OUTPUT =====\nmsg.payload = sensor.estimate;\nnode.status({fill:\"blue\", shape:\"dot\", text:`K=${K.toFixed(2)} R=${sensor.R.toFixed(3)} Q=${sensor.Q.toFixed(3)} est=${sensor.estimate.toFixed(2)}`});\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 260,
        "wires": [
            [
                "acd96dc2362a5f07"
            ]
        ]
    },
    {
        "id": "05526a6dc422359b",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 110",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 735,
        "y": 2980,
        "wires": []
    },
    {
        "id": "9defd4814aacc442",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 112",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 735,
        "y": 2120,
        "wires": []
    },
    {
        "id": "e704c463a7eacea7",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 113",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 735,
        "y": 2200,
        "wires": []
    },
    {
        "id": "6446959d03e0fc27",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 114",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 735,
        "y": 2260,
        "wires": []
    },
    {
        "id": "a231fea857ba5fc4",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 115",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 735,
        "y": 2320,
        "wires": []
    },
    {
        "id": "45d8b0eb6524d1f8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 118",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 2740,
        "wires": []
    },
    {
        "id": "458ff26cc8b8ba7c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 121",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 2800,
        "wires": []
    },
    {
        "id": "c28359a361158840",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 122",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 3420,
        "wires": []
    },
    {
        "id": "4f2bca0fed10c688",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 123",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 3460,
        "wires": []
    },
    {
        "id": "c335163c9d8efd2c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 138",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 3760,
        "wires": []
    },
    {
        "id": "94d63d6212fc2b04",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 154",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 3820,
        "wires": []
    },
    {
        "id": "cc0c6a23965435e3",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 155",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 3880,
        "wires": []
    },
    {
        "id": "e2f4d021c8a23f5a",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 156",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7",
            "52855bedeec34357"
        ],
        "x": 765,
        "y": 4180,
        "wires": []
    },
    {
        "id": "38863139d1e246e6",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 157",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4240,
        "wires": []
    },
    {
        "id": "74209defc22e6b85",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 158",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4340,
        "wires": []
    },
    {
        "id": "0c4b1772fa8b09f6",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 159",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4580,
        "wires": []
    },
    {
        "id": "f6b785b3136bc4b5",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link out 160",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 4655,
        "y": 780,
        "wires": []
    },
    {
        "id": "8b7cbc95996cf262",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 161",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 2600,
        "wires": []
    },
    {
        "id": "1e7278e92fb87f0c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 162",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4000,
        "wires": []
    },
    {
        "id": "1034d22d437cc0cd",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "7987a450598985bb",
        "name": "link out 163",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 925,
        "y": 5400,
        "wires": []
    },
    {
        "id": "201f3629183826f4",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "d15f78ae7f992ea0",
        "name": "link out 164",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 925,
        "y": 5780,
        "wires": []
    },
    {
        "id": "9bb05cfc97431c09",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 165",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 3520,
        "wires": []
    },
    {
        "id": "b3fdc52e42ac1b77",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "0077cf76d14c5757",
        "name": "link out 166",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 725,
        "y": 3560,
        "wires": []
    },
    {
        "id": "0e8dc3344506256e",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP72 - panasonic_heat_pump/main/Z1_Cool_Curve_Target_High_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Cool_Curve_Target_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6500,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "3d03608ca71ddc10",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP73 - panasonic_heat_pump/main/Z1_Cool_Curve_Target_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Cool_Curve_Target_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6540,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "4ca232bc50810832",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP74 - panasonic_heat_pump/main/Z1_Cool_Curve_Outside_High_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Cool_Curve_Outside_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6580,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "ee83e84186072013",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP75 - panasonic_heat_pump/main/Z1_Cool_Curve_Outside_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z1_Cool_Curve_Outside_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6620,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "f7dd9839bc34ea44",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "name": "link out 167",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 785,
        "y": 6680,
        "wires": []
    },
    {
        "id": "58876cb451f28d75",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP86 - panasonic_heat_pump/main/Z2_Cool_Curve_Target_High_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Cool_Curve_Target_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6720,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "e8c13a413998ba76",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP87 - panasonic_heat_pump/main/Z2_Cool_Curve_Target_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Cool_Curve_Target_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6760,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "8aa5d1872a0fe995",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP88 - panasonic_heat_pump/main/Z2_Cool_Curve_Outside_High_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Cool_Curve_Outside_High_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6800,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "ae626f1b7dbe6a5d",
        "type": "mqtt in",
        "z": "a938de76db0b71f6",
        "name": "TOP89 - panasonic_heat_pump/main/Z2_Cool_Curve_Outside_Low_Temp",
        "topic": "panasonic_heat_pump/main/Z2_Cool_Curve_Outside_Low_Temp",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 6840,
        "wires": [
            [
                "f7dd9839bc34ea44"
            ]
        ]
    },
    {
        "id": "31085c7b9968960b",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "2658bea68667a370",
        "name": "Function SoftStart(v2)",
        "func": "//////////////////////////////// SOFTSTART /////////////////////////////////////\nvar msg1={};            //  pin 1 - F_SS_correction\nvar msg99={};           //  pin 2 - To Log\n    msg99.topic     = \"Function SoftStart\";\nvar msg2={};            //  pin 3 - delay\n    msg2.payload    = 'PING';\n\nvar F_SS = global.get('F_SS',\"file\");   if (F_SS === undefined)         {global.set('F_SS',{},\"file\"); return null;}\n    var total_duration              =   F_SS.total_duration;            // seconds\n    var phase_1_duration            =   F_SS.phase_1_duration;          // seconds\n    var phase_1_delay_time          =   F_SS.phase_1_delay_time;        // seconds\n    var phase_1_max_dT              =   F_SS.phase_1_max_dT;            // max temperature difference between SP and Toutlet (Ta)\n    var phase_2_delay_time          =   F_SS.phase_2_delay_time;        // seconds\n    var phase_3_delay_time          =   F_SS.phase_3_delay_time;        // seconds\n    var upperlimit_correction       =   F_SS.upperlimit_correction;     // temperature\n    var lowerlimit_correction       =   F_SS.lowerlimit_correction;     // temperature\n    var F_SS_reset_after_defrost    =   F_SS.reset_after_defrost;       // 1 or 0. Should the softstar function restart after a defrost.\n    var F_SS_state                  =   F_SS.state;                     // 1 or 0. Is the SoftStart function enabled or not.\n    var F_SS_old_correction         =   F_SS.correction_value;          // stored correction as a result of the SoftStart function.\n    var correction_bandwidth        =   F_SS.correction_bandwidth;      // stored bandwidth inbetween the correction needs to be during phase 3, ending.\n\nvar Defrost = global.get('TOP26_Defrosting_State',\"file\");      if (Defrost === undefined)  {Defrost = 0;}\n\nif (F_SS_reset_after_defrost == 0 || F_SS_reset_after_defrost === undefined) {\n        if (Defrost == 1) {                                                                     // Exception during defrost \n            msg99.payload = \"temporary disabled during defrost\"; \n            //return [null, msg99];                                                               // By exiting the function here, non of the logic below is done. Effectifly halting the function. \n                                                                                                // As soon as the defrost is done, it will go through the function again. The timer will not be reset.\n        }\n}\n\nvar TOP76_Heating_Mode = global.get('TOP76_Heating_Mode',\"file\");           if (TOP76_Heating_Mode === undefined) {return null;}\nvar TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');  if (TOP20_ThreeWay_Valve_State === undefined) { return null; }\nvar ss_Hz = global.get('compressor_frequency', \"file\");                     if (ss_Hz === undefined) { return null; }\n\nvar TCAP = global.get('panasonic.TCAP', \"file\");                            \n\nif (F_SS_state === undefined) { global.set('F_SS.state', +0 ,\"file\"); F_SS_state= +0; }\n\nif (F_SS_old_correction === undefined) {F_SS_old_correction=0; }\n\nvar F_SS_correction     = 0;\nvar Operating_Mode      = global.get('TOP4_Operating_Mode_State',\"file\");\n\nvar TOP94_Zones_State = global.get('TOP94_Zones_State',\"file\"); if (TOP94_Zones_State === undefined) { return null; }\n    \n//  Setpoint after CCC calculation\n//var SP_start            = global.get('F_CCC.z1.setpoint',\"file\");   if (SP_start === undefined)    {return null;}\nvar SP_start_z1 = global.get('F_CCC.z1.setpoint', \"file\"); if (SP_start_z1 === undefined) { return null; }\nvar SP_start_z2 = global.get('F_CCC.z2.setpoint', \"file\"); if (SP_start_z2 === undefined) { return null; }\n//node.warn('SoftStart--- SP_start_z1 = ' + SP_start_z1);\n\nvar F_RTC_correction_z1     = global.get('F_RTC.z1.correction_value',\"file\");\n    if (F_RTC_correction_z1 === undefined) { F_RTC_correction_z1 = 0;} \n    F_RTC_correction_z1     = Number(F_RTC_correction_z1).toFixed(1);\n    F_RTC_correction_z1     = parseFloat(F_RTC_correction_z1);\n\nvar F_RTC_correction_z2     = global.get('F_RTC.z2.correction_value', \"file\");\n    if (F_RTC_correction_z2 === undefined) { F_RTC_correction_z2 = 0; }\n    F_RTC_correction_z2     = Number(F_RTC_correction_z2).toFixed(1);\n    F_RTC_correction_z2     = parseFloat(F_RTC_correction_z2);\n\n\nvar F_NR_state = global.get('NightReductionWaterTemp.state', \"file\");                   \n    if (F_NR_state === undefined) { F_NR_state = 0; }\n\nvar F_NR_correction     = global.get('NightReductionWaterTemp.current_value',\"file\");           //  Correction of the NightReduction function\n    if (F_NR_state == 0 || F_NR_correction === undefined) { F_NR_correction = 0; }\n\nvar F_SS_SP_start_z1 = SP_start_z1 + F_RTC_correction_z1 + F_NR_correction;                        //  Calculate the starting temperature (SP) for the SoftStart function \nvar F_SS_SP_start_z2 = SP_start_z2 + F_RTC_correction_z2 + F_NR_correction;                        //  Calculate the starting temperature (SP) for the SoftStart function \n\n\n\nif (TOP76_Heating_Mode === 0) { // Compensation curve\n    F_SS_SP_start_z1 = F_SS_SP_start_z1 + global.get('F_CCC.z1.SP_DIRECT_virt',\"file\");\n    F_SS_SP_start_z2 = F_SS_SP_start_z2 + global.get('F_CCC.z2.SP_DIRECT_virt', \"file\");\n}\n// >>> node.warn('SoftStart--- SP Start_z1 = Start+VIRT+RTC + NR --- ' + F_SS_SP_start_z1 + ' = ' + SP_start_z1 + ' + ' + global.get('F_CCC.z1.SP_DIRECT_virt',\"file\") + ' + ' + F_RTC_correction_z1 + ' + ' + F_NR_correction);\n//node.warn('VIRT: ' + global.get('F_CCC.z1.SP_DIRECT_virt',\"file\"))\n//node.warn('SoftStart F_SS_SP_start_z1 after correction... = ' + F_SS_SP_start_z1);\nvar F_SS_SP_start\nswitch (TOP94_Zones_State) {\n    case 0: // zone 1\n        F_SS_SP_start = F_SS_SP_start_z1 ;\n        msg99.topic =  msg99.topic + \" (Zone 1)\";\n        break;\n    case 1: // zone 2\n        F_SS_SP_start = F_SS_SP_start_z2 ;\n        msg99.topic = msg99.topic + \" (Zone 2)\";\n        break;\n    case 2: // zone 1 + 2\n        F_SS_SP_start = Math.max(F_SS_SP_start_z1, F_SS_SP_start_z2) ;\n        msg99.topic = msg99.topic + \" (Zone 1 and 2)\";\n        break;\n}\nvar TOP99_Buffer_Installed = global.get('TOP99_Buffer_Installed',\"file\");\n\nvar ss_PV_Ta_correction = 0;\n\nif (TOP99_Buffer_Installed === 1) {\n    var TOP113_Buffer_Tank_Delta = global.get('TOP113_Buffer_Tank_Delta',\"file\");\n    if (isNaN(TOP113_Buffer_Tank_Delta) || TOP113_Buffer_Tank_Delta === undefined) { return null; };\n    ss_PV_Ta_correction = TOP113_Buffer_Tank_Delta + 2\n}\n\n//// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, --- 7=Auto(Cool), 8=Auto(Cool)+DHW)\n\n// ***********************************************************************************\nif (F_SS_state === 0 || \n    ss_Hz === 0 || \n    TOP20_ThreeWay_Valve_State !== 0 || \n    Operating_Mode === undefined || \n    Operating_Mode===1 || \n    Operating_Mode===3 || \n    Operating_Mode===5 || \n    Operating_Mode===7 || \n    Operating_Mode===8 || \n    Defrost==1\n    ) {                   \n            // These are the condition the logic in this function should not start.\n                // Check if the softstart function is disabled. \n                // Check if the compressor is not running. \n                // Check if 3-wayvalvue is not in HEAT mode (0). \n                // Check if OperatingMode is in the incorrect mode, like cool mode or DHW only etc. \n                // Check if there is currently a defrost cycle active.\n\n    F_SS_correction = 0;                                                                        //  If the function is off, or the compressor is off, the correction should be set to zero\n    if (F_SS.correction_value !== F_SS_correction) {\n        global.set('F_SS.correction_value',F_SS_correction,\"file\");                             //  Set the correctionvalue\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); }\n    }\n    if (Defrost !== 1) { context.set('SS_run_counter', 0); }                               // reset the counter\n    \n    if  (Defrost !== 0 && F_SS_reset_after_defrost !== 1)  { ; }      // In the scenario (Defrost = 1) AND (F_SS_reset.. = 0), it should do nothing...\n    else { global.set('StartTime', undefined, \"file\") }             // all other scenarios should clear StartTime value..\n\n    msg1.payload = F_SS_correction; \n    msg1.topic = 'Compressor off. F_SS_correction 0';\n    \n    msg2.topic = 'reset';\n    msg2.payload = 'PANG';\n    \n    msg99.payload = \"SoftStart function end\";\n    \n    if (Defrost === 1) {\n        msg1.topic = 'Function SoftStart';\n        msg99.payload = \"Defrost - Correction: \" + F_SS_correction;\n    }\n    \n    global.set('F_SS.correction_bandwidth',undefined,\"file\");\n    msg1.payload = Number(msg1.payload).toFixed(0);\n    msg1.payload = parseFloat(msg1.payload);\n    return [msg1,msg99,msg2];\n}\n// ***********************************************************************************\n\nvar F_SS_new_SP;                                                                        //  declare an empty variable\n\nvar ss_PV_Ta            = global.get('TOP6_Main_Outlet_Temp');    //  PV (Ta/outlet) Temperature of water.\n    if (ss_PV_Ta === undefined) { return null;}\nss_PV_Ta                = ss_PV_Ta - ss_PV_Ta_correction;    //  PV (Ta/outlet) Temperature of water.\n\nvar T = '';\nvar C = '';\n\n//\n// ***********************************************************************************\n/////// Timer how long the compressor is on. Runtime //////////\n// ***********************************************************************************\nvar CurrentTime = new Date().getTime();\nvar StartTime = global.get('StartTime', \"file\");\n\nif (StartTime === undefined) {\n    StartTime = CurrentTime;\n    global.set('StartTime', StartTime, \"file\");\n    \n    msg2.topic = 'reset';                                       // reset any ongoing timers ... if present. \n    node.send([null, null, msg2]); \n\n    // send trigger to timer after phase 1\n    msg2.topic = 'delayed_trigger';\n\n    msg2.delay = phase_1_duration;\n    msg2.force = 1;\n    node.send([null,null,msg2]);                                         // SENDS MSG TO TIMER FUNCTION\n    msg2.force = 0;\n}\n\nvar TimeElapsed = ((CurrentTime - StartTime) / 1000);\nTimeElapsed = parseFloat(TimeElapsed.toFixed(0));\n\n// *********************************************************************\nvar Phase;\n    if (TimeElapsed < phase_1_duration)                                             {Phase = 1; }\n    if (TimeElapsed >= phase_1_duration && TimeElapsed < (phase_1_duration + 10))   {Phase = 9; }\n    if (TimeElapsed >= (phase_1_duration + 10) && TimeElapsed < total_duration)     {Phase = 2; }\n    if (TimeElapsed >= total_duration)                                              {Phase = 3; }\n\nif (msg.force === 1) {\n        \n        if (Phase === 1 && phase_1_delay_time !== 0) {\n            msg2.topic = 'reset';                                       // reset any ongoing timers. force shutdown at given interval\n            node.send([null, null, msg2]); \n            \n            msg2.delay = phase_1_delay_time;\n            if (msg2.delay < 5) {msg2.delay = 5;}\n            msg2.topic = 'delayed_trigger';\n            msg2.force = 1;\n            node.send([null,null,msg2]);                            // SENDS MSG TO TIMER FUNCTION\n            msg2.force = 0;\n        }\n        \n        if (Phase === 9) {\n            msg2.topic = 'reset';                                       // reset any ongoing timers. force shutdown at given interval\n            node.send([null, null, msg2]); \n            \n            msg2.delay = 10;\n            msg2.force = 1;\n            msg2.topic = 'delayed_trigger';\n            node.send([null,null,msg2]);                            // SENDS MSG TO TIMER FUNCTION\n            msg2.force = 0;\n        }\n\n        // TCAP = 1, Hz lower limit is depending on the outside temperature. (TCAP feature)\n        // TCAP = 0, Hz lower limit is fixed.\n\n        var relaxed_frequency; \n        if (TCAP === 1) {\n            var TOP14_Outside_Temp = global.get('TOP14_Outside_Temp',\"file\")\n                if (TOP14_Outside_Temp === undefined)   { relaxed_frequency = 36; }\n                if (TOP14_Outside_Temp < 5)             { relaxed_frequency = 36; }\n                if (TOP14_Outside_Temp >= 5)            { relaxed_frequency = 21; }\n        }\n            \n        if (TCAP === 0) {relaxed_frequency = 21;}\n        \n        var SS_run_counter = context.get('SS_run_counter');\n        if (SS_run_counter === undefined) { SS_run_counter = 0; }\n\n        if (Phase === 2) {\n            if (ss_Hz > relaxed_frequency && SS_run_counter < 7) {\n                StartTime = CurrentTime;\n                global.set('StartTime', undefined, \"file\");\n                context.set('StartTime_temp_step', undefined);\n\n                msg2.topic = 'reset';\n                node.send([null, null, msg2]);                            // SENDS MSG TO TIMER FUNCTION\n                \n                msg2.force = 1;\n                msg2.topic = 'delayed_trigger';\n                msg2.delay = 0;\n                SS_run_counter = SS_run_counter + 1;\n                context.set('SS_run_counter', SS_run_counter);                        \n                msg99.payload = ' --> Pump did not yet relax (' + ss_Hz + 'Hz). Restarting Phase 1 again... (Count: ' + SS_run_counter + '/7)';\n                return [null, msg99, msg2]\n            }   \n\n            if (ss_Hz > relaxed_frequency && SS_run_counter >= 5){\n                msg99.payload = ' --> Pump relaxing took too long... (' + ss_Hz + 'Hz) Continuing with Phase 2. (Count: ' + SS_run_counter + '/7. Resetting counter)';\n                context.set('SS_run_counter', 0);\n                node.send([null, msg99, null]);\n            }\n            \n            if (ss_Hz <= relaxed_frequency) {\n                msg99.payload = ' --> Pump relaxed... (' + ss_Hz + 'Hz) Continuing with Phase 2';\n                context.set('SS_run_counter', 0);\n                node.send([null, msg99, null]);\n            }\n            \n            msg2.delay = total_duration - TimeElapsed;\n            msg2.force = 1;\n            msg2.topic = 'delayed_trigger';\n            node.send([null, msg99, msg2]);                                // SENDS MSG TO TIMER FUNCTION\n            msg2.force = 0;\n        }\n\n        if (Phase === 3) {\n            if (SS_run_counter != 0) { context.set('SS_run_counter', 0); }\n\n            msg2.topic = 'reset';                                       // reset any ongoing timers. force shutdown at given interval\n            node.send([null,null,msg2]); \n            \n            msg2.topic = 'delayed_trigger';                             // send msg to timer to trigger next reductin step\n            msg2.force = 1;\n            msg2.delay = phase_3_delay_time;\n            node.send([null,null,msg2]);                                \n            msg2.force = 0;\n            msg2.topic = '';\n        }\n//return null\n}\n\n// >>> NUMERICAL CALCULATION\n// ***********************************************************************************\n//      Stage 1 - Start up\n// ***********************************************************************************\nvar TOP46_Buffer_Temp = global.get('TOP46_Buffer_Temp', \"file\"); \n    if (TOP46_Buffer_Temp === undefined || TOP99_Buffer_Installed === 0) { TOP46_Buffer_Temp = 0; }\nif (Phase === 1){\n    F_SS_correction = -5;                                              //  Set the starting correction to -10\n    F_SS_new_SP = F_SS_SP_start + F_SS_correction;                      //  Calculate the NEW SP.\n\n    T = ' - (STARTUP)';\n    \n    if (Math.ceil(ss_PV_Ta) + phase_1_max_dT > F_SS_new_SP)                        //  Check if the NEW SP is not too low (1C below Ta) \n        {\n            F_SS_new_SP             = Math.ceil(ss_PV_Ta) + phase_1_max_dT;        //  NEW SP\n            F_SS_correction         = F_SS_new_SP - F_SS_SP_start;      //  NEW CORRECTION\n        }\n    \n    if (F_SS_new_SP > F_SS_SP_start + 7)                                //  Check if the NEW SP is not too high (7C above original SP) coming out of DHW eg.\n        {\n            F_SS_new_SP             = F_SS_SP_start + 7;                //  NEW SP\n            F_SS_correction         = 7;                                //  NEW CORRECTION\n        }\n    //if (F_SS_new_SP < TOP46_Buffer_Temp - 2) \n    //    { \n    //        F_SS_new_SP = TOP46_Buffer_Temp - 2 ;\n    //        F_SS_correction = F_SS_new_SP - F_SS_SP_start;      //  NEW CORRECTION\n    //    }\n\n    if (TOP99_Buffer_Installed === 1 && TOP46_Buffer_Temp !== undefined) {\n        if (TOP46_Buffer_Temp - 2 < F_SS_SP_start) {\n            if (F_SS_new_SP < TOP46_Buffer_Temp - 2) {\n                F_SS_new_SP = TOP46_Buffer_Temp - 2;\n                F_SS_correction = F_SS_new_SP - F_SS_SP_start;\n            }\n        }\n    }\n}\n\nif (Phase === 9) {\n\n    T = ' - (EVALUATING)';\n    F_SS_new_SP = Math.ceil(ss_PV_Ta) -1;                                      //  NEW SP\n    \n    if (TOP99_Buffer_Installed === 1 && TOP46_Buffer_Temp !== undefined) {\n        // Phase 9\n        if (TOP46_Buffer_Temp - 1 < F_SS_SP_start) {\n            if (F_SS_new_SP < TOP46_Buffer_Temp - 1) {\n                F_SS_new_SP = TOP46_Buffer_Temp - 1;\n            }\n        }\n    }\n    F_SS_correction = F_SS_new_SP - F_SS_SP_start;                  //  NEW CORRECTION    \n}\n\n\n// ***********************************************************************************\n//      Stage 2 - waiting for pump to relax\n// ***********************************************************************************\n\nif (Phase === 2){    \n\n    F_SS_new_SP                     = Math.ceil(ss_PV_Ta) -1 ;                      //  NEW SP\n        \n    if (F_SS_new_SP < F_SS_SP_start + lowerlimit_correction)\n        {\n            F_SS_new_SP = F_SS_SP_start + lowerlimit_correction;\n        }\n    F_SS_correction                 = F_SS_new_SP - F_SS_SP_start;      //  NEW CORRECTION\n    \n    if (TOP99_Buffer_Installed === 1 && TOP46_Buffer_Temp !== undefined) {\n        // Phase 2\n        if (TOP46_Buffer_Temp - 1 < F_SS_SP_start) {\n            if (F_SS_new_SP < TOP46_Buffer_Temp - 1) {\n                F_SS_new_SP = TOP46_Buffer_Temp - 1;\n                F_SS_correction = F_SS_new_SP - F_SS_SP_start;\n            }\n        }\n    }\n    if (F_SS_correction > upperlimit_correction)   {\n            F_SS_correction = upperlimit_correction;\n            F_SS_new_SP = F_SS_SP_start + upperlimit_correction;\n            C = ' (Capped)';\n    }\n    if (F_SS_correction < lowerlimit_correction)   {\n            F_SS_correction = lowerlimit_correction;\n            F_SS_new_SP = F_SS_SP_start + lowerlimit_correction;\n            C = ' (Capped)';\n    }\n    \n    T = ' - (STABLE)';\n}\n\n// ***********************************************************************************\n//       Stage 3 - Pump has relaxed. Remove correction, back to original setpoint... Slowly\n//***********************************************************************************\n\nif (Phase === 3){\n            \n            F_SS_new_SP = F_SS_SP_start + F_SS_correction;                      //  Calculate the NEW SP.\n            \n            if (F_SS_old_correction < -1) {\n                F_SS_correction = F_SS_old_correction + 1;\n            }\n            \n            if (F_SS_old_correction > 1) {\n                F_SS_correction = F_SS_old_correction - 1;\n            }\n            \n            if (F_SS_old_correction >= -1 && F_SS_old_correction <= 1) {\n                F_SS_correction = 0;\n                // No delay triggers needed anymore\n            }                    \n            \n            F_SS_new_SP                 = F_SS_SP_start + F_SS_correction ;                    //  NEW SP\n            T = ' - (ENDING)';\n}\n\n//node.warn('----SoftStart final correction : ' + F_SS_correction)\n\n// ***********************************************************************************\n//          Comparing, delaying, comparing and sending the above calculated correction\n// ***********************************************************************************\n\nvar StartTime_temp_step = context.get('StartTime_temp_step');\nif (StartTime_temp_step === undefined) {\n    StartTime_temp_step = CurrentTime;\n    context.set('StartTime_temp_step',CurrentTime);\n}\n\nvar TimeElapsed_temp_step = (CurrentTime - StartTime_temp_step) / 1000;         // time is in ms. \n    TimeElapsed_temp_step = parseFloat(TimeElapsed_temp_step.toFixed(0));\n\nF_SS_correction = Math.round(F_SS_correction * 10) / 10;\n\nmsg1.payload = F_SS_correction; \nmsg1.topic = 'F_SS_correction ' + T;\n\nif (Phase === 1){\n        \n        //node.warn('Phase 1 main section');\n        if (F_SS_correction <= F_SS_old_correction){\n            //node.warn('Phase 1 sub-section (1)');\n                global.set('F_SS.correction_value',F_SS_correction,\"file\"); \n                context.set('StartTime_temp_step',undefined);\n                msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + F_SS_correction + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n                msg1.payload = F_SS_correction; \n                if (F_SS_correction != F_SS_old_correction)     { if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); } return [msg1,msg99,null];}\n                else                                            {return [msg1,null,null];}\n        }\n        \n        if (F_SS_correction > F_SS_old_correction && TimeElapsed_temp_step >= phase_1_delay_time){\n           // node.warn('Phase 1 sub-section (2)');\n                global.set('F_SS.correction_value',F_SS_correction,\"file\"); \n                context.set('StartTime_temp_step',undefined);\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); }\n                msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + F_SS_correction + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n                msg1.payload = F_SS_correction; \n                return [msg1,msg99,null];\n        }\n        \n        if (F_SS_correction > F_SS_old_correction && TimeElapsed_temp_step < phase_1_delay_time){\n            //node.warn('Phase 1 sub-section (3)');\n                F_SS_correction = F_SS_old_correction;\n                global.set('F_SS.correction_value',F_SS_old_correction,\"file\");\n                //if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); }\n                msg2.delay = phase_1_delay_time;\n                msg2.topic = \"delayed_trigger\";\n                msg1.payload = F_SS_old_correction; \n                \n                return [msg1,null,msg2]; ///////////   <<<<<<<<<<<<<<<<<<<<<<<<\n        }\n}\n\n\nif (Phase === 9) {\n                global.set('F_SS.correction_value', F_SS_correction, \"file\");\n                context.set('StartTime_temp_step',undefined);\n                msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + F_SS_correction + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\";\n                msg2.delay = 10;\n                msg2.topic = \"delayed_trigger\";\n                msg1.payload = F_SS_correction;\n                return [msg1, msg99, msg2];\n}\n\n\nif (Phase === 2){\n        if (F_SS_correction <= F_SS_old_correction){\n                global.set('F_SS.correction_value',F_SS_correction,\"file\"); \n                context.set('StartTime_temp_step', undefined);\n                msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + F_SS_correction + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n                msg1.payload = F_SS_correction; \n            if (F_SS_correction != F_SS_old_correction)     { if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); }   return [msg1,msg99,null];}\n            else                                            {return [msg1,null,null];}\n        }\n        \n        if (F_SS_correction > F_SS_old_correction && TimeElapsed_temp_step >= phase_2_delay_time){\n                global.set('F_SS.correction_value',F_SS_correction,\"file\");\n                context.set('StartTime_temp_step', undefined);\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); }\n                msg1.payload = F_SS_correction; \n                msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + F_SS_correction + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n                return [msg1,msg99,null];\n        }\n        \n        if (F_SS_correction > F_SS_old_correction && TimeElapsed_temp_step < phase_2_delay_time){\n                global.set('F_SS.correction_value',F_SS_old_correction,\"file\");\n                //if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart\"); }\n                msg2.delay = phase_2_delay_time;\n                msg2.topic = \"delayed_trigger\";\n                msg1.payload = F_SS_old_correction; \n                return [msg1,null,msg2]; ///////////   <<<<<<<<<<<<<<<<<<<<<<<<\n        }\n}\n\nif (Phase === 3 && msg.force === 1) {\n        if (F_SS_old_correction < -1 || F_SS_old_correction > 1){\n            correction_bandwidth = F_SS_correction;\n            global.set('F_SS.correction_bandwidth',correction_bandwidth,\"file\");\n        }\n        \n        \n        if (F_SS_old_correction != 0)   {global.set('F_SS.correction_value',F_SS_correction,\"file\");}\n        if (F_SS_old_correction == 0)   {\n                                            global.set('F_SS.correction_value',0,\"file\");\n                                            global.set('F_SS.correction_bandwidth',undefined,\"file\");\n                                        }\n        msg1.payload = F_SS_correction; \n        msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + F_SS_correction + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n        if (F_SS_old_correction != 0)   {   return [msg1,msg99,null];\n        }\n        else                            {   msg2.topic = 'reset';                                       // reset any ongoing timers. force shutdown at given interval\n                                            return [msg1,null,msg2];\n        }\n\n}\n\n if (Phase === 3 && msg.force !== 1){\n        if (correction_bandwidth > 0 && F_SS_correction > correction_bandwidth){\n            global.set('F_SS.correction_value',correction_bandwidth,\"file\");\n            msg1.payload = correction_bandwidth; \n            //msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + correction_bandwidth + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n            return [msg1,null,null];\n        }\n        if (correction_bandwidth > 0 && F_SS_correction < -1 * correction_bandwidth){\n            global.set('F_SS.correction_value',-1 * correction_bandwidth,\"file\");\n            msg1.payload = correction_bandwidth * -1; \n            //msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + -1 * correction_bandwidth + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n            return [msg1,null,null];\n        }\n        \n        \n        \n        if (correction_bandwidth < 0 && F_SS_correction < correction_bandwidth){\n            global.set('F_SS.correction_value',correction_bandwidth,\"file\");\n            msg1.payload = correction_bandwidth; \n            //msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + correction_bandwidth + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n            return [msg1,null,null];\n        }\n        if (correction_bandwidth < 0 && F_SS_correction > -1 * correction_bandwidth){\n            global.set('F_SS.correction_value',-1 * correction_bandwidth,\"file\");\n            msg1.payload = correction_bandwidth * -1; \n            //msg99.payload = \"Correction: \" + F_SS_old_correction + \" > \" + -1 * correction_bandwidth + \" °C\" + T + \" Freq: \" + ss_Hz + \"Hz\"; \n            return [msg1,null,null];\n        }\n        \n        //global.set('F_SS.correction_value',F_SS_old_correction,\"file\");\n        //return [null,null,null];\n        \n}",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1500,
        "wires": [
            [
                "dca26429693a97a5",
                "16054e8334890ad8"
            ],
            [
                "64558e335a45bcbb"
            ],
            [
                "a1cf343333a2e923"
            ]
        ],
        "outputLabels": [
            "F_SS_correction",
            "ToLog",
            "Dynamic delay trigger"
        ]
    },
    {
        "id": "0457901c1832b0f8",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 169",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4400,
        "wires": []
    },
    {
        "id": "e059b8503f36c6cc",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 170",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4460,
        "wires": []
    },
    {
        "id": "5dca15fef4a08f93",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "cd2050a861736ec5",
        "name": "link out 171",
        "mode": "link",
        "links": [
            "1bb2b392ca8c96a7"
        ],
        "x": 765,
        "y": 4520,
        "wires": []
    },
    {
        "id": "52855bedeec34357",
        "type": "link in",
        "z": "a938de76db0b71f6",
        "name": "BufferChart",
        "links": [
            "35ca9241fc9fc7a1",
            "12a26bbb7c8070d7",
            "e2f4d021c8a23f5a",
            "b2cbfb75d81fa060",
            "c57a81d1dee5b8a9"
        ],
        "x": 675,
        "y": 1900,
        "wires": [
            [
                "08f32aede9eb3ebb"
            ]
        ]
    },
    {
        "id": "08f32aede9eb3ebb",
        "type": "ui_chart",
        "z": "a938de76db0b71f6",
        "d": true,
        "name": "",
        "group": "78a82111b1f64468",
        "order": 1,
        "width": 20,
        "height": 14,
        "label": "Buffer Info",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "step",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "12",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1010,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "96c064c18cd18fc1",
        "type": "function",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "To MQTT",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetZ1CoolRequestTemperature\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 5780,
        "y": 620,
        "wires": [
            [
                "8b954170d7a05c4c"
            ]
        ]
    },
    {
        "id": "8b954170d7a05c4c",
        "type": "link out",
        "z": "a938de76db0b71f6",
        "g": "992121a08b66faa3",
        "name": "link out 179",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 6005,
        "y": 620,
        "wires": []
    },
    {
        "id": "a27a939104b0f866",
        "type": "inject",
        "z": "a938de76db0b71f6",
        "g": "8ec12071fca1518a",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "restart",
        "x": 4320,
        "y": 2840,
        "wires": [
            [
                "35c15a4c210a4b20"
            ]
        ]
    },
    {
        "id": "43c4ee3ee4757f3c",
        "type": "tab",
        "label": "WP Managers",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "eae83de4837abd07",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "Quiet Mode Manager",
        "style": {
            "label": true,
            "fill": "#ffefbf"
        },
        "nodes": [
            "2a72a0a50c226d0f",
            "a3ab6c0ec376501c",
            "06d5536b79bbad36",
            "c94d6bdf03f2b540",
            "148e50df3de81e03",
            "74ccc8947e89976a",
            "1027f83996564c11",
            "9708d32f74bd48ae",
            "906071287f20398e",
            "5a1d6b18490ded1c",
            "3862c55621fdbb6d",
            "6165734a2db82af9",
            "2798e84309619975",
            "0ad5396b01ed9ce0",
            "3f035e294e03f28c",
            "a44c9937f2ab3ee0",
            "4aeca25016f1790a",
            "4e71c5f774dde93c",
            "aa0fd9c437762a4e",
            "45cb23dd7d903663",
            "20f812994e45e10a",
            "4f37968e1a1ebacc",
            "4ac5cc278b7439a7",
            "405317f0af84b0d2",
            "b6ca22591212ef37",
            "69d01a9ce5c2f74f",
            "2257c7f00dc04133",
            "76613b798744d288"
        ],
        "x": 154,
        "y": 19,
        "w": 1292,
        "h": 322
    },
    {
        "id": "424338733e4798c9",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "DHW SP manager",
        "style": {
            "label": true,
            "fill": "#ffefbf"
        },
        "nodes": [
            "35a1975644451093",
            "a6ccb9d3fcdad8e7",
            "c4cb07ae79c0bf65",
            "609ccd0fd9799230",
            "114053cd7796cbd8",
            "9f0d3363157b8087",
            "b02fa3c8b43f5d62",
            "fe877578d4a955fa",
            "f65899a1446c22c7",
            "b62af09024bd5955",
            "dd5a385aad192c71",
            "cc67a559f6872a34",
            "47b30756351d8037",
            "aeae0e1e5be9ad20",
            "c82ec16fb6ba6769",
            "6f29a5e5626945ea",
            "327f3ad0eae0d7d5",
            "90505d69973e3970",
            "fb5aeb896e8acc76",
            "b3359bc3c036e439",
            "a333286329402b87",
            "4e1fa036d5ada897",
            "0770871389001bc5",
            "3cdd0f73da377608",
            "e44b30546eb4ad2d",
            "ded02fca7021c0c6",
            "3ef323f843b0f516",
            "290f1b5381842a42"
        ],
        "x": 164,
        "y": 399,
        "w": 1292,
        "h": 242
    },
    {
        "id": "ab02dbcde88f3267",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "popup Style",
        "style": {
            "label": true,
            "fill": "#dbcbe7"
        },
        "nodes": [
            "a0c12406bf11e1e5",
            "5478fc658f9e7b24",
            "6ade9410c4a9dd70"
        ],
        "x": 1894,
        "y": 59,
        "w": 292,
        "h": 162
    },
    {
        "id": "d9eb0a2937cbbc7b",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "Operating mode Manager",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "adfcd4f481333501",
            "84bff5c3d4a4cede",
            "c5e4882db5fea41f",
            "73e10ff5ebe614ef",
            "b9c4f0a59b3270ad",
            "2a530d47b288e289",
            "e73d130bb1839444",
            "efa847198158ca2c",
            "f76db0ea91c39edd",
            "836082017500f9a9",
            "87f71902ec6b1541",
            "8b4945ae5f3915e8",
            "4a4a891dece731a1",
            "cc38651b04af8756",
            "a5db2d3cd0084878",
            "21cf21646167ae31",
            "59040831b881ca33"
        ],
        "x": 164,
        "y": 679,
        "w": 1282,
        "h": 242
    },
    {
        "id": "8f85827475badab6",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "HEAT Z1 + Z2 SP Manager",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "5d0b7390e93f7e48",
            "642356c6a779d7fa",
            "694768bd9f0a9a39",
            "02c7c088196cb575",
            "2d52ca9e08c7fb9a",
            "d154cb2b92987925",
            "ff40b3d6f1b996fe",
            "fc202bdb5486d9fe",
            "5d8b7981975b516e",
            "7a2f0f42321d7256",
            "61dfad40f76daac7",
            "fa2a77572981525d",
            "ed2c73bf6b96d4a0",
            "fd2003d6bc939d36",
            "909640f1caf950f8",
            "a85d4f84f1b538d1",
            "3decf85e0dfd50ae",
            "9d678818ee4f7078",
            "ddcff50cd968534a",
            "ea22f152face3bf2",
            "a1ecb8084e0daf19",
            "bc40f8b817aa9a3f",
            "831ae2781ec40575",
            "9c9e0c42f12befa6",
            "94a3169df392ca7e",
            "1526c798778e3632",
            "d7c439696ff250b8",
            "3abfa02dbfa24f15",
            "c4130c490114e90f",
            "64dcf16c979d2a3a",
            "86f7fd675b1108ac",
            "30ddad2d3d726107",
            "5366a989df3f73a4",
            "fd8bde63ad7a06e0",
            "1fd1957c5272120a",
            "7ddd3f5d8f76897e",
            "1b409e1ea72f94dd",
            "ecc3180f70a1af53",
            "78cd6de319a6d061",
            "0e04122d6f8a2033",
            "d62a7aa18d066598",
            "5b68f411defbf165",
            "ea62546371ce867f",
            "9dc404968dc9524f",
            "5997b2d47d527ff5",
            "1fe8744be2aaf44e",
            "8a3014ba808f0fa9",
            "b310fd2d92895126",
            "04af9373e9f7a428"
        ],
        "x": 144,
        "y": 1119,
        "w": 1882,
        "h": 442
    },
    {
        "id": "8d3961fae227e0f6",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "MQTT COMMAND > REPLY CHECK",
        "style": {
            "stroke": "#ff0000",
            "fill": "#ffbfbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1bb2b392ca8c96a7",
            "7e328f6ed77430b5",
            "027e4b15660edbec",
            "b7556729d886d04c",
            "c7a7be892c1747ec",
            "83b59586288340a2",
            "7322f1de7844d355",
            "392a86bd7fb5e647",
            "48d749cc0ca61d74"
        ],
        "x": 174,
        "y": 1639,
        "w": 1142,
        "h": 202
    },
    {
        "id": "4b1078d2a87f8c64",
        "type": "group",
        "z": "43c4ee3ee4757f3c",
        "name": "All MQTT Throttle",
        "style": {
            "stroke": "#ff0000",
            "fill": "#ffbfbf",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "bfa541a4cf7363ca",
            "dece019c79a07993",
            "8b3d729fe630c248",
            "1e22e8620445f5a5"
        ],
        "x": 1394,
        "y": 1639,
        "w": 772,
        "h": 82
    },
    {
        "id": "2a72a0a50c226d0f",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link out towards LOGs",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1405,
        "y": 160,
        "wires": []
    },
    {
        "id": "a3ab6c0ec376501c",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "Exit to InputLOGS",
        "info": "",
        "x": 930,
        "y": 160,
        "wires": []
    },
    {
        "id": "06d5536b79bbad36",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "Quiet Mode Manager",
        "func": "/*\nmsg.source:\n    \"SoftStart Quietmode\";\n    \"scheduler\";\n    \"GUI\";\n    \"boot\";\n    \"Operating_Mode_State\";\n*/\n\nvar msg1 = {};      // quiet mode level sent to mqtt SET3\n    msg1.topic = 'QuietMode level';\nvar msg2 = {};      // To Log\n    msg2.topic = \"Quiet mode manager\";\nvar msg3 = {};      // Popup Okay\nvar msg4 = {};      // Popup Yes/No\n\nvar F_SS            = global.get(\"F_SS\",\"file\");\nif (F_SS === undefined) { F_SS = {}; }\nif (F_SS.QM_state === undefined) { F_SS.QM_state = 0; global.set('F_SS', F_SS,\"file\"); }\n\nvar Hz              = global.get('compressor_frequency',\"file\");                        // Get the global variable for current compressor frequency\nvar CurrentQMLevel  = global.get('TOP18_Quiet_Mode_Level',\"file\");                      // Current quiet mode level from TOP18\n\nif (Hz === undefined || CurrentQMLevel === undefined) { return null }\n\n//******************************************************************************\n//****** SOURCE : GUI Toggle - SoftStart / Quietmode Add-on          ***********\n//******************************************************************************\nif ((msg.topic === \"QM_state\" && F_SS.state == 1) || (msg.topic === \"Function - SoftStart\" && F_SS.QM_state === 1)){\n        \n        if (msg.payload === 1 && Hz > 0 ){\n                return null;\n        }\n        if (msg.payload === 1 && Hz == 0 ){\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                msg1.payload = F_SS.QM_active_level;\n                msg2.payload = 'Function turned on. Restoring quietmode to level ' + F_SS.QM_active_level;\n                return [msg1,msg2];\n        }\n        \n        if (msg.payload === 0){\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                msg1.payload = F_SS.QM_default_level;\n                msg2.payload = 'Function turned off. Restoring quietmode to level ' + F_SS.QM_default_level;\n                return [msg1,msg2];\n        }\n}\n\n//******************************************************************************\n//****** Source : SCHEDULER                                          ***********\n//******************************************************************************\nif (msg.source === \"scheduler\"){\n        msg1.payload = msg.payload;\n        if (F_SS.QM_state === 1 && F_SS.state == 1){\n            // msg2 = message to the log\n            msg2.payload = '*** ATTENTION *** Scheduler changed the quiet mode level while the softstart quiet mode add-on is still active.';\n            node.send([null,msg2])\n        }\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Scheduler\"); }\n        return msg1;\n}\n\n\n//******************************************************************************\n//******  Source : GUI changes from the Quietmode Add-on settings    ***********\n//******************************************************************************\nif (msg.topic === \"QM_default_level\" && Hz > 0 && F_SS.QM_state === 1 && F_SS.state === 1){    // SoftStart QuietMode tab\n\n        // msg4 = message to the Notify dialog\n        msg4.topic = \" Action\"\n        msg4.payload = \" Setting 'Default quietmode level' changed to \" + msg.payload + \n        \"</br></br> Should the quietmode level be applied now? \" + \n        \"</br>\"\n        msg4.value = msg.payload;                                           // wrap the qm level into msg4 as a msg3.value\n\n        return [null,null,null,msg4];\n}\n\nif (msg.topic === \"QM_active_level\" && Hz === 0 && F_SS.QM_state === 1 && F_SS.state === 1){    // SoftStart QuietMode tab\n\n        // msg4 = message to the Notify dialog\n        msg4.topic = \" Action\"\n        msg4.payload = \" Setting 'active quietmode level' changed to \" + msg.payload + \n        \"</br></br> Should the quietmode level be applied now? \" + \n        \"</br>\"\n        msg4.value = msg.payload;                                           // wrap the qm level into msg4 as a msg3.value\n\n        return [null,null,null,msg4];\n}\n\n\n//******************************************************************************\n//******  Source : Quietmode Add-on functional results               ***********\n//******************************************************************************\nif (msg.source === \"SoftStart Quietmode\"){\n        msg1.payload = msg.payload;\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SoftStart Quietmode\"); }\n        return msg1;   \n}\n\n//******************************************************************************\n//******  Source : Change in DHW / HEAT mode                         ***********\n//******************************************************************************\nif (msg.topic === 'TOP20_ThreeWay_Valve_State' && F_SS.QM_state == 1 && F_SS.state == 1){\n    \n        if (msg.payload === 0 && CurrentQMLevel !== F_SS.QM_active_level){            // 0 == 3-way valve in position HEAT \n                msg1.payload = F_SS.QM_active_level;\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                \n                msg2.payload = 'Detected 3-way valve set to HEAT position again. Restoring quiet mode to level ' + F_SS.QM_active_level;\n                \n                return [msg1,msg2]\n        }\n        if (msg.payload === 1 && CurrentQMLevel !== F_SS.QM_default_level){            // 1 == 3-way valve in position DHW \n                msg1.payload = F_SS.QM_default_level;\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                \n                msg2.payload = 'Detected 3-way valve set to DHW. Disabling the quiet mode function during DHW. Restored to level ' + F_SS.QM_default_level;\n                \n                return [msg1,msg2]\n        }\n}\n\n// ******************************************************************************\n// ******  Source : Defrost state                                     ***********\n// ******************************************************************************\n\nif (msg.topic === 'TOP26_Defrosting_State' && F_SS.QM_state === 1 && F_SS.state == 1){\n\n        var TOP26_Defrosting_State = global.get(\"TOP26_Defrosting_State\", \"file\");\n        if (TOP26_Defrosting_State == msg.payload || TOP26_Defrosting_State === undefined) {return null;}\n\n        if (msg.payload === 0 && Hz === 0 && CurrentQMLevel !== F_SS.QM_active_level){            // 0 == defrost state is inactive\n                msg1.payload = F_SS.QM_active_level;\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                msg2.payload = 'Detected defrost cycle end. (comporessor off) Restoring quietmode to level ' + F_SS.QM_active_level;\n                return [msg1,msg2]\n        }\n        \n        if (msg.payload === 0 && Hz > 0 && CurrentQMLevel !== F_SS.QM_default_level){            // 0 == defrost state is inactive\n                msg1.payload = F_SS.QM_default_level;\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                msg2.payload = 'Detected defrost cycle end. (comporessor on) Restoring quietmode to level ' + F_SS.QM_default_level;\n                return [msg1,msg2]\n        }\n\n        if (msg.payload === 1 && CurrentQMLevel !== F_SS.QM_default_level){            // 1 == defrost cycle ongoing\n                msg1.payload = F_SS.QM_default_level;\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"QuietMode Manager\"); }\n                msg2.payload = 'Detected defrost cycle start. Disabling the quiet mode function during defrost. Restored to level ' + F_SS.QM_default_level;\n                return [msg1,msg2]\n        }\n}\n\n//******************************************************************************\n//******  Source : GUI changes from the Settings tab                 ***********\n//******************************************************************************\nif (msg.source === \"GUI\"){\n        msg1.payload = msg.payload;\n        \n        if (F_SS.QM_state === 1 && F_SS.state === 1){\n                // msg3 = message to the Notify dialog\n                msg3.topic = \" Attention ...\"\n                msg3.payload =  \" Quiet mode is now changed to level \" + msg1.payload + \n                                \"</br></br></br> The SoftStart quiet mode Add-on is active\" + \n                                \"</br> Beware that settings of the Add-on have not been changed.\" +\n                                \"</br>\";\n                msg3.value = msg1.payload;\n                node.send([null,null,msg3])\n        }\n        \n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\n        \n        return msg1;\n}",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 180,
        "wires": [
            [
                "b6ca22591212ef37"
            ],
            [
                "69d01a9ce5c2f74f"
            ],
            [
                "2257c7f00dc04133"
            ],
            [
                "76613b798744d288"
            ]
        ],
        "outputLabels": [
            "QuietMode OUT (mqtt)",
            "To Log",
            "Popup",
            ""
        ]
    },
    {
        "id": "c94d6bdf03f2b540",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link in 21",
        "links": [
            "4d6957c0b336a3cb"
        ],
        "x": 195,
        "y": 140,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "148e50df3de81e03",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "QM GUI changes",
        "info": "",
        "x": 310,
        "y": 140,
        "wires": []
    },
    {
        "id": "74ccc8947e89976a",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link in 22",
        "links": [
            "14327004637e05c7"
        ],
        "x": 195,
        "y": 100,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "1027f83996564c11",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "QM Scheduler",
        "info": "",
        "x": 300,
        "y": 100,
        "wires": []
    },
    {
        "id": "9708d32f74bd48ae",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link in 23",
        "links": [
            "7c6f02c851467bc0"
        ],
        "x": 195,
        "y": 180,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "906071287f20398e",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "QM SoftStart results",
        "info": "",
        "x": 320,
        "y": 180,
        "wires": []
    },
    {
        "id": "5a1d6b18490ded1c",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "QM output from manager",
        "mode": "link",
        "links": [
            "4212c42fb72cce77",
            "a3d9dc45c641ff7d",
            "c24406bef1e6355d",
            "c33b3e865b1bd8b8"
        ],
        "x": 1405,
        "y": 120,
        "wires": []
    },
    {
        "id": "3862c55621fdbb6d",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "SS QM Add-on state",
        "info": "",
        "x": 320,
        "y": 60,
        "wires": []
    },
    {
        "id": "6165734a2db82af9",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link in 24",
        "links": [
            "84f7cbc2cc8c135d",
            "e9942046bea0d380"
        ],
        "x": 195,
        "y": 60,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "2798e84309619975",
        "type": "ui_toast",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "position": "dialog",
        "displayTime": "10",
        "highlight": "yellow",
        "sendall": true,
        "outputs": 1,
        "ok": "OK ... (30 sec)",
        "cancel": "",
        "raw": true,
        "className": "popup_class",
        "topic": "",
        "name": "OK",
        "x": 1100,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "0ad5396b01ed9ce0",
        "type": "trigger",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "",
        "op1": "",
        "op2": "[]",
        "op1type": "nul",
        "op2type": "json",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 910,
        "y": 200,
        "wires": [
            [
                "2798e84309619975"
            ]
        ]
    },
    {
        "id": "3f035e294e03f28c",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "Exit to mqtt SET3",
        "info": "",
        "x": 920,
        "y": 120,
        "wires": []
    },
    {
        "id": "a44c9937f2ab3ee0",
        "type": "trigger",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "",
        "op1": "",
        "op2": "[]",
        "op1type": "nul",
        "op2type": "json",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 910,
        "y": 240,
        "wires": [
            [
                "4aeca25016f1790a"
            ]
        ]
    },
    {
        "id": "4aeca25016f1790a",
        "type": "ui_toast",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "position": "dialog",
        "displayTime": "10",
        "highlight": "yellow",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No (default 30 sec)",
        "raw": true,
        "className": "popup_class",
        "topic": "",
        "name": "Yes / No",
        "x": 1110,
        "y": 240,
        "wires": [
            [
                "4e71c5f774dde93c"
            ]
        ]
    },
    {
        "id": "4e71c5f774dde93c",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "Forward Yes",
        "func": "if (msg.payload == \"Yes\")   {\n    msg.payload = msg.value;\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\n    return msg;\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 240,
        "wires": [
            [
                "5a1d6b18490ded1c"
            ]
        ]
    },
    {
        "id": "aa0fd9c437762a4e",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "QM Manager - DHW/HEAT",
        "links": [
            "aec0cb2b18e02d8b"
        ],
        "x": 195,
        "y": 220,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "45cb23dd7d903663",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "3-way valvue",
        "info": "",
        "x": 300,
        "y": 220,
        "wires": []
    },
    {
        "id": "20f812994e45e10a",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "Defrost",
        "info": "",
        "x": 280,
        "y": 260,
        "wires": []
    },
    {
        "id": "4f37968e1a1ebacc",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link in 26",
        "links": [
            "6c685782864f1787"
        ],
        "x": 195,
        "y": 260,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "4ac5cc278b7439a7",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "link in 27",
        "links": [
            "7d9dc928c0177c74"
        ],
        "x": 195,
        "y": 300,
        "wires": [
            [
                "06d5536b79bbad36"
            ]
        ]
    },
    {
        "id": "405317f0af84b0d2",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "Settings tab",
        "info": "",
        "x": 300,
        "y": 300,
        "wires": []
    },
    {
        "id": "35a1975644451093",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "DHW SP Manager",
        "func": "var F_SOLAR = global.get('F_SOLAR',\"file\");\n/*\n*** Sources of DHW setpoint changes ***\n    Solar function\n    GUI settings tab\n    GUI solar tab\n    GUI DHW tab\n*/\n// pin 1: output to mqtt SET9 (DHW SP)\n// pin 2: output for popup with OK\n// pin 3: output for popup with yes/no option\n// pin 4: output to log\n\n\n//******************************************************************************\nif (F_SOLAR.state === 0 && msg.topic === 'dhw_sp') {\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\n    return msg;    \n    // changing the SP will send mqtt command.\n}\nif (F_SOLAR.state === 0 && (msg.topic === 'dhw_sp_high' || msg.topic === 'dhw_sp_low')) {\n    return null;    \n    // changing the SP high can be done freely. \n}\n\n\n\n//******************************************************************************\n// Source = Solar function itself\nif (msg.topic === 'Solar function') {\n    if (global.get('TOP9_DHW_Target_Temp',\"file\") != msg.payload)   {\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n        return [msg,null,null,null];\n    }\n    \n}\n\n\n\n\n//******************************************************************************\n// Source = GUI settings tab\nif (F_SOLAR.state === 1 && msg.topic === 'dhw_sp') {\n    let msg2={} // Popup\n    msg2.payload = \"DHW setpoint is changed to \" + msg.payload + \n    \"</br></br> Be aware that the 'Solar energie to DHW' function enabled\" + \n    \"</br></br> When this function start or end, the DHW setpoint will change to\"+\n    \"</br> Setpoint low: \" + F_SOLAR.dhw_sp_low + \n    \"</br> Setpoint high: \" + F_SOLAR.dhw_sp_high + \n    \"</br>\";\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\n    return [msg,msg2,null];\n}\n\n\n\n//******************************************************************************\n// Source = GUI solar tab\nif (F_SOLAR.state === 1 && F_SOLAR.function_active_state >= 1 && (msg.topic === 'dhw_sp_high' || msg.topic === 'dhw_sp_low')) {\n    let msg2={} // Popup\n    msg2.payload = \"<B>Solar function</B>\" +\n    \"</br></br> Change DHW setpoint to \" + msg.payload + \"°C now?</br></br>\";\n    msg2.value = msg.payload;\n    return [null,null,msg2];\n}\n//******************************************************************************\n// Source = GUI solar tab\nif (F_SOLAR.state === 1 && F_SOLAR.function_active_state < 1 && msg.topic === 'dhw_sp_low') {\n    let msg2={} // Popup\n    msg2.payload = \" <B>Solar function</B>\" +\n    \"</br></br> Change DHW setpoint to \" + msg.payload + \" °C now?</br></br> \";\n    msg2.value = msg.payload;\n    return [null,null,msg2];\n    // When changing SP low while solar function did not start yet, will ask if the SP needs to be applied.\n}\n//******************************************************************************\n// Source = GUI solar tab\nif (F_SOLAR.function_active_state < 1 && msg.topic === 'dhw_sp_high') {\n    return null;\n    // changing the SP high can be done freely. \n}\n\nif (msg.topic === 'Start_DHW_Run_SP2' && msg.payload === 1) {\n    var new_DHW_SP = global.get('TOP9_DHW_Target_Temp_Secondairy',\"file\");\n    global.set('TOP9_DHW_Target_Temp_restore_value', global.get('TOP9_DHW_Target_Temp',\"file\") ,\"file\");\n    if (new_DHW_SP === undefined)   { return null; }\n    let msg1={};    msg1.payload = new_DHW_SP;\n    let msg2={};    msg2.topic = 'DHW';             msg2.payload = 1;      msg2.force = 1;\n    var TOP10_DHW_Temp = global.get('TOP10_DHW_Temp');\n    let msg99 = {}; msg99.topic = 'DHW Boost'; msg99.payload = 'Current DHW temperature: ' + TOP10_DHW_Temp + '°C. Manually started DHW cycle to boost temperature to (' + new_DHW_SP + '°C)';\n    return [msg1,null,null,msg2,msg99]\n}\n\nif (msg.topic === 'Start_DHW_Run_SP2' && msg.payload === 0) {\n    \n    let msg1 = {};  msg1.topic = 'DHW';             msg1.payload = global.get('TOP9_DHW_Target_Temp_restore_value',\"file\");\n    let msg2 = {};  msg2.topic = 'DHW';             msg2.payload = 0;      msg2.force = 1;\n    var TOP10_DHW_Temp = global.get('TOP10_DHW_Temp');\n    let msg99 = {}; msg99.topic = 'DHW Boost'; msg99.payload = 'Current DHW temperature: ' + TOP10_DHW_Temp + '°C. Manually stopped DHW boost. Restoring DHW setpoint to ' + msg1.payload + '°C';\n    global.set('TOP9_DHW_Target_Temp_restore_value', undefined, \"file\");\n    return [msg1,null,null,msg2,msg99]\n}\n\nif (msg.topic === 'GUI_F_DHW') {\n    msg.topic='DHW';\n    msg.force=1;\n    node.warn(msg);\n    return [null, null, null, msg];\n}",
        "outputs": 5,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 520,
        "wires": [
            [
                "3cdd0f73da377608"
            ],
            [
                "e44b30546eb4ad2d"
            ],
            [
                "ded02fca7021c0c6"
            ],
            [
                "3ef323f843b0f516"
            ],
            [
                "290f1b5381842a42"
            ]
        ],
        "outputLabels": [
            "DHW SP out (mqtt)",
            "popup ok",
            "popup yes/no",
            "Start DHW Cycle",
            "ToLogs"
        ]
    },
    {
        "id": "a6ccb9d3fcdad8e7",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "DHW SP MANAGER_in",
        "links": [
            "550d51c7fe788f9e"
        ],
        "x": 205,
        "y": 460,
        "wires": [
            [
                "35a1975644451093"
            ]
        ]
    },
    {
        "id": "c4cb07ae79c0bf65",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "link out 40",
        "mode": "link",
        "links": [
            "61def1f2090e360a"
        ],
        "x": 1415,
        "y": 440,
        "wires": []
    },
    {
        "id": "609ccd0fd9799230",
        "type": "trigger",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 820,
        "y": 480,
        "wires": [
            [
                "114053cd7796cbd8",
                "9f0d3363157b8087"
            ]
        ]
    },
    {
        "id": "114053cd7796cbd8",
        "type": "ui_toast",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "position": "dialog",
        "displayTime": "10",
        "highlight": "yellow",
        "sendall": true,
        "outputs": 1,
        "ok": "OK ... (30 sec)",
        "cancel": "",
        "raw": true,
        "className": "popup_class",
        "topic": "",
        "name": "OK",
        "x": 1110,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "9f0d3363157b8087",
        "type": "trigger",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "",
        "op1": "",
        "op2": "[]",
        "op1type": "nul",
        "op2type": "json",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 970,
        "y": 480,
        "wires": [
            [
                "114053cd7796cbd8"
            ]
        ]
    },
    {
        "id": "b02fa3c8b43f5d62",
        "type": "trigger",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 820,
        "y": 520,
        "wires": [
            [
                "fe877578d4a955fa",
                "f65899a1446c22c7"
            ]
        ]
    },
    {
        "id": "fe877578d4a955fa",
        "type": "trigger",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "",
        "op1": "",
        "op2": "[]",
        "op1type": "nul",
        "op2type": "json",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 970,
        "y": 520,
        "wires": [
            [
                "f65899a1446c22c7"
            ]
        ]
    },
    {
        "id": "f65899a1446c22c7",
        "type": "ui_toast",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "position": "dialog",
        "displayTime": "10",
        "highlight": "yellow",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No (default 30 sec)",
        "raw": true,
        "className": "popup_class",
        "topic": "",
        "name": "Yes / No",
        "x": 1120,
        "y": 520,
        "wires": [
            [
                "b62af09024bd5955"
            ]
        ]
    },
    {
        "id": "b62af09024bd5955",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "Forward Yes",
        "func": "if (msg.payload == \"Yes\")   {\n    msg.payload = msg.value;\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"GUI\"); }\n    return msg;\n    \n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 520,
        "wires": [
            [
                "c4cb07ae79c0bf65"
            ]
        ]
    },
    {
        "id": "dd5a385aad192c71",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "link in 31",
        "links": [
            "f6779270108c1106"
        ],
        "x": 205,
        "y": 500,
        "wires": [
            [
                "35a1975644451093"
            ]
        ]
    },
    {
        "id": "cc67a559f6872a34",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "GUI (Home/Settings)",
        "info": "",
        "x": 330,
        "y": 460,
        "wires": []
    },
    {
        "id": "47b30756351d8037",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "GUI (Solar)",
        "info": "",
        "x": 310,
        "y": 500,
        "wires": []
    },
    {
        "id": "aeae0e1e5be9ad20",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "Exit to mqtt SET11",
        "info": "",
        "x": 850,
        "y": 440,
        "wires": []
    },
    {
        "id": "a0c12406bf11e1e5",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "g": "ab02dbcde88f3267",
        "group": "e3cc96332cd59f07",
        "name": "style [Home] DHW",
        "order": 7,
        "width": 0,
        "height": 0,
        "format": "<style>\n    .popup_class{\n        padding-left:20px !important;\n        padding-right:20px !important;\n}\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2010,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "5478fc658f9e7b24",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "g": "ab02dbcde88f3267",
        "group": "26d9e6cf24507b4f",
        "name": "style [Settings] HEAT | DHW",
        "order": 5,
        "width": 0,
        "height": 0,
        "format": "<style>\n    .popup_class{\n        padding-left:20px !important;\n        padding-right:20px !important;\n}\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2040,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "6ade9410c4a9dd70",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "g": "ab02dbcde88f3267",
        "group": "2bd11d2d909e2ba3",
        "name": "style [Settings] HEAT | DHW",
        "order": 10,
        "width": 14,
        "height": 1,
        "format": "<style>\n    .popup_class{\n        padding-left:20px !important;\n        padding-right:20px !important;\n}\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2040,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "b629087d36acf89e",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "bf4af523ba16d457",
        "name": "style [Home]",
        "order": 8,
        "width": 0,
        "height": 0,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2010,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "29daf0bbd602db4f",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "name": "Banner color",
        "links": [
            "6c685782864f1787",
            "c3c58f9072c16f58"
        ],
        "x": 1695,
        "y": 280,
        "wires": [
            [
                "2589c727fc2ad928"
            ]
        ]
    },
    {
        "id": "2589c727fc2ad928",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "name": "function 15",
        "func": "if (msg.topic !== 'TOP26_Defrosting_State')  {  // must be MQTT blockmode then....\n        if (msg.payload === 1)   {\n            msg.payload = 'red';\n            return msg;\n        }\n        \n        if (msg.payload === 0)   {\n            msg.payload = '[]';\n            return msg;\n        }\n}\n\n\n// ************** DEFROST ****************\nif (msg.topic === 'TOP26_Defrosting_State')  {\n        \n        if (msg.payload === 1)   {\n            msg.payload = 'blue';\n            return msg;\n        }\n        \n        if (msg.payload === 0)   {\n            msg.payload = '[]';\n            return msg;\n        }    \n}\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1800,
        "y": 280,
        "wires": [
            [
                "b629087d36acf89e",
                "c6c17a92f472d3e4",
                "229a4ee1d7377c5e",
                "631c09dd9632c92a",
                "b04505a68eb19642",
                "a4b7150004829f97",
                "0e8096a2f8827083",
                "8bb1e12a22d4dc11",
                "848fa7aade4f22a3",
                "11685bca2f768125",
                "edc08fb519edf993",
                "05b8832e0e7fda7e",
                "1be8fe2b8cd8d2ba",
                "f9a1d44599cd32ac"
            ]
        ]
    },
    {
        "id": "0c8735d186ca284a",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "All tabs",
        "info": "",
        "x": 1910,
        "y": 220,
        "wires": []
    },
    {
        "id": "c6c17a92f472d3e4",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "fea7672db2f050c9",
        "name": "style [Settings]",
        "order": 8,
        "width": 0,
        "height": 0,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2020,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "229a4ee1d7377c5e",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "9b8ec8b1b9f66309",
        "name": "style [CCC] z1",
        "order": 42,
        "width": 24,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2020,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "631c09dd9632c92a",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "e27cfec311892d88",
        "name": "style [RTC] z1",
        "order": 28,
        "width": 7,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2020,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b04505a68eb19642",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "830a81a1c54c6ef5",
        "name": "style [Cool]",
        "order": 16,
        "width": 18,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2010,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "a4b7150004829f97",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "c2a0123d2e2c91f0",
        "name": "style [Softstart]",
        "order": 14,
        "width": 18,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2020,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "0e8096a2f8827083",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "b7f22c282fde0f86",
        "name": "style [Solar]",
        "order": 5,
        "width": 9,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2010,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "8bb1e12a22d4dc11",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "2b0c8e162d47abbb",
        "name": "style [Scheduler]",
        "order": 17,
        "width": 28,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2030,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "848fa7aade4f22a3",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "e374621a9f5ac0d6",
        "name": "style [Temp]",
        "order": 4,
        "width": 26,
        "height": 1,
        "format": "<html>\n<!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n\n<head>\n    <hr style=\"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\" ;>\n\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2010,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "11685bca2f768125",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "fb77ab43998a2f18",
        "name": "style [Energy]",
        "order": 10,
        "width": 0,
        "height": 0,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2020,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "edc08fb519edf993",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "70a5fe6af8ed1d29",
        "name": "style [System]",
        "order": 11,
        "width": 0,
        "height": 0,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2020,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "05b8832e0e7fda7e",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "87be08e6a82ef6a0",
        "name": "style [Degreedays]",
        "order": 8,
        "width": 0,
        "height": 0,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2030,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "adfcd4f481333501",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "Operating Mode Manager",
        "func": "var msg99 = {};\n\nif (msg.topic === 'Start_DHW_Run_SP2' && msg.payload === 1) {\n\n    var TOP4_Operating_Mode_State = global.get('TOP4_Operating_Mode_State', \"file\");\n    if (TOP4_Operating_Mode_State !== 3) {\n        if (TOP4_Operating_Mode_State === 7) { TOP4_Operating_Mode_State = 2; } // convert OM 7 > 2\n        if (TOP4_Operating_Mode_State === 8) { TOP4_Operating_Mode_State = 6; } // convert OM 8 > 6\n\n        let msg1={};\n        msg1.payload = 3;\n\n        msg99.payload = \"Operating mode changed to (3)DHW-Only\";\n        msg99.topic = 'DHW Boost';\n\n        var F_stored_next_operating_mode = global.get('F_stored_next_operating_mode', \"file\");\n        if (F_stored_next_operating_mode === undefined) { global.set('F_stored_next_operating_mode', TOP4_Operating_Mode_State, \"file\"); }\n\n        return [msg1, msg99]\n    }\n    return null;\n}\n\nif (msg.topic === 'Start_DHW_Run_SP2' && msg.payload === 0) {\n\n    var msg1 = {};      // new OM\n        msg99.topic = 'DHW Boost';\n\n    var TOP4_Operating_Mode_State       = global.get('TOP4_Operating_Mode_State', \"file\");\n    var F_stored_next_operating_mode    = global.get('F_stored_next_operating_mode', \"file\");\n\n    if (F_stored_next_operating_mode === undefined) { \n        msg99.payload = 'No stored operating mode found. Not changing Operating Mode.'; \n        return [null, msg99]\n    }\n\n    if (F_stored_next_operating_mode != TOP4_Operating_Mode_State) {\n        msg1.payload = F_stored_next_operating_mode;\n        var OM_name; // empty variable\n            if (F_stored_next_operating_mode === 0) { OM_name = '(0) Heat-Only'; }\n            if (F_stored_next_operating_mode === 1) { OM_name = '(1) Cool-Only'; }\n            if (F_stored_next_operating_mode === 2) { OM_name = '(2) Auto'; }\n            if (F_stored_next_operating_mode === 4) { OM_name = '(4) Heat+DHW'; }\n            if (F_stored_next_operating_mode === 5) { OM_name = '(5) Cool+DHW'; }\n            if (F_stored_next_operating_mode === 6) { OM_name = '(6) Auto+DHW'; }\n        \n        msg99.payload = \"Operating mode changed to \" + OM_name;\n        global.set('F_stored_next_operating_mode', undefined, \"file\");\n        return [msg1, msg99]\n    }\n    return null;\n}\n\nif (msg.topic === 'External') {\n    \n    var OM_name;\n        if (msg.payload === 0) { OM_name = '(0) Heat-Only'; }\n        if (msg.payload === 1) { OM_name = '(1) Cool-Only'; }\n        if (msg.payload === 2) { OM_name = '(2) Auto'; }\n        if (msg.payload === 3) { OM_name = '(3) DHW-Only'; }\n        if (msg.payload === 4) { OM_name = '(4) Heat+DHW'; }\n        if (msg.payload === 5) { OM_name = '(5) Cool-DHW'; }\n        if (msg.payload === 6) { OM_name = '(6) Auto+DHW'; }\n\n    msg99.topic = 'External';\n    msg99.payload = \"Operating mode changed to \" + OM_name;\n\n    return [msg, msg99];\n}\n\nvar TOP4_Operating_Mode_State = global.get('TOP4_Operating_Mode_State', \"file\");\n\n\nif (msg.topic === 'Solar2DHW' && TOP4_Operating_Mode_State !== msg.payload) {\n    return msg;\n\n}\n\n\n\nif (TOP4_Operating_Mode_State !== msg.payload) { return msg; }\n\n// Operating mode (0=Heat only,     1=Cool only,    2=Auto(Heat),  3=DHW only,  4=Heat+DHW,     5=Cool+DHW,     6=Auto(Heat)+DHW,   7=Auto(Cool),   8=Auto(Cool)+DHW)\n// Operating mode (0=Heat only,     1=Cool only,    2=Auto,        3=DHW only,  4=Heat+DHW,     5=Cool+DHW,     6=Auto+DHW",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 780,
        "wires": [
            [
                "cc38651b04af8756"
            ],
            [
                "a5db2d3cd0084878"
            ],
            []
        ],
        "outputLabels": [
            "OperationMode out (mqtt)",
            "ToLog",
            "Pop-up"
        ]
    },
    {
        "id": "84bff5c3d4a4cede",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "link in 33",
        "links": [
            "b50ab0a4981f9d17"
        ],
        "x": 205,
        "y": 720,
        "wires": [
            [
                "adfcd4f481333501"
            ]
        ]
    },
    {
        "id": "c5e4882db5fea41f",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "Solar",
        "info": "",
        "x": 290,
        "y": 720,
        "wires": []
    },
    {
        "id": "73e10ff5ebe614ef",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "Scheduler",
        "info": "",
        "x": 300,
        "y": 760,
        "wires": []
    },
    {
        "id": "b9c4f0a59b3270ad",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "GUI",
        "info": "",
        "x": 290,
        "y": 800,
        "wires": []
    },
    {
        "id": "2a530d47b288e289",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "RTC function",
        "info": "",
        "x": 310,
        "y": 840,
        "wires": []
    },
    {
        "id": "e73d130bb1839444",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "link in 34",
        "links": [
            "c959ee1f94c31c45",
            "c6801a6c865543b3"
        ],
        "x": 205,
        "y": 760,
        "wires": [
            [
                "adfcd4f481333501"
            ]
        ]
    },
    {
        "id": "efa847198158ca2c",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "link in 35",
        "links": [
            "27d4716d98709ec9",
            "f651bed25831c6f4",
            "c0c20e2e3caa81e0"
        ],
        "x": 205,
        "y": 800,
        "wires": [
            [
                "adfcd4f481333501"
            ]
        ]
    },
    {
        "id": "f76db0ea91c39edd",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "link in 36",
        "links": [
            "b57cce7cc9fa92ea",
            "fab44b5501eca10e",
            "86d7318e73038502"
        ],
        "x": 205,
        "y": 840,
        "wires": [
            [
                "adfcd4f481333501"
            ]
        ]
    },
    {
        "id": "836082017500f9a9",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "To SET9",
        "mode": "link",
        "links": [
            "43464dca9fd194fa",
            "476134da722ea175",
            "c24406bef1e6355d"
        ],
        "x": 1405,
        "y": 740,
        "wires": []
    },
    {
        "id": "87f71902ec6b1541",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "Exit to mqtt SET9",
        "info": "",
        "x": 940,
        "y": 740,
        "wires": []
    },
    {
        "id": "8b4945ae5f3915e8",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "Exit to InputLOGS",
        "info": "",
        "x": 950,
        "y": 780,
        "wires": []
    },
    {
        "id": "4a4a891dece731a1",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "link out towards LOGs",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1405,
        "y": 780,
        "wires": []
    },
    {
        "id": "c82ec16fb6ba6769",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "link in 38",
        "links": [
            "e62a354ce682ea6f",
            "42734e97a85d5537"
        ],
        "x": 205,
        "y": 540,
        "wires": [
            [
                "35a1975644451093"
            ]
        ]
    },
    {
        "id": "6f29a5e5626945ea",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "Function (Solar)",
        "info": "",
        "x": 320,
        "y": 540,
        "wires": []
    },
    {
        "id": "7ddd3f5d8f76897e",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 1585,
        "y": 1380,
        "wires": []
    },
    {
        "id": "1b409e1ea72f94dd",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Block?",
        "func": "var last_value = context.get('last_value');\n    if (msg.payload === last_value) {return null}\ncontext.set('last_value',msg.payload);\n\nif (global.get('MQTT.block_active', \"file\") === 1) {\n    let msg99 = {}; // pin 2 - To Log\n    msg99.topic = \"SYSTEM\";\n    msg99.payload = \"MQTT-Commands are blocked, did not send MQTT - \" + msg.topic + \" \" + msg.payload;\n    global.set('MQTT_Source', undefined); // clear if blocked\n    return [null, msg99];\n    }\n\nif (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SP Calculation\"); }// only set when undefined\n\nreturn [msg, null]; //send SP",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 1180,
        "wires": [
            [
                "9dc404968dc9524f"
            ],
            [
                "7ddd3f5d8f76897e"
            ]
        ]
    },
    {
        "id": "5d0b7390e93f7e48",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Water SP manager (SET5)",
        "links": [
            "76a161da01cebe9c"
        ],
        "x": 185,
        "y": 1240,
        "wires": [
            [
                "694768bd9f0a9a39"
            ]
        ]
    },
    {
        "id": "642356c6a779d7fa",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Functions result",
        "info": "",
        "x": 290,
        "y": 1240,
        "wires": []
    },
    {
        "id": "694768bd9f0a9a39",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Z1+Z2 HEAT SP Manager",
        "func": "// pin 1 - Output to SET5/16\n// pin 2 - to Log\n// pin 3 - Refresh SP to GUI\n// pin 4 - Output to SP functions, as trigger\n// pin 5 - Output to SP_DIRECT_virt \n// pin 6 - Output to SET7/16\n////////////////////////////////////////////////////////////////////////////////\n//  Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\nvar msg1={};\nvar msg2={};\nvar OM = global.get('TOP4_Operating_Mode_State',\"file\");\nvar TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');\nif (TOP20_ThreeWay_Valve_State === undefined) { return null; }\n\n////////////////// MQTT read\nif (((msg.topic === 'TOP42_Z1_Water_Target_Temp' || msg.topic === 'TOP43_Z2_Water_Target_Temp' || msg.topic === 'TOP20_ThreeWay_Valve_State') && OM !== 1 || TOP20_ThreeWay_Valve_State === 0)){\n    var TOP69_Sterilization_State = global.get('TOP69_Sterilization_State',\"file\");\n    \n    var TOP42_Z1_Water_Target_Temp  = global.get(\"TOP42_Z1_Water_Target_Temp\",\"file\");\n    var TOP43_Z2_Water_Target_Temp  = global.get(\"TOP43_Z2_Water_Target_Temp\",\"file\");\n    var TOP94_Zones_State           = global.get(\"TOP94_Zones_State\",\"file\");\n\n    switch (TOP94_Zones_State) {\n        case 0: \n            // Zone 1 active only\n            msg1.payload = TOP42_Z1_Water_Target_Temp;\n        break;\n\n        case 1: \n            // Zone 2 active only\n            msg1.payload = TOP43_Z2_Water_Target_Temp;\n        break;\n\n        case 2:\n            // Zone 1 and 2 active\n            msg1.payload = Math.max(TOP42_Z1_Water_Target_Temp,TOP43_Z2_Water_Target_Temp)\n        break;\n    }\n    /* condition added to line 15\n    if (TOP20_ThreeWay_Valve_State == 0){ // ROOM\n        msg.payload = global.get(\"TOP42_Z1_Water_Target_Temp\",\"file\");\n    }\n    */\n\n    if (TOP20_ThreeWay_Valve_State === 1){ // DHW\n        msg1.payload = global.get('TOP9_DHW_Target_Temp',\"file\")\n        if (msg1.payload === undefined) {return null}\n    }\n    if (TOP20_ThreeWay_Valve_State === 1 && TOP69_Sterilization_State == 1){\n        msg1.payload = global.get('TOP70_Sterilization_Temp',\"file\");\n        if (msg1.payload === undefined) {return null}\n    }\n    node.send([null,null,msg1,null,null]);\n}\n\n//if (msg.topic == 'TOP20_ThreeWay_Valve_State' && msg.payload == 1) { // DHW position\n//    var TOP9_DHW_Target_Temp = global.get('TOP9_DHW_Target_Temp');\n//    if (TOP9_DHW_Target_Temp === undefined) { return null; }\n//\n//    let msg1={};\n//    msg1.payload = TOP9_DHW_Target_Temp;\n//    return [null, null, msg1, null, null]\n//}\n\n// Cool Z2 not functioning yet...\nif ((msg.topic === 'Z1_Cool_Request_Temp' || msg.topic === 'Z2_Cool_Request_Temp') && OM === 1) {\n    return [null,null,msg,null,null]\n}\n\n\n////////////// GUI changes. Sent though to trigger function recalculations\nif (msg.payload === 'trigger') {\n    return [null,null,null,msg,null]\n}\nif (msg.topic === 'z1_SP_DIRECT_virt' || msg.topic === 'z2_SP_DIRECT_virt') {\n    return [null,null,null,msg,null]\n}\n\n\n/////////////// Function results (SP Final - direct) ---------------------- ZONE 1\nif (msg.topic === 'SP_Final_z1') {\n    return [msg,null,null,null]\n}\n/////////////// Function results (SP Shift - Compensation curve) ---------- ZONE 1\nif (msg.topic === \"Shift_z1\") {\n    return [msg,null,null,null]\n}\n\n\n/////////////// Function results (SP Final - direct) ---------------------- ZONE 2\nif (msg.topic === 'SP_Final_z2') {\n    return [null,null,null,null,null,msg]\n}\n/////////////// Function results (SP Shift - Compensation curve) ---------- ZONE 2\nif (msg.topic === \"Shift_z2\") {\n    return [null,null,null,null,null,msg]\n}\n\n\n\n////////////////// SCHEDULER new setpoint\nif (msg.topic === ('Water setpoint (heat shift)' || msg.topic === 'Water setpoint (direct)') && (msg.target === \"Z1\" || msg.target === \"Z2\" || msg.target === \"Z1_Z2\")) {\n    msg1.payload    = msg.payload;\n    msg1.topic      = msg.topic;\n    msg1.target     = msg.target;\n    switch (msg.target) {\n        case \"Z1\":\n            global.set('F_CCC.z1.SP_DIRECT_virt',msg.payload,\"file\");\n            break;\n\n        case \"Z2\":\n            global.set('F_CCC.z2.SP_DIRECT_virt',msg.payload,\"file\");   \n            break;\n\n        case \"Z1_Z2\":\n            global.set('F_CCC.z1.SP_DIRECT_virt',msg.payload,\"file\");\n            global.set('F_CCC.z2.SP_DIRECT_virt',msg.payload,\"file\");   \n            break;\n    }\n    return ([null,null,null,msg1,msg1])\n}\n\n\n//z2_Correction_0_WAR_on_off\n\nif (msg.topic === 'z1_Correction_0_WAR_on_off' || msg.topic === 'z2_Correction_0_WAR_on_off') {\n    return [null, null, null, msg, null]\n}\nreturn null;",
        "outputs": 6,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 1340,
        "wires": [
            [
                "0e04122d6f8a2033"
            ],
            [
                "a1ecb8084e0daf19"
            ],
            [
                "bc40f8b817aa9a3f"
            ],
            [
                "831ae2781ec40575"
            ],
            [
                "9c9e0c42f12befa6"
            ],
            [
                "30ddad2d3d726107"
            ]
        ],
        "outputLabels": [
            "Output to SET5/16 (Zone 1)",
            "to Log",
            "Refresh SP to GUI",
            "Output to SP functions, as trigger",
            "Output to SP_DIRECT_virt ",
            "Output to SET7/16 (Zone 2)"
        ]
    },
    {
        "id": "02c7c088196cb575",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Scheduler",
        "info": "",
        "x": 270,
        "y": 1280,
        "wires": []
    },
    {
        "id": "2d52ca9e08c7fb9a",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link in 41",
        "links": [
            "3c7256b41577c8e5"
        ],
        "x": 185,
        "y": 1280,
        "wires": [
            [
                "694768bd9f0a9a39"
            ]
        ]
    },
    {
        "id": "d154cb2b92987925",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "GUI",
        "info": "",
        "x": 260,
        "y": 1320,
        "wires": []
    },
    {
        "id": "ff40b3d6f1b996fe",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link in 42",
        "links": [
            "a7ed974cef55c457",
            "be0b1f44ea33c32a"
        ],
        "x": 185,
        "y": 1320,
        "wires": [
            [
                "694768bd9f0a9a39"
            ]
        ]
    },
    {
        "id": "fc202bdb5486d9fe",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Exit to InputLOGS",
        "info": "",
        "x": 890,
        "y": 1360,
        "wires": []
    },
    {
        "id": "ecc3180f70a1af53",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Exit to mqtt SET5/16",
        "info": "",
        "x": 890,
        "y": 1200,
        "wires": []
    },
    {
        "id": "5d8b7981975b516e",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "To log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1195,
        "y": 1360,
        "wires": []
    },
    {
        "id": "7a2f0f42321d7256",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "GUI refresh",
        "info": "",
        "x": 870,
        "y": 1400,
        "wires": []
    },
    {
        "id": "61dfad40f76daac7",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "SET5 GUI refresh",
        "mode": "link",
        "links": [
            "024bef9dc12b8273",
            "1f4a153d2239272b"
        ],
        "x": 1195,
        "y": 1400,
        "wires": []
    },
    {
        "id": "fa2a77572981525d",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Trigger functions",
        "info": "",
        "x": 880,
        "y": 1440,
        "wires": []
    },
    {
        "id": "ed2c73bf6b96d4a0",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link out 45",
        "mode": "link",
        "links": [
            "259b758b6c5f8651",
            "c24406bef1e6355d"
        ],
        "x": 1195,
        "y": 1440,
        "wires": []
    },
    {
        "id": "fd2003d6bc939d36",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "TOP42",
        "links": [
            "25633efa4485f375",
            "2eb2a1faee5c5e8c"
        ],
        "x": 185,
        "y": 1360,
        "wires": [
            [
                "694768bd9f0a9a39"
            ]
        ]
    },
    {
        "id": "909640f1caf950f8",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Z1/Z2 Water_Target_Temp",
        "info": "",
        "x": 320,
        "y": 1360,
        "wires": []
    },
    {
        "id": "78cd6de319a6d061",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    //return null;\n}\n\nif (last_msgid === msg._msgid){\n    return null;\n}\n\nif (msg.payload !== last_value){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    msg.topic = 'SP final';\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1200,
        "wires": [
            [
                "c4130c490114e90f"
            ]
        ]
    },
    {
        "id": "a85d4f84f1b538d1",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link out to Z1_SP_DIRECT_virt",
        "mode": "link",
        "links": [
            "97f8288d7402bc77"
        ],
        "x": 1195,
        "y": 1480,
        "wires": []
    },
    {
        "id": "3decf85e0dfd50ae",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Exit to SP_DIRECT_virt (GUI)",
        "info": "",
        "x": 920,
        "y": 1500,
        "wires": []
    },
    {
        "id": "9d678818ee4f7078",
        "type": "delay",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "",
        "pauseType": "delay",
        "timeout": "7",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1060,
        "y": 1440,
        "wires": [
            [
                "ed2c73bf6b96d4a0"
            ]
        ]
    },
    {
        "id": "327f3ad0eae0d7d5",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "link in 56",
        "links": [
            "aa04e7be9348a071",
            "c0c20e2e3caa81e0",
            "092a9db0d9b923b3"
        ],
        "x": 205,
        "y": 580,
        "wires": [
            [
                "35a1975644451093"
            ]
        ]
    },
    {
        "id": "90505d69973e3970",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "GUI (DHW)",
        "info": "",
        "x": 310,
        "y": 580,
        "wires": []
    },
    {
        "id": "fb5aeb896e8acc76",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "link out 60",
        "mode": "link",
        "links": [
            "efe3dd019498a583",
            "3e5558127fc3402a"
        ],
        "x": 1415,
        "y": 560,
        "wires": []
    },
    {
        "id": "b3359bc3c036e439",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "Exit to Force DHW (Scheduler)",
        "info": "",
        "x": 890,
        "y": 560,
        "wires": []
    },
    {
        "id": "a333286329402b87",
        "type": "delay",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1140,
        "y": 560,
        "wires": [
            [
                "fb5aeb896e8acc76"
            ]
        ]
    },
    {
        "id": "4e1fa036d5ada897",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "link out towards LOGs",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1415,
        "y": 600,
        "wires": []
    },
    {
        "id": "0770871389001bc5",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "Exit to InputLOGS",
        "info": "",
        "x": 850,
        "y": 600,
        "wires": []
    },
    {
        "id": "ddcff50cd968534a",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "TOP28",
        "links": [
            "25691ccde88f5530"
        ],
        "x": 185,
        "y": 1400,
        "wires": [
            [
                "694768bd9f0a9a39"
            ]
        ]
    },
    {
        "id": "ea22f152face3bf2",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Z1_Cool_Request_Temp",
        "info": "",
        "x": 320,
        "y": 1400,
        "wires": []
    },
    {
        "id": "b6ca22591212ef37",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "function 67",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 775,
        "y": 120,
        "wires": [
            [
                "5a1d6b18490ded1c"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "69d01a9ce5c2f74f",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "function 68",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 775,
        "y": 160,
        "wires": [
            [
                "2a72a0a50c226d0f"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "2257c7f00dc04133",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "function 69",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 775,
        "y": 200,
        "wires": [
            [
                "0ad5396b01ed9ce0",
                "2798e84309619975"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "76613b798744d288",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "eae83de4837abd07",
        "name": "function 70",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 775,
        "y": 240,
        "wires": [
            [
                "a44c9937f2ab3ee0",
                "4aeca25016f1790a"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "cc38651b04af8756",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "function 71",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 795,
        "y": 740,
        "wires": [
            [
                "836082017500f9a9"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "a5db2d3cd0084878",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "function 72",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 795,
        "y": 780,
        "wires": [
            [
                "4a4a891dece731a1"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "3cdd0f73da377608",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "function 73",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 735,
        "y": 440,
        "wires": [
            [
                "c4cb07ae79c0bf65"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "e44b30546eb4ad2d",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "function 74",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 735,
        "y": 480,
        "wires": [
            [
                "609ccd0fd9799230"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "ded02fca7021c0c6",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "function 75",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 725,
        "y": 520,
        "wires": [
            [
                "b02fa3c8b43f5d62"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "3ef323f843b0f516",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "function 76",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 735,
        "y": 560,
        "wires": [
            [
                "a333286329402b87"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "290f1b5381842a42",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "424338733e4798c9",
        "name": "function 77",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 735,
        "y": 600,
        "wires": [
            [
                "4e1fa036d5ada897"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "0e04122d6f8a2033",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "function 78",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 1200,
        "wires": [
            [
                "78cd6de319a6d061"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "a1ecb8084e0daf19",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "function 79",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 1360,
        "wires": [
            [
                "5d8b7981975b516e"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "bc40f8b817aa9a3f",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "function 80",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 1400,
        "wires": [
            [
                "61dfad40f76daac7"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "831ae2781ec40575",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "function 81",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 1440,
        "wires": [
            [
                "9d678818ee4f7078"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "9c9e0c42f12befa6",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "function 82",
        "func": "if (msg.target == 'Z1') {\nreturn ([msg,null]);\n}\n\nif (msg.target == 'Z2') {\nreturn ([null,msg]);\n}\n\nif (msg.target == 'Z1_Z2') {\nreturn ([msg,msg]);\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 1500,
        "wires": [
            [
                "a85d4f84f1b538d1"
            ],
            [
                "d7c439696ff250b8"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "d62a7aa18d066598",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Block?",
        "func": "var last_value = context.get('last_value');\n    if (msg.payload.zone1.heat.target.high === last_value) {return null}\ncontext.set('last_value', msg.payload.zone1.heat.target.high);\n\n//node.warn(msg.payload.zone1.heat.target.high)\n\nif (global.get('MQTT.block_active', \"file\") === 1) {\n    let msg99 = {}; // pin 2 - To Log\n    msg99.topic = \"SYSTEM\";\n    msg99.payload = \"MQTT-Commands are blocked, did not send MQTT - \" + msg.topic + \" \" + msg.payload;\n    global.set('MQTT_Source', undefined); // clear if blocked\n    return [null, msg99];\n    }\n\nif (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SP Calculation\"); }// only set when undefined\n\nreturn [msg, null]; //send SP",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 1300,
        "wires": [
            [
                "5b68f411defbf165"
            ],
            [
                "7ddd3f5d8f76897e"
            ]
        ]
    },
    {
        "id": "5b68f411defbf165",
        "type": "json",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 1610,
        "y": 1300,
        "wires": [
            [
                "1fe8744be2aaf44e"
            ]
        ]
    },
    {
        "id": "21cf21646167ae31",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "link in 79",
        "links": [
            "75cba13a1df7c9c8"
        ],
        "x": 205,
        "y": 880,
        "wires": [
            [
                "adfcd4f481333501"
            ]
        ]
    },
    {
        "id": "59040831b881ca33",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "d9eb0a2937cbbc7b",
        "name": "External",
        "info": "",
        "x": 300,
        "y": 880,
        "wires": []
    },
    {
        "id": "94a3169df392ca7e",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link in 84",
        "links": [
            "aec0cb2b18e02d8b"
        ],
        "x": 185,
        "y": 1440,
        "wires": [
            [
                "694768bd9f0a9a39"
            ]
        ]
    },
    {
        "id": "1526c798778e3632",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "TOP20_ThreeWay_Valve_State",
        "info": "",
        "x": 340,
        "y": 1440,
        "wires": []
    },
    {
        "id": "ea62546371ce867f",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link in 102",
        "links": [
            "0eabfbc63fbfc395",
            "1d2e261567b2acba"
        ],
        "x": 1645,
        "y": 1340,
        "wires": [
            [
                "1fe8744be2aaf44e"
            ]
        ]
    },
    {
        "id": "1be8fe2b8cd8d2ba",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "7267dafd7dc99038",
        "name": "style [RTC] z2",
        "order": 28,
        "width": 7,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2200,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "f9a1d44599cd32ac",
        "type": "ui_template",
        "z": "43c4ee3ee4757f3c",
        "group": "76ac95177cc46b00",
        "name": "style [CCC] z2",
        "order": 42,
        "width": 24,
        "height": 1,
        "format": "<style>\n\nmd-toolbar#toolbar{\n    background-color: {{msg.payload}} !important;\n}\n\n</style>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2200,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "64dcf16c979d2a3a",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Block?",
        "func": "var last_value = context.get('last_value');\n    if (msg.payload === last_value) {return null}\ncontext.set('last_value',msg.payload);\n\nif (global.get('MQTT.block_active', \"file\") === 1) {\n    let msg99 = {}; // pin 2 - To Log\n    msg99.topic = \"SYSTEM\";\n    msg99.payload = \"MQTT-Commands are blocked, did not send MQTT - \" + msg.topic + \" \" + msg.payload;\n    global.set('MQTT_Source', undefined); // clear if blocked\n    return [null, msg99];\n    }\n\nif (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"SP Calculation\"); }// only set when undefined\n\nreturn [msg, null]; //send SP",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 1240,
        "wires": [
            [
                "fd8bde63ad7a06e0"
            ],
            [
                "7ddd3f5d8f76897e"
            ]
        ]
    },
    {
        "id": "86f7fd675b1108ac",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Filter",
        "func": "var last_value      = context.get('last_value');\nvar last_msgid      = context.get('last_msgid');\n\nif (last_value === undefined || last_msgid === undefined){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    //return null;\n}\n\nif (last_msgid == msg._msgid){\n    return null;\n}\n\nif (msg.payload !== last_value){\n    context.set('last_value',msg.payload);\n    context.set('last_msgid',msg._msgid);\n    msg.topic = 'SP final';\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1280,
        "wires": [
            [
                "c4130c490114e90f"
            ]
        ]
    },
    {
        "id": "d7c439696ff250b8",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link out to Z2_SP_DIRECT_virt",
        "mode": "link",
        "links": [
            "2b6cdd258a390ffe"
        ],
        "x": 1195,
        "y": 1520,
        "wires": []
    },
    {
        "id": "30ddad2d3d726107",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "function 7",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 765,
        "y": 1280,
        "wires": [
            [
                "86f7fd675b1108ac"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "3abfa02dbfa24f15",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Note: Cool function Z2 not included yet",
        "info": "",
        "x": 330,
        "y": 1160,
        "wires": []
    },
    {
        "id": "5366a989df3f73a4",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Exit to mqtt SET7/16",
        "info": "",
        "x": 890,
        "y": 1280,
        "wires": []
    },
    {
        "id": "1bb2b392ca8c96a7",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "MQTT TOP's",
        "links": [
            "0457901c1832b0f8",
            "05526a6dc422359b",
            "056b20bad4b28052",
            "0c4b1772fa8b09f6",
            "1034d22d437cc0cd",
            "1e7278e92fb87f0c",
            "201f3629183826f4",
            "29f0a76babd44a0d",
            "38863139d1e246e6",
            "458ff26cc8b8ba7c",
            "45d8b0eb6524d1f8",
            "4f2bca0fed10c688",
            "5dca15fef4a08f93",
            "6446959d03e0fc27",
            "74209defc22e6b85",
            "8b7cbc95996cf262",
            "94d63d6212fc2b04",
            "9bb05cfc97431c09",
            "9defd4814aacc442",
            "a231fea857ba5fc4",
            "b3fdc52e42ac1b77",
            "c28359a361158840",
            "c335163c9d8efd2c",
            "cc0c6a23965435e3",
            "e059b8503f36c6cc",
            "e2f4d021c8a23f5a",
            "e704c463a7eacea7",
            "f6b785b3136bc4b5",
            "f7dd9839bc34ea44"
        ],
        "x": 270,
        "y": 1760,
        "wires": [
            [
                "48d749cc0ca61d74"
            ]
        ],
        "l": true
    },
    {
        "id": "7e328f6ed77430b5",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "MQTT SET's",
        "links": [
            "12df328367013dd2"
        ],
        "x": 270,
        "y": 1720,
        "wires": [
            [
                "48d749cc0ca61d74"
            ]
        ],
        "l": true
    },
    {
        "id": "027e4b15660edbec",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "Convert to log",
        "func": "var marker;\nvar topic;\n\nif (msg.topic.indexOf(\"main/\") > 0)     { \n    marker = \"main/\";     \n    topic = \"<b>MQTT Reply</b>\";\n    var indexOfMarker = msg.topic.indexOf(marker) + 5;\n}\n\nif (msg.topic.indexOf(\"commands/\") > 0) { \n    if (msg._hpRetry === false || msg._hpRetry === undefined) { return null }\n    marker = \"commands/\"; \n    topic = \"<b>MQTT Command <font color=red>Retry</font></b>\";\n    var indexOfMarker = msg.topic.indexOf(marker) + 9;\n}\n\nconst varTopic = msg.topic.replace(msg.topic.substring(0, indexOfMarker).toString(), \"\");\n\nmsg.payload = varTopic + ': ' + msg.payload;\nmsg.topic = topic;\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 1720,
        "wires": [
            [
                "b7556729d886d04c"
            ]
        ]
    },
    {
        "id": "b7556729d886d04c",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "ToLog",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1275,
        "y": 1760,
        "wires": []
    },
    {
        "id": "6d0f05eb035b88e8",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "SetZ1HeatRequestTemperature >> Z1_Heat_Request_Temp",
        "info": "\n\npanasonic_heat_pump/commands/SetZ1HeatRequestTemperature\npanasonic_heat_pump/main/Z1_Heat_Request_Temp",
        "x": 600,
        "y": 2040,
        "wires": []
    },
    {
        "id": "03c7456bebc009ee",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "SetCurves >> Z1_Heat_Curve_Target_High_Temp",
        "info": "{\"zone1\":{\"heat\":{\"target\":{\"high\":28,\"low\":23}}}}\n\npanasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp\npanasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp ",
        "x": 570,
        "y": 2080,
        "wires": []
    },
    {
        "id": "fe14d174a470fed3",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "SetCurves >> Z1_Heat_Curve_Target_High_Temp",
        "info": "\n\n\n\n",
        "x": 1110,
        "y": 2040,
        "wires": []
    },
    {
        "id": "43585b93a4a4b1ae",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "Compensation Curve",
        "info": "",
        "x": 480,
        "y": 1920,
        "wires": []
    },
    {
        "id": "79a23d705184316e",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "Direct",
        "info": "",
        "x": 970,
        "y": 1920,
        "wires": []
    },
    {
        "id": "441fe0413d8f56e6",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "Thermostaat / ...",
        "info": "",
        "x": 240,
        "y": 2080,
        "wires": []
    },
    {
        "id": "f9a75d3fc0063f2e",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "Water",
        "info": "",
        "x": 270,
        "y": 2040,
        "wires": []
    },
    {
        "id": "9b6044911e932b71",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "SetCurves >> Z1_Heat_Curve_Target_High_Temp",
        "info": "{\"zone1\":{\"heat\":{\"target\":{\"high\":28,\"low\":23}}}}\n\npanasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp\npanasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp ",
        "x": 1110,
        "y": 2080,
        "wires": []
    },
    {
        "id": "85f24fa0af36280e",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "SET >> TOP",
        "info": "",
        "x": 450,
        "y": 2000,
        "wires": []
    },
    {
        "id": "9e41043af2fb05f8",
        "type": "comment",
        "z": "43c4ee3ee4757f3c",
        "name": "SET >> TOP",
        "info": "",
        "x": 990,
        "y": 2000,
        "wires": []
    },
    {
        "id": "adef1a0c024c11a3",
        "type": "debug",
        "z": "43c4ee3ee4757f3c",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2950,
        "y": 2420,
        "wires": []
    },
    {
        "id": "f323a932285a578e",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/commands/SetForceDefrost",
        "payload": "2",
        "payloadType": "num",
        "x": 2980,
        "y": 2280,
        "wires": [
            [
                "de08842a694fd1a3"
            ]
        ]
    },
    {
        "id": "3b5c307bc04d3435",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct main",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/main/Defrosting_State",
        "payload": "2",
        "payloadType": "num",
        "x": 2970,
        "y": 2320,
        "wires": [
            [
                "de08842a694fd1a3"
            ]
        ]
    },
    {
        "id": "80f2f0edfb6c75b6",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/commands/SetHolidayMode",
        "payload": "2",
        "payloadType": "num",
        "x": 2740,
        "y": 2280,
        "wires": [
            [
                "de08842a694fd1a3",
                "b64d3570d4ac8501"
            ]
        ]
    },
    {
        "id": "bdfe08e02a9f26a4",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct main",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/Holiday_Mode_State",
        "payload": "2",
        "payloadType": "num",
        "x": 2730,
        "y": 2320,
        "wires": [
            [
                "de08842a694fd1a3",
                "b64d3570d4ac8501"
            ]
        ]
    },
    {
        "id": "580a97b2844a875c",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/commands/SetHolidayMode",
        "payload": "1",
        "payloadType": "num",
        "x": 2500,
        "y": 2320,
        "wires": [
            [
                "de08842a694fd1a3",
                "b64d3570d4ac8501"
            ]
        ]
    },
    {
        "id": "2cf10c402290cfb6",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "incorrect command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/COMMAND/SetHolidasdfasdf",
        "payload": "1",
        "payloadType": "num",
        "x": 2530,
        "y": 2500,
        "wires": [
            [
                "de08842a694fd1a3",
                "b64d3570d4ac8501"
            ]
        ]
    },
    {
        "id": "38918cccdbbd26ad",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct main",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/Holiday_Mode_State",
        "payload": "1",
        "payloadType": "num",
        "x": 2490,
        "y": 2360,
        "wires": [
            [
                "de08842a694fd1a3",
                "b64d3570d4ac8501"
            ]
        ]
    },
    {
        "id": "f063c64fd43016c1",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "incorrect main",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/HolidaydA;LKSDF;LAKJSD;FL",
        "payload": "1",
        "payloadType": "num",
        "x": 2510,
        "y": 2540,
        "wires": [
            [
                "de08842a694fd1a3",
                "b64d3570d4ac8501"
            ]
        ]
    },
    {
        "id": "c7a7be892c1747ec",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "Command Check   (1-on-1) (v2)",
        "func": "if (msg._hpRetry === true) { return null };                                   // don't re-process resent commands\n\nconst commandReplyMap = {\n  \"commands/SetHeatpump\": \"main/Heatpump_State\",                              // SET1\n  \"commands/SetHolidayMode\": \"main/Holiday_Mode_State\",                       // SET2\n  \"commands/SetQuietMode\": \"main/Quiet_Mode_Level\",                           // SET3\n  \"commands/SetPowerfulMode\": \"main/Powerful_Mode_Time\",                      // SET4\n  \"commands/SetZ1HeatRequestTemperature\": \"main/Z1_Heat_Request_Temp\",        // SET5\n  \"commands/SetZ1CoolRequestTemperature\": \"main/Z1_Cool_Request_Temp\",        // SET6\n  \"commands/SetZ2HeatRequestTemperature\": \"main/Z2_Heat_Request_Temp\",        // SET7\n  \"commands/SetZ2CoolRequestTemperature\": \"main/Z2_Cool_Request_Temp\",        // SET8\n  \"commands/SetOperationMode\": \"main/Operating_Mode_State\",                   // SET9\n  \"commands/SetForceDHW\": \"main/Force_DHW_State\",                             // SET10\n  \"commands/SetDHWTemp\": \"main/DHW_Target_Temp\",                              // SET11\n  \"commands/SetForceDefrost\": \"main/Defrosting_State\",                        // SET12\n  \"commands/SetForceSterilization\": \"main/Sterilization_State\",               // SET13\n  \"commands/SetMaxPumpDuty\": \"main/Max_Pump_Duty\",                            // SET15\n  \"commands/SetZones\": \"main/Zones_State\",                                    // SET17\n  \"commands/SetFloorHeatDelta\": \"main/Heat_Delta\",                            // SET18\n  \"commands/SetFloorCoolDelta\": \"main/Cool_Delta\",                            // SET19\n  \"commands/SetDHWHeatDelta\": \"main/DHW_Heat_Delta\",                          // SET20\n  \"commands/SetHeaterDelayTime\": \"main/Heater_Delay_Time\",                    // SET21\n  \"commands/SetHeaterStartDelta\": \"main/Heater_Start_Delta\",                  // SET22\n  \"commands/SetHeaterStopDelta\": \"main/Heater_Stop_Delta\",                    // SET23\n  \"commands/SetMainSchedule\": \"main/Main_Schedule_State\",                     // SET24\n  \"commands/SetBufferDelta\": \"main/Buffer_Tank_Delta\",                        // SET27\n  \"commands/SetBuffer\": \"main/Buffer_Installed\"                               // SET28\n};\n\n// Create lists for commandsTokens and repliesTokens\nconst commandTokens = [...Object.keys(commandReplyMap)];\nconst replyTokens   = [...Object.values(commandReplyMap)];\n\n// Exit if topic is not a known command or reply token, Exit\nif (!commandTokens.some(t => msg.topic.endsWith(t)) &&\n    !replyTokens.some(t => msg.topic.endsWith(t))) {\n  return null;\n}\n\n// ---- Policy ----\nconst TIMEOUT_MS  = 15000;\nconst MAX_RETRIES = 3;\n\n// ---- State ----\nif (replyTokens.some(t => msg.topic.endsWith(t))) {\n  context.set(\"actual.\"+msg.topic, msg.payload);\n}\n\n// pending is keyed by full reply topic: { [replyTopic]: { cmdTopic, value, retries } }\n// if there is no topic stored in the pending list, exit.\nvar pending = context.get(\"pending\") || {};\nif (replyTokens.some(t => msg.topic.endsWith(t)) && Object.keys(pending).length === 0 ) {\n  return null;\n}\n\n// In-memory per-node map of timeout handles (not serialized)\nif (!node._hpTimers) node._hpTimers = {};\nconst timers = node._hpTimers;\n\n// ---- Cleanup on close ----\nnode.on(\"close\", () => {\n  for (const t in node._hpTimers) clearTimeout(node._hpTimers[t]);\n  node._hpTimers = {};\n\n  pending = {};\n  context.set(\"pending\", pending);\n});\n\n// ---- Main ----\nconst topic = msg.topic;\nconst value = msg.payload;\n\n////////////////////////////////////////\n// If a command-topic is received ...\n////////////////////////////////////////\nif (commandTokens.some(t => topic.endsWith(t))) {\n  // Extract prefix (before \"commands/\") and store it on msg for downstream use\n  const marker = \"commands/\";\n  const indexOfMarker = topic.indexOf(marker);\n  const prefix = topic.substring(0, indexOfMarker);\n  \n  // Identify the command token that matched, and build the expected full reply topic\n  const cmdToken   = commandTokens.find(t => topic.endsWith(t));      // Set the commandtopic in cmdToken variable\n  const replyToken = commandReplyMap[cmdToken];                       // Get the matching reply topic (without prefix)\n  const replyTopic = prefix + replyToken;                             // full reply topic including prefix for this command\n\n  // After a cold boot and no actual topics/values are stored => exit.\n  // If the current actual-value is already the same as the value in the command => exit.\n  if (context.get(\"actual.\" + replyTopic) === undefined || context.get(\"actual.\"+replyTopic) === value)  { return null };   \n  \n  const existing = pending[replyTopic];                               // create boolean existing, if replyTopic is present, true. if not, false\n  if (existing) {                                                     // If existing is true.\n    // Type-safe same-value check\n    const sameVal =                                                   // Get the value stored \n      (typeof existing.value === 'number' && typeof value === 'number')\n        ? Number(existing.value) === Number(value)\n        : String(existing.value) === String(value);\n\n    if (sameVal) {\n      // a command with the same value is already present in pending list. Do not do antying and keep the existing timer/retries \n      return null;\n    }\n\n    // The command is already present in pending list.\n    // The value of the command is not the same as stored in pending list: restart the timer\n    existing.value   = value;             // Put the value\n    existing.retries = 0;                 // Reset the number of retries to 0 again\n    context.set(\"pending\", pending);      // Store\n    schedule(replyTopic);\n    return null;\n  }\n\n  // First time\n  pending[replyTopic] = { cmdTopic: topic, value, retries: 0 };       // store all the important values .\n  context.set(\"pending\", pending);\n  schedule(replyTopic);\n  return null;\n}\n////////////////////////////////////////\n// If a reply-topic is received ...\n////////////////////////////////////////\nif (replyTokens.some(t => topic.endsWith(t))) {\n\n  const replyTopic = topic;             // full path includes its origin/prefix\n  const pend = pending[replyTopic];\n\n  if (pend) {\n    const sameVal =\n      (typeof pend.value === 'number' && typeof value === 'number')\n        ? Number(pend.value) === Number(value)\n        : String(pend.value) === String(value);\n\n    if (sameVal) {\n      if (timers[replyTopic]) {\n        clearTimeout(timers[replyTopic]);\n        delete timers[replyTopic];\n      }\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n      let msg99={};\n        const marker = \"main/\";\n        const indexOfMarker = msg.topic.indexOf(marker) + 5;\n        const varTopic = msg.topic.replace(msg.topic.substring(0, indexOfMarker).toString(), \"\");\n      msg99.topic = \"<b>MQTT Reply</b>\"; msg99.payload = varTopic  + ': ' + msg.payload;\n      node.send([null,msg99])\n    }\n  }\n  return null;\n}\n\n// ---- Retry scheduling keyed by reply topic ----\nfunction schedule(replyTopic) {\n  const item = pending[replyTopic];\n  if (!item) return;\n\n  if (timers[replyTopic]) clearTimeout(timers[replyTopic]);\n\n  timers[replyTopic] = setTimeout(() => {\n    const current = pending[replyTopic];\n    if (!current) return;\n\n    if (current.retries >= MAX_RETRIES) {\n      clearTimeout(timers[replyTopic]);\n      delete timers[replyTopic];\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n      return;\n    }\n\n    // Retry send to the command topic\n    current.retries += 1;\n    node.send({ topic: current.cmdTopic, payload: current.value, _hpRetry: true });\n\n    schedule(replyTopic);\n  }, TIMEOUT_MS);\n}\n\n\n// Default\nreturn null;\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 1720,
        "wires": [
            [
                "027e4b15660edbec",
                "392a86bd7fb5e647"
            ],
            [
                "b7556729d886d04c"
            ]
        ]
    },
    {
        "id": "3ab826f3176c1d34",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "name": "Command Check (SetCurve) (v2)",
        "func": "\n// ---- Policy ---- (align with your other function)\nconst TIMEOUT_MS  = 5000;   // same as other node\nconst MAX_RETRIES = 2;      // same as your current other node\n\n// ---- State ----\n// pending is keyed by full *reply* topic: { [replyTopic]: { value, retries } }\nvar pending = context.get(\"pending\") || {};\n\n// Only early-exit for replies when there's nothing pending (same as other node)\nconst isCurveReplyTopic = (t) =>\n  /^.+\\/main\\/Z[12]_(Heat|Cool)_Curve_(Target|Outside)_(High|Low)_Temp$/.test(t);\nconst isRequestReplyTopic = (t) =>\n  /^.+\\/main\\/Z[12]_(Heat|Cool)_Request_Temp$/.test(t);\n\n// In-memory per-node map of timeout handles (not serialized)\nif (!node._hpTimers) node._hpTimers = {};\nconst timers = node._hpTimers;\n\n// ---- Helpers ----\n\n// Compare like the other function, but robust for numbers (Object.is for NaN/-0)\nfunction sameValue(a, b) {\n  const an = typeof a === 'number';\n  const bn = typeof b === 'number';\n  if (an && bn) return Object.is(a, b);\n  return String(a) === String(b);\n}\n\n// Parse a curve reply topic into parts (prefix, zone, etc.)\nfunction parseCurveReplyTopic(t) {\n  const m = t.match(/^(.+)\\/main\\/Z([12])_(Heat|Cool)_Curve_(Target|Outside)_(High|Low)_Temp$/);\n  if (!m) return null;\n  return {\n    prefix: m[1],\n    zoneNum: m[2],\n    modeKey: m[3] === \"Heat\" ? \"heat\" : \"cool\",\n    sectionKey: m[4] === \"Target\" ? \"target\" : \"outside\",\n    fieldKey: m[5].toLowerCase(), // high|low\n  };\n}\n\n// Build expected reply topics from the SetCurves JSON payload for a *prefix*\nfunction buildReplyTopicsForPrefix(payload, prefix) {\n  const topics = {};\n  const makeCurveTopic = (zoneNum, modeKey, sectionKey, fieldKey) => {\n    const Z = `Z${zoneNum}`;\n    const M = modeKey === \"heat\" ? \"Heat\" : \"Cool\";\n    const S = sectionKey === \"target\" ? \"Target\" : \"Outside\";\n    const F = fieldKey === \"high\" ? \"High\" : \"Low\";\n    return `${prefix}main/${Z}_${M}_Curve_${S}_${F}_Temp`;\n  };\n\n  for (const zoneKey of Object.keys(payload)) {\n    if (!zoneKey.startsWith(\"zone\")) continue;\n    const zoneNum = zoneKey.replace(\"zone\", \"\");\n    const zoneObj = payload[zoneKey];\n\n    for (const modeKey of Object.keys(zoneObj)) {\n      if (modeKey !== \"heat\" && modeKey !== \"cool\") continue;\n      const modeObj = zoneObj[modeKey];\n\n      for (const sectionKey of Object.keys(modeObj)) {\n        if (sectionKey !== \"target\" && sectionKey !== \"outside\") continue;\n        const sectionObj = modeObj[sectionKey];\n        if (typeof sectionObj !== \"object\" || sectionObj === null) continue;\n\n        for (const fieldKey of Object.keys(sectionObj)) {\n          if (fieldKey !== \"high\" && fieldKey !== \"low\") continue;\n          const value = sectionObj[fieldKey];\n          if (typeof value === \"undefined\") continue;\n\n          const replyTopic = makeCurveTopic(zoneNum, modeKey, sectionKey, fieldKey);\n          topics[replyTopic] = value;\n        }\n      }\n    }\n  }\n  return topics;\n}\n\n// Rebuild a *partial* payload only for the given prefix, based on current pending\nfunction buildPartialPayloadForPrefix(pendingMap, prefix) {\n  const out = {};\n  for (const replyTopic of Object.keys(pendingMap)) {\n    const meta = parseCurveReplyTopic(replyTopic);\n    if (!meta || meta.prefix !== prefix) continue;\n    const value = pendingMap[replyTopic].value;\n    const zKey = `zone${meta.zoneNum}`;\n    out[zKey] ??= {};\n    out[zKey][meta.modeKey] ??= {};\n    out[zKey][meta.modeKey][meta.sectionKey] ??= {};\n    out[zKey][meta.modeKey][meta.sectionKey][meta.fieldKey] = value;\n  }\n  return out;\n}\n\n// Derive the SetCurves command topic from either a command topic or a reply topic\nfunction getSetCurvesCommandTopicFromAnyTopic(t) {\n  const marker = \"commands/SetCurves\";\n  const idx = t.indexOf(marker);\n  if (idx !== -1) {\n    // It already *is* (or contains) the command path: return up to marker+name\n    return t.substring(0, idx) + marker;\n  }\n  // Otherwise it's a reply → use its prefix\n  const meta = parseCurveReplyTopic(t);\n  if (meta) return `${meta.prefix}commands/SetCurves`;\n  // Fallback: can't determine\n  return null;\n}\n\n// Per-topic retry scheduler (per *reply* topic), resends the *prefix-scoped* partial payload\nfunction schedule(replyTopic) {\n  const item = pending[replyTopic];\n  if (!item) return;\n\n  if (timers[replyTopic]) clearTimeout(timers[replyTopic]);\n\n  timers[replyTopic] = setTimeout(() => {\n    const current = pending[replyTopic];\n    if (!current) return;\n\n    if (current.retries >= MAX_RETRIES) {\n      clearTimeout(timers[replyTopic]);\n      delete timers[replyTopic];\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n      return;\n    }\n\n    current.retries += 1;\n\n    const meta = parseCurveReplyTopic(replyTopic);\n    if (!meta) return;\n\n    const cmdTopic = `${meta.prefix}commands/SetCurves`;\n    const partialPayload = buildPartialPayloadForPrefix(pending, meta.prefix);\n\n    if (Object.keys(partialPayload).length > 0) {\n      node.send({ topic: cmdTopic, payload: partialPayload, _hp_retry: true });\n    }\n\n    schedule(replyTopic);\n  }, TIMEOUT_MS);\n}\n\n// ---- Cleanup on close ----\nnode.on(\"close\", () => {\n  for (const t in timers) clearTimeout(timers[t]);\n  for (const t in node._hpTimers) clearTimeout(node._hpTimers[t]); // safety\n  node._hpTimers = {};\n  context.set(\"pending\", {}); // reset plain data only\n});\n\n// ---- Main ----\nconst topic = msg.topic;\nconst payload = msg.payload;\n\n// Identify role of this message\nconst isCommand = topic.includes(\"commands/SetCurves\") && topic === getSetCurvesCommandTopicFromAnyTopic(topic);\nconst isReply   = isCurveReplyTopic(topic) || isRequestReplyTopic(topic);\n\n// Drop our own internal retry commands on re-ingest\nif (isCommand && msg._hp_retry) return null;\n\n// Exit if not relevant\nif (!isCommand && !isReply) return null;\n\n// Early exit for replies when nothing is pending (mirrors your other node)\nif (isReply && Object.keys(pending).length === 0) return null;\n\n// ---- Handle SetCurves command ----\nif (isCommand) {\n  if (typeof payload !== \"object\" || payload === null) return null;\n\n  const cmdTopic = getSetCurvesCommandTopicFromAnyTopic(topic);\n  const prefix   = cmdTopic.replace(/commands\\/SetCurves$/, \"\");\n  const expectedMap = buildReplyTopicsForPrefix(payload, prefix);\n  if (Object.keys(expectedMap).length === 0) return null;\n\n  for (const replyTopic of Object.keys(expectedMap)) {\n    const expectedValue = expectedMap[replyTopic];\n    const existing = pending[replyTopic];\n\n    if (existing) {\n      const sameVal = sameValue(existing.value, expectedValue);\n      if (sameVal) {\n        // Same value again → just refresh timer (keep retries)\n        schedule(replyTopic);\n        continue;\n      }\n      // Value changed → reset retries\n      existing.value   = expectedValue;\n      existing.retries = 0;\n      schedule(replyTopic);\n    } else {\n      // First time\n      pending[replyTopic] = { value: expectedValue, retries: 0 };\n      schedule(replyTopic);\n    }\n  }\n\n  context.set(\"pending\", pending);\n  return null;\n}\n\n// ---- Handle replies ----\nif (isReply) {\n  const replyTopic = topic;\n  const pend = pending[replyTopic];\n\n  if (pend) {\n    const sameVal = sameValue(pend.value, payload);\n    if (sameVal) {\n      if (timers[replyTopic]) {\n        clearTimeout(timers[replyTopic]);\n        delete timers[replyTopic];\n      }\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n    }\n  }\n  return null;\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2780,
        "y": 3040,
        "wires": [
            []
        ]
    },
    {
        "id": "de08842a694fd1a3",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "name": "Command Check (ALL)",
        "func": "\n// ---- Policy ----\nconst TIMEOUT_MS = 15000;\nconst MAX_RETRIES = 3;\n\n// ---- State ----\n// pending is keyed by full *reply* topic: { [replyTopic]: { type, cmdTopic, value, retries } }\nlet pending = context.get(\"pending\") || {};\nlet timers = {}; // local only\n\n// ---- Cleanup on close ----\nnode.on(\"close\", () => {\n    for (const timerKey in timers) clearTimeout(timers[timerKey]);\n    timers = {};\n    pending = {};\n    context.set(\"pending\", pending);\n});\n\n// ---- 1on1 command->reply map ----\nconst commandReplyMap = {\n    \"commands/SetHeatpump\": \"main/Heatpump_State\",\n    \"commands/SetHolidayMode\": \"main/Holiday_Mode_State\",\n    \"commands/SetQuietMode\": \"main/Quiet_Mode_Level\",\n    \"commands/SetPowerfulMode\": \"main/Powerful_Mode_Time\",\n    \"commands/SetZ1HeatRequestTemperature\": \"main/Z1_Heat_Request_Temp\",\n    \"commands/SetZ1CoolRequestTemperature\": \"main/Z1_Cool_Request_Temp\",\n    \"commands/SetZ2HeatRequestTemperature\": \"main/Z2_Heat_Request_Temp\",\n    \"commands/SetZ2CoolRequestTemperature\": \"main/Z2_Cool_Request_Temp\",\n    \"commands/SetOperationMode\": \"main/Operating_Mode_State\",\n    \"commands/SetForceDHW\": \"main/Force_DHW_State\",\n    \"commands/SetDHWTemp\": \"main/DHW_Target_Temp\",\n    \"commands/SetForceDefrost\": \"main/Defrosting_State\",\n    \"commands/SetForceSterilization\": \"main/Sterilization_State\",\n    \"commands/SetMaxPumpDuty\": \"main/Max_Pump_Duty\",\n    \"commands/SetZones\": \"main/Zones_State\",\n    \"commands/SetFloorHeatDelta\": \"main/Heat_Delta\",\n    \"commands/SetFloorCoolDelta\": \"main/Cool_Delta\",\n    \"commands/SetDHWHeatDelta\": \"main/DHW_Heat_Delta\",\n    \"commands/SetHeaterDelayTime\": \"main/Heater_Delay_Time\",\n    \"commands/SetHeaterStartDelta\": \"main/Heater_Start_Delta\",\n    \"commands/SetHeaterStopDelta\": \"main/Heater_Stop_Delta\",\n    \"commands/SetMainSchedule\": \"main/Main_Schedule_State\",\n    \"commands/SetBufferDelta\": \"main/Buffer_Tank_Delta\",\n    \"commands/SetBuffer\": \"main/Buffer_Installed\"\n};\n\nconst commandTokens = [...Object.keys(commandReplyMap)];\nconst replyTokens = [...Object.values(commandReplyMap)];\n\n// ---- Helpers (curves-specific) ----\nfunction buildPartialPayloadForCurves(pendingMap) {\n    const payloadOut = {};\n    for (const replyTopic of Object.keys(pendingMap)) {\n        const pendingItem = pendingMap[replyTopic];\n        if (!pendingItem || pendingItem.type !== \"curves\") continue;\n\n        const replyTopicMatch = replyTopic.match(/^(.+)\\/main\\/Z([12])_(Heat|Cool)_Curve_(Target|Outside)_(High|Low)_Temp$/);\n        if (!replyTopicMatch) continue;\n\n        const zoneNumber = replyTopicMatch[2];\n        const modeKey = replyTopicMatch[3] === \"Heat\" ? \"heat\" : \"cool\";\n        const sectionKey = replyTopicMatch[4] === \"Target\" ? \"target\" : \"outside\";\n        const fieldKey = replyTopicMatch[5].toLowerCase();\n        const valueToSend = pendingItem.value;\n\n        const zoneKey = `zone${zoneNumber}`;\n        if (!payloadOut[zoneKey]) payloadOut[zoneKey] = {};\n        if (!payloadOut[zoneKey][modeKey]) payloadOut[zoneKey][modeKey] = {};\n        if (!payloadOut[zoneKey][modeKey][sectionKey]) payloadOut[zoneKey][modeKey][sectionKey] = {};\n        payloadOut[zoneKey][modeKey][sectionKey][fieldKey] = valueToSend;\n    }\n    return payloadOut;\n}\n\n// ---- Retry scheduling keyed by reply topic ----\nfunction scheduleRetry(replyTopic) {\n    const item = pending[replyTopic];\n    if (!item) return;\n\n    if (timers[replyTopic]) clearTimeout(timers[replyTopic]);\n\n    timers[replyTopic] = setTimeout(() => {\n        const current = pending[replyTopic];\n        if (!current) return;\n\n        if (current.retries >= MAX_RETRIES) {\n            clearTimeout(timers[replyTopic]);\n            delete timers[replyTopic];\n            delete pending[replyTopic];\n            context.set(\"pending\", pending);\n            return;\n        }\n\n        current.retries += 1;\n\n        // Type-aware retry\n        if (current.type === \"1on1\") {\n            node.send({ topic: current.cmdTopic, payload: current.value, _hp_retry: true });\n        } else if (current.type === \"curves\") {\n            const partialPayload = buildPartialPayloadForCurves(pending);\n            if (Object.keys(partialPayload).length > 0) {\n                node.send({ topic: current.cmdTopic, payload: partialPayload, _hp_retry: true });\n            }\n        }\n\n        scheduleRetry(replyTopic);\n    }, TIMEOUT_MS);\n}\n\n// ---- Main ----\nconst topic = msg.topic;\nconst payload = msg.payload;\n\n// Fast detect\nconst is1on1Command = commandTokens.some(token => topic.endsWith(token));\nconst is1on1Reply = replyTokens.some(token => topic.endsWith(token));\nconst isCurvesCommand = topic.endsWith(\"commands/SetCurves\");\nconst isCurvesReply = /^.+\\/main\\/Z[12]_(Heat|Cool)_Curve_(Target|Outside)_(High|Low)_Temp$/.test(topic);\nconst isCurvesReply2 = /^.+\\/main\\/Z[12]_(Heat|Cool)_Request_Temp$/.test(topic);\n\n// Drop our own internal retry commands on re-ingest\nif ((is1on1Command || isCurvesCommand) && msg._hp_retry) return null;\n\n// Early exit if message is not handled here\nif (!(is1on1Command || is1on1Reply || isCurvesCommand || isCurvesReply || isCurvesReply2)) return null;\n\n////////////////////////////////////////\n// 1on1: handle command -> set pending\n////////////////////////////////////////\nif (is1on1Command) {\n    const commandsMarkerIndex = topic.indexOf(\"commands/\");\n    if (commandsMarkerIndex === -1) return null;           // malformed path\n\n    const prefix = topic.substring(0, commandsMarkerIndex); // <<<<<< Extract prefix once, here\n    const matchedCommandToken = commandTokens.find(token => topic.endsWith(token));\n    const replyToken = commandReplyMap[matchedCommandToken];\n    const fullReplyTopic = `${prefix}${replyToken}`;\n\n    const existingItem = pending[fullReplyTopic];\n    if (existingItem) {\n        const isSameValue =\n            (typeof existingItem.value === 'number' && typeof payload === 'number')\n                ? Number(existingItem.value) === Number(payload)\n                : String(existingItem.value) === String(payload);\n\n        if (isSameValue) { scheduleRetry(fullReplyTopic); return null; }\n\n        existingItem.value = payload;\n        existingItem.retries = 0;\n        context.set(\"pending\", pending);\n        scheduleRetry(fullReplyTopic);\n        return null;\n    }\n\n    // First-time store\n    pending[fullReplyTopic] = { type: \"1on1\", cmdTopic: topic, value: payload, retries: 0 };\n    context.set(\"pending\", pending);\n    scheduleRetry(fullReplyTopic);\n    return null;\n}\n\n////////////////////////////////////////\n// 1on1: handle reply -> clear pending\n////////////////////////////////////////\nif (is1on1Reply) {\n    const pendingItem = pending[topic];\n    if (pendingItem) {\n        const isSameValue =\n            (typeof pendingItem.value === 'number' && typeof payload === 'number')\n                ? Number(pendingItem.value) === Number(payload)\n                : String(pendingItem.value) === String(payload);\n\n        if (isSameValue) {\n            if (timers[topic]) { clearTimeout(timers[topic]); delete timers[topic]; }\n            delete pending[topic];\n            context.set(\"pending\", pending);\n        }\n    }\n    return null;\n}\n\n////////////////////////////////////////\n// SetCurves: handle command -> set pending(s)\n////////////////////////////////////////\nif (isCurvesCommand) {\n    if (typeof payload !== \"object\" || payload === null) return null;\n\n    // Extract prefix once, here, for building reply topics\n    const commandsMarkerIndex = topic.indexOf(\"commands/\");\n    if (commandsMarkerIndex === -1) return null;\n    const prefix = topic.substring(0, commandsMarkerIndex); // <<<<<< Extracted prefix\n\n    // Build expected reply topics dynamically\n    const expectedReplyMap = (() => {\n        const topicsToValues = {};\n        const buildCurveReplyTopic = (zoneNumber, modeKey, sectionKey, fieldKey) => {\n            const zonePart = `Z${zoneNumber}`;\n            const modePart = modeKey === \"heat\" ? \"Heat\" : \"Cool\";\n            const sectionPart = sectionKey === \"target\" ? \"Target\" : \"Outside\";\n            const fieldPart = fieldKey === \"high\" ? \"High\" : \"Low\";\n            return `${prefix}main/${zonePart}_${modePart}_Curve_${sectionPart}_${fieldPart}_Temp`;\n        };\n\n        for (const zoneKey of Object.keys(payload)) {\n            if (!zoneKey.startsWith(\"zone\")) continue;\n            const zoneNumber = zoneKey.replace(\"zone\", \"\");\n            const zoneObject = payload[zoneKey];\n\n            for (const modeKey of Object.keys(zoneObject)) {\n                if (modeKey !== \"heat\" && modeKey !== \"cool\") continue;\n                const modeObject = zoneObject[modeKey];\n\n                for (const sectionKey of Object.keys(modeObject)) {\n                    if (sectionKey !== \"target\" && sectionKey !== \"outside\") continue;\n                    const sectionObject = modeObject[sectionKey];\n                    if (typeof sectionObject !== \"object\" || sectionObject === null) continue;\n\n                    for (const fieldKey of Object.keys(sectionObject)) {\n                        if (fieldKey !== \"high\" && fieldKey !== \"low\") continue;\n                        const expectedValue = sectionObject[fieldKey];\n                        if (typeof expectedValue === \"undefined\") continue;\n\n                        const replyTopic = buildCurveReplyTopic(zoneNumber, modeKey, sectionKey, fieldKey);\n                        topicsToValues[replyTopic] = expectedValue;\n                    }\n                }\n            }\n        }\n        return topicsToValues;\n    })();\n\n    if (Object.keys(expectedReplyMap).length === 0) return null;\n\n    // Store/refresh pending for each expected reply topic\n    for (const replyTopic of Object.keys(expectedReplyMap)) {\n        const expectedValue = expectedReplyMap[replyTopic];\n        const existingItem = pending[replyTopic];\n\n        if (existingItem) {\n            const isSameValue =\n                (typeof existingItem.value === 'number' && typeof expectedValue === 'number')\n                    ? Number(existingItem.value) === Number(expectedValue)\n                    : String(existingItem.value) === String(expectedValue);\n            if (isSameValue) continue;\n\n            existingItem.value = expectedValue;\n            existingItem.retries = 0;\n            context.set(\"pending\", pending);\n            scheduleRetry(replyTopic);\n        } else {\n            pending[replyTopic] = { type: \"curves\", cmdTopic: topic, value: expectedValue, retries: 0 };\n            context.set(\"pending\", pending);\n            scheduleRetry(replyTopic);\n        }\n    }\n    return null;\n}\n\n////////////////////////////////////////\n// SetCurves: handle reply -> clear pending\n////////////////////////////////////////\nif (isCurvesReply || isCurvesReply2) {\n    const pendingItem = pending[topic];\n    if (pendingItem) {\n        const isSameValue =\n            (typeof pendingItem.value === 'number' && typeof payload === 'number')\n                ? Number(pendingItem.value) === Number(payload)\n                : String(pendingItem.value) === String(payload);\n\n        if (isSameValue) {\n            if (timers[topic]) { clearTimeout(timers[topic]); delete timers[topic]; }\n            delete pending[topic];\n            context.set(\"pending\", pending);\n        }\n    }\n    return null;\n}\n\n// Default\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2730,
        "y": 2420,
        "wires": [
            [
                "adef1a0c024c11a3"
            ]
        ]
    },
    {
        "id": "0485cb6e2cc0457c",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/commands/SetCurves",
        "payload": "{\"zone1\":{\"heat\":{\"target\":{\"low\":27,\"high\":32}}}}",
        "payloadType": "json",
        "x": 2520,
        "y": 2660,
        "wires": [
            [
                "de08842a694fd1a3"
            ]
        ]
    },
    {
        "id": "99f98e9f47f2548c",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "name": "claude - Command Check (SetCurves) (v2)",
        "func": "\n// Regex patterns for topic matching\nconst COMMAND_MARKER = \"commands/SetCurves\";\nconst CURVE_REPLY_PATTERN = /^(.+)\\/main\\/Z([12])_(Heat|Cool)_Curve_(Target|Outside)_(High|Low)_Temp$/;\n\n// Quick exit: not a SetCurves command and not a curve reply topic\nconst isCommand = msg.topic.includes(COMMAND_MARKER);\nconst isReply = CURVE_REPLY_PATTERN.test(msg.topic);\nif (!isCommand && !isReply) {\n  return null;\n}\n\n// ---- Policy ----\nconst TIMEOUT_MS  = 5000;\nconst MAX_RETRIES = 3;\n\n// ---- State ----\n// pending is keyed by full *reply* topic: { [replyTopic]: { value, retries } }\nvar pending = context.get(\"pending\") || {};\n\n// Quick exit: reply received but nothing is pending\nif (isReply && Object.keys(pending).length === 0) {\n  return null;\n}\n\n// In-memory per-node map of timeout handles (not serialized, survives between messages)\nif (!node._hpTimers) node._hpTimers = {};\nconst timers = node._hpTimers;\n\n// ---- Cleanup on close ----\nnode.on(\"close\", () => {\n  for (const key in node._hpTimers) clearTimeout(node._hpTimers[key]);\n  node._hpTimers = {};\n\n  pending = {};\n  context.set(\"pending\", pending);\n});\n\n// ---- Main ----\nconst topic = msg.topic;\nconst value = msg.payload;\n\n////////////////////////////////////////\n// If a SetCurves command is received ...\n////////////////////////////////////////\nif (isCommand) {\n  // Drop internal retry messages to prevent re-processing\n  if (msg._hpRetry) return null;\n\n  // Payload must be an object containing curve data\n  if (typeof value !== \"object\" || value === null) return null;\n\n  // Extract prefix dynamically (everything before \"commands/SetCurves\")\n  const indexOfMarker = topic.indexOf(COMMAND_MARKER);\n  const prefix = topic.substring(0, indexOfMarker);\n  const cmdTopic = prefix + COMMAND_MARKER;\n\n  // Build map of expected reply topics and their values from the payload\n  const expectedReplies = buildExpectedReplies(value, prefix);\n  if (Object.keys(expectedReplies).length === 0) return null;\n\n  // Process each expected reply topic\n  for (const replyTopic in expectedReplies) {\n    const expectedValue = expectedReplies[replyTopic];\n    const existing = pending[replyTopic];\n\n    if (existing) {\n      // Type-safe same-value check\n      const sameVal =\n        (typeof existing.value === 'number' && typeof expectedValue === 'number')\n          ? Number(existing.value) === Number(expectedValue)\n          : String(existing.value) === String(expectedValue);\n\n      if (sameVal) {\n        // Same value already pending, do not reset timer or retries\n        continue;\n      }\n\n      // Value changed: update value and reset retries\n      existing.value = expectedValue;\n      existing.retries = 0;\n      schedule(replyTopic, cmdTopic);\n    } else {\n      // First time for this reply topic\n      pending[replyTopic] = { value: expectedValue, retries: 0 };\n      schedule(replyTopic, cmdTopic);\n    }\n  }\n\n  context.set(\"pending\", pending);\n  return null;\n}\n\n////////////////////////////////////////\n// If a curve reply topic is received ...\n////////////////////////////////////////\nif (isReply) {\n  const replyTopic = topic;\n  const pend = pending[replyTopic];\n\n  if (pend) {\n    // Type-safe same-value check\n    const sameVal =\n      (typeof pend.value === 'number' && typeof value === 'number')\n        ? Number(pend.value) === Number(value)\n        : String(pend.value) === String(value);\n\n    if (sameVal) {\n      // Reply confirms the pending value, clear timer and remove from pending\n      if (timers[replyTopic]) {\n        clearTimeout(timers[replyTopic]);\n        delete timers[replyTopic];\n      }\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n    }\n  }\n  return null;\n}\n\n// Default\nreturn null;\n\n\n// ---- Helper: Build expected reply topics from SetCurves payload ----\n// Parses the nested payload structure and returns a flat map: { replyTopic: value }\nfunction buildExpectedReplies(payload, prefix) {\n  const result = {};\n\n  for (const zoneKey of Object.keys(payload)) {\n    // Expect keys like \"zone1\", \"zone2\"\n    if (!zoneKey.startsWith(\"zone\")) continue;\n    const zoneNum = zoneKey.replace(\"zone\", \"\");\n    const zoneObj = payload[zoneKey];\n    if (typeof zoneObj !== \"object\" || zoneObj === null) continue;\n\n    for (const modeKey of Object.keys(zoneObj)) {\n      // Expect keys \"heat\" or \"cool\"\n      if (modeKey !== \"heat\" && modeKey !== \"cool\") continue;\n      const modeObj = zoneObj[modeKey];\n      if (typeof modeObj !== \"object\" || modeObj === null) continue;\n\n      for (const sectionKey of Object.keys(modeObj)) {\n        // Expect keys \"target\" or \"outside\"\n        if (sectionKey !== \"target\" && sectionKey !== \"outside\") continue;\n        const sectionObj = modeObj[sectionKey];\n        if (typeof sectionObj !== \"object\" || sectionObj === null) continue;\n\n        for (const fieldKey of Object.keys(sectionObj)) {\n          // Expect keys \"high\" or \"low\"\n          if (fieldKey !== \"high\" && fieldKey !== \"low\") continue;\n          const fieldValue = sectionObj[fieldKey];\n          if (typeof fieldValue === \"undefined\") continue;\n\n          // Build the reply topic: e.g., \"prefix/main/Z1_Heat_Curve_Target_High_Temp\"\n          const zoneStr = \"Z\" + zoneNum;\n          const modeStr = modeKey === \"heat\" ? \"Heat\" : \"Cool\";\n          const sectionStr = sectionKey === \"target\" ? \"Target\" : \"Outside\";\n          const fieldStr = fieldKey === \"high\" ? \"High\" : \"Low\";\n          const replyTopic = `${prefix}main/${zoneStr}_${modeStr}_Curve_${sectionStr}_${fieldStr}_Temp`;\n\n          result[replyTopic] = fieldValue;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\n\n// ---- Helper: Parse curve reply topic into components ----\n// Returns { prefix, zoneNum, modeKey, sectionKey, fieldKey } or null if not a valid curve topic\nfunction parseCurveReplyTopic(replyTopic) {\n  const match = CURVE_REPLY_PATTERN.exec(replyTopic);\n  if (!match) return null;\n  return {\n    prefix: match[1],\n    zoneNum: match[2],\n    modeKey: match[3] === \"Heat\" ? \"heat\" : \"cool\",\n    sectionKey: match[4] === \"Target\" ? \"target\" : \"outside\",\n    fieldKey: match[5].toLowerCase()\n  };\n}\n\n\n// ---- Helper: Build consolidated payload from all pending items ----\n// Reconstructs the nested SetCurves payload structure from pending reply topics\nfunction buildConsolidatedPayload(pendingMap) {\n  const result = {};\n\n  for (const replyTopic of Object.keys(pendingMap)) {\n    const parsed = parseCurveReplyTopic(replyTopic);\n    if (!parsed) continue;\n\n    const pendValue = pendingMap[replyTopic].value;\n    const zoneKey = \"zone\" + parsed.zoneNum;\n\n    // Build nested structure: result.zone1.heat.target.high = value\n    if (!result[zoneKey]) result[zoneKey] = {};\n    if (!result[zoneKey][parsed.modeKey]) result[zoneKey][parsed.modeKey] = {};\n    if (!result[zoneKey][parsed.modeKey][parsed.sectionKey]) result[zoneKey][parsed.modeKey][parsed.sectionKey] = {};\n    result[zoneKey][parsed.modeKey][parsed.sectionKey][parsed.fieldKey] = pendValue;\n  }\n\n  return result;\n}\n\n\n// ---- Retry scheduling keyed by reply topic ----\n// Schedules a timeout that will retry the command if no reply is received\nfunction schedule(replyTopic, cmdTopic) {\n  const item = pending[replyTopic];\n  if (!item) return;\n\n  // Clear any existing timer for this reply topic\n  if (timers[replyTopic]) clearTimeout(timers[replyTopic]);\n\n  timers[replyTopic] = setTimeout(() => {\n    const current = pending[replyTopic];\n    if (!current) return;\n\n    // Max retries reached: give up on this reply topic\n    if (current.retries >= MAX_RETRIES) {\n      clearTimeout(timers[replyTopic]);\n      delete timers[replyTopic];\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n      return;\n    }\n\n    // Increment retry counter\n    current.retries += 1;\n    context.set(\"pending\", pending);\n\n    // Build ONE consolidated command containing ALL pending values\n    const consolidatedPayload = buildConsolidatedPayload(pending);\n    if (Object.keys(consolidatedPayload).length > 0) {\n      node.send({ topic: cmdTopic, payload: consolidatedPayload, _hpRetry: true });\n    }\n\n    // Re-schedule for next retry attempt\n    schedule(replyTopic, cmdTopic);\n  }, TIMEOUT_MS);\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2790,
        "y": 2960,
        "wires": [
            [
                "25ddc7f78082510f"
            ]
        ]
    },
    {
        "id": "1e06d43752f6feb3",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/commands/SetCurves",
        "payload": "{\"zone1\":{\"heat\":{\"target\":{\"low\":27,\"high\":32}}}}",
        "payloadType": "json",
        "x": 2440,
        "y": 2840,
        "wires": [
            [
                "99f98e9f47f2548c"
            ]
        ]
    },
    {
        "id": "25ddc7f78082510f",
        "type": "debug",
        "z": "43c4ee3ee4757f3c",
        "name": "debug 7",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3251,
        "y": 2964,
        "wires": []
    },
    {
        "id": "cb478d2bbf1c9fe5",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "correct command",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/commands/SetCurves",
        "payload": "{\"zone1\":{\"heat\":{\"target\":{\"low\":26,\"high\":31}}}}",
        "payloadType": "json",
        "x": 2440,
        "y": 3020,
        "wires": [
            [
                "99f98e9f47f2548c"
            ]
        ]
    },
    {
        "id": "29b1feed4b37ec9b",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp",
        "payload": "27",
        "payloadType": "num",
        "x": 2470,
        "y": 2880,
        "wires": [
            [
                "99f98e9f47f2548c"
            ]
        ]
    },
    {
        "id": "bfe2ec070fd57a38",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp",
        "payload": "32",
        "payloadType": "num",
        "x": 2470,
        "y": 2920,
        "wires": [
            [
                "99f98e9f47f2548c"
            ]
        ]
    },
    {
        "id": "6e95bf33422493b5",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Target_Low_Temp",
        "payload": "26",
        "payloadType": "num",
        "x": 2470,
        "y": 3060,
        "wires": [
            [
                "99f98e9f47f2548c"
            ]
        ]
    },
    {
        "id": "b71657475d568bf0",
        "type": "inject",
        "z": "43c4ee3ee4757f3c",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "panasonic_heat_pump/main/Z1_Heat_Curve_Target_High_Temp",
        "payload": "31",
        "payloadType": "num",
        "x": 2470,
        "y": 3100,
        "wires": [
            [
                "99f98e9f47f2548c"
            ]
        ]
    },
    {
        "id": "b64d3570d4ac8501",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "name": "Command Check   (1-on-1) (v2)",
        "func": "\nconst commandReplyMap = {\n  \"commands/SetHeatpump\": \"main/Heatpump_State\",                              // SET1\n  \"commands/SetHolidayMode\": \"main/Holiday_Mode_State\",                       // SET2\n  \"commands/SetQuietMode\": \"main/Quiet_Mode_Level\",                           // SET3\n  \"commands/SetPowerfulMode\": \"main/Powerful_Mode_Time\",                      // SET4\n  \"commands/SetZ1HeatRequestTemperature\": \"main/Z1_Heat_Request_Temp\",        // SET5\n  \"commands/SetZ1CoolRequestTemperature\": \"main/Z1_Cool_Request_Temp\",        // SET6\n  \"commands/SetZ2HeatRequestTemperature\": \"main/Z2_Heat_Request_Temp\",        // SET7\n  \"commands/SetZ2CoolRequestTemperature\": \"main/Z2_Cool_Request_Temp\",        // SET8\n  \"commands/SetOperationMode\": \"main/Operating_Mode_State\",                   // SET9\n  \"commands/SetForceDHW\": \"main/Force_DHW_State\",                             // SET10\n  \"commands/SetDHWTemp\": \"main/DHW_Target_Temp\",                              // SET11\n  \"commands/SetForceDefrost\": \"main/Defrosting_State\",                        // SET12\n  \"commands/SetForceSterilization\": \"main/Sterilization_State\",               // SET13\n  \"commands/SetMaxPumpDuty\": \"main/Max_Pump_Duty\",                            // SET15\n  \"commands/SetZones\": \"main/Zones_State\",                                    // SET17\n  \"commands/SetFloorHeatDelta\": \"main/Heat_Delta\",                            // SET18\n  \"commands/SetFloorCoolDelta\": \"main/Cool_Delta\",                            // SET19\n  \"commands/SetDHWHeatDelta\": \"main/DHW_Heat_Delta\",                          // SET20\n  \"commands/SetHeaterDelayTime\": \"main/Heater_Delay_Time\",                    // SET21\n  \"commands/SetHeaterStartDelta\": \"main/Heater_Start_Delta\",                  // SET22\n  \"commands/SetHeaterStopDelta\": \"main/Heater_Stop_Delta\",                    // SET23\n  \"commands/SetMainSchedule\": \"main/Main_Schedule_State\",                     // SET24\n  \"commands/SetBufferDelta\": \"main/Buffer_Tank_Delta\",                        // SET27\n  \"commands/SetBuffer\": \"main/Buffer_Installed\"                               // SET28\n};\n\n// Create lists for commandsTokens and repliesTokens\nconst commandTokens = [...Object.keys(commandReplyMap)];\nconst replyTokens   = [...Object.values(commandReplyMap)];\n\n// Exit if topic is not a known command or reply token, Exit\nif (!commandTokens.some(t => msg.topic.endsWith(t)) &&\n    !replyTokens.some(t => msg.topic.endsWith(t))) {\n  return null;\n}\n\n// ---- Policy ----\nconst TIMEOUT_MS  = 15000;\nconst MAX_RETRIES = 3;\n\n// ---- State ----\n// pending is keyed by full *reply* topic: { [replyTopic]: { cmdTopic, value, retries } }\nvar pending = context.get(\"pending\") || {};\nif (replyTokens.some(t => msg.topic.endsWith(t)) && Object.keys(pending).length === 0 ) {\n  return null;\n}\n// In-memory per-node map of timeout handles (not serialized)\nif (!node._hpTimers) node._hpTimers = {};\nconst timers = node._hpTimers;\n\n// ---- Cleanup on close ----\nnode.on(\"close\", () => {\n  for (const t in node._hpTimers) clearTimeout(node._hpTimers[t]);\n  node._hpTimers = {};\n\n  pending = {};\n  context.set(\"pending\", pending);\n});\n\n// ---- Main ----\nconst topic = msg.topic;\nconst value = msg.payload;\n\n////////////////////////////////////////\n// If a command-topic is received ...\n////////////////////////////////////////\nif (commandTokens.some(t => topic.endsWith(t))) {\n  // Extract prefix (before \"commands/\") and store it on msg for downstream use\n  const marker = \"commands/\";\n  const indexOfMarker = topic.indexOf(marker);\n  const prefix = topic.substring(0, indexOfMarker);\n  \n  // Identify the command token that matched, and build the expected full reply topic\n  const cmdToken   = commandTokens.find(t => topic.endsWith(t));      // Set the commandtopic in cmdToken variable\n  const replyToken = commandReplyMap[cmdToken];                       // Get the matching reply topic (without prefix)\n  const replyTopic = prefix + replyToken;                             // full reply topic including prefix for this command\n\n  const existing = pending[replyTopic];                               // create boolean existing, if replyTopic is present, true. if not, false\n  if (existing) {                                                     // If existing is true.\n    // Type-safe same-value check\n    const sameVal =                                                   // Get the value stored \n      (typeof existing.value === 'number' && typeof value === 'number')\n        ? Number(existing.value) === Number(value)\n        : String(existing.value) === String(value);\n\n    if (sameVal) {\n      // a command with the same value is already present in pending list. Do not do antying and keep the existing timer/retries \n      schedule(replyTopic);   // this will clearTimeout + setTimeout internally\n      return null;\n    }\n\n    // The command is already present in pending list.\n    // The value of the command is not the same as stored in pending list: restart the timer\n    existing.value   = value;             // Put the value\n    existing.retries = 0;                 // Reset the number of retries to 0 again\n    context.set(\"pending\", pending);      // Store\n    schedule(replyTopic);\n    return null;\n  }\n\n  // First time\n  pending[replyTopic] = { cmdTopic: topic, value, retries: 0 };       // store all the important values .\n  context.set(\"pending\", pending);\n  schedule(replyTopic);\n  return null;\n}\n////////////////////////////////////////\n// If a reply-topic is received ...\n////////////////////////////////////////\nif (replyTokens.some(t => topic.endsWith(t))) {\n\n  const replyTopic = topic;             // full path includes its origin/prefix\n  const pend = pending[replyTopic];\n\n  if (pend) {\n    const sameVal =\n      (typeof pend.value === 'number' && typeof value === 'number')\n        ? Number(pend.value) === Number(value)\n        : String(pend.value) === String(value);\n\n    if (sameVal) {\n      if (timers[replyTopic]) {\n        clearTimeout(timers[replyTopic]);\n        delete timers[replyTopic];\n      }\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n    }\n  }\n  return null;\n}\n\n// ---- Retry scheduling keyed by reply topic ----\nfunction schedule(replyTopic) {\n  const item = pending[replyTopic];\n  if (!item) return;\n\n  if (timers[replyTopic]) clearTimeout(timers[replyTopic]);\n\n  timers[replyTopic] = setTimeout(() => {\n    const current = pending[replyTopic];\n    if (!current) return;\n\n    if (current.retries >= MAX_RETRIES) {\n      clearTimeout(timers[replyTopic]);\n      delete timers[replyTopic];\n      delete pending[replyTopic];\n      context.set(\"pending\", pending);\n      return;\n    }\n\n    // Retry send to the command topic\n    current.retries += 1;\n    node.send({ topic: current.cmdTopic, payload: current.value });\n\n    schedule(replyTopic);\n  }, TIMEOUT_MS);\n}\n\n\n// Default\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2850,
        "y": 2520,
        "wires": [
            [
                "3c0cbcb7d9b2635f"
            ]
        ]
    },
    {
        "id": "3c0cbcb7d9b2635f",
        "type": "debug",
        "z": "43c4ee3ee4757f3c",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2970,
        "y": 2600,
        "wires": []
    },
    {
        "id": "d0bbc7b69e37b210",
        "type": "rbe",
        "z": "43c4ee3ee4757f3c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "_msgid",
        "topi": "topic",
        "x": 3061,
        "y": 3064,
        "wires": [
            []
        ]
    },
    {
        "id": "83b59586288340a2",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "Command Check (SetCurves) (v2)",
        "func": "\n// Regex patterns for topic matching\nconst COMMAND_MARKER = \"commands/SetCurves\";\nconst CURVE_REPLY_PATTERN = /^(.+)\\/main\\/Z([12])_(Heat|Cool)_Curve_(Target|Outside)_(High|Low)_Temp$/;\n\n// Quick exit: not a SetCurves command and not a curve reply topic\nconst isCommand = msg.topic.includes(COMMAND_MARKER);\nconst isReply = CURVE_REPLY_PATTERN.test(msg.topic);\nif (!isCommand && !isReply) {\n    return null;\n}\n\n// ---- Policy ----\nconst TIMEOUT_MS = 15000;\nconst MAX_RETRIES = 3;\n\n// ---- State ----\n// pending is keyed by full *reply* topic: { [replyTopic]: { value, retries } }\nvar pending = context.get(\"pending\") || {};\n\n// Quick exit: reply received but nothing is pending\nif (isReply && Object.keys(pending).length === 0) {\n    return null;\n}\n\n// In-memory per-node map of timeout handles (not serialized, survives between messages)\nif (!node._hpTimers)\n    node._hpTimers = {};\nconst timers = node._hpTimers;\n\nvar cmdGen = context.get(\"cmdGen\") || 0;\n\n// ---- Cleanup on close ----\nnode.on(\"close\", () => {\n    for (const key in node._hpTimers)\n        clearTimeout(node._hpTimers[key]);\n    node._hpTimers = {};\n\n    pending = {};\n    context.set(\"pending\", pending);\n});\n\n// ---- Main ----\nconst topic = msg.topic;\nconst value = msg.payload;\n\n////////////////////////////////////////\n// If a SetCurves command is received ...\n////////////////////////////////////////\nif (isCommand) {\n    // Drop internal retry messages to prevent re-processing\n    if (msg._hpRetry)\n        return null;\n\n    // Payload must be an object containing curve data\n    if (typeof value !== \"object\" || value === null)\n        return null;\n\n    // Extract prefix dynamically (everything before \"commands/SetCurves\")\n    const indexOfMarker = topic.indexOf(COMMAND_MARKER);\n    const prefix = topic.substring(0, indexOfMarker);\n    const cmdTopic = prefix + COMMAND_MARKER;\n\n        // Build map of expected reply topics and their values from the payload\n        const expectedReplies = buildExpectedReplies(value, prefix);\n\n        let allSame = true;\n        for (const k in expectedReplies) {\n        const ex = pending[k];\n        if (!ex) { allSame = false; break; }\n        const v = expectedReplies[k];\n        const same =\n            (typeof ex.value === 'number' && typeof v === 'number')\n            ? Number(ex.value) === Number(v)\n            : String(ex.value) === String(v);\n        if (!same) { allSame = false; break; }\n        }\n        if (allSame) { return null} ; // exact duplicate of what's already pending -> ignore\n\n\n        cmdGen += 1;\n        context.set(\"cmdGen\", cmdGen);\n        /*\n            for (const key in timers) {\n                clearTimeout(timers[key]);\n                delete timers[key];\n            }\n            pending = {};\n        */\n        // Process each expected reply topic\n    for (const replyTopic in expectedReplies) {\n        const expectedValue = expectedReplies[replyTopic];\n        const existing = pending[replyTopic];\n\n        if (existing) {\n            // Type-safe same-value check\n            const sameVal =\n                (typeof existing.value === 'number' && typeof expectedValue === 'number')\n             ? Number(existing.value) === Number(expectedValue)\n             : String(existing.value) === String(expectedValue);\n\n            if (sameVal) {\n                // Same value already pending, do not reset timer or retries\n                continue;\n            }\n\n            // Value changed: update value and reset retries\n            existing.value = expectedValue;\n            existing.retries = 0;\n            schedule(replyTopic, cmdTopic);\n        } else {\n            // First time for this reply topic\n            pending[replyTopic] = {\n                value: expectedValue,\n                retries: 0\n            };\n            schedule(replyTopic, cmdTopic);\n        }\n    }\n\n    context.set(\"pending\", pending);\n    return null;\n}\n\n////////////////////////////////////////\n// If a curve reply topic is received ...\n////////////////////////////////////////\nif (isReply) {\n    const replyTopic = topic;\n    const pend = pending[replyTopic];\n\n    if (pend) {\n        // Type-safe same-value check\n        const sameVal =\n            (typeof pend.value === 'number' && typeof value === 'number')\n         ? Number(pend.value) === Number(value)\n         : String(pend.value) === String(value);\n\n        if (sameVal) {\n            // Reply confirms the pending value, clear timer and remove from pending\n            if (timers[replyTopic]) {\n                clearTimeout(timers[replyTopic]);\n                delete timers[replyTopic];\n            }\n            delete pending[replyTopic];\n            context.set(\"pending\", pending);\n            let msg99={};\n            const marker = \"main/\";\n            const indexOfMarker = msg.topic.indexOf(marker) + 5;\n            const varTopic = msg.topic.replace(msg.topic.substring(0, indexOfMarker).toString(), \"\");\n            msg99.topic = \"<b>MQTT Reply</b>\"; msg99.payload = varTopic  + ': ' + msg.payload;\n            node.send([null,msg99])\n        }\n    }\n    return null;\n}\n\n// Default\nreturn null;\n\n// ---- Helper: Build expected reply topics from SetCurves payload ----\n// Parses the nested payload structure and returns a flat map: { replyTopic: value }\n// This is based on this structure:\n/*\n            {\n                \"zone1\": {\n                    \"heat\": {\n                        \"target\": {\n                            \"high\": 35,\n                            \"low\": 25\n                        },\n                        \"outside\": {\n                            \"high\": 15,\n                            \"low\": -15\n                        }\n                    },\n                    \"cool\": {\n                        \"target\": {\n                            \"high\": 35,\n                            \"low\": 25\n                        },\n                        \"outside\": {\n                            \"high\": 15,\n                            \"low\": -15\n                        }\n                    }\n                },\n                \"zone2\": {\n                    \"heat\": {\n                        \"target\": {\n                            \"high\": 35,\n                            \"low\": 25\n                        },\n                        \"outside\": {\n                            \"high\": 15,\n                            \"low\": -15\n                        }\n                    },\n                    \"cool\": {\n                        \"target\": {\n                            \"high\": 35,\n                            \"low\": 25\n                        },\n                        \"outside\": {\n                            \"high\": 15,\n                            \"low\": -15\n                        }\n                    }\n                }\n            }\n*/\nfunction buildExpectedReplies(payload, prefix) {\n    const result = {};\n\n    for (const zoneKey of Object.keys(payload)) {\n        // Expect keys like \"zone1\", \"zone2\"\n        if (!zoneKey.startsWith(\"zone\"))\n            continue;\n        const zoneNum = zoneKey.replace(\"zone\", \"\");\n        const zoneObj = payload[zoneKey];\n        if (typeof zoneObj !== \"object\" || zoneObj === null)\n            continue;\n\n        for (const modeKey of Object.keys(zoneObj)) {\n            // Expect keys \"heat\" or \"cool\"\n            if (modeKey !== \"heat\" && modeKey !== \"cool\")\n                continue;\n            const modeObj = zoneObj[modeKey];\n            if (typeof modeObj !== \"object\" || modeObj === null)\n                continue;\n\n            for (const sectionKey of Object.keys(modeObj)) {\n                // Expect keys \"target\" or \"outside\"\n                if (sectionKey !== \"target\" && sectionKey !== \"outside\")\n                    continue;\n                const sectionObj = modeObj[sectionKey];\n                if (typeof sectionObj !== \"object\" || sectionObj === null)\n                    continue;\n\n                for (const fieldKey of Object.keys(sectionObj)) {\n                    // Expect keys \"high\" or \"low\"\n                    if (fieldKey !== \"high\" && fieldKey !== \"low\")\n                        continue;\n                    const fieldValue = sectionObj[fieldKey];\n                    if (typeof fieldValue === \"undefined\")\n                        continue;\n\n                    // Build the reply topic: e.g., \"prefix/main/Z1_Heat_Curve_Target_High_Temp\"\n                    const zoneStr = \"Z\" + zoneNum;\n                    const modeStr = modeKey === \"heat\" ? \"Heat\" : \"Cool\";\n                    const sectionStr = sectionKey === \"target\" ? \"Target\" : \"Outside\";\n                    const fieldStr = fieldKey === \"high\" ? \"High\" : \"Low\";\n                    const replyTopic = `${prefix}main/${zoneStr}_${modeStr}_Curve_${sectionStr}_${fieldStr}_Temp`;\n\n                    result[replyTopic] = fieldValue;\n                }\n            }\n        }\n    }\n\n    return result;\n}\n\n// ---- Helper: Parse curve reply topic into components ----\n// Returns { prefix, zoneNum, modeKey, sectionKey, fieldKey } or null if not a valid curve topic\nfunction parseCurveReplyTopic(replyTopic) {\n    const match = CURVE_REPLY_PATTERN.exec(replyTopic);\n    if (!match)\n        return null;\n    return {\n        prefix: match[1],\n        zoneNum: match[2],\n        modeKey: match[3] === \"Heat\" ? \"heat\" : \"cool\",\n        sectionKey: match[4] === \"Target\" ? \"target\" : \"outside\",\n        fieldKey: match[5].toLowerCase()\n    };\n}\n\n// ---- Helper: Build consolidated payload from all pending items ----\n// Reconstructs the nested SetCurves payload structure from pending reply topics\nfunction buildConsolidatedPayload(pendingMap) {\n    const result = {};\n\n    for (const replyTopic of Object.keys(pendingMap)) {\n        const parsed = parseCurveReplyTopic(replyTopic);\n        if (!parsed)\n            continue;\n\n        const pendValue = pendingMap[replyTopic].value;\n        const zoneKey = \"zone\" + parsed.zoneNum;\n\n        // Build nested structure: result.zone1.heat.target.high = value\n        if (!result[zoneKey])\n            result[zoneKey] = {};\n        if (!result[zoneKey][parsed.modeKey])\n            result[zoneKey][parsed.modeKey] = {};\n        if (!result[zoneKey][parsed.modeKey][parsed.sectionKey])\n            result[zoneKey][parsed.modeKey][parsed.sectionKey] = {};\n        result[zoneKey][parsed.modeKey][parsed.sectionKey][parsed.fieldKey] = pendValue;\n    }\n\n    return result;\n}\n\n// ---- Retry scheduling keyed by reply topic ----\n// Schedules a timeout that will retry the command if no reply is received\nfunction schedule(replyTopic, cmdTopic) {\n    const item = pending[replyTopic];\n    if (!item)\n        return;\n\n    // Clear any existing timer for this reply topic\n    if (timers[replyTopic])\n        clearTimeout(timers[replyTopic]);\n\n    const myGen = context.get(\"cmdGen\");\n\n    timers[replyTopic] = setTimeout(() => {\n        if (context.get(\"cmdGen\") !== myGen)\n            return;\n\n        const current = pending[replyTopic];\n        if (!current)\n            return;\n\n        // Max retries reached: give up on this reply topic\n        if (current.retries >= MAX_RETRIES) {\n            clearTimeout(timers[replyTopic]);\n            delete timers[replyTopic];\n            delete pending[replyTopic];\n            context.set(\"pending\", pending);\n            return;\n        }\n\n        // Increment retry counter\n        current.retries += 1;\n        context.set(\"pending\", pending);\n\n        // Build ONE consolidated command containing ALL pending values\n        const consolidatedPayload = buildConsolidatedPayload(pending);\n        if (Object.keys(consolidatedPayload).length > 0) {\n            node.send({\n                topic: cmdTopic,\n                payload: consolidatedPayload,\n                _hpRetry: true\n            });\n        }\n\n        // Re-schedule for next retry attempt\n        schedule(replyTopic, cmdTopic);\n    }, TIMEOUT_MS);\n}\n",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1760,
        "wires": [
            [
                "7322f1de7844d355"
            ],
            [
                "b7556729d886d04c"
            ]
        ],
        "outputLabels": [
            "",
            "ToLog"
        ]
    },
    {
        "id": "7322f1de7844d355",
        "type": "delay",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 790,
        "y": 1800,
        "wires": [
            [
                "027e4b15660edbec",
                "392a86bd7fb5e647"
            ]
        ]
    },
    {
        "id": "bfa541a4cf7363ca",
        "type": "delay",
        "z": "43c4ee3ee4757f3c",
        "g": "4b1078d2a87f8c64",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "7",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1680,
        "y": 1680,
        "wires": [
            [
                "1e22e8620445f5a5"
            ]
        ]
    },
    {
        "id": "dece019c79a07993",
        "type": "mqtt out",
        "z": "43c4ee3ee4757f3c",
        "g": "4b1078d2a87f8c64",
        "name": "Dynamic MQTT out",
        "topic": "",
        "qos": "0",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "92e5b2c.00a8b5",
        "x": 2050,
        "y": 1680,
        "wires": []
    },
    {
        "id": "8b3d729fe630c248",
        "type": "link in",
        "z": "43c4ee3ee4757f3c",
        "g": "4b1078d2a87f8c64",
        "name": "> MQTT OUT",
        "links": [
            "1fd1957c5272120a",
            "b5dc51a590bfb68d",
            "5997b2d47d527ff5",
            "8a3014ba808f0fa9",
            "392a86bd7fb5e647",
            "8b954170d7a05c4c",
            "26788a9c5068d2e2",
            "2ee6fe83b8cf0f17",
            "62b3c7c6d8895b1d",
            "34a886f1f91573fc",
            "830637fbcb7ec1bd",
            "c4def6c29af1c95d",
            "14952d2a7782cba8",
            "066124d57fbb907f",
            "1f91269e8e062b61",
            "18ac97b7c4a2f6b4",
            "e1989aa130fcf7fa",
            "f042572825758948",
            "328368282a2df12d",
            "9f3d499b78d6688a",
            "ce57d6123654286a",
            "e9e3d0d0ef897ed5",
            "2d0e4fd78a0e7edf",
            "970ccad2654b34c1",
            "7a69672de5ef63dc",
            "1198aff12514253c",
            "880307044a34f772"
        ],
        "x": 1490,
        "y": 1680,
        "wires": [
            [
                "bfa541a4cf7363ca"
            ]
        ],
        "l": true
    },
    {
        "id": "fd8bde63ad7a06e0",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "To MQTT (SET7)",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetZ2HeatRequestTemperature\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 1240,
        "wires": [
            [
                "1fd1957c5272120a"
            ]
        ]
    },
    {
        "id": "1fd1957c5272120a",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link out 173",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 1985,
        "y": 1240,
        "wires": []
    },
    {
        "id": "9dc404968dc9524f",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "To MQTT (SET5)",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetZ1HeatRequestTemperature\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 1180,
        "wires": [
            [
                "5997b2d47d527ff5"
            ]
        ]
    },
    {
        "id": "5997b2d47d527ff5",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link out 176",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 1985,
        "y": 1180,
        "wires": []
    },
    {
        "id": "1fe8744be2aaf44e",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "To MQTT (SetCurves SET16)",
        "func": "msg.topic = \"panasonic_heat_pump/commands/SetCurves\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1820,
        "y": 1300,
        "wires": [
            [
                "8a3014ba808f0fa9"
            ]
        ]
    },
    {
        "id": "8a3014ba808f0fa9",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "link out 177",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 1985,
        "y": 1300,
        "wires": []
    },
    {
        "id": "392a86bd7fb5e647",
        "type": "link out",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "MQTT OUT >",
        "mode": "link",
        "links": [
            "8b3d729fe630c248"
        ],
        "x": 1140,
        "y": 1680,
        "wires": [],
        "l": true
    },
    {
        "id": "c4130c490114e90f",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8f85827475badab6",
        "name": "Compare SP z1 and z2",
        "func": "\n// Combined Compare SP z1 + z2 (aggregated)\n\n// Common guards\nvar Heatpump_State = global.get(\"TOP0_Heatpump_State\", \"file\");\nif (Heatpump_State === 0 || Heatpump_State === undefined) {\n    return null;\n}\n\nvar Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\");\nif (Operating_Mode === undefined ||\n    Operating_Mode === 1 || // Cool only\n    // Operating_Mode === 3, // DHW only\n    Operating_Mode === 5 || // Cool + DHW\n    Operating_Mode === 7 || // Auto (Cool)\n    Operating_Mode === 8) { // Auto (Cool) + DHW\n    return null;\n}\n\nvar TOP94_Zones_State   = global.get('TOP94_Zones_State', \"file\"); // 0=z1, 1=z2, 2=both\nvar TOP76_Heating_Mode  = global.get('TOP76_Heating_Mode', \"file\"); // 0=CC, 1=Direct\nif (TOP94_Zones_State   === undefined || TOP76_Heating_Mode === undefined) {\n    return null;\n}\n\n// ---- Read per-zone inputs ----\n// Z1\nvar SP_Final_z1                 = global.get('SP_Final_z1', \"file\");\nvar SHIFT_Final_z1              = global.get('SHIFT_Final_z1', \"file\");\nvar current_sp_z1               = global.get('TOP42_Z1_Water_Target_Temp', \"file\");\nvar TOP111_Z1_Sensor_Settings   = global.get('TOP111_Z1_Sensor_Settings', \"file\");\nvar war_wt1_z1                  = global.get('F_CCC.z1.wt1', \"file\");\nvar war_wt2_z1                  = global.get('F_CCC.z1.wt2', \"file\");\nvar F_CCC_SP_z1                 = global.get('F_CCC.z1.setpoint', \"file\");\nvar currentSP_z1                = global.get('TOP27_Z1_Heat_Request_Temp', \"file\");\n\n// Z2\nvar SP_Final_z2                 = global.get('SP_Final_z2', \"file\");\nvar SHIFT_Final_z2              = global.get('SHIFT_Final_z2', \"file\");\nvar current_sp_z2               = global.get('TOP43_Z2_Water_Target_Temp', \"file\");\nvar TOP112_Z2_Sensor_Settings   = global.get('TOP112_Z2_Sensor_Settings', \"file\");\nvar war_wt1_z2                  = global.get('F_CCC.z2.wt1', \"file\");\nvar war_wt2_z2                  = global.get('F_CCC.z2.wt2', \"file\");\nvar F_CCC_SP_z2                 = global.get('F_CCC.z2.setpoint', \"file\");\nvar currentSP_z2                = global.get('TOP34_Z2_Heat_Request_Temp', \"file\");\n\n// init SHIFT defaults\nif (isNaN(SHIFT_Final_z1) || SHIFT_Final_z1 === undefined) {\n    global.set('SHIFT_Final_z1', 0, \"file\");\n    SHIFT_Final_z1 = 0;\n}\nif (isNaN(SHIFT_Final_z2) || SHIFT_Final_z2 === undefined) {\n    global.set('SHIFT_Final_z2', 0, \"file\");\n    SHIFT_Final_z2 = 0;\n}\n\n// --- Decide per zone ---\nfunction decideZone1() {\n    if (TOP111_Z1_Sensor_Settings === undefined ||\n        TOP94_Zones_State === 1 || // only z2 active\n        SP_Final_z1 === undefined || isNaN(SP_Final_z1) ||\n        current_sp_z1 === undefined || isNaN(current_sp_z1)) {\n        return null;\n    }\n\n    var out = {\n        sendShift: false,\n        shiftValue: undefined,\n        set16: null\n    };\n\n    switch (TOP111_Z1_Sensor_Settings) {\n    case 0: // WATER\n        if (TOP76_Heating_Mode === 0) { // Compensation Curve via SET5\n            var desired = Math.ceil(Number(SHIFT_Final_z1));\n            var current = Number(currentSP_z1); // TOP27 for CC\n            if (!(Number(current) === desired)) {\n                out.sendShift = true;\n                out.shiftValue = desired;\n            }\n        }\n        if (TOP76_Heating_Mode === 1) { // Direct via SET16 ABS\n            var desiredH = Math.ceil(Number(SP_Final_z1));\n            var current = Number(current_sp_z1);\n            if (!(Number(current) === desiredH)) {\n                out.set16 = {\n                    zone1: {\n                        heat: {\n                            target: { high: desiredH }\n                        }\n                    }\n                };\n            }\n        }\n        break;\n\n    case 1: // Room Thermostat (External)\n    case 2: // Room Thermostat (Internal)\n    case 3: // Room Thermistor\n        if (TOP76_Heating_Mode === 0) { // CC via SET16 SHIFT (low+high)\n            if (F_CCC_SP_z1 === undefined || isNaN(F_CCC_SP_z1)) { /* skip */\n            } else if (Number(current_sp_z1) === Math.ceil(Number(F_CCC_SP_z1) + Number(SHIFT_Final_z1))) { /* skip */\n            } else {\n                if (war_wt2_z1 === undefined || war_wt1_z1 === undefined || SHIFT_Final_z1 === undefined) { /* skip */\n                } else if (isNaN(war_wt2_z1) || isNaN(war_wt1_z1) || isNaN(SHIFT_Final_z1)) { /* skip */\n                } else {\n                    out.set16 = {\n                        zone1: {\n                            heat: {\n                                target: {\n                                    high: Math.ceil(Number(war_wt2_z1) + Number(SHIFT_Final_z1)),\n                                    low:  Math.ceil(Number(war_wt1_z1) + Number(SHIFT_Final_z1))\n                                }\n                            }\n                        }\n                    };\n                }\n            }\n        }\n        if (TOP76_Heating_Mode === 1) { // Direct via SET16 ABS\n            var desiredH = Math.ceil(Number(SP_Final_z1));\n            var current = Number(current_sp_z1);\n            if (!(Number(current) === desiredH)) {\n                out.set16 = {\n                    zone1: {\n                        heat: { target: { high: desiredH } }\n                    }\n                };\n            }\n        }\n        break;\n    }\n    return out;\n}\n\nfunction decideZone2() {\n    if (TOP112_Z2_Sensor_Settings === undefined ||\n        TOP94_Zones_State === 0 || // only z1 active\n        SP_Final_z2 === undefined || isNaN(SP_Final_z2) ||\n        current_sp_z2 === undefined || isNaN(current_sp_z2)) {\n        return null;\n    }\n\n    var out = {\n        sendShift: false,\n        shiftValue: undefined,\n        set16: null\n    };\n\n    switch (TOP112_Z2_Sensor_Settings) {\n    case 0: // WATER\n        if (TOP76_Heating_Mode === 0) { // Compensation Curve via SET7\n            var desired = Math.ceil(Number(SHIFT_Final_z2));\n            var current = Number(currentSP_z2); // TOP34 for CC\n            if (!(Number(current) === desired)) {\n                out.sendShift = true;\n                out.shiftValue = desired;\n            }\n        }\n        if (TOP76_Heating_Mode === 1) { // Direct via SET16 ABS\n            var desiredH = Math.ceil(Number(SP_Final_z2));\n            var current = Number(current_sp_z2);\n            if (!(Number(current) === desiredH)) {\n                out.set16 = {\n                    zone2: {\n                        heat: { target: { high: desiredH } }\n                    }\n                };\n            }\n        }\n        break;\n\n    case 1: // Room Thermostat (External)\n    case 2: // Room Thermostat (Internal)\n    case 3: // Room Thermistor\n        if (TOP76_Heating_Mode === 0) { // CC via SET16 SHIFT (low+high)\n            if (F_CCC_SP_z2 === undefined || isNaN(F_CCC_SP_z2)) { /* skip */\n            } else if (Number(current_sp_z2) === Math.ceil(Number(F_CCC_SP_z2) + Number(SHIFT_Final_z2))) { /* skip */\n            } else {\n                if (war_wt2_z2 === undefined || war_wt1_z2 === undefined || SHIFT_Final_z2 === undefined) { /* skip */\n                } else if (isNaN(war_wt2_z2) || isNaN(war_wt1_z2) || isNaN(SHIFT_Final_z2)) { /* skip */\n                } else {\n                    out.set16 = {\n                        zone2: {\n                            heat: {\n                                target: {\n                                    high: Math.ceil(Number(war_wt2_z2) + Number(SHIFT_Final_z2)),\n                                    low:  Math.ceil(Number(war_wt1_z2) + Number(SHIFT_Final_z2))\n                                }\n                            }\n                        }\n                    };\n                }\n            }\n        }\n        if (TOP76_Heating_Mode === 1) { // Direct via SET16 ABS\n            var desiredH = Math.ceil(Number(SP_Final_z2));\n            var current = Number(current_sp_z2);\n            if (!(Number(current) === desiredH)) {\n                out.set16 = {\n                    zone2: {\n                        heat: { target: { high: desiredH } }\n                    }\n                };\n            }\n        }\n        break;\n    }\n    return out;\n}\n\nvar z1 = decideZone1();\nvar z2 = decideZone2();\n\n// --- Aggregate SET16 payload when both (or one) changed ---\nvar setCurvesPayload = {};\nif (z1 && z1.set16) Object.assign(setCurvesPayload, z1.set16);\nif (z2 && z2.set16) Object.assign(setCurvesPayload, z2.set16);\nvar hasSetCurves = Object.keys(setCurvesPayload).length > 0;\n\n// --- Prepare payload-only messages with de-dupe ---\n// Output pins:\n//  [0] Z1 shift (number)\n//  [1] Z2 shift (number)\n//  [2] Aggregated SetCurves (object)\nvar outZ1 = [];\nvar outZ2 = [];\nvar outCurves = [];\n\n// de-dupe per-zone shift\nif (z1 && z1.sendShift && z1.shiftValue !== undefined) {\n    var last_z1_shift = context.get('last_z1_shift');\n    if (last_z1_shift !== z1.shiftValue) {\n        context.set('last_z1_shift', z1.shiftValue);\n        outZ1.push({ payload: z1.shiftValue });\n    }\n}\nif (z2 && z2.sendShift && z2.shiftValue !== undefined) {\n    var last_z2_shift = context.get('last_z2_shift');\n    if (last_z2_shift !== z2.shiftValue) {\n        context.set('last_z2_shift', z2.shiftValue);\n        outZ2.push({ payload: z2.shiftValue });\n    }\n}\n\n// de-dupe aggregated SetCurves via JSON\nif (hasSetCurves) {\n    var payloadStr = JSON.stringify(setCurvesPayload);\n    var last_setcurves = context.get('last_setcurves');\n    if (last_setcurves !== payloadStr) {\n        context.set('last_setcurves', payloadStr);\n        outCurves.push({ payload: setCurvesPayload });\n    }\n}\n\n// Nothing to send\nif (outZ1.length === 0 && outZ2.length === 0 && outCurves.length === 0) return null;\n\n// Emit on 3 outputs\nreturn [outZ1, outZ2, outCurves];\n",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1240,
        "wires": [
            [
                "1b409e1ea72f94dd"
            ],
            [
                "64dcf16c979d2a3a"
            ],
            [
                "d62a7aa18d066598"
            ]
        ],
        "outputLabels": [
            "Z1 shift (SET5)",
            "Z2 shift (SET7)",
            "Aggregated SetCurves (SET16)"
        ]
    },
    {
        "id": "04af9373e9f7a428",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "d": true,
        "g": "8f85827475badab6",
        "name": "Compare SP z1",
        "func": "var Heatpump_State              = global.get(\"TOP0_Heatpump_State\", \"file\");\nif (Heatpump_State === 0 || Heatpump_State === undefined) { return null; /*msg.payload = 99; return [msg, msg];*/ }\n\nvar SP_Final_z1                 = global.get('SP_Final_z1', \"file\");\nvar SHIFT_Final_z1              = global.get('SHIFT_Final_z1', \"file\");\nvar current_sp                  = global.get('TOP42_Z1_Water_Target_Temp', \"file\");\nvar Operating_Mode              = global.get('TOP4_Operating_Mode_State', \"file\")\nvar TOP111_Z1_Sensor_Settings   = global.get('TOP111_Z1_Sensor_Settings', \"file\");\nvar TOP94_Zones_State           = global.get('TOP94_Zones_State', \"file\")\nvar TOP76_Heating_Mode          = global.get('TOP76_Heating_Mode', \"file\");\n\n//*****************************************************************************\nif (isNaN(SHIFT_Final_z1) || SHIFT_Final_z1 === undefined) { global.set('SHIFT_Final_z1', 0, \"file\"); SHIFT_Final_z1 = 0; }\n\nif (\n    TOP111_Z1_Sensor_Settings   === undefined ||\n    TOP76_Heating_Mode          === undefined ||\n    TOP94_Zones_State           === undefined ||\n    TOP94_Zones_State           === 1 ||            // 0 = zone 1; 1 = zone 2; 2 = zone 1 + 2\n    SP_Final_z1                 === undefined || isNaN(SP_Final_z1) ||\n    current_sp                  === undefined || isNaN(current_sp) ||\n    Operating_Mode              === undefined ||\n    Operating_Mode              === 1 ||            // 1 = Cool only\n    // Operating_Mode              === 3 ||            // 3 = DHW only\n    Operating_Mode              === 5 ||            // 5 = Cool + DHW\n    Operating_Mode              === 7 ||            // 7 = Auto (Cool)\n    Operating_Mode              === 8               // 8 = Auto (Cool) + DHW\n    ) {\n    return null\n}\n\n//*****************************************************************************\n\nvar msg1 = {};\nvar war_wt1         = global.get('F_CCC.z1.wt1', \"file\");\nvar war_wt2         = global.get('F_CCC.z1.wt2', \"file\");\nvar F_CCC_SP        = global.get('F_CCC.z1.setpoint', \"file\");\n\nswitch (TOP111_Z1_Sensor_Settings) {\n    case 0:   // WATER\n        if (TOP76_Heating_Mode === 0) { // Compensation Curve\n            current_sp = global.get('TOP27_Z1_Heat_Request_Temp');\n            if (Number(current_sp) === Math.ceil(Number(SHIFT_Final_z1))) { return null }\n            SET5_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {  // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z1))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n    case 1:   // Room Thermostat (External)\n    case 2:   // Room Thermostat (Internal)\n    case 3:   // Room Thermistor)\n        if (TOP76_Heating_Mode === 0) {  // Compensation Curve\n            if (F_CCC_SP === undefined || isNaN(F_CCC_SP)) { return null; }\n            if (Number(current_sp) === Math.ceil(Number(F_CCC_SP) + Number(SHIFT_Final_z1))) { return null }\n            SET16_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {   // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z1))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n}\n// pin 1 = to set5\n// pin 2 = to set16\n\n// FUNCTIONS /////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////////////////\n// shift CC curve manually via SET16\nfunction SET16_SHIFT() {\n    if (war_wt2 === undefined || war_wt1 === undefined || SHIFT_Final_z1 === undefined) { return null }\n\n    if (isNaN(war_wt2) || isNaN(war_wt1) || isNaN(SHIFT_Final_z1)) { return null }\n\n    msg1.destination = 'SET16';\n    msg1.payload = {\n        \"zone1\": {\n            \"heat\": {\n                \"target\": {\n                    \"high\": Math.ceil(war_wt2 + SHIFT_Final_z1),\n                    \"low\": Math.ceil(war_wt1 + SHIFT_Final_z1)\n                }\n            }\n        }\n    }\n    node.send([null, msg1]);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n// shift curve via SET5\nfunction SET5_SHIFT() {\n    if (SHIFT_Final_z1 === undefined) {return null;}\n\n    if (isNaN(SHIFT_Final_z1)) {\n        return null; \n    }\n\n    msg1.destination = 'SET5';\n    msg1.payload = Math.ceil(SHIFT_Final_z1);\n    node.send([msg1, null]);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\n// Set absolute watertemperature\nfunction SET16_ABS_WATER_TEMP() {\n    if (SP_Final_z1 === undefined) { return null; }\n\n    if (isNaN(SP_Final_z1)) {\n        return null;\n    }\n\n    msg1.destination = 'SET16';\n    msg1.payload = {\n        \"zone1\": {\n            \"heat\": {\n                \"target\": {\n                    \"high\": Math.ceil(SP_Final_z1)\n                }\n            }\n        }\n    }\n    node.send([null, msg1]);\n}",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1440,
        "wires": [
            [],
            [],
            []
        ],
        "outputLabels": [
            "set5",
            "set16",
            ""
        ]
    },
    {
        "id": "b310fd2d92895126",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "d": true,
        "g": "8f85827475badab6",
        "name": "Compare SP z2",
        "func": "var Heatpump_State = global.get(\"TOP0_Heatpump_State\", \"file\");\nif (Heatpump_State === 0 || Heatpump_State === undefined) { return null; /*msg.payload = 99; return [msg, msg];*/ }\n\nvar SP_Final_z2 = global.get('SP_Final_z2', \"file\");\nvar SHIFT_Final_z2 = global.get('SHIFT_Final_z2', \"file\");\nvar current_sp = global.get('TOP43_Z2_Water_Target_Temp', \"file\");\nvar Operating_Mode = global.get('TOP4_Operating_Mode_State', \"file\")\nvar TOP112_Z2_Sensor_Settings = global.get('TOP112_Z2_Sensor_Settings', \"file\");\nvar TOP94_Zones_State = global.get('TOP94_Zones_State', \"file\")\nvar TOP76_Heating_Mode = global.get('TOP76_Heating_Mode', \"file\");\n\n//*****************************************************************************\nif (isNaN(SHIFT_Final_z2) || SHIFT_Final_z2 === undefined) { global.set('SHIFT_Final_z2', 0, \"file\"); SHIFT_Final_z2 = 0; }\n\nif (\n    TOP112_Z2_Sensor_Settings === undefined ||\n    TOP76_Heating_Mode === undefined ||\n    TOP94_Zones_State === undefined ||\n    TOP94_Zones_State === 0 ||            // 0 = zone 1; 1 = zone 2; 2 = zone 1 + 2\n    SP_Final_z2 === undefined || isNaN(SP_Final_z2) ||\n    current_sp === undefined || isNaN(current_sp) ||\n    Operating_Mode === undefined ||\n    Operating_Mode === 1 ||            // 1 = Cool only\n    // Operating_Mode              === 3 ||            // 3 = DHW only\n    Operating_Mode === 5 ||            // 5 = Cool + DHW\n    Operating_Mode === 7 ||            // 7 = Auto (Cool)\n    Operating_Mode === 8               // 8 = Auto (Cool) + DHW\n) {\n    return null\n}\n\n//*****************************************************************************\n\nvar msg1 = {};\nvar war_wt1 = global.get('F_CCC.z2.wt1', \"file\");\nvar war_wt2 = global.get('F_CCC.z2.wt2', \"file\");\nvar F_CCC_SP = global.get('F_CCC.z2.setpoint', \"file\");\n\nswitch (TOP112_Z2_Sensor_Settings) {\n    case 0:   // WATER\n        if (TOP76_Heating_Mode === 0) { // Compensation Curve\n            current_sp = global.get('TOP34_Z2_Heat_Request_Temp');\n            if (Number(current_sp) === Math.ceil(Number(SHIFT_Final_z2))) { return null }\n            SET7_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {  // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z2))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n    case 1:   // Room Thermostat (External)\n    case 2:   // Room Thermostat (Internal)\n    case 3:   // Room Thermistor)\n        if (TOP76_Heating_Mode === 0) {  // Compensation Curve\n            if (F_CCC_SP === undefined || isNaN(F_CCC_SP)) { return null; }\n            if (Number(current_sp) === Math.ceil(Number(F_CCC_SP) + Number(SHIFT_Final_z2))) { return null }\n            SET16_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {   // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z2))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n}\n// pin 1 = to set7\n// pin 2 = to set16\n\n// FUNCTIONS /////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////////////////\n// shift CC curve manually via SET16\nfunction SET16_SHIFT() {\n    if (war_wt2 === undefined || war_wt1 === undefined || SHIFT_Final_z2 === undefined) { return null }\n\n    if (isNaN(war_wt2) || isNaN(war_wt1) || isNaN(SHIFT_Final_z2)) { return null }\n\n    msg1.destination = 'SET16';\n    msg1.payload = {\n        \"zone2\": {\n            \"heat\": {\n                \"target\": {\n                    \"high\": Math.ceil(war_wt2 + SHIFT_Final_z2),\n                    \"low\": Math.ceil(war_wt1 + SHIFT_Final_z2)\n                }\n            }\n        }\n    }\n    node.send([null, msg1]);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n// shift curve via SET7\nfunction SET7_SHIFT() {\n    if (SHIFT_Final_z2 === undefined) { return null; }\n\n    if (isNaN(SHIFT_Final_z2)) {\n        return null;\n    }\n\n    msg1.destination = 'SET7';\n    msg1.payload = Math.ceil(SHIFT_Final_z2);\n    node.send([msg1, null]);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\n// Set absolute watertemperature\nfunction SET16_ABS_WATER_TEMP() {\n    if (SP_Final_z2 === undefined) { return null; }\n\n    if (isNaN(SP_Final_z2)) {\n        return null;\n    }\n\n    msg1.destination = 'SET16';\n    msg1.payload = {\n        \"zone2\": {\n            \"heat\": {\n                \"target\": {\n                    \"high\": Math.ceil(SP_Final_z2)\n                }\n            }\n        }\n    }\n    node.send([null, msg1]);\n}\n\n/*\nvar Heatpump_State = global.get(\"TOP0_Heatpump_State\", \"file\");\n    if (Heatpump_State == 0 || Heatpump_State === undefined) { return null }\n\nvar SP_Final_z2                 = (global.get('SP_Final_z2', \"file\"));\nvar SHIFT_Final_z2              = global.get('SHIFT_Final_z2', \"file\");\nvar current_sp                  = global.get('TOP43_Z2_Water_Target_Temp', \"file\");\nvar Operating_Mode              = global.get('TOP4_Operating_Mode_State', \"file\")\nvar TOP112_Z2_Sensor_Settings   = global.get('TOP112_Z2_Sensor_Settings', \"file\");\nvar TOP94_Zones_State           = global.get('TOP94_Zones_State', \"file\")\nvar TOP76_Heating_Mode          = global.get('TOP76_Heating_Mode', \"file\");\n\n//*****************************************************************************\nif (isNaN(SHIFT_Final_z2)) { global.set('SHIFT_Final_z2', 0, \"file\"); SHIFT_Final_z2 = 0; }\n\nif (\n    TOP112_Z2_Sensor_Settings   === undefined ||\n    TOP76_Heating_Mode          === undefined ||\n    TOP94_Zones_State           === undefined ||\n    TOP94_Zones_State           === 0 ||            // 0 = zone 1; 1 = zone 2; 2 = zone 1 + 2\n    SP_Final_z2                 === undefined ||\n    current_sp                  === undefined ||\n    Operating_Mode              === undefined ||\n    Operating_Mode              === 1 ||            // 1 = Cool only\n    // Operating_Mode              === 3 ||            // 3 = DHW only\n    Operating_Mode              === 5 ||            // 5 = Cool + DHW\n    Operating_Mode              === 7 ||            // 7 = Auto (Cool)\n    Operating_Mode              === 8               // 8 = Auto (Cool) + DHW\n    ) {\n    return null\n}\n\n//*****************************************************************************\n\nvar msg1 = {};\nvar war_wt2         = global.get('F_CCC.z2.wt2', \"file\");\nvar war_wt1         = global.get('F_CCC.z2.wt1', \"file\");\nvar F_CCC_SP        = global.get('F_CCC.z2.setpoint', \"file\");\n\nswitch (TOP112_Z2_Sensor_Settings) {\n    case 0:   // WATER\n        if (TOP76_Heating_Mode === 0) { // Compensation Curve\n            current_sp = global.get('TOP34_Z2_Heat_Request_Temp');\n            if (Number(current_sp) === Math.ceil(Number(SHIFT_Final_z2))) { return null }\n            SET7_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {  // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z2))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n    case 1:   // Room Thermostat (External)\n        if (TOP76_Heating_Mode === 0) {  // Compensation Curve\n            if (Number(current_sp) === Math.ceil(Number(F_CCC_SP) + Number(SHIFT_Final_z2))) { return null }\n            SET16_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {   // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z2))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n    case 2:   // Room Thermostat (Internal)\n        if (TOP76_Heating_Mode === 0) {  // Compensation Curve\n            if (Number(current_sp) === Math.ceil(Number(F_CCC_SP) + Number(SHIFT_Final_z2))) { return null }\n            SET16_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {   // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z2))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n    case 3:   // Room Thermistor)\n        if (TOP76_Heating_Mode === 0) {  // Compensation Curve\n            if (Number(current_sp) === Math.ceil(Number(F_CCC_SP) + Number(SHIFT_Final_z2))) { return null }\n            SET16_SHIFT();\n        }\n        if (TOP76_Heating_Mode === 1) {   // Direct\n            if (Number(current_sp) === Math.ceil(Number(SP_Final_z2))) { return null }\n            SET16_ABS_WATER_TEMP();\n        }\n        break;\n\n}\n// pin 1 = to set7\n// pin 2 = to set16\n\n// FUNCTIONS /////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////////////////\n// shift CC curve manually via SET16\nfunction SET16_SHIFT() {\n    if (war_wt2 === undefined || war_wt1 === undefined || SHIFT_Final_z2 === undefined) { return null }\n\n    if (isNaN(war_wt2) || isNaN(war_wt1) || isNaN(SHIFT_Final_z2)) { return null }\n\n    msg1.destination = 'SET16';\n    msg1.payload = {\n        \"zone2\": {\n            \"heat\": {\n                \"target\": {\n                    \"high\": Math.ceil(war_wt2 + SHIFT_Final_z2),\n                    \"low\": Math.ceil(war_wt1 + SHIFT_Final_z2)\n                }\n            }\n        }\n    }\n    node.send([null, msg1]);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n// shift curve via SET7\nfunction SET7_SHIFT() {\n    if (SHIFT_Final_z2 === undefined) { return null }\n\n    if (isNaN(SHIFT_Final_z2)) {\n        return null\n    }\n\n    msg1.destination = 'SET7';\n    msg1.payload = Math.ceil(SHIFT_Final_z2);\n    node.send([msg1, null]);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\n// Set absolute watertemperature\nfunction SET16_ABS_WATER_TEMP() {\n    if (SP_Final_z2 === undefined) { return null; }\n\n    if (isNaN(SP_Final_z2)) {\n        return null\n    }\n\n    msg1.destination = 'SET16';\n    msg1.payload = {\n        \"zone2\": {\n            \"heat\": {\n                \"target\": {\n                    \"high\": Math.ceil(SP_Final_z2)\n                }\n            }\n        }\n    }\n    node.send([null, msg1]);\n}\n*/",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 1500,
        "wires": [
            [],
            [],
            []
        ],
        "outputLabels": [
            "set5",
            "set16",
            ""
        ]
    },
    {
        "id": "1e22e8620445f5a5",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "4b1078d2a87f8c64",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active === 1) {                                //  If Manual OFF has been detected...\n    \n////////////////////////////////////////////////////////////////////////////\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"All MQTT commands are blocked!\";\n    return [null, msg66];                                                   //  Block msg, and log it.\n}\n\nif (MQTT.block_active === 0) {\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', msg.source); }\n    return msg;\n}\n\n    \n  ",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1830,
        "y": 1680,
        "wires": [
            [
                "dece019c79a07993"
            ],
            []
        ]
    },
    {
        "id": "48d749cc0ca61d74",
        "type": "function",
        "z": "43c4ee3ee4757f3c",
        "g": "8d3961fae227e0f6",
        "name": "FW",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 385,
        "y": 1740,
        "wires": [
            [
                "83b59586288340a2",
                "c7a7be892c1747ec"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "ed155b604642d354",
        "type": "tab",
        "label": "WP Degreedays",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1c223a510a8ec72d",
        "type": "group",
        "z": "ed155b604642d354",
        "name": "Combined bar-chart",
        "style": {
            "label": true
        },
        "nodes": [
            "757d35eee93ec9e7",
            "2391637fadbbf190",
            "6472e1e423188a37",
            "41e8d01708c19225",
            "3ce36bc606018d50",
            "681a0775921a043e",
            "b2548a4bf37f2567",
            "6bb3b71758d24fd0",
            "42fb2dc4dec11e93",
            "fc68ffd1a284a6bd",
            "e598f3cca51f28d1",
            "898b02a132291b49"
        ],
        "x": 54,
        "y": 1119,
        "w": 1388,
        "h": 602
    },
    {
        "id": "6a01f1b80ccf3218",
        "type": "group",
        "z": "ed155b604642d354",
        "name": "Source information",
        "style": {
            "label": true
        },
        "nodes": [
            "fdb9e1be23998039",
            "bddac0d27a1343a8",
            "0c9b408b44a185a3",
            "a09512145dbf8d8a",
            "2064b5a11ffc43b3"
        ],
        "x": 54,
        "y": 39,
        "w": 832,
        "h": 122
    },
    {
        "id": "2b75a55bb8fb12c6",
        "type": "group",
        "z": "ed155b604642d354",
        "name": "W to kWh usage conversion [HEAT]",
        "style": {
            "label": true
        },
        "nodes": [
            "6a7fa8b57f2d9800",
            "5792c915eb0eb380",
            "974b24f717fe8560"
        ],
        "x": 64,
        "y": 199,
        "w": 872,
        "h": 82
    },
    {
        "id": "5ffcc1056a276bf5",
        "type": "group",
        "z": "ed155b604642d354",
        "name": "Combined bar-chart",
        "style": {
            "label": true
        },
        "nodes": [
            "10a3251239b22cd4",
            "b44fca625044b56c",
            "6db1485dd36081ec",
            "a9584fa0cadac44b",
            "5b9db86809583efd",
            "c0f559e2c7905a0e",
            "3a9d746ecf027578",
            "5f7678f15c215dc9",
            "16b0fcf56b6d17f8",
            "d734c640b789ff1e",
            "d44f1a1993a8a44f",
            "e68356272f1f529b"
        ],
        "x": 54,
        "y": 439,
        "w": 1388,
        "h": 622
    },
    {
        "id": "27d590581cd92df1",
        "type": "group",
        "z": "ed155b604642d354",
        "name": "W to kWh usage conversion [DHW]",
        "style": {
            "label": true
        },
        "nodes": [
            "05c67c5f7508a04d",
            "cd16de04c8fa639a",
            "2cc9fde214b13621"
        ],
        "x": 54,
        "y": 299,
        "w": 872,
        "h": 82
    },
    {
        "id": "6472e1e423188a37",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Bucket 2 - Degree days calculation",
        "style": {
            "fill": "#00876C",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "cff31036dc296d8d",
            "7629b6d3d87712ff",
            "e9d6a960b09e05b8",
            "3043e3c17ff68920"
        ],
        "x": 84,
        "y": 1439,
        "w": 1332,
        "h": 82
    },
    {
        "id": "3ce36bc606018d50",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Bucket 1 - kWh calculation",
        "style": {
            "fill": "#F59B56",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "550d61dd1ac867d3",
            "41bc927c7f5116b1",
            "dc13db3939bf2d7f",
            "61e1918ce41f34f7"
        ],
        "x": 84,
        "y": 1339,
        "w": 1332,
        "h": 82
    },
    {
        "id": "6db1485dd36081ec",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Bucket 2 - Degree days calculation",
        "style": {
            "fill": "#00876C",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "d64accce0bd0c291",
            "7887aff049a582de",
            "95923454c02c9c72",
            "29a4cb237663e973"
        ],
        "x": 84,
        "y": 779,
        "w": 1332,
        "h": 82
    },
    {
        "id": "5b9db86809583efd",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Bucket 1 - kWh calculation HEAT",
        "style": {
            "fill": "#F59B56",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "9a88d9c8f4a6c2a5",
            "38893966085dd228",
            "6988051cc52f2c86",
            "0ae4268d42429bac"
        ],
        "x": 84,
        "y": 679,
        "w": 1332,
        "h": 82
    },
    {
        "id": "d734c640b789ff1e",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Bucket 2 - kWh calculation DHW",
        "style": {
            "fill": "#DE425B",
            "label": true,
            "fill-opacity": "0.5"
        },
        "nodes": [
            "65322aec4f8fd58e",
            "018e987e0d4672b6",
            "91840e451e332fa6",
            "935535fc205e470c"
        ],
        "x": 84,
        "y": 579,
        "w": 1322,
        "h": 82
    },
    {
        "id": "fc68ffd1a284a6bd",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "",
        "style": {
            "fill": "#DE425B",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "e800de9b472a5516",
            "1073d8f9d7a572a1",
            "e8a39538d051ed80",
            "868b4c6128111bb6"
        ],
        "x": 84,
        "y": 1239,
        "w": 1332,
        "h": 82
    },
    {
        "id": "d44f1a1993a8a44f",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "2ee679408e4ccc6f"
        ],
        "x": 1134,
        "y": 919,
        "w": 272,
        "h": 82
    },
    {
        "id": "e598f3cca51f28d1",
        "type": "group",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "4eaa2cfa2749c551"
        ],
        "x": 1134,
        "y": 1579,
        "w": 272,
        "h": 82
    },
    {
        "id": "6a7fa8b57f2d9800",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "2b75a55bb8fb12c6",
        "name": "",
        "links": [
            "9de1bde370b68508"
        ],
        "x": 105,
        "y": 240,
        "wires": [
            [
                "5792c915eb0eb380"
            ]
        ]
    },
    {
        "id": "5792c915eb0eb380",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "2b75a55bb8fb12c6",
        "name": "Energy_Consumption_HEAT_kWh",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\n\nvar CurrentTime = new Date().getTime();\nvar PreviousTime = context.get(\"PreviousTime\");\nvar PreviousMessage = context.get(\"PreviousMessage\");\nvar PreviousTopic = context.get(\"PreviousTopic\");\nvar exit;\n\n    var LastMessage = msg.payload;\n    var LastTopic= msg.topic;\n    \n    if (PreviousTime === undefined) \n        {\n            context.set('PreviousTime',CurrentTime);\n            exit = true;\n        }\n        \n    else if (PreviousMessage === undefined) \n        {\n            context.set('PreviousMessage',msg.payload);\n            exit = true;\n        }\n    else if (PreviousTopic === undefined) \n        {\n            context.set('PreviousTopic',msg.topic);\n            exit = true;\n        }\n    \n    else {\n                \n            var TimeElapsed = ((CurrentTime - PreviousTime)/1000);\n            context.set('PreviousTime',CurrentTime);\n            context.set('PreviousMessage',msg.payload);\n            context.set('PreviousTopic',msg.topic);\n            msg3.last = {\"lastTime\":CurrentTime,\"LastMessage\":LastMessage,\"LastTopic\":LastTopic};\n            msg3.Previous = {\"PreviousTime\":PreviousTime,\"PreviousMessage\":PreviousMessage,\"PreviousTopic\":PreviousTopic};\n            \n            \n            msg1.payload = (TimeElapsed + \"  Seconds\");\n            var temp = parseFloat(TimeElapsed.toFixed(0));\n            msg2.payload = temp;\n            msg3.payload = {\"Count\":temp,\"Units\":\"Seconds\"}; \n            msg5.payload = (PreviousMessage * ( temp / 3600000 ));   //  Calculation to Wh portion\n            Number(msg5.payload).toFixed(4);\n            msg5.topic = 'Energy_Consumption_HEAT_kWh';\n       }\n    if (exit === true)\n        {return null;}\n    else     \n        {return msg5;}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 240,
        "wires": [
            [
                "974b24f717fe8560"
            ]
        ],
        "outputLabels": [
            "Energy_Consumption_HEAT_kWh"
        ],
        "icon": "node-red/timer.png"
    },
    {
        "id": "cff31036dc296d8d",
        "type": "bar-chart-data",
        "z": "ed155b604642d354",
        "g": "6472e1e423188a37",
        "name": "bar-chart-data degreedays-31d",
        "x_interval": "days",
        "x_size": "31",
        "unit": "",
        "precision": "2",
        "is_meter_reading": "False",
        "agg_by": "avg",
        "x": 850,
        "y": 1480,
        "wires": [
            [
                "e9d6a960b09e05b8"
            ]
        ]
    },
    {
        "id": "41bc927c7f5116b1",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "3ce36bc606018d50",
        "name": "Store information to kwh_HEAT_31d",
        "func": "var myArray4 = msg;\nglobal.set(\"kwh_HEAT_31d\", myArray4,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 1380,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "757d35eee93ec9e7",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Once per 15minutes",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "trigger",
        "x": 220,
        "y": 1620,
        "wires": [
            [
                "2391637fadbbf190"
            ]
        ]
    },
    {
        "id": "2391637fadbbf190",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Function - bucket 1 + 2 +3 combined",
        "func": "var myArray1 = global.get(\"kwh_HEAT_31d\",\"file\");\nvar myArray2 = global.get(\"degreedays_31d\",\"file\");\nvar myArray3 = global.get(\"kwh_DHW_31d\",\"file\");\nif (myArray1 === undefined || myArray2 === undefined || myArray3 === undefined)\n    {\n        return null;\n}\n\nelse {\n        let msg1={}, msg2={}, msg3={};\n        \n        msg1 = myArray1;\n        msg2 = myArray2;\n        msg3 = myArray3;\n        \n        var varlabels           = msg1.payload[0].labels;\n        var varkwh_heat_data    = msg1.payload[0].data[0];\n        var vargraaddagen_data  = msg2.payload[0].data[0];\n        var varkwh_dhw_data     = msg3.payload[0].data[0];\n        \n        var m={};\n            m.labels    = varlabels;\n            m.series    = ['DegreeDays (°C)', 'Energy consumption HEAT (kWh)', 'Energy consumption DHW (kWh)'];\n            m.data      = [vargraaddagen_data, varkwh_heat_data, varkwh_dhw_data];\n        \n        return {payload:[m]};\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1620,
        "wires": [
            [
                "4eaa2cfa2749c551"
            ]
        ],
        "outputLabels": [
            "graaddagen_calc"
        ]
    },
    {
        "id": "7629b6d3d87712ff",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "6472e1e423188a37",
        "name": "",
        "links": [
            "2064b5a11ffc43b3"
        ],
        "x": 125,
        "y": 1480,
        "wires": [
            [
                "3043e3c17ff68920"
            ]
        ]
    },
    {
        "id": "e9d6a960b09e05b8",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "6472e1e423188a37",
        "name": "Store information to degreedays_31d",
        "func": "var myArray5 = msg;\nglobal.set(\"degreedays_31d\", myArray5,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 1480,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "fdb9e1be23998039",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "6a01f1b80ccf3218",
        "name": "Interval 5m",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "bddac0d27a1343a8",
                "0c9b408b44a185a3"
            ]
        ]
    },
    {
        "id": "bddac0d27a1343a8",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "6a01f1b80ccf3218",
        "name": "T_outside",
        "func": "///////////////////////////// MSG = T_outside //////////////////////////////////\n\nvar T_outside = global.get('T_outside',\"file\");\nif (T_outside === undefined) { return null; }\n    \nelse {\n        msg.payload = T_outside;\n        msg.topic = 'T_outside';\n        Number(msg.payload).toFixed(1);\n        return msg;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 80,
        "wires": [
            [
                "a09512145dbf8d8a"
            ]
        ],
        "outputLabels": [
            "T_outside"
        ]
    },
    {
        "id": "0c9b408b44a185a3",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "6a01f1b80ccf3218",
        "name": "graaddagen_calc",
        "func": "/////\n\n///////////////////////////// Calculate T_outside //////////////////////////////\n\n\nvar T_outside = global.get('T_outside',\"file\");\nif (T_outside === undefined)\n    {   \n        return null;\n    }\n    \nelse\n    {\n        \n////\n\n///////////////////////////// MSG = graaddagen_calc ////////////////////////////\n\n        let msg1={};\n\n        var graaddagen_calc = 18 - T_outside;\n        \n        if (graaddagen_calc < 0)    {graaddagen_calc = 0;}\n                \n        msg1.topic = 'graaddagen_calc';\n        msg1.payload = graaddagen_calc;\n        Number(msg1.payload).toFixed(1);\n        \n        global.set(\"graaddagen_calc\", msg1.payload, \"file\");\n\n        return msg1;\n    }\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 120,
        "wires": [
            [
                "2064b5a11ffc43b3"
            ]
        ],
        "outputLabels": [
            "graaddagen_calc"
        ]
    },
    {
        "id": "a09512145dbf8d8a",
        "type": "link out",
        "z": "ed155b604642d354",
        "g": "6a01f1b80ccf3218",
        "name": "T_outside",
        "mode": "link",
        "links": [],
        "x": 845,
        "y": 80,
        "wires": []
    },
    {
        "id": "2064b5a11ffc43b3",
        "type": "link out",
        "z": "ed155b604642d354",
        "g": "6a01f1b80ccf3218",
        "name": "graaddagen_calc",
        "mode": "link",
        "links": [
            "7629b6d3d87712ff",
            "7887aff049a582de"
        ],
        "x": 845,
        "y": 120,
        "wires": []
    },
    {
        "id": "6bb3b71758d24fd0",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 170,
        "y": 1680,
        "wires": [
            [
                "4eaa2cfa2749c551"
            ]
        ]
    },
    {
        "id": "41e8d01708c19225",
        "type": "comment",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Bucket 1 + 2 + 3 combined to chart",
        "info": "",
        "x": 240,
        "y": 1580,
        "wires": []
    },
    {
        "id": "550d61dd1ac867d3",
        "type": "bar-chart-data",
        "z": "ed155b604642d354",
        "g": "3ce36bc606018d50",
        "name": "bar-chart HEAT kwh-31d",
        "x_interval": "days",
        "x_size": "31",
        "unit": "",
        "precision": "3",
        "is_meter_reading": "False",
        "agg_by": "sum",
        "x": 830,
        "y": 1380,
        "wires": [
            [
                "41bc927c7f5116b1"
            ]
        ]
    },
    {
        "id": "4eaa2cfa2749c551",
        "type": "ui_chart",
        "z": "ed155b604642d354",
        "g": "e598f3cca51f28d1",
        "name": "kWh + Degree Days (31d)",
        "group": "87be08e6a82ef6a0",
        "order": 5,
        "width": 26,
        "height": 8,
        "label": "Last 31 days",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00876c",
            "#de425b",
            "#f59b56",
            "#fff18f",
            "#89bf77",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1270,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "681a0775921a043e",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Load bar-chart data",
        "func": "var myArray1 = global.get(\"kwh_HEAT_31d\",\"file\");\nvar myArray2 = global.get(\"degreedays_31d\",\"file\");\nvar myArray3 = global.get(\"kwh_DHW_31d\",\"file\");\n\nlet msg1={}, msg2={}, msg3={};\nmsg1 = myArray1;\nmsg2 = myArray2;\nmsg3 = myArray3;\n\nreturn [msg1,msg2,msg3];",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 1200,
        "wires": [
            [
                "550d61dd1ac867d3"
            ],
            [
                "cff31036dc296d8d"
            ],
            [
                "1073d8f9d7a572a1"
            ]
        ],
        "outputLabels": [
            "kwh_HEAT_31d",
            "degreedays_31d",
            "kwh_DHW_31d"
        ]
    },
    {
        "id": "b2548a4bf37f2567",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "Restore after boot",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "trigger",
        "x": 190,
        "y": 1200,
        "wires": [
            [
                "681a0775921a043e"
            ]
        ]
    },
    {
        "id": "3cfa3ed4419f2936",
        "type": "inject",
        "z": "ed155b604642d354",
        "name": "clear",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "clear",
        "payloadType": "str",
        "x": 1250,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "974b24f717fe8560",
        "type": "link out",
        "z": "ed155b604642d354",
        "g": "2b75a55bb8fb12c6",
        "name": "kWh HEAT value (live)",
        "mode": "link",
        "links": [
            "6988051cc52f2c86",
            "dc13db3939bf2d7f"
        ],
        "x": 810,
        "y": 240,
        "wires": [],
        "inputLabels": [
            "kWh value (live)"
        ],
        "l": true
    },
    {
        "id": "dc13db3939bf2d7f",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "3ce36bc606018d50",
        "name": "",
        "links": [
            "974b24f717fe8560"
        ],
        "x": 125,
        "y": 1380,
        "wires": [
            [
                "61e1918ce41f34f7"
            ]
        ]
    },
    {
        "id": "61e1918ce41f34f7",
        "type": "delay",
        "z": "ed155b604642d354",
        "g": "3ce36bc606018d50",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 1380,
        "wires": [
            [
                "550d61dd1ac867d3"
            ]
        ]
    },
    {
        "id": "3043e3c17ff68920",
        "type": "delay",
        "z": "ed155b604642d354",
        "g": "6472e1e423188a37",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 1480,
        "wires": [
            [
                "cff31036dc296d8d"
            ]
        ]
    },
    {
        "id": "10a3251239b22cd4",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Once per 5minutes",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "trigger",
        "x": 220,
        "y": 960,
        "wires": [
            [
                "b44fca625044b56c"
            ]
        ]
    },
    {
        "id": "b44fca625044b56c",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Function - bucket 1 + 2 + 3 combined",
        "func": "var myArray3 = global.get(\"kwh_HEAT_24h\",\"file\");\nvar myArray4 = global.get(\"degreedays_24h\",\"file\");\nvar myArray1 = global.get(\"kwh_DHW_24h\",\"file\");\nif (myArray3 === undefined || myArray4 === undefined || myArray1 === undefined)\n    {\n        return null;\n    }\n        \nelse\n    {\n        let msg1={}, msg2={}, msg3={};\n        msg1 = myArray3;\n        msg2 = myArray4;\n        msg3 = myArray1;\n        \n        var varlabels = msg1.payload[0].labels;\n        var varkwh_data_heat        = msg1.payload[0].data[0];\n        var varkwh_data_dhw         = msg3.payload[0].data[0];\n        var vargraaddagen_data      = msg2.payload[0].data[0];\n        var m={};\n            m.labels    = varlabels;\n            m.series    = ['DegreeDays (°C)', 'Energy consumption HEAT (kWh)',  'Energy consumption DHW (kWh)'];\n            m.data      = [vargraaddagen_data, varkwh_data_heat, varkwh_data_dhw];\n        \n        return {payload:[m]};\n    }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 960,
        "wires": [
            [
                "2ee679408e4ccc6f"
            ]
        ],
        "outputLabels": [
            "graaddagen_calc"
        ]
    },
    {
        "id": "d64accce0bd0c291",
        "type": "bar-chart-data",
        "z": "ed155b604642d354",
        "g": "6db1485dd36081ec",
        "name": "bar-chart-data degreedays-24h",
        "x_interval": "hours",
        "x_size": "24",
        "unit": "",
        "precision": "2",
        "is_meter_reading": "False",
        "agg_by": "avg",
        "x": 850,
        "y": 820,
        "wires": [
            [
                "95923454c02c9c72"
            ]
        ]
    },
    {
        "id": "7887aff049a582de",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "6db1485dd36081ec",
        "name": "",
        "links": [
            "2064b5a11ffc43b3"
        ],
        "x": 125,
        "y": 820,
        "wires": [
            [
                "29a4cb237663e973"
            ]
        ]
    },
    {
        "id": "95923454c02c9c72",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "6db1485dd36081ec",
        "name": "Store information to degreedays_24h",
        "func": "var myArray5 = msg;\nglobal.set(\"degreedays_24h\", myArray5,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 820,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "29a4cb237663e973",
        "type": "delay",
        "z": "ed155b604642d354",
        "g": "6db1485dd36081ec",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 820,
        "wires": [
            [
                "d64accce0bd0c291"
            ]
        ]
    },
    {
        "id": "a9584fa0cadac44b",
        "type": "comment",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Bucket 1 + 2 + 3 combined to chart",
        "info": "",
        "x": 240,
        "y": 920,
        "wires": []
    },
    {
        "id": "2ee679408e4ccc6f",
        "type": "ui_chart",
        "z": "ed155b604642d354",
        "g": "d44f1a1993a8a44f",
        "name": "kWh + Degree Days (24h)",
        "group": "87be08e6a82ef6a0",
        "order": 7,
        "width": 26,
        "height": 8,
        "label": "Last 24 hours",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00876c",
            "#de425b",
            "#f59b56",
            "#fff18f",
            "#89bf77",
            "#ffa056",
            "#8dddd0",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1270,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "9a88d9c8f4a6c2a5",
        "type": "bar-chart-data",
        "z": "ed155b604642d354",
        "g": "5b9db86809583efd",
        "name": "bar-chart HEAT kwh-24h",
        "x_interval": "hours",
        "x_size": "24",
        "unit": "",
        "precision": "3",
        "is_meter_reading": "False",
        "agg_by": "sum",
        "x": 830,
        "y": 720,
        "wires": [
            [
                "38893966085dd228"
            ]
        ]
    },
    {
        "id": "38893966085dd228",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "5b9db86809583efd",
        "name": "Store information to kwh_HEAT_24h",
        "func": "var myArray4 = msg;\nglobal.set(\"kwh_HEAT_24h\", myArray4,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 720,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "6988051cc52f2c86",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "5b9db86809583efd",
        "name": "",
        "links": [
            "974b24f717fe8560"
        ],
        "x": 125,
        "y": 720,
        "wires": [
            [
                "0ae4268d42429bac"
            ]
        ]
    },
    {
        "id": "0ae4268d42429bac",
        "type": "delay",
        "z": "ed155b604642d354",
        "g": "5b9db86809583efd",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 720,
        "wires": [
            [
                "9a88d9c8f4a6c2a5"
            ]
        ]
    },
    {
        "id": "c0f559e2c7905a0e",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Load bar-chart data",
        "func": "var myArray3 = global.get(\"kwh_HEAT_24h\",\"file\");\nvar myArray4 = global.get(\"degreedays_24h\",\"file\");\nvar myArray1 = global.get(\"kwh_DHW_24h\",\"file\");\n\nlet msg1={}, msg2={}, msg3={};\nmsg1 = myArray3;\nmsg2 = myArray4;\nmsg3 = myArray1;\n\nreturn [msg1,msg2,msg3];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 520,
        "wires": [
            [
                "9a88d9c8f4a6c2a5"
            ],
            [
                "d64accce0bd0c291"
            ],
            [
                "91840e451e332fa6"
            ]
        ],
        "outputLabels": [
            "kwh_31d",
            "degreedays_31d",
            ""
        ]
    },
    {
        "id": "3a9d746ecf027578",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "Restore after boot",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "trigger",
        "x": 190,
        "y": 520,
        "wires": [
            [
                "c0f559e2c7905a0e"
            ]
        ]
    },
    {
        "id": "5f7678f15c215dc9",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 170,
        "y": 1020,
        "wires": [
            [
                "2ee679408e4ccc6f",
                "9a88d9c8f4a6c2a5",
                "91840e451e332fa6",
                "d64accce0bd0c291"
            ]
        ]
    },
    {
        "id": "a229a39b9973d011",
        "type": "inject",
        "z": "ed155b604642d354",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1250,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "42fb2dc4dec11e93",
        "type": "comment",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "31 Days information",
        "info": "",
        "x": 170,
        "y": 1160,
        "wires": []
    },
    {
        "id": "16b0fcf56b6d17f8",
        "type": "comment",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "24 hours information",
        "info": "",
        "x": 170,
        "y": 480,
        "wires": []
    },
    {
        "id": "05c67c5f7508a04d",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "27d590581cd92df1",
        "name": "",
        "links": [
            "a3180920b08e8108"
        ],
        "x": 95,
        "y": 340,
        "wires": [
            [
                "cd16de04c8fa639a"
            ]
        ]
    },
    {
        "id": "cd16de04c8fa639a",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "27d590581cd92df1",
        "name": "Energy_Consumption_DHW_kWh",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\n\nvar CurrentTime = new Date().getTime();\nvar PreviousTime = context.get(\"PreviousTime\");\nvar PreviousMessage = context.get(\"PreviousMessage\");\nvar PreviousTopic = context.get(\"PreviousTopic\");\nvar exit;\n\n    var LastMessage = msg.payload;\n    var LastTopic= msg.topic;\n    \n    if (PreviousTime === undefined) \n        {\n            context.set('PreviousTime',CurrentTime);\n            exit = true;\n        }\n        \n    else if (PreviousMessage === undefined) \n        {\n            context.set('PreviousMessage',msg.payload);\n            exit = true;\n        }\n    else if (PreviousTopic === undefined) \n        {\n            context.set('PreviousTopic',msg.topic);\n            exit = true;\n        }\n    \n    else {\n                \n            var TimeElapsed = ((CurrentTime - PreviousTime)/1000);\n            context.set('PreviousTime',CurrentTime);\n            context.set('PreviousMessage',msg.payload);\n            context.set('PreviousTopic',msg.topic);\n            msg3.last = {\"lastTime\":CurrentTime,\"LastMessage\":LastMessage,\"LastTopic\":LastTopic};\n            msg3.Previous = {\"PreviousTime\":PreviousTime,\"PreviousMessage\":PreviousMessage,\"PreviousTopic\":PreviousTopic};\n            \n            \n            msg1.payload = (TimeElapsed + \"  Seconds\");\n            var temp = parseFloat(TimeElapsed.toFixed(0));\n            msg2.payload = temp;\n            msg3.payload = {\"Count\":temp,\"Units\":\"Seconds\"}; \n            msg5.payload = (PreviousMessage * ( temp / 3600000 ));   //  Calculation to Wh portion\n            Number(msg5.payload).toFixed(4);\n            msg5.topic = 'Energy_Consumption_DHW_kWh';\n       }\n    if (exit === true)\n        {return null;}\n    else     \n        {return msg5;}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 340,
        "wires": [
            [
                "2cc9fde214b13621"
            ]
        ],
        "outputLabels": [
            "Energy_Consumption_HEAT_kWh"
        ],
        "icon": "node-red/timer.png"
    },
    {
        "id": "2cc9fde214b13621",
        "type": "link out",
        "z": "ed155b604642d354",
        "g": "27d590581cd92df1",
        "name": "kWh DHW value (live)",
        "mode": "link",
        "links": [
            "65322aec4f8fd58e",
            "868b4c6128111bb6"
        ],
        "x": 800,
        "y": 340,
        "wires": [],
        "inputLabels": [
            "kWh value (live)"
        ],
        "l": true
    },
    {
        "id": "91840e451e332fa6",
        "type": "bar-chart-data",
        "z": "ed155b604642d354",
        "g": "d734c640b789ff1e",
        "name": "bar-chart DHW kwh-24h",
        "x_interval": "hours",
        "x_size": "24",
        "unit": "",
        "precision": "3",
        "is_meter_reading": "False",
        "agg_by": "sum",
        "x": 830,
        "y": 620,
        "wires": [
            [
                "935535fc205e470c"
            ]
        ]
    },
    {
        "id": "935535fc205e470c",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "d734c640b789ff1e",
        "name": "Store information to kwh_DHW_24h",
        "func": "var myArray1 = msg;\nglobal.set(\"kwh_DHW_24h\", myArray1,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 620,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "65322aec4f8fd58e",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "d734c640b789ff1e",
        "name": "",
        "links": [
            "2cc9fde214b13621"
        ],
        "x": 125,
        "y": 620,
        "wires": [
            [
                "018e987e0d4672b6"
            ]
        ]
    },
    {
        "id": "018e987e0d4672b6",
        "type": "delay",
        "z": "ed155b604642d354",
        "g": "d734c640b789ff1e",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 460,
        "y": 620,
        "wires": [
            [
                "91840e451e332fa6"
            ]
        ]
    },
    {
        "id": "868b4c6128111bb6",
        "type": "link in",
        "z": "ed155b604642d354",
        "g": "fc68ffd1a284a6bd",
        "name": "",
        "links": [
            "2cc9fde214b13621"
        ],
        "x": 125,
        "y": 1280,
        "wires": [
            [
                "e8a39538d051ed80"
            ]
        ]
    },
    {
        "id": "e8a39538d051ed80",
        "type": "delay",
        "z": "ed155b604642d354",
        "g": "fc68ffd1a284a6bd",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 480,
        "y": 1280,
        "wires": [
            [
                "1073d8f9d7a572a1"
            ]
        ]
    },
    {
        "id": "1073d8f9d7a572a1",
        "type": "bar-chart-data",
        "z": "ed155b604642d354",
        "g": "fc68ffd1a284a6bd",
        "name": "bar-chart DHW kwh-31d",
        "x_interval": "days",
        "x_size": "31",
        "unit": "",
        "precision": "3",
        "is_meter_reading": "False",
        "agg_by": "sum",
        "x": 830,
        "y": 1280,
        "wires": [
            [
                "e800de9b472a5516"
            ]
        ]
    },
    {
        "id": "e800de9b472a5516",
        "type": "function",
        "z": "ed155b604642d354",
        "g": "fc68ffd1a284a6bd",
        "name": "Store information to kwh_DHW_31d",
        "func": "var myArray1 = msg;\nglobal.set(\"kwh_DHW_31d\", myArray1,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1280,
        "wires": [
            []
        ],
        "outputLabels": [
            "graaddagen 24h"
        ]
    },
    {
        "id": "e68356272f1f529b",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "5ffcc1056a276bf5",
        "name": "clear",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "clear",
        "payloadType": "str",
        "x": 310,
        "y": 1020,
        "wires": [
            [
                "d64accce0bd0c291",
                "9a88d9c8f4a6c2a5",
                "91840e451e332fa6"
            ]
        ]
    },
    {
        "id": "898b02a132291b49",
        "type": "inject",
        "z": "ed155b604642d354",
        "g": "1c223a510a8ec72d",
        "name": "clear",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "clear",
        "payloadType": "str",
        "x": 310,
        "y": 1680,
        "wires": [
            [
                "cff31036dc296d8d",
                "550d61dd1ac867d3",
                "1073d8f9d7a572a1"
            ]
        ]
    },
    {
        "id": "40b5ddfde5f28d99",
        "type": "ui_template",
        "z": "ed155b604642d354",
        "group": "87be08e6a82ef6a0",
        "name": "Line",
        "order": 4,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\";\n\t>\n\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1590,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "67a8d20ae604a58e",
        "type": "ui_template",
        "z": "ed155b604642d354",
        "group": "87be08e6a82ef6a0",
        "name": "Line",
        "order": 6,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 10px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 2px solid #a39d99;\n    box-shadow: 0 0 5px #a39d99\";\n\t>\n\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1590,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "966985d68ebb4990",
        "type": "tab",
        "label": "WP Solar",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "81ff790f84afd46d",
        "type": "group",
        "z": "966985d68ebb4990",
        "name": "SOLAR functions",
        "style": {
            "label": true
        },
        "nodes": [
            "8e16d1ef3e972c95",
            "bd6e0b75ff712b33"
        ],
        "x": 8,
        "y": 1713,
        "w": 1258,
        "h": 1134
    },
    {
        "id": "6f4cdc97add442ff",
        "type": "group",
        "z": "966985d68ebb4990",
        "name": "Switching logic",
        "style": {
            "label": true
        },
        "nodes": [
            "2d6dc1388cdc2951",
            "e62a354ce682ea6f",
            "b50ab0a4981f9d17",
            "ee7e3fc1d241d09e",
            "37178acf2fda2d9d",
            "78507acac200e031",
            "9b92843d2d8873a3",
            "58f4dcb609fc506a",
            "7072144388b44dd3",
            "bd6a778d969a4013",
            "2f80407e5e31dd43",
            "c0586f3e8627e510",
            "ba8f8e1c71858357",
            "1b0aafd65d5593dd",
            "0edffe2f6a90c7de",
            "4fe035f4e6248924",
            "89d1049d905b86e4",
            "86d4881128cac5a7",
            "7934d1c52982f0b3",
            "303321d936e93089",
            "f84826517a420fde",
            "57edeab9475a6a20",
            "ba868579131b4ef5",
            "a2c6578da1065ba6",
            "84fd5c4de621f384",
            "37b9b30a59f8e729",
            "f15776a167c6b44a",
            "934f1b63d4aaf4b0",
            "7d720a2b1a5bab52",
            "9bf55ba2cae3c0c1",
            "0c161098aa5eeb1a"
        ],
        "x": 14,
        "y": 2939,
        "w": 1082,
        "h": 322
    },
    {
        "id": "3b5324e3d80d96a1",
        "type": "group",
        "z": "966985d68ebb4990",
        "name": "",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "6c24c2f990c17968",
            "4896062be182fe15",
            "13a19fc3eda5bac1",
            "bc0aeeb8c2000e65",
            "b3e73f9e4ae539cb",
            "75c312c1494fea2e",
            "37aa061ab91471ec",
            "890a57ef3afcf284",
            "856711de93142cb9",
            "8aa8fe1b9cd61f3c",
            "7f9c4451a116b794",
            "e5a024baed5f8a58",
            "0b2d388baee905a4",
            "63bcc91caacdcf55",
            "375bbd780529afe0",
            "d557c110dc040f11",
            "d4088fbe0128c6fa",
            "8481a5f62c29266b",
            "fa3ff57605345dc3",
            "b85d6aca6a841215",
            "233708268636f815"
        ],
        "x": 74,
        "y": 799,
        "w": 1332,
        "h": 668
    },
    {
        "id": "bf2c1d5a22f56dd8",
        "type": "group",
        "z": "966985d68ebb4990",
        "name": "",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "071320367f2b7a40",
            "e6e7a4c840499ff0",
            "2ab2c3aad0cba156",
            "c980bba812a20bc2",
            "39f8d3463d10ccfb",
            "edf195c89ff83486",
            "add57b730a3e769f",
            "af24696818983d4c",
            "26c4d827da98fd56",
            "f58197b3d1d9d1d0",
            "ce787867699a6a50",
            "a9efc23cf56dc231",
            "1c7292b507901827",
            "d31bb33a7ab5445e",
            "4aa1e7a1e212ad06",
            "8ba23174457c635d",
            "88ea0371f9cecd37",
            "d399a23f6936f23f",
            "d4627d98961f13e3",
            "4005ad2197c7fdc7",
            "118251c54a0e5354",
            "e8806a18af3b7faf",
            "dabefb1ece62d6e1",
            "1b3d47cfa4607aaa",
            "2efa0af27c69d4d0",
            "9fca714df21ffac0"
        ],
        "x": 54,
        "y": 19,
        "w": 1292,
        "h": 728
    },
    {
        "id": "bd6e0b75ff712b33",
        "type": "group",
        "z": "966985d68ebb4990",
        "g": "81ff790f84afd46d",
        "name": "",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "b84df04af23dbc5a",
            "bd079d704c31d5a7",
            "a8beed6bcea8ec08",
            "ac392c197fe09917",
            "5fb3c7be3b428b42",
            "460148df6a225d24",
            "5c90f480e0f6e8ac",
            "d4b0a313434a3fd9",
            "d6bf90086794b1ac",
            "c0ee68059878b294",
            "77e1377aea412936",
            "28c7a4a25703f3c5",
            "67fe5d78fed38255",
            "8f06615b7f974a19",
            "623dc28b8a4cccdd",
            "7bc1cea7963d95f8",
            "ccb17c1dab2540fd",
            "b866c59ce44f1281",
            "45de8d4b61f74361",
            "992b1344cc8fd4eb",
            "803505e9e8372578",
            "5f2ca6fd7cf3d5c5",
            "329a022ba526c218",
            "153d971fff0a3ed3",
            "9958b10ab396a735",
            "9765c40bf881d992",
            "5a4e594ff048795f",
            "bdd8cc1b7fb80f3f",
            "0a090bd1c44b08c6",
            "992ca6239bbe7308",
            "ce2634259bc8d6eb",
            "16fc69e4b9ff74fd",
            "608ac27952261ad4",
            "7ed70179e6faf792",
            "2e9d5424e80ef967",
            "f3f4f51165a33ae4",
            "bfade373dc6bae1e",
            "e5cb66afb46c891b",
            "2a4ffebda936e1bf",
            "39a4db5e9a226488",
            "200de001362093f8",
            "87da7c125b68ad72",
            "2b03f7e8408f5f56",
            "941e2e6b17a45171",
            "f61f7eaf6a10124a",
            "f6779270108c1106",
            "d2d71d4e69ee31d7",
            "cc71fabeef44a7fe",
            "19e1b78cc7d0e897",
            "c921d9cfc05712ec",
            "91df0ca5227134fa",
            "3170857651ba82cc",
            "d8210b71067cf6b6",
            "2717d21023b674ad",
            "4ed5f3924acf26ff",
            "d10277056d1d02fe",
            "f41ea674b5e8c312",
            "58c85357036405ba",
            "0b0b29fb11118e6c"
        ],
        "x": 34,
        "y": 1739,
        "w": 1152,
        "h": 1082
    },
    {
        "id": "b85d6aca6a841215",
        "type": "group",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "style": {
            "fill": "#ff0000",
            "fill-opacity": "0.55",
            "label": true
        },
        "nodes": [
            "3ddc8ec4b5d75af2"
        ],
        "x": 274,
        "y": 1119,
        "w": 232,
        "h": 82
    },
    {
        "id": "233708268636f815",
        "type": "group",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "8f12203bf931d988",
            "cf528e5358dce9df",
            "4d12c082bff0d9a8",
            "4937a9ffd1fca661"
        ],
        "x": 154,
        "y": 1279,
        "w": 612,
        "h": 162
    },
    {
        "id": "2efa0af27c69d4d0",
        "type": "group",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "This groups function: Calculate result of the day",
        "style": {
            "label": true,
            "fill": "#dbcbe7"
        },
        "nodes": [
            "c7ec48dc3c78df80",
            "4219518104b1ef5d",
            "aad8f63921d33903",
            "42734e97a85d5537",
            "40abfbbe563b32ac",
            "e9cf167aeac6d0d4"
        ],
        "x": 94,
        "y": 551.5,
        "w": 812,
        "h": 169.5
    },
    {
        "id": "9fca714df21ffac0",
        "type": "group",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "style": {
            "fill": "#ff0000",
            "fill-opacity": "0.55",
            "label": true
        },
        "nodes": [
            "5256af8b7309c113"
        ],
        "x": 294,
        "y": 399,
        "w": 232,
        "h": 82
    },
    {
        "id": "ce2634259bc8d6eb",
        "type": "ui_dropdown",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "detection_method",
        "label": "Threshold detection method",
        "tooltip": "",
        "place": "Select option",
        "group": "b7f22c282fde0f86",
        "order": 9,
        "width": 9,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Power live (kW)",
                "value": "kW",
                "type": "str"
            },
            {
                "label": "Today's production (kWh)",
                "value": "kWh_prod",
                "type": "str"
            },
            {
                "label": "Today's result (kWh)",
                "value": "kWh_result",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "detection_method",
        "topicType": "str",
        "className": "",
        "x": 570,
        "y": 2080,
        "wires": [
            [
                "941e2e6b17a45171",
                "ccb17c1dab2540fd"
            ]
        ]
    },
    {
        "id": "16fc69e4b9ff74fd",
        "type": "ui_numeric",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "dhw_sp_high",
        "label": "DHW temperature setpoint - high",
        "tooltip": "This setpoint is active above the {{msg.threshold}} treshold",
        "group": "b7f22c282fde0f86",
        "order": 8,
        "width": 9,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "dhw_sp_high",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": 0,
        "max": "75",
        "step": 1,
        "className": "",
        "x": 550,
        "y": 2040,
        "wires": [
            [
                "ccb17c1dab2540fd",
                "f6779270108c1106"
            ]
        ]
    },
    {
        "id": "608ac27952261ad4",
        "type": "ui_numeric",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "threshold",
        "label": "Threshold",
        "tooltip": "",
        "group": "b7f22c282fde0f86",
        "order": 10,
        "width": 9,
        "height": 1,
        "wrap": true,
        "passthru": true,
        "topic": "threshold",
        "topicType": "str",
        "format": "{{value}} {{detection_method}}",
        "min": "-30",
        "max": "-0.1",
        "step": "0.1",
        "className": "",
        "x": 540,
        "y": 2120,
        "wires": [
            [
                "7ed70179e6faf792",
                "ccb17c1dab2540fd"
            ]
        ]
    },
    {
        "id": "7ed70179e6faf792",
        "type": "change",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "threshold",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 2000,
        "wires": [
            [
                "16fc69e4b9ff74fd",
                "f61f7eaf6a10124a"
            ]
        ]
    },
    {
        "id": "2e9d5424e80ef967",
        "type": "ui_switch",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "fallback",
        "label": "Fallback to default DHW (SP) below 0 W?",
        "tooltip": "This will only apply for the power detection method Option 1: Power Live (kW)",
        "group": "b7f22c282fde0f86",
        "order": 13,
        "width": 9,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "fallback",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 540,
        "y": 2180,
        "wires": [
            [
                "ccb17c1dab2540fd"
            ]
        ]
    },
    {
        "id": "aad8f63921d33903",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "2efa0af27c69d4d0",
        "name": "Function schedule export",
        "func": "//////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////\nvar start_today_export      = flow.get(\"start_today_export\",\"file\");            //\nvar total_kwh_export        = flow.get('total_kwh_export',\"file\");              //\nvar F_SOLAR                 = global.get('F_SOLAR',\"file\");                     //\nvar TOP9_DHW_Target_Temp    = global.get('TOP9_DHW_Target_Temp',\"file\");        //\n//////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////\nlet msg1={};                // pin 1: kwh\nlet msg2={};                // pin 2: SP_DHW\n    msg2.topic = 'Solar function';\nlet msg99={};               // pin 3: to log\n\nmsg99.topic = \"Function Solar\";\n\nif (total_kwh_export === undefined) {total_kwh_export = msg.payload;}\nif (total_kwh_export === undefined) {total_kwh_export = 0;}\n\nif (start_today_export === undefined)\n    {\n        start_today_export = total_kwh_export;\n        flow.set(\"start_today_export\",total_kwh_export,\"file\");\n    }   \n\nif (msg.topic == \"time\" && F_SOLAR.state == 0)                                                        // When @ midnight, reset start_today_export to 0.\n    {\n        global.set(\"F_SOLAR.function_active_state\",undefined,\"file\");        \n        msg.topic           = \"kWh\";\n        msg.payload         = 0;\n        \n        if (total_kwh_export !== undefined)\n            {\n                flow.set('start_today_export',total_kwh_export,\"file\");\n            }\n        return [msg,null,null];\n\n    }\nif (msg.topic == \"time\" && F_SOLAR.state == 1)                                                        // When @ midnight, reset start_today_export to 0.\n    {\n        global.set(\"F_SOLAR.function_active_state\",undefined,\"file\");        \n        msg.topic           = \"kWh\";\n        msg.payload         = 0;\n        if (total_kwh_export !== undefined)\n            {\n                flow.set('start_today_export',total_kwh_export,\"file\");\n            }\n        if (TOP9_DHW_Target_Temp != F_SOLAR.dhw_sp_low)\n            {\n                msg2.payload = F_SOLAR.dhw_sp_low;\n                msg99.payload       = \"New day; Reset Solar function. Set DHW SP to \" + F_SOLAR.dhw_sp_low;\n                return [msg, msg2, msg99];\n            }\n        else \n            {\n                msg99.payload       = \"New day; Reset Solar function. DHW SP = \" + F_SOLAR.dhw_sp_low;\n                return [msg,null,msg99];\n            }\n    }\n\nelse if (msg.topic == \"start\")\n    {\n        msg1.payload = total_kwh_export - start_today_export;\n        msg1.payload = Number(msg1.payload).toFixed(2);\n        msg1.payload = parseFloat(msg1.payload);\n        msg1.topic = \"kWh\";\n        return [msg1,null,null];\n    }\nelse\n    {\n        var until_now       =   (msg.payload - start_today_export);            // calculate todays production in kWh\n        msg.payload = until_now;\n        msg.payload = Number(msg.payload).toFixed(2);\n        msg.payload = parseFloat(msg.payload);\n        msg.topic = \"kWh\";\n        return [msg,null,null];\n    }\n    ",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "\n",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 600,
        "wires": [
            [
                "39f8d3463d10ccfb"
            ],
            [
                "42734e97a85d5537"
            ],
            [
                "40abfbbe563b32ac"
            ]
        ],
        "outputLabels": [
            "kWh today",
            "DHW_SP_LOW",
            "to log"
        ]
    },
    {
        "id": "f3f4f51165a33ae4",
        "type": "ui_switch",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "state",
        "label": "Function: Solar²DHW",
        "tooltip": "",
        "group": "b7f22c282fde0f86",
        "order": 4,
        "width": 9,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 530,
        "y": 1900,
        "wires": [
            [
                "200de001362093f8"
            ]
        ]
    },
    {
        "id": "bfade373dc6bae1e",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "b7f22c282fde0f86",
        "name": "Line - Setup ",
        "order": 6,
        "width": 9,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Setup</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 550,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "d10277056d1d02fe",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Input - Current power",
        "links": [
            "071320367f2b7a40",
            "6c24c2f990c17968"
        ],
        "x": 105,
        "y": 2580,
        "wires": [
            [
                "5f2ca6fd7cf3d5c5",
                "0b0b29fb11118e6c"
            ]
        ]
    },
    {
        "id": "071320367f2b7a40",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "P1 Output - Power production (W)",
        "mode": "link",
        "links": [
            "9b92843d2d8873a3",
            "d10277056d1d02fe"
        ],
        "x": 1180,
        "y": 260,
        "wires": [],
        "l": true
    },
    {
        "id": "e6e7a4c840499ff0",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "GRID PRODUCTION (EXPORT)",
        "info": "",
        "x": 210,
        "y": 60,
        "wires": []
    },
    {
        "id": "2ab2c3aad0cba156",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "Expected input is a value in Watt or kiloWatt.",
        "info": "",
        "x": 250,
        "y": 140,
        "wires": []
    },
    {
        "id": "5256af8b7309c113",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "9fca714df21ffac0",
        "name": "Correction function",
        "func": "var export_correction;\n\nif (msg.topic == \"correction\")\n    {\n        export_correction = msg.payload;\n        global.set('F_SOLAR.export_correction',export_correction,\"file\");\n        \n        return null;\n    }\nelse {\n        export_correction = global.get('F_SOLAR.export_correction',\"file\");   \n        if (export_correction === undefined) { export_correction = 1;}\n        export_correction = Number(export_correction);\n\n        var msg1={};\n        msg1.payload = msg.payload;\n        \n        msg1.payload = Number(msg1.payload).toFixed(4);\n        msg1.payload = parseFloat(msg1.payload);\n        msg1.payload = Math.abs(msg1.payload) * -1 * export_correction;\n        msg1.payload = Number(msg1.payload).toFixed(0);\n        msg1.payload = Number(msg1.payload)\n        msg1.topic = \"W\";\n        flow.set(\"current_export_value\",msg1.payload);\n        return msg1;\n    }",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 440,
        "wires": [
            [
                "071320367f2b7a40",
                "c980bba812a20bc2",
                "ce787867699a6a50"
            ]
        ]
    },
    {
        "id": "e5cb66afb46c891b",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "DASHBOARD",
        "info": "",
        "x": 550,
        "y": 1820,
        "wires": []
    },
    {
        "id": "c980bba812a20bc2",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "GRID power production W to kWh",
        "func": "var CurrentTime = new Date().getTime();\nvar PreviousTime = context.get(\"PreviousTime\");\nvar PreviousMessage = context.get(\"PreviousMessage\");\nvar PreviousTopic = context.get(\"PreviousTopic\");\nvar exit = false;\n\n//  First run checks. If some variables are undefined, set current values and exit.\nif (PreviousTime === undefined)     {context.set('PreviousTime',CurrentTime);       exit = true;}\nif (PreviousMessage === undefined || isNaN(PreviousMessage))  {context.set('PreviousMessage',msg.payload); exit = true;}\nif (PreviousTopic === undefined)    {context.set('PreviousTopic',msg.topic);    exit = true;}\n\nif (exit === true) { return null; }           // This output will automatically be skipped, next calculation will be ok.\n\n//**********************************************\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg5 = {};\nvar msg6 = {};\n\nvar LastMessage = msg.payload;\nvar LastTopic= msg.topic;\nvar TimeElapsed = ((CurrentTime - PreviousTime) / 1000);\n\ncontext.set('PreviousTime',CurrentTime);\ncontext.set('PreviousMessage',msg.payload);\ncontext.set('PreviousTopic',msg.topic);\n\nmsg3.last = {\"lastTime\":CurrentTime,\"LastMessage\":LastMessage,\"LastTopic\":LastTopic};\nmsg3.Previous = {\"PreviousTime\":PreviousTime,\"PreviousMessage\":PreviousMessage,\"PreviousTopic\":PreviousTopic};\n\n\nmsg1.payload = (TimeElapsed + \"  Seconds\");\nvar temp = parseFloat(TimeElapsed.toFixed(3));\nmsg2.payload = temp;\nmsg3.payload = {\"Count\":temp,\"Units\":\"Seconds\"}; \n\n//(production)\n/*\nValues entering are ONLY the production values. \nIf there is production, the value will be < 0. Yes a negative value. \nIf there is currently CONSUMPTION instead of production, the incoming value will be 0 (once)\nThere will never be a value > 0. \n*/\n\n//case 1: From production to production \nif (PreviousMessage <= 0 && LastMessage < 0) {\n    msg5.payload = (PreviousMessage * (temp / 3600000));                  //  Calculation to Wh portion\n    msg5.payload = Number(msg5.payload).toFixed(11);\n}\n\n\n//case 2: From production to consumption\nif (PreviousMessage < 0 && LastMessage >= 0) {\n    context.set('PreviousMessage',0);\n    msg5.payload = (PreviousMessage * ( temp / 3600000 ));                  //  Calculation to Wh portion\n    msg5.payload = Number(msg5.payload).toFixed(11);\n\n}\n\n//case 3: From consumption to production \nif (PreviousMessage >= 0 && LastMessage < 0) {\n    msg5.payload = 0 ; \n    msg5.payload = Number(msg5.payload)\n}\n\nmsg5.topic = 'GRID power production kWh';                               // msg5 = latest kWh part.\n\n\n///////////////////////////////////////////////////////////////////////////\n// Calculation from kWh part > total kWh of today\nvar total_kwh_export = Number(flow.get(\"total_kwh_export\",\"file\"));\n//node.warn(total_kwh_export);\nif (total_kwh_export === undefined || isNaN(total_kwh_export))        {total_kwh_export = 0;}\n\nmsg6.payload = Number(msg5.payload) + Number(total_kwh_export);                                // msg6 = kWh total from the start of operation\nmsg6.topic = 'GRID power production kWh';\nmsg6.payload = Number(msg6.payload).toFixed(7);\nmsg6.payload = parseFloat(msg6.payload);\nflow.set('total_kwh_export',msg6.payload,\"file\");\n\n////////////////////////////////////////////////////////////////////////////\nreturn [msg6];\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 440,
        "wires": [
            [
                "edf195c89ff83486",
                "e9cf167aeac6d0d4"
            ]
        ],
        "outputLabels": [
            "Production kWh of today"
        ],
        "icon": "node-red/timer.png"
    },
    {
        "id": "39f8d3463d10ccfb",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "P1 Output - Power production Today (kWh)",
        "mode": "link",
        "links": [
            "44925c267016b3f7"
        ],
        "x": 1150,
        "y": 580,
        "wires": [],
        "l": true
    },
    {
        "id": "b84df04af23dbc5a",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1900,
        "wires": [
            [
                "9958b10ab396a735"
            ]
        ]
    },
    {
        "id": "2d6dc1388cdc2951",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "kWh",
        "info": "",
        "x": 130,
        "y": 2980,
        "wires": []
    },
    {
        "id": "e62a354ce682ea6f",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "mode": "link",
        "links": [
            "c82ec16fb6ba6769",
            "d9b3ca8bfaa4c10a"
        ],
        "x": 1055,
        "y": 2980,
        "wires": []
    },
    {
        "id": "42734e97a85d5537",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "2efa0af27c69d4d0",
        "name": "DHW_SP_LOW",
        "mode": "link",
        "links": [
            "c82ec16fb6ba6769"
        ],
        "x": 800,
        "y": 600,
        "wires": [],
        "l": true
    },
    {
        "id": "b50ab0a4981f9d17",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "linkout_solar trigger OM",
        "mode": "link",
        "links": [
            "84bff5c3d4a4cede"
        ],
        "x": 1055,
        "y": 3020,
        "wires": []
    },
    {
        "id": "c7ec48dc3c78df80",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "2efa0af27c69d4d0",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "time",
        "x": 190,
        "y": 680,
        "wires": [
            [
                "aad8f63921d33903"
            ]
        ]
    },
    {
        "id": "2a4ffebda936e1bf",
        "type": "ui_switch",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "power_override",
        "label": "Power on heat pump",
        "tooltip": "Power on heat pump when DHW run is triggered",
        "group": "b7f22c282fde0f86",
        "order": 11,
        "width": 9,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "power_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 560,
        "y": 2220,
        "wires": [
            [
                "ccb17c1dab2540fd"
            ]
        ]
    },
    {
        "id": "ee7e3fc1d241d09e",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "mode": "link",
        "links": [
            "071ac5a0f08a8fdb"
        ],
        "x": 1055,
        "y": 3060,
        "wires": []
    },
    {
        "id": "4219518104b1ef5d",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "2efa0af27c69d4d0",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "5",
        "topic": "start",
        "x": 190,
        "y": 640,
        "wires": [
            [
                "aad8f63921d33903"
            ]
        ]
    },
    {
        "id": "5a4e594ff048795f",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "b7f22c282fde0f86",
        "order": 17,
        "width": 9,
        "height": 1,
        "name": "DHW (SP)",
        "label": "DHW temperature setpoint",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 550,
        "y": 2420,
        "wires": []
    },
    {
        "id": "992b1344cc8fd4eb",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "links": [
            "d54ac3b979428b64"
        ],
        "x": 365,
        "y": 2380,
        "wires": [
            [
                "39a4db5e9a226488"
            ]
        ]
    },
    {
        "id": "bdd8cc1b7fb80f3f",
        "type": "ui_chart",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "group": "2bd11d2d909e2ba3",
        "order": 2,
        "width": 10,
        "height": 6,
        "label": "Power history (W)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "Waiting for data ...",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#de425b",
            "#f59b56",
            "#7f8389",
            "#d62728",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 570,
        "y": 2500,
        "wires": [
            [
                "2717d21023b674ad"
            ]
        ]
    },
    {
        "id": "0a090bd1c44b08c6",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "b7f22c282fde0f86",
        "name": "Line - Current values",
        "order": 15,
        "width": 9,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\nResults",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 580,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "329a022ba526c218",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Draw chart",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nvar P1_type = global.get('F_SOLAR.P1_type', \"file\");\nif (P1_type === undefined) { return null }\nif (P1_type == \"type1\") {\n    var msg1 = {};\n\n    var current_import_value = flow.get('current_import_value')\n    var current_export_value = flow.get('current_export_value')\n\n    if (current_import_value === undefined || current_export_value === undefined || isNaN(current_import_value) === true || isNaN(current_export_value) === true) { return null }\n\n    msg1.payload = current_export_value + current_import_value;\n    \n}\n\n////////////////////////////////////////////////////////\n\nvar last = context.get('last') || 'under';\nvar last_counter = context.get('last_counter')\nvar threshold = 0;\nvar undermessage = {topic:'Production',payload:null};\nvar overmessage = {topic:'Consumption',payload:null};\nvar unsentmessage = null;\n\nif (msg1.payload > threshold) { // current case is 'over'\n    if (last == 'under') {\n        undermessage.payload = threshold;\n        overmessage.payload = threshold;\n        unsentmessage = msg1;\n        context.set('last_counter',undefined);        \n    }\n    else {\n        overmessage.payload = msg1.payload;\n        if (last_counter === undefined) {\n            undermessage.payload = threshold;\n            context.set('last_counter',1);  \n        } \n    }\n    last = 'over';\n}\n\nelse {      // current case is 'under'\n    if (last == 'over') {\n        overmessage.payload = threshold;\n        undermessage.payload = threshold;\n        unsentmessage = msg1;\n    }\n    else {\n        undermessage.payload = msg1.payload;\n        if (last_counter === undefined) {\n            overmessage.payload = threshold;\n            context.set('last_counter',1);  \n        } \n    }\n    last = 'under';\n}\n\ncontext.set('last',last);\nvar F_SOLAR = global.get('F_SOLAR',\"file\");\n\nif (F_SOLAR.detection_method == 'kW' && F_SOLAR.threshold !== undefined) {\n    var msg2 ={};\n    msg2.topic = 'Threshold';\n    msg2.payload = F_SOLAR.threshold * 1000;    // make kW of it.\n    return [[overmessage,undermessage,msg2],unsentmessage]\n}\n\nreturn [[overmessage,undermessage],unsentmessage]",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 2500,
        "wires": [
            [
                "bdd8cc1b7fb80f3f"
            ]
        ]
    },
    {
        "id": "992ca6239bbe7308",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 530,
        "y": 2540,
        "wires": [
            [
                "bdd8cc1b7fb80f3f"
            ]
        ]
    },
    {
        "id": "3ddc8ec4b5d75af2",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "b85d6aca6a841215",
        "name": "Correction function",
        "func": "var import_correction;\n\nif (msg.topic == \"correction\")\n    {\n        import_correction = msg.payload;\n        global.set('F_SOLAR.import_correction',import_correction,\"file\");\n        \n        return null;\n    }\nelse\n    {\n    import_correction = global.get('F_SOLAR.import_correction',\"file\");   \n        if (import_correction === undefined) { import_correction = 1;}\n        \n        let msg1={};\n        msg1.payload = msg.payload;\n        \n        msg1.payload = Number(msg1.payload).toFixed(4);\n        msg1.payload = parseFloat(msg1.payload);\n        msg1.payload = Math.abs(msg1.payload);\n        \n        msg1.payload = msg1.payload * import_correction; \n        msg1.payload = ~~Number(msg1.payload).toFixed(0);\n        msg1.topic = \"W\";\n        flow.set(\"current_import_value\",msg1.payload);\n        return msg1;\n    }\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1160,
        "wires": [
            [
                "4896062be182fe15",
                "6c24c2f990c17968",
                "890a57ef3afcf284"
            ]
        ]
    },
    {
        "id": "6c24c2f990c17968",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "P1 Output - Power consumption (W)",
        "mode": "link",
        "links": [
            "9b92843d2d8873a3",
            "d10277056d1d02fe"
        ],
        "x": 1230,
        "y": 1060,
        "wires": [],
        "l": true
    },
    {
        "id": "4896062be182fe15",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "GRID power consumption W to kWh",
        "func": "let msg1 = {};\nlet msg2 = {};\nlet msg3 = {};\nlet msg4 = {};\nlet msg5 = {};\nlet msg6 = {};\n\nvar CurrentTime = new Date().getTime();\nvar PreviousTime = context.get(\"PreviousTime\");\nvar PreviousMessage = context.get(\"PreviousMessage\");\nvar PreviousTopic = context.get(\"PreviousTopic\");\nvar exit = false;\n\n//  First run checks. If some variables are undefined, set current values and exit.\nif (PreviousTime === undefined) {context.set('PreviousTime',CurrentTime);       exit = true;}\nif (PreviousMessage === undefined) {context.set('PreviousMessage',msg.payload); exit = true;}\nif (PreviousTopic === undefined)  {context.set('PreviousTopic',msg.topic);    exit = true;}\n\nif (exit === true)        \n    {    return null;            // This output will automatically be skipped, next calculation will be ok.\n        \n    }\n\n\n    var LastMessage = msg.payload;\n    var LastTopic= msg.topic;\n    \n    var TimeElapsed = ((CurrentTime - PreviousTime)/1000);\n    context.set('PreviousTime',CurrentTime);\n    context.set('PreviousMessage',msg.payload);\n    context.set('PreviousTopic',msg.topic);\n    msg3.last = {\"lastTime\":CurrentTime,\"LastMessage\":LastMessage,\"LastTopic\":LastTopic};\n    msg3.Previous = {\"PreviousTime\":PreviousTime,\"PreviousMessage\":PreviousMessage,\"PreviousTopic\":PreviousTopic};\n    \n    \n    msg1.payload = (TimeElapsed + \"  Seconds\");\n    var temp = parseFloat(TimeElapsed.toFixed(3));\n    msg2.payload = temp;\n    msg3.payload = {\"Count\":temp,\"Units\":\"Seconds\"}; \n\n//(consumption)\n/*\nValues entering are ONLY the consumption values. \nIf there is consumption, the value will be > 0\nIf there is currently PRODUCTION instead of consumption, the incoming value will be 0 (once)\nThere will never be a value < 0. \n*/\n\n//case 1: From consumption to consumption\n    if (PreviousMessage >= 0 && LastMessage > 0) {\n    msg5.payload = (PreviousMessage * ( temp / 3600000 ));                  //  Calculation to Wh portion\n    msg5.payload = Number(msg5.payload).toFixed(11);\n}\n\n//case 2: From production to consumption\nif (PreviousMessage <= 0 && LastMessage > 0) {\n    msg5.payload = 0 ; \n}\n\n//case 3: From consumption to production\nif (PreviousMessage > 0 && LastMessage <= 0) {\n    msg5.payload = (PreviousMessage * ( temp / 3600000 ));                  //  Calculation to Wh portion\n    msg5.payload = Number(msg5.payload).toFixed(11);\n    context.set('PreviousMessage',0);\n}\n\n\n\nmsg5.topic = 'GRID power consumption kWh';                               // msg5 = latest kWh part.\n\n\n///////////////////////////////////////////////////////////////////////////\n// Calculation from kWh part > total kWh of today\n    var total_kwh_import = Number(flow.get(\"total_kwh_import\",\"file\"));\n    //node.warn(total_kwh_import);\n    if (total_kwh_import === undefined || isNaN(total_kwh_import))         {total_kwh_import = 0;}\n    \n    msg6.payload = Number(msg5.payload) + Number(total_kwh_import);                                // msg6 = kWh total from the start of operation\n    msg6.topic = 'GRID power consumption kWh';\n    msg6.payload = Number(msg6.payload).toFixed(7);\n    msg6.payload = parseFloat(msg6.payload);    \n    flow.set('total_kwh_import',msg6.payload,\"file\");\n    \n////////////////////////////////////////////////////////////////////////////\n    return msg6;\n    \n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1160,
        "wires": [
            [
                "13a19fc3eda5bac1",
                "4937a9ffd1fca661"
            ]
        ],
        "outputLabels": [
            "Production kWh of today"
        ],
        "icon": "node-red/timer.png"
    },
    {
        "id": "13a19fc3eda5bac1",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "P1 Output - Power consumption (kWh)",
        "mode": "link",
        "links": [],
        "x": 1230,
        "y": 1160,
        "wires": [],
        "l": true
    },
    {
        "id": "bc0aeeb8c2000e65",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "Expected input is a value in Watt or kiloWatt.",
        "info": "",
        "x": 310,
        "y": 880,
        "wires": []
    },
    {
        "id": "b3e73f9e4ae539cb",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "GRID CONSUMPTION IMPORT (OPTIONAL)",
        "info": "",
        "x": 310,
        "y": 840,
        "wires": []
    },
    {
        "id": "370731d4b4d4b62b",
        "type": "comment",
        "z": "966985d68ebb4990",
        "name": "Instruction",
        "info": "",
        "x": 1580,
        "y": 60,
        "wires": []
    },
    {
        "id": "39a4db5e9a226488",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "b7f22c282fde0f86",
        "order": 16,
        "width": 9,
        "height": 1,
        "name": "DHW (PV)",
        "label": "DHW temperature actual",
        "format": "{{msg.payload}} °C",
        "layout": "row-spread",
        "className": "",
        "x": 550,
        "y": 2380,
        "wires": []
    },
    {
        "id": "28c7a4a25703f3c5",
        "type": "ui_switch",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Solar",
        "label": "",
        "tooltip": "",
        "group": "e3cc96332cd59f07",
        "order": 10,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 530,
        "y": 1860,
        "wires": [
            [
                "200de001362093f8"
            ]
        ]
    },
    {
        "id": "67fe5d78fed38255",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "e3cc96332cd59f07",
        "order": 11,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Solar²DHW",
        "format": "<font color= {{msg.color}} > {{msg.state}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 690,
        "y": 1780,
        "wires": []
    },
    {
        "id": "200de001362093f8",
        "type": "rbe",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 750,
        "y": 1880,
        "wires": [
            [
                "28c7a4a25703f3c5",
                "f3f4f51165a33ae4",
                "7bc1cea7963d95f8",
                "b866c59ce44f1281"
            ]
        ]
    },
    {
        "id": "87da7c125b68ad72",
        "type": "change",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "detection_method",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2080,
        "wires": [
            [
                "608ac27952261ad4"
            ]
        ]
    },
    {
        "id": "b463820910564b36",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "F_stored_next_operating_mode",
        "func": "if  (msg.payload == 99) \n    { global.set(\"F_stored_next_operating_mode\",undefined,\"file\"); }\nelse \n    { global.set(\"F_stored_next_operating_mode\",msg.payload,\"file\"); }\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 3820,
        "wires": [
            []
        ],
        "outputLabels": [
            "log"
        ]
    },
    {
        "id": "687eabbba19e80ad",
        "type": "delay",
        "z": "966985d68ebb4990",
        "d": true,
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 120,
        "y": 3700,
        "wires": [
            [
                "b463820910564b36"
            ]
        ]
    },
    {
        "id": "1d3c07584a88352f",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 3400,
        "wires": [
            [
                "4ea279c690f939e4"
            ]
        ]
    },
    {
        "id": "86d4881128cac5a7",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Solar functie deactivate",
        "info": "",
        "x": 220,
        "y": 3180,
        "wires": []
    },
    {
        "id": "7bc1cea7963d95f8",
        "type": "change",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "false",
                "fromt": "bool",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "true",
                "fromt": "bool",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Function - Solar",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 1880,
        "wires": [
            [
                "8e16d1ef3e972c95"
            ]
        ]
    },
    {
        "id": "8e16d1ef3e972c95",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "81ff790f84afd46d",
        "name": "",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "84fd5c4de621f384"
        ],
        "x": 1225,
        "y": 1880,
        "wires": []
    },
    {
        "id": "1b0aafd65d5593dd",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "to log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1055,
        "y": 3100,
        "wires": []
    },
    {
        "id": "cd437e0a80c22bc0",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "Function - Production - Consumption (kWh)",
        "func": "let msg1={};                    // pin 1 - todays_result            Chart 1\nlet msg2={};                    // pin 2 - export_result                Chart 2\nlet msg3={};                    // pin 3 - import_result                Chart 2\nlet msg4={};                    // pin 4 - todays_result                Chart 2\nlet msg5={};                    // power result threshold\nlet msg6={};                    // limits ui_control\n\n\n\n////////// EXPORT\nvar start_today_export = Number(flow.get(\"start_today_export\",\"file\"));\nif (start_today_export === undefined || isNaN(start_today_export)) { start_today_export = 0; flow.set('start_today_export', 0, \"file\") }\n\nvar total_kwh_export = Number(flow.get(\"total_kwh_export\",\"file\"));\nif (total_kwh_export === undefined || isNaN(total_kwh_export)) { total_kwh_export = 0; flow.set('total_kwh_export', 0, \"file\"); start_today_export = 0; flow.set('start_today_export', 0, \"file\") ;}\n\nvar export_result = Number(total_kwh_export) - Number(start_today_export);                      // negative value = export\n\n\n////////// IMPORT\nvar start_today_import = Number(flow.get(\"start_today_import\",\"file\"));\nif (start_today_import === undefined || isNaN(start_today_import)) { start_today_import = 0; flow.set('start_today_import', 0, \"file\"); }\n\nvar total_kwh_import = Number(flow.get(\"total_kwh_import\",\"file\"));\nif (total_kwh_import === undefined || isNaN(total_kwh_import)) { total_kwh_import = 0; flow.set('total_kwh_import', 0, \"file\"); start_today_import = 0; flow.set('start_today_import', 0, \"file\"); }\n\nvar import_result =  Number(total_kwh_import) - Number(start_today_import);                     // positive value = import\n\n////////// TODAY\nvar todays_result = Number(import_result) + Number(export_result);                              // result\n\nif (todays_result <= 0 || todays_result > 0)\n    {\n        msg1.topic      = \"Result\";\n        msg1.payload    = todays_result;\n        msg1.payload    = Number(msg1.payload).toFixed(2);\n        msg1.payload    = parseFloat(msg1.payload);\n        \n        msg2.payload    = export_result;\n        msg2.payload    = Number(msg2.payload).toFixed(2);\n        msg2.payload    = parseFloat(msg2.payload);\n        msg2.topic      = \"Export\";\n        \n        msg3.payload    = import_result;\n        msg3.payload    = Number(msg3.payload).toFixed(2);\n        msg3.payload    = parseFloat(msg3.payload);\n        msg3.topic      = \"Import\";\n        \n        var F_SOLAR     = global.get('F_SOLAR',\"file\");\n        var array = flow.get('chart_solar_todays_result',\"file\")\n        \n        \n        if (array === undefined) { \n            return [[msg1,null],[msg2,msg3,msg1]];\n        }\n        if (array.payload[0] === undefined) { \n            return [[msg1,null],[msg2,msg3,msg1]];\n        }\n\n        else {\n            array = array.payload[0].data[0];\n            \n            if (F_SOLAR.detection_method == 'kWh_result'){\n                msg5.payload    = F_SOLAR.threshold;\n                msg5.payload    = Number(msg5.payload).toFixed(1);\n                msg5.payload    = parseFloat(msg5.payload);\n                msg5.topic      = 'Threshold';\n    \n                msg6 = {ui_control:{ymin:Math.floor(Math.min(msg5.payload, Math.floor(Math.min(...array.map(o => o.y)))))-1, ymax:Math.ceil(Math.max(...array.map(o => o.y))) +1}};\n                \n                return [[msg1,msg5,msg6],[msg2,msg3,msg1]];\n            }\n            \n            msg6 = {ui_control:{ymin:Math.floor(Math.floor(Math.min(...array.map(o => o.y))))-1, ymax:Math.ceil(Math.max(...array.map(o => o.y))) +1}};\n            \n            return [[msg1,msg6],[msg2,msg3,msg1]];\n        }\n    }\nelse {return null;}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1520,
        "wires": [
            [
                "88d0285e2915c5d9",
                "65b8f729748b5ecc"
            ],
            [
                "80ef562075a4181e",
                "1a198a8a916f8d78"
            ]
        ],
        "outputLabels": [
            "todays_result",
            "export_result"
        ]
    },
    {
        "id": "65b8f729748b5ecc",
        "type": "ui_chart",
        "z": "966985d68ebb4990",
        "name": "",
        "group": "2bd11d2d909e2ba3",
        "order": 7,
        "width": 10,
        "height": 7,
        "label": "Today's result (kWh)",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm",
        "interpolate": "step",
        "nodata": "Waiting for data ...  (will start at midnight) ",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "24",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#7f8389",
            "#1f77b4",
            "#1f77b4",
            "#1f77b4",
            "#1f77b4",
            "#1f77b4",
            "#1f77b4",
            "#1f77b4"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1120,
        "y": 1520,
        "wires": [
            [
                "7dacecebd1d1ac1b"
            ]
        ]
    },
    {
        "id": "16bb5c2934ec3068",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1080,
        "y": 1560,
        "wires": [
            [
                "65b8f729748b5ecc"
            ]
        ]
    },
    {
        "id": "44925c267016b3f7",
        "type": "link in",
        "z": "966985d68ebb4990",
        "d": true,
        "name": "",
        "links": [
            "39f8d3463d10ccfb",
            "75c312c1494fea2e"
        ],
        "x": 65,
        "y": 1560,
        "wires": [
            [
                "514fddfab201e633"
            ]
        ]
    },
    {
        "id": "8f12203bf931d988",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "233708268636f815",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "time",
        "x": 250,
        "y": 1400,
        "wires": [
            [
                "4d12c082bff0d9a8"
            ]
        ]
    },
    {
        "id": "cf528e5358dce9df",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "233708268636f815",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "5",
        "topic": "start",
        "x": 250,
        "y": 1360,
        "wires": [
            [
                "4d12c082bff0d9a8"
            ]
        ]
    },
    {
        "id": "4d12c082bff0d9a8",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "233708268636f815",
        "name": "Function schedule import",
        "func": "\n//////////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////////////////\nvar start_today_import  = flow.get(\"start_today_import\",\"file\");                //\nvar total_kwh_import    = flow.get('total_kwh_import',\"file\");                  //\nvar F_SOLAR             = global.get('F_SOLAR',\"file\");                         //\n\nif (total_kwh_import === undefined) {total_kwh_import = msg.payload;}\nif (total_kwh_import === undefined) {total_kwh_import = 0;}\n\n\n\nif (start_today_import === undefined)\n    {\n        start_today_import = total_kwh_import;\n        flow.set(\"start_today_import\",total_kwh_import,\"file\");\n    }   \nif (msg.topic == \"time\" && F_SOLAR.state == 0)                                                        // When @ midnight, reset start_today_import to 0.\n    {\n\n        global.set(\"F_SOLAR.function_active_state\",0,\"file\");        \n        msg.topic           = \"kWh\";\n        msg.payload         = 0;\n        \n        if (total_kwh_import !== undefined)\n            {\n                flow.set('start_today_import',total_kwh_import,\"file\");\n            }\n                return [msg,null,null];\n    }\nif (msg.topic == \"time\" && F_SOLAR.state == 1)                                                        // When @ midnight, reset start_today_import to 0.\n    {\n        msg.topic           = \"kWh\";\n        msg.payload         = 0;\n        \n        if (total_kwh_import !== undefined)\n            {\n                flow.set('start_today_import',total_kwh_import,\"file\");\n            }\n\n        else \n            {\n                return [msg];\n            }\n    }\n//if (msg.topic == \"start\" && F_SOLAR.state == 1)\nif (msg.topic == \"start\")\n    {\n        let msg1={};\n        \n        msg1.payload = total_kwh_import - start_today_import;\n        msg1.payload = Number(msg1.payload).toFixed(2);\n        msg1.payload = parseFloat(msg1.payload);\n        msg1.topic = \"kWh\";\n        return [msg1];\n    }\nelse\n    {\n        var until_now       =   (msg.payload - start_today_import);            // calculate todays production in kWh\n        msg.payload = until_now;\n        msg.payload = Number(msg.payload).toFixed(2);\n        msg.payload = parseFloat(msg.payload);\n        msg.topic = \"kWh\";\n        return [msg];\n    }\n    ",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "\n",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1320,
        "wires": [
            [
                "75c312c1494fea2e"
            ]
        ],
        "outputLabels": [
            "kWh today"
        ]
    },
    {
        "id": "2b03f7e8408f5f56",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "2bd11d2d909e2ba3",
        "name": "Line - Charts",
        "order": 6,
        "width": 14,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 550,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "75c312c1494fea2e",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "P1 Output - Power consumption Today (kWh)",
        "mode": "link",
        "links": [
            "44925c267016b3f7"
        ],
        "x": 1210,
        "y": 1320,
        "wires": [],
        "l": true
    },
    {
        "id": "edf195c89ff83486",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "P1 Output - Power production (kWh)",
        "mode": "link",
        "links": [],
        "x": 1170,
        "y": 440,
        "wires": [],
        "l": true
    },
    {
        "id": "40abfbbe563b32ac",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "2efa0af27c69d4d0",
        "name": "",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 865,
        "y": 640,
        "wires": [],
        "inputLabels": [
            "to log"
        ]
    },
    {
        "id": "4eef204ba842c2fa",
        "type": "comment",
        "z": "966985d68ebb4990",
        "name": "1 - connect your p1 power meter (production) to the grey node",
        "info": "",
        "x": 1720,
        "y": 120,
        "wires": []
    },
    {
        "id": "9765c40bf881d992",
        "type": "ui_gauge",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Live Gauge",
        "group": "2bd11d2d909e2ba3",
        "order": 1,
        "width": 4,
        "height": 5,
        "gtype": "gage",
        "title": "Power live",
        "label": "{{msg.topic}}",
        "format": "{{value}} W",
        "min": "-5000",
        "max": "4000",
        "colors": [
            "#f59b56",
            "#de425b",
            "#de425b"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 550,
        "y": 2580,
        "wires": []
    },
    {
        "id": "80ef562075a4181e",
        "type": "ui_chart",
        "z": "966985d68ebb4990",
        "name": "Bar Chart import_export_result",
        "group": "2bd11d2d909e2ba3",
        "order": 8,
        "width": 4,
        "height": 7,
        "label": "Today (kWh)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "Waiting for data ...  (will start at midnight) ",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#f59b56",
            "#de425b",
            "#1f77b4",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1150,
        "y": 1620,
        "wires": [
            [
                "47d9da722231d15b"
            ]
        ]
    },
    {
        "id": "ecb6c9034ddc15d4",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "RESET",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1080,
        "y": 1660,
        "wires": [
            [
                "80ef562075a4181e"
            ]
        ]
    },
    {
        "id": "9c0c527bd2fd1a7b",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "group": "b7f22c282fde0f86",
        "order": 18,
        "width": 9,
        "height": 1,
        "name": "Current status",
        "label": "Current status",
        "format": "<font color= {{msg.color}} > {{msg.payload}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 960,
        "y": 3400,
        "wires": []
    },
    {
        "id": "cee35b0a1e2da0ea",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "",
        "func": "var F_SOLAR                         = global.get('F_SOLAR',\"file\");\n\n\nvar solar_function_status1          = flow.get('solar_function_status1',\"file\");\nvar solar_function_status2          = flow.get('solar_function_status2',\"file\");\n\nif (msg.payload == \"new_day\")\n    {\n        flow.set('solar_function_status1',undefined,\"file\");\n        flow.set('solar_function_status2',undefined,\"file\");\n        global.set ('F_SOLAR.function_active_state',0,\"file\");\n        return null;\n    }\nelse\n{\n    let msg1={};\n    if (F_SOLAR.function_active_state == 0 || F_SOLAR.function_active_state === undefined) \n        {\n            msg1.payload = \"Idle\";\n            msg1.topic = 'Solar function status';\n            msg1.color = \"\";\n            return [msg1];\n        }\n    if (F_SOLAR.function_active_state == 1)\n        {\n            if (solar_function_status1 !== undefined)\n                {\n                    msg1.payload = solar_function_status1;\n                }\n            if (solar_function_status1 === undefined)\n                {\n                    msg1.payload = \"ACTIVE (\" + msg.payload + \")\";\n                    flow.set('solar_function_status1',msg1.payload,\"file\");\n                }\n            msg1.topic = 'Solar function status';\n            msg1.color = \"gold\";\n            return [msg1];\n        }\n    if (F_SOLAR.function_active_state == 2)\n        {\n            if (solar_function_status2 !== undefined)\n                {\n                    msg1.payload = solar_function_status2;\n                }\n            if (solar_function_status2 === undefined)\n                {\n                    msg1.payload = \"Completed (\" + msg.payload + \")\";\n                    flow.set('solar_function_status2',msg1.payload,\"file\");\n                }\n            msg1.topic = 'Solar function status';\n            msg1.color = \"green\";\n            return [msg1];\n        }        \n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 3400,
        "wires": [
            [
                "85461bac19f80e72"
            ]
        ]
    },
    {
        "id": "85461bac19f80e72",
        "type": "rbe",
        "z": "966985d68ebb4990",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 790,
        "y": 3400,
        "wires": [
            [
                "9c0c527bd2fd1a7b",
                "78f070a993f73c0c"
            ]
        ]
    },
    {
        "id": "052d06709637dc81",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "new_day",
        "payloadType": "str",
        "x": 150,
        "y": 3440,
        "wires": [
            [
                "cee35b0a1e2da0ea"
            ]
        ]
    },
    {
        "id": "460148df6a225d24",
        "type": "smooth",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "property": "payload",
        "action": "max",
        "count": "10",
        "round": "0",
        "mult": "single",
        "reduce": true,
        "x": 660,
        "y": 2660,
        "wires": [
            [
                "5c90f480e0f6e8ac"
            ]
        ]
    },
    {
        "id": "5c90f480e0f6e8ac",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "func": "\nvar value = msg.payload;\nif (value < 0) {value = -1 * value;}        // get rid of a minus \nvalue = value + 600;                        // manipulate the rounding a bit\nvalue = Math.round(value/1000)*1000;        // the rounding itself\n\n\n\n\n\nvar current_gauge_limits = flow.get('solar_gauge_min_max_value');\nif (current_gauge_limits === undefined)\n    {\n        current_gauge_limits = flow.get('solar_gauge_min_max_value',\"file\");\n    }\n\nif (value > current_gauge_limits || current_gauge_limits === undefined)\n    {\n    flow.set('solar_gauge_min_max_value',value,\"file\");\n    flow.set('solar_gauge_min_max_value',value);\n    }\n\nlet msg1={};\nlet msg2={};\nlet msg3={};\nlet msg4={};\nlet msg5={};\n\n\nmsg1 = {ui_control:{max:current_gauge_limits}};\nmsg2 = {ui_control:{min:(-1 * current_gauge_limits)}};\nmsg3 = {ui_control:{seg1:0, seg2:0}};\nmsg4 = {ui_control:{ymin:(-1 * current_gauge_limits)}};\nmsg5 = {ui_control:{ymax:current_gauge_limits}};\n\n\n\nreturn [msg1,msg2,msg3,msg4,msg5];\n",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 2700,
        "wires": [
            [
                "d6bf90086794b1ac"
            ],
            [
                "d6bf90086794b1ac"
            ],
            [
                "d6bf90086794b1ac"
            ],
            [
                "77e1377aea412936"
            ],
            [
                "77e1377aea412936"
            ]
        ],
        "outputLabels": [
            "max",
            "min",
            "seg",
            "",
            ""
        ]
    },
    {
        "id": "d4b0a313434a3fd9",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "start",
        "payload": "50",
        "payloadType": "num",
        "x": 660,
        "y": 2700,
        "wires": [
            [
                "5c90f480e0f6e8ac"
            ]
        ]
    },
    {
        "id": "803505e9e8372578",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Chart - Live Gauge",
        "links": [
            "d6bf90086794b1ac"
        ],
        "x": 365,
        "y": 2620,
        "wires": [
            [
                "9765c40bf881d992"
            ]
        ]
    },
    {
        "id": "d6bf90086794b1ac",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "mode": "link",
        "links": [
            "803505e9e8372578"
        ],
        "x": 935,
        "y": 2680,
        "wires": []
    },
    {
        "id": "c0ee68059878b294",
        "type": "smooth",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "property": "payload",
        "action": "min",
        "count": "10",
        "round": "0",
        "mult": "single",
        "reduce": true,
        "x": 660,
        "y": 2740,
        "wires": [
            [
                "5c90f480e0f6e8ac"
            ]
        ]
    },
    {
        "id": "45de8d4b61f74361",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Chart Power history (W)",
        "links": [
            "77e1377aea412936",
            "c921d9cfc05712ec"
        ],
        "x": 365,
        "y": 2540,
        "wires": [
            [
                "bdd8cc1b7fb80f3f"
            ]
        ]
    },
    {
        "id": "77e1377aea412936",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "mode": "link",
        "links": [
            "45de8d4b61f74361"
        ],
        "x": 935,
        "y": 2720,
        "wires": []
    },
    {
        "id": "5f2ca6fd7cf3d5c5",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nif (isNaN(msg.payload) === true) { return null }\n\n///////////////////////////////////////////////////////////////////\nvar P1_type = global.get('F_SOLAR.P1_type', \"file\");\n\nif (P1_type == \"type2\") {\n    if (msg.payload < 0) { msg.topic = 'Production' }\n\n    if (msg.payload > 0) { msg.topic = 'Consumption' }\n\n    return msg;\n}\n\nif (P1_type == \"type1\") {\n    let msg1={};\n\n    var current_import_value = flow.get('current_import_value') \n    var current_export_value = flow.get('current_export_value') \n    \n    if (current_import_value === undefined || current_export_value === undefined || isNaN(current_import_value) === true || isNaN(current_export_value) === true) { return null}\n\n    msg1.payload = current_export_value + current_import_value;\n    if (msg1.payload >= 0) { msg1.topic = 'Consumption' }\n    if (msg1.payload < 0) { msg1.topic = 'Production' }\n\n    return msg1\n    \n\n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 2580,
        "wires": [
            [
                "9765c40bf881d992",
                "460148df6a225d24",
                "c0ee68059878b294"
            ]
        ]
    },
    {
        "id": "cb712c05b08bf433",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 130,
        "y": 3800,
        "wires": [
            [
                "b463820910564b36"
            ]
        ]
    },
    {
        "id": "623dc28b8a4cccdd",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "b7f22c282fde0f86",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "Spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1100,
        "y": 1820,
        "wires": []
    },
    {
        "id": "8f06615b7f974a19",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "b7f22c282fde0f86",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "Spacer 6",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 940,
        "y": 1820,
        "wires": []
    },
    {
        "id": "88d0285e2915c5d9",
        "type": "link out",
        "z": "966985d68ebb4990",
        "name": "kWh Result",
        "mode": "link",
        "links": [],
        "x": 735,
        "y": 1500,
        "wires": []
    },
    {
        "id": "941e2e6b17a45171",
        "type": "change",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "kWh_prod",
                "fromt": "str",
                "to": "kWh",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "kWh_result",
                "fromt": "str",
                "to": "kWh",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 2080,
        "wires": [
            [
                "87da7c125b68ad72"
            ]
        ]
    },
    {
        "id": "add57b730a3e769f",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "8",
        "topic": "",
        "payload": "0.001",
        "payloadType": "num",
        "x": 150,
        "y": 460,
        "wires": [
            [
                "5256af8b7309c113"
            ]
        ]
    },
    {
        "id": "af24696818983d4c",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "4",
        "topic": "",
        "payload": "0.001",
        "payloadType": "num",
        "x": 150,
        "y": 420,
        "wires": [
            [
                "5256af8b7309c113"
            ]
        ]
    },
    {
        "id": "63bcc91caacdcf55",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "9",
        "topic": "",
        "payload": "0.001",
        "payloadType": "num",
        "x": 170,
        "y": 1180,
        "wires": [
            [
                "3ddc8ec4b5d75af2"
            ]
        ]
    },
    {
        "id": "0b2d388baee905a4",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "0.001",
        "payloadType": "num",
        "x": 170,
        "y": 1140,
        "wires": [
            [
                "3ddc8ec4b5d75af2"
            ]
        ]
    },
    {
        "id": "37178acf2fda2d9d",
        "type": "delay",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 780,
        "y": 3020,
        "wires": [
            [
                "b50ab0a4981f9d17"
            ]
        ]
    },
    {
        "id": "78507acac200e031",
        "type": "delay",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 780,
        "y": 2980,
        "wires": [
            [
                "e62a354ce682ea6f"
            ]
        ]
    },
    {
        "id": "4f0d0fe30d09e055",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 130,
        "y": 3840,
        "wires": [
            [
                "b463820910564b36"
            ]
        ]
    },
    {
        "id": "437ef6d2304bdd10",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 130,
        "y": 3760,
        "wires": [
            [
                "b463820910564b36"
            ]
        ]
    },
    {
        "id": "bd079d704c31d5a7",
        "type": "ui_button",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "group": "2bd11d2d909e2ba3",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Reset scale",
        "tooltip": "Press and wait 5 minutes for the chart to update. This RESET impactes Power Live and Power History chart only.",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 670,
        "y": 2780,
        "wires": [
            [
                "a8beed6bcea8ec08"
            ]
        ]
    },
    {
        "id": "a8beed6bcea8ec08",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "func": "flow.set('solar_gauge_min_max_value',undefined,\"file\");\nflow.set('solar_gauge_min_max_value',undefined);",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 2780,
        "wires": []
    },
    {
        "id": "5fb3c7be3b428b42",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "2bd11d2d909e2ba3",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "Spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1000,
        "y": 2780,
        "wires": []
    },
    {
        "id": "ac392c197fe09917",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "group": "2bd11d2d909e2ba3",
        "order": 5,
        "width": 1,
        "height": 1,
        "name": "Spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 980,
        "y": 2760,
        "wires": []
    },
    {
        "id": "37aa061ab91471ec",
        "type": "ui_dropdown",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "dropdown import",
        "label": "",
        "tooltip": "Import correction",
        "place": "Select option",
        "group": "338420d1319e8350",
        "order": 12,
        "width": 2,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "1000",
                "value": 1000,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 390,
        "y": 1020,
        "wires": [
            [
                "8aa8fe1b9cd61f3c"
            ]
        ]
    },
    {
        "id": "890a57ef3afcf284",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "group": "338420d1319e8350",
        "order": 13,
        "width": 13,
        "height": 1,
        "name": "result import",
        "label": "Outcome after correction *",
        "format": "{{msg.payload}} W",
        "layout": "row-spread",
        "className": "",
        "x": 370,
        "y": 1060,
        "wires": []
    },
    {
        "id": "856711de93142cb9",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "group": "338420d1319e8350",
        "order": 10,
        "width": 13,
        "height": 1,
        "name": "raw value import",
        "label": "P1 raw consumption value",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 380,
        "y": 980,
        "wires": []
    },
    {
        "id": "8aa8fe1b9cd61f3c",
        "type": "change",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "correction",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 1020,
        "wires": [
            [
                "3ddc8ec4b5d75af2"
            ]
        ]
    },
    {
        "id": "7f9c4451a116b794",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "group": "338420d1319e8350",
        "order": 11,
        "width": 11,
        "height": 1,
        "name": "import correction txt",
        "label": "Correction factor",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 190,
        "y": 1020,
        "wires": []
    },
    {
        "id": "e5a024baed5f8a58",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "group": "338420d1319e8350",
        "name": "Line - Setup  import",
        "order": 9,
        "width": 13,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Consumption</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 390,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "26c4d827da98fd56",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "group": "338420d1319e8350",
        "name": "Line - Setup export",
        "order": 14,
        "width": 13,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Production</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 470,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "ce787867699a6a50",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "group": "338420d1319e8350",
        "order": 18,
        "width": 13,
        "height": 1,
        "name": "result export",
        "label": "Outcome after correction **",
        "format": "{{msg.payload}} W",
        "layout": "row-spread",
        "className": "",
        "x": 450,
        "y": 280,
        "wires": []
    },
    {
        "id": "f58197b3d1d9d1d0",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "group": "338420d1319e8350",
        "order": 15,
        "width": 13,
        "height": 1,
        "name": "raw value export",
        "label": "P1 raw production value",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 460,
        "y": 200,
        "wires": []
    },
    {
        "id": "d31bb33a7ab5445e",
        "type": "change",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "correction",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 240,
        "wires": [
            [
                "5256af8b7309c113"
            ]
        ]
    },
    {
        "id": "1c7292b507901827",
        "type": "ui_dropdown",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "dropdown export",
        "label": "",
        "tooltip": "Export correction",
        "place": "Select option",
        "group": "338420d1319e8350",
        "order": 17,
        "width": 2,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "1",
                "value": 1,
                "type": "num"
            },
            {
                "label": "1000",
                "value": 1000,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 470,
        "y": 240,
        "wires": [
            [
                "d31bb33a7ab5445e"
            ]
        ]
    },
    {
        "id": "a9efc23cf56dc231",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "group": "338420d1319e8350",
        "order": 16,
        "width": 11,
        "height": 1,
        "name": "export correction txt",
        "label": "Correction factor",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 230,
        "y": 240,
        "wires": []
    },
    {
        "id": "f4563963b2c49d22",
        "type": "comment",
        "z": "966985d68ebb4990",
        "name": "2 - connect your p1 power meter (consumption) to the grey node. (this is optional)",
        "info": "",
        "x": 1780,
        "y": 160,
        "wires": []
    },
    {
        "id": "375bbd780529afe0",
        "type": "rbe",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1230,
        "y": 860,
        "wires": [
            [
                "3ddc8ec4b5d75af2",
                "856711de93142cb9"
            ]
        ]
    },
    {
        "id": "88ea0371f9cecd37",
        "type": "rbe",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1190,
        "y": 100,
        "wires": [
            [
                "f58197b3d1d9d1d0",
                "5256af8b7309c113"
            ]
        ]
    },
    {
        "id": "8ba23174457c635d",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "group": "338420d1319e8350",
        "name": "Line - Setup export",
        "order": 19,
        "width": 14,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Note:</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 650,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "4aa1e7a1e212ad06",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "group": "338420d1319e8350",
        "order": 20,
        "width": 14,
        "height": 5,
        "name": "note text",
        "label": "Live values are shown in \"P1 raw xx value\".<br>Note that in case of consumption, only the consumption value will be updated.<br>In case of production, only the production value will be updated.<br><br>This could mean you need to wait for consumption / production value to be received from P1 to know for sure it is setup correctly.<br><br>*  Energy consumption is a positive value. <br>** Energy production is a negative value.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 200,
        "y": 360,
        "wires": []
    },
    {
        "id": "153d971fff0a3ed3",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Store chart",
        "func": "\n\nvar myArray = msg;\nflow.set(\"chart_solar_power_history\", myArray,\"file\");\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "cc71fabeef44a7fe",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 330,
        "y": 2720,
        "wires": [
            [
                "19e1b78cc7d0e897"
            ]
        ]
    },
    {
        "id": "19e1b78cc7d0e897",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Restore chart",
        "func": "let msg1={};\nmsg1 = flow.get(\"chart_solar_power_history\",\"file\");\n\nif (msg1 === undefined)\n    {\n        return null;\n    }\n    \nreturn msg1;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 2780,
        "wires": [
            [
                "c921d9cfc05712ec"
            ]
        ]
    },
    {
        "id": "c921d9cfc05712ec",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "link out 13",
        "mode": "link",
        "links": [
            "45de8d4b61f74361"
        ],
        "x": 485,
        "y": 2780,
        "wires": []
    },
    {
        "id": "b9947e738c3857dd",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "Restore chart",
        "func": "let msg1={};\nmsg1 = flow.get(\"chart_solar_todays_result\",\"file\");\nif (msg1 === undefined)\n    {return null;}\nreturn msg1;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1620,
        "wires": [
            [
                "65b8f729748b5ecc"
            ]
        ]
    },
    {
        "id": "2590f42325cddaa0",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1640,
        "wires": [
            [
                "b9947e738c3857dd",
                "74c43f1541cb9220"
            ]
        ]
    },
    {
        "id": "241a32186671a626",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "Store chart",
        "func": "var myArray = msg;\nflow.set(\"chart_solar_todays_result\", myArray,\"file\");\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "74c43f1541cb9220",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "Restore chart",
        "func": "let msg1={};\nmsg1 = flow.get(\"chart_solar_import_export_result\",\"file\");\nif (msg1 === undefined)\n    {return null;}\nreturn msg1;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 1660,
        "wires": [
            [
                "80ef562075a4181e"
            ]
        ]
    },
    {
        "id": "67613761035e311d",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "Store chart",
        "func": "var myArray = msg;\nflow.set(\"chart_solar_import_export_result\", myArray,\"file\");",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "58f4dcb609fc506a",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "kWh triggers",
        "func": "var MQTT = global.get('MQTT', \"file\");\nif (MQTT.block_active === 0 || (MQTT.block_active === 1 && MQTT.block_mode === 2 && MQTT.allow_solar === 1)) {\n\n    var F_SOLAR = global.get('F_SOLAR', \"file\");\n    if (F_SOLAR === undefined) { return null; }\n\n    if (F_SOLAR.state === 1) {\n        var TOP4_Operating_Mode_State = global.get('TOP4_Operating_Mode_State', \"file\");\n        var new_Operating_Mode_State;       // just create a variable, empty.\n        var old_Operating_Mode_State;       // just create a variable, empty.\n        var DHW_Current_SP = global.get('TOP9_DHW_Target_Temp', \"file\");\n        var TOP0_Heatpump_State = global.get('TOP0_Heatpump_State', \"file\");\n        var F_stored_next_operating_mode = global.get('F_stored_next_operating_mode', \"file\");\n        var msg1 = {};                                                                // pin 1 - output to DHW setpoint\n        msg1.topic = 'Solar function';                                          // This topic is required to alow the managers.\n        var msg2 = {};                                                                // pin 2 - output to Operation Mode\n        var msg3 = {};                                                                // pin 3 - output to turn on power to heatpump.\n        var msg99 = {};                                                               // pin 4 - output to log\n        var msg4 = {};                                                                // pin 5 - output to ForceDHW toggle\n        var msg5 = {};                                                                // pin 6 - output to timer\n        msg99.topic = \"Function Solar²DHW\";\n        //  return [msg1,msg2,msg3,msg99]\n\n        // Check if all required states are available.\n        if (F_SOLAR.detection_method === undefined || F_SOLAR.threshold === undefined || F_SOLAR.fallback === undefined || F_SOLAR.dhw_sp_high === undefined || TOP4_Operating_Mode_State === undefined || F_SOLAR.power_override === undefined || TOP0_Heatpump_State === undefined) {\n            msg99.payload = \"ERROR: Not all settings in 'Function Solar' are programmed in GUI yet.\";\n            return [null, null, null, msg99];                                       // log output\n        }\n        if (global.get('Sterilization_active', \"file\") === 1)            { return null; }\n        \n        //var TOP2_Force_DHW_State        =global.get('TOP2_Force_DHW_State');                // Current DHW state (on / off). \n        //if (global.get('TOP2_Force_DHW_State', \"file\") == 1)            { return null; }\n\n        \n            //              msg.topic = \"W\";            < > nul\n            //              msg.topic = 'GRID power production kWh';\n            //              msg.topic = 'GRID power consumption kWh';\n            //              msg.topic = '(+) Import (-) Export';\n\n            // Threshold\n            //   kW\n            //   kWh_prod\n            //   kWh_result\n            //\n            // getting rid of all messages which are not related to the selected detection method.\n            //\n            if (F_SOLAR.detection_method == \"kW\" && msg.topic !== 'W') { return null; }\n            if (F_SOLAR.detection_method == \"kWh_prod\" && msg.topic !== 'Export') { return null; }\n            if (F_SOLAR.detection_method == \"kWh_result\" && msg.topic !== 'Result') { return null; }\n            if (msg.payload == 0) { return null; }\n\n            //  convert the W signal to kW so that the value (threshold) are similar.\n            if (F_SOLAR.detection_method === \"kW\") { msg.payload = msg.payload / 1000; }\n\n\n\n\n            // ACTIONS WHEN THE SOLAR FUNCTION IS TRIGGERED FOR START-UP.\n            //////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n            //  Note: (F_SOLAR.threshold > (msg.payload) >>> msg.payload is negative number if energy production is high.\n            //////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n            //\n            if (F_SOLAR.threshold > (msg.payload) && F_SOLAR.function_active_state === 0) {\n                // Operating mode READ (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n                // Operating mode SET (0=Heat only, 1=Cool only, 2=Auto, 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto+DHW\n                \n                var Solar2DHW_DayCounter = global.get('F_SOLAR.Solar2DHW_DayCounter',\"file\");\n                if (Solar2DHW_DayCounter === undefined) {Solar2DHW_DayCounter = 0;}\n                if (Solar2DHW_DayCounter >= 3) {\n                    msg99.payload = \"Solar2DHW_DayCounter \" + Solar2DHW_DayCounter + \". Limit reached. Solar²DHW run not started\";\n                    return ([null, null, null, msg99]);\n                }\n\n                new_Operating_Mode_State = 3; old_Operating_Mode_State = TOP4_Operating_Mode_State;\n                if (TOP4_Operating_Mode_State === 7) { old_Operating_Mode_State = 2; } // correct OM in case of 7\n                if (TOP4_Operating_Mode_State === 8) { old_Operating_Mode_State = 6; } // correct OM in case of 8\n\n                var tag;    // declare variable for tag in log line.\n                if (F_SOLAR.detection_method === \"kW\") { tag = 'kW'; }\n                if (F_SOLAR.detection_method === \"kWh_prod\") { tag = \"Today's export (kWh)\"; }\n                if (F_SOLAR.detection_method === \"kWh_result\") { tag = \"kWh todays result\"; }\n\n                if (TOP0_Heatpump_State === 0 && F_SOLAR.power_override === 0) {\n                    msg99.payload = \"Solar threshold reached but no action fired! (Heat pump is off, 'Allow switch on heat pump' is disabled.)\";\n                    return ([null, null, null, msg99]);\n                }\n\n                if (F_stored_next_operating_mode === undefined) {\n                    global.set('F_stored_next_operating_mode', old_Operating_Mode_State, \"file\");\n                    msg99.payload = 'Stored next operating mode is set to ' + old_Operating_Mode_State ; node.send([null,null,null,msg99]); \n                }\n\n                // msg3///////////////////////////////////////////////////////////////////////////////////////////////////////\n                // Turn on heatpump in case it is off\n                if (TOP0_Heatpump_State === 0 && F_SOLAR.power_override === 1) {\n                    msg99.payload = \"Turn on Heatpump\";\n                    msg3.payload = 1; msg3.source = \"flow\";                                           // send 1 to turn on the heatpump\n                    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n                    node.send([null, null, msg3, null])\n                }\n\n                if (F_SOLAR.use_force_dhw === 1) {\n                    msg4.payload = 1;\n                    msg99.payload = \"Set Force DHW\"\n                    node.send([null,null,null,msg99,msg4])\n                }\n\n                \n\n                // msg1///////////////////////////////////////////////////////////////////////////////////////////////////////\n                // Set DHW setpoint to high\n                if (DHW_Current_SP !== F_SOLAR.dhw_sp_high) {\n                    msg1.payload = F_SOLAR.dhw_sp_high;\n                    msg99.payload = \"triggered threshold (\" + tag + \"). DHW SP to \" + F_SOLAR.dhw_sp_high;\n                    node.send([msg1, null, null, msg99]);\n                }\n\n                // msg2///////////////////////////////////////////////////////////////////////////////////////////////////////\n                // Set Operation Mode\n                if (new_Operating_Mode_State !== old_Operating_Mode_State && old_Operating_Mode_State !== undefined) {\n                    msg2.payload = new_Operating_Mode_State;\n                    msg99.payload = \"Operation mode changed from \" + old_Operating_Mode_State + \" to \" + new_Operating_Mode_State;\n                    node.send([null, msg2, null, msg99]);\n                }\n\n                // msg5 /////////////////////////////////////////////////////////////////////////////////////////////////////\n                // Initiate timer\n                msg5.payload = 'START'; // Start timer\n                node.send([null,null,null,null,null,msg5]);\n\n\n                global.set('F_RTC.automation_active', 0, \"file\");\n                if (F_SOLAR.function_active_state !== 1) {\n                    global.set(\"F_SOLAR.function_active_state\", 1, \"file\");\n//                    var TOP18_Quiet_Mode_Level = global.get('TOP18_Quiet_Mode_Level', \"file\") \n//                    if (TOP18_Quiet_Mode_Level !== undefined && TOP18_Quiet_Mode_Level !== 0){\n//                        global.set('F_SOLAR.stored_quiet_mode_value',TOP18_Quiet_Mode_Level,\"file\");\n//                        let msg7 = {}; msg7.payload = 0;\n//                        msg99.payload = \"Setting QuietMode to: \" + msg7.payload;\n//                        node.send([null, null, null, msg99, null, null, msg7]);\n//                    }\n                    \n                    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n                    return null;\n                }\n            }\n\n\n\n\n            // ACTIONS WHEN THE SOLAR FUNCTION IS TRIGGERED FOR ENDING.\n            //////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n            //\n            if (msg.payload > 0 && F_SOLAR.detection_method === \"kW\" && DHW_Current_SP == F_SOLAR.dhw_sp_high && F_SOLAR.fallback === 1 && F_SOLAR.function_active_state === 1) {\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n                msg1.payload = F_SOLAR.dhw_sp_low;\n                msg99.payload = \"triggered threshold (\" + tag + \"). Above 0kWh threshold. DHW SP to \" + F_SOLAR.dhw_sp_low;\n                global.set(\"F_SOLAR.function_active_state\", 0, \"file\");\n                msg5.reset = 1;                                                                                         // reset any active timer\n                node.send([msg1, null, null, msg99,null,msg5]);\n                return null;\n            }\n\n            //TOP9_DHW_Target_Temp\n            // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n\n            var TOP10_DHW_Temp = global.get('TOP10_DHW_Temp');\n            var TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');       // threewayvalvue 1 = DHW, 0 = HEAT\n\n            if (TOP10_DHW_Temp >= F_SOLAR.dhw_sp_high && F_SOLAR.function_active_state === 1) {\n                /////////////////////////// \n\n                msg99.payload = \"DHW temperature has reached SP high\";\n                msg5.reset = 1;                                                                                         // reset any active timer\n                node.send([null,null,null,msg99,null,msg5])\n                \n\n                let myTimeout = setTimeout(f_rollbackaction, F_SOLAR.delay_after_completion * 60 * 1000);                 // <<<<<<<<<<<<<<<<  DELAY \n                node.status({ fill: \"red\", shape: \"ring\", text: \"\" });\n\n                function f_rollbackaction() {\n                    var F_stored_next_operating_mode = global.get('F_stored_next_operating_mode', \"file\");\n\n                    var F_SOLAR = global.get('F_SOLAR', \"file\");\n                    var DHW_Current_SP = global.get('TOP9_DHW_Target_Temp', \"file\");\n                    //if (F_SOLAR.function_active_state == 2) { return null; }\n\n                    global.set(\"F_SOLAR.function_active_state\", 2, \"file\");\n\n                    msg99.payload = \"Cooldown period (\" + F_SOLAR.delay_after_completion + \" minutes) has ended. Solar function done for today\";\n                    node.send([null, null, null, msg99]);\n                    \n//                    if (F_SOLAR.stored_quiet_mode_value !== undefined) {\n//                        let msg7 = {}; msg7.payload = F_SOLAR.stored_quiet_mode_value;\n//                        global.set('F_SOLAR.stored_quiet_mode_value', undefined, \"file\");\n//                        msg99.payload = \"Restoring QuietMode to: \" + msg7.payload;\n//                        node.send([null, null, null, msg99, null, null, msg7]);\n//                    }\n                    ///////////////////////////////////////////////////\n                    if (F_stored_next_operating_mode !== undefined) {\n                        TOP4_Operating_Mode_State = global.get('TOP4_Operating_Mode_State', \"file\")\n                        if (TOP4_Operating_Mode_State !== F_stored_next_operating_mode) {\n                            msg2.payload = F_stored_next_operating_mode;\n                            if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n                            msg99.payload = \"Restoring previous OperatingMode: \" + msg2.payload;\n                            node.send([null, msg2, null, msg99]);\n                        }\n                        global.set('F_stored_next_operating_mode', undefined, \"file\");\n                        msg99.payload = 'Stored next operating mode is removed'; node.send([null, null, null, msg99]); \n                    }\n                    if (global.get('TOP2_Force_DHW_State') === 1) {\n                        msg99.payload = 'Revert Force DHW';\n                        msg4.payload = 0;\n                        node.send([null,null,null,msg99,msg4]);\n                    }\n\n\n                    if (DHW_Current_SP !== F_SOLAR.dhw_sp_low) {\n                        msg1.payload = F_SOLAR.dhw_sp_low;\n                        msg99.payload = \"Restoring DHW setpoint to: \" + F_SOLAR.dhw_sp_low + \"°C\";\n                        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n                        node.send([msg1, null, null, msg99]);\n                    }\n                    \n                    clearTimeout(myTimeout);\n                    node.status({});\n                }   ////////////// end of f_rollbackaction\n            }\n        \n    }\n}\n\n\n",
        "outputs": 7,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 3020,
        "wires": [
            [
                "78507acac200e031"
            ],
            [
                "0edffe2f6a90c7de"
            ],
            [
                "ee7e3fc1d241d09e"
            ],
            [
                "ba8f8e1c71858357"
            ],
            [
                "934f1b63d4aaf4b0"
            ],
            [
                "75a120223fbc5094",
                "c74eaf61beecf962"
            ],
            [
                "0c161098aa5eeb1a"
            ]
        ],
        "outputLabels": [
            "DHW_SP",
            "new_Operating_Mode_State",
            "solar_turn_on_heatpump",
            "log",
            "ForceDHW",
            "ToTimer",
            "ToQuietMode out"
        ]
    },
    {
        "id": "9b92843d2d8873a3",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "link in 10",
        "links": [
            "6c24c2f990c17968",
            "071320367f2b7a40",
            "1a198a8a916f8d78"
        ],
        "x": 115,
        "y": 3040,
        "wires": [
            [
                "58f4dcb609fc506a"
            ]
        ]
    },
    {
        "id": "1a198a8a916f8d78",
        "type": "link out",
        "z": "966985d68ebb4990",
        "name": "link out 14",
        "mode": "link",
        "links": [
            "9b92843d2d8873a3"
        ],
        "x": 735,
        "y": 1540,
        "wires": []
    },
    {
        "id": "dd80b368fadb1f13",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1520,
        "wires": [
            [
                "cd437e0a80c22bc0"
            ]
        ]
    },
    {
        "id": "f61f7eaf6a10124a",
        "type": "ui_numeric",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "dhw_sp_low",
        "label": "DHW temperature setpoint - low",
        "tooltip": "This setpoint is active below the {{msg.threshold}} treshold",
        "group": "b7f22c282fde0f86",
        "order": 7,
        "width": 9,
        "height": 1,
        "wrap": true,
        "passthru": false,
        "topic": "dhw_sp_low",
        "topicType": "str",
        "format": "{{value}} °C",
        "min": 0,
        "max": "75",
        "step": 1,
        "className": "",
        "x": 550,
        "y": 2000,
        "wires": [
            [
                "ccb17c1dab2540fd",
                "f6779270108c1106"
            ]
        ]
    },
    {
        "id": "9958b10ab396a735",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Load on boot",
        "func": "var F_SOLAR     = global.get('F_SOLAR',\"file\");\nvar save = false;\nif(F_SOLAR === undefined)   { F_SOLAR = {}; }\n\nif (F_SOLAR.state === undefined)                    {F_SOLAR.state = 0; save = true;}\nif (F_SOLAR.dhw_sp_low === undefined)               {F_SOLAR.dhw_sp_low = global.get('TOP9_DHW_Target_Temp',\"file\"); save = true;}\nif (F_SOLAR.dhw_sp_low === undefined)               {return null;}\nif (F_SOLAR.dhw_sp_high === undefined)              {F_SOLAR.dhw_sp_high = F_SOLAR.dhw_sp_low; save = true;}\nif (F_SOLAR.detection_method === undefined)         {F_SOLAR.detection_method = 'kWh_result'; save = true;}\nif (F_SOLAR.threshold === undefined)                {F_SOLAR.threshold = 0; save = true;}\nif (F_SOLAR.fallback === undefined)                 {F_SOLAR.fallback = 0; save = true;}\nif (F_SOLAR.power_override === undefined)           {F_SOLAR.power_override = 0; save = true;}\nif (F_SOLAR.delay_after_completion === undefined)   {F_SOLAR.delay_after_completion = 15; save = true;}\nif (F_SOLAR.use_force_dhw === undefined)            {F_SOLAR.use_force_dhw = 0; save = true;}\n\n\nif (save === true)                                  {global.set('F_SOLAR',F_SOLAR,\"file\");}\n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={}, msg9={}, msg10={};\n\nmsg1.payload = F_SOLAR.state; msg1.topic = 'state';\nmsg2.payload = F_SOLAR.dhw_sp_low;\nmsg3.payload = F_SOLAR.dhw_sp_high;\nmsg4.payload = F_SOLAR.detection_method;\nmsg5.payload = F_SOLAR.threshold;\nmsg6.payload = F_SOLAR.fallback;\nmsg7.payload = F_SOLAR.power_override;\nmsg8.payload = global.get('TOP9_DHW_Target_Temp',\"file\");\nmsg9.payload = F_SOLAR.delay_after_completion;\nmsg10.payload = F_SOLAR.use_force_dhw;\n\n\n\n\nreturn [msg1,msg2,msg3,msg4,msg5,msg6,msg7,msg8,msg9,msg10];",
        "outputs": 10,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1900,
        "wires": [
            [
                "f3f4f51165a33ae4",
                "28c7a4a25703f3c5"
            ],
            [
                "f61f7eaf6a10124a"
            ],
            [
                "16fc69e4b9ff74fd"
            ],
            [
                "ce2634259bc8d6eb"
            ],
            [
                "608ac27952261ad4"
            ],
            [
                "2e9d5424e80ef967"
            ],
            [
                "2a4ffebda936e1bf"
            ],
            [
                "5a4e594ff048795f"
            ],
            [
                "91df0ca5227134fa"
            ],
            [
                "58c85357036405ba"
            ]
        ],
        "outputLabels": [
            "F_SOLAR.state",
            "F_SOLAR.dhw_sp_low",
            "F_SOLAR.dhw_sp_high",
            "F_SOLAR.detection_method",
            "F_SOLAR.threshold",
            "F_SOLAR.fallback",
            "F_SOLAR.power_override",
            "TOP9_DHW_Target_Temp",
            "F_SOLAR.delay_after_completion",
            "F_SOLAR.use_force_dhw"
        ]
    },
    {
        "id": "ccb17c1dab2540fd",
        "type": "rbe",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 790,
        "y": 2000,
        "wires": [
            [
                "b866c59ce44f1281"
            ]
        ]
    },
    {
        "id": "b866c59ce44f1281",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Set msg.topic to variable",
        "func": "\nglobal.set('F_SOLAR.' + msg.topic, msg.payload, \"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "f6779270108c1106",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "link out 41",
        "mode": "link",
        "links": [
            "dd5a385aad192c71"
        ],
        "x": 755,
        "y": 1960,
        "wires": []
    },
    {
        "id": "d2d71d4e69ee31d7",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "link in 32",
        "links": [
            "550d51c7fe788f9e"
        ],
        "x": 365,
        "y": 2420,
        "wires": [
            [
                "5a4e594ff048795f"
            ]
        ]
    },
    {
        "id": "ba8f8e1c71858357",
        "type": "rbe",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 630,
        "y": 3100,
        "wires": [
            [
                "1b0aafd65d5593dd"
            ]
        ]
    },
    {
        "id": "7072144388b44dd3",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "DHW SP",
        "info": "",
        "x": 940,
        "y": 2980,
        "wires": []
    },
    {
        "id": "bd6a778d969a4013",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "OM",
        "info": "",
        "x": 930,
        "y": 3020,
        "wires": []
    },
    {
        "id": "2f80407e5e31dd43",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Power",
        "info": "",
        "x": 930,
        "y": 3060,
        "wires": []
    },
    {
        "id": "c0586f3e8627e510",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Log",
        "info": "",
        "x": 930,
        "y": 3100,
        "wires": []
    },
    {
        "id": "0edffe2f6a90c7de",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Filter",
        "func": "let msg1={};\nvar TOP4_Operating_Mode_State   = global.get('TOP4_Operating_Mode_State',\"file\");\n\nif (msg.payload != TOP4_Operating_Mode_State) {\n    msg.topic = 'Solar2DHW';\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 3020,
        "wires": [
            [
                "37178acf2fda2d9d"
            ]
        ]
    },
    {
        "id": "91df0ca5227134fa",
        "type": "ui_numeric",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "delay_after_completion",
        "label": "Cooldown period after DHW run",
        "tooltip": "",
        "group": "b7f22c282fde0f86",
        "order": 14,
        "width": 9,
        "height": 1,
        "wrap": true,
        "passthru": true,
        "topic": "delay_after_completion",
        "topicType": "str",
        "format": "{{value}} min",
        "min": 0,
        "max": "60",
        "step": 1,
        "className": "",
        "x": 590,
        "y": 2300,
        "wires": [
            [
                "ccb17c1dab2540fd"
            ]
        ]
    },
    {
        "id": "78f070a993f73c0c",
        "type": "link out",
        "z": "966985d68ebb4990",
        "name": "link out 53",
        "mode": "link",
        "links": [
            "3170857651ba82cc"
        ],
        "x": 905,
        "y": 3440,
        "wires": []
    },
    {
        "id": "3170857651ba82cc",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "link in 49",
        "links": [
            "78f070a993f73c0c"
        ],
        "x": 205,
        "y": 1780,
        "wires": [
            [
                "d8210b71067cf6b6"
            ]
        ]
    },
    {
        "id": "d8210b71067cf6b6",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "function 24",
        "func": "let msg1={};\n\nif (msg.color == \"\")        {msg1.state = \"\"; msg1.color = msg.color; } \nif (msg.color == \"gold\")    {msg1.state = \"Active\"; msg1.color = msg.color;} \nif (msg.color == \"green\")   {msg1.state = \"Done\"; msg1.color = msg.color;} \n\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1780,
        "wires": [
            [
                "67fe5d78fed38255"
            ]
        ]
    },
    {
        "id": "514fddfab201e633",
        "type": "delay",
        "z": "966985d68ebb4990",
        "name": "rate",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 170,
        "y": 1560,
        "wires": [
            [
                "cd437e0a80c22bc0"
            ]
        ]
    },
    {
        "id": "7dacecebd1d1ac1b",
        "type": "delay",
        "z": "966985d68ebb4990",
        "name": "rate",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1370,
        "y": 1520,
        "wires": [
            [
                "241a32186671a626"
            ]
        ]
    },
    {
        "id": "47d9da722231d15b",
        "type": "delay",
        "z": "966985d68ebb4990",
        "name": "rate",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1370,
        "y": 1620,
        "wires": [
            [
                "67613761035e311d"
            ]
        ]
    },
    {
        "id": "2717d21023b674ad",
        "type": "delay",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "rate",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 790,
        "y": 2500,
        "wires": [
            [
                "153d971fff0a3ed3"
            ]
        ]
    },
    {
        "id": "b71c2a60abf302a0",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "99",
        "payloadType": "num",
        "x": 130,
        "y": 3880,
        "wires": [
            [
                "b463820910564b36"
            ]
        ]
    },
    {
        "id": "cdfda8a3de0b8627",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 130,
        "y": 3520,
        "wires": [
            [
                "52793ff25612a2d3"
            ]
        ]
    },
    {
        "id": "52793ff25612a2d3",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "function 28",
        "func": "global.set('F_SOLAR.function_active_state',msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 3560,
        "wires": [
            [
                "98f9e356d626ae30"
            ]
        ]
    },
    {
        "id": "23c8afa8409335b2",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 130,
        "y": 3560,
        "wires": [
            [
                "52793ff25612a2d3"
            ]
        ]
    },
    {
        "id": "98f9e356d626ae30",
        "type": "debug",
        "z": "966985d68ebb4990",
        "name": "debug 184",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 3560,
        "wires": []
    },
    {
        "id": "d399a23f6936f23f",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "function 29",
        "func": "var F_SOLAR = global.get('F_SOLAR',\"file\");\nif (F_SOLAR === undefined) {return null}\n\nlet msg1={}; // import correction\nlet msg2={}; // export correction\n\nmsg1.payload = F_SOLAR.import_correction;\nmsg2.payload = F_SOLAR.export_correction;\n\nif (msg1.payload !== undefined) {node.send([msg1,null]);}\nif (msg2.payload !== undefined) {node.send([null,msg2]);}\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 300,
        "wires": [
            [
                "37aa061ab91471ec"
            ],
            [
                "1c7292b507901827"
            ]
        ],
        "outputLabels": [
            "import correction",
            "export correction"
        ]
    },
    {
        "id": "d4627d98961f13e3",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "link in 61",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 115,
        "y": 300,
        "wires": [
            [
                "d399a23f6936f23f"
            ]
        ]
    },
    {
        "id": "4ed5f3924acf26ff",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "Solar2DHW toggle on/off",
        "links": [
            "cd1b20e317c3d446",
            "91c75ca9f3471bd5"
        ],
        "x": 155,
        "y": 1840,
        "wires": [
            [
                "28c7a4a25703f3c5"
            ]
        ]
    },
    {
        "id": "4005ad2197c7fdc7",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "P1 power production",
        "links": [
            "426ef80beb8421b0",
            "8451442bc6f66a71"
        ],
        "x": 725,
        "y": 100,
        "wires": [
            [
                "88ea0371f9cecd37"
            ]
        ]
    },
    {
        "id": "d557c110dc040f11",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "P1 power consumption",
        "links": [
            "26dde6e1edd2822e",
            "cbd9f65956ab693b"
        ],
        "x": 725,
        "y": 860,
        "wires": [
            [
                "375bbd780529afe0"
            ]
        ]
    },
    {
        "id": "a4978bac5e26345c",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 130,
        "y": 3600,
        "wires": [
            [
                "52793ff25612a2d3"
            ]
        ]
    },
    {
        "id": "d4088fbe0128c6fa",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "group": "338420d1319e8350",
        "name": "Line - Setup",
        "order": 7,
        "width": 14,
        "height": 3,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>P1 value correction</left> <br>\nSome P1 meters deliver values in Watts (W) while others deliver the values in kiloWatts (kW).<br>\nIn this section you can change the correction factor of the incoming values.\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 570,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "f41ea674b5e8c312",
        "type": "delay",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "rate",
        "pauseType": "timed",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 250,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "118251c54a0e5354",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0.050",
        "payloadType": "num",
        "x": 970,
        "y": 60,
        "wires": [
            [
                "88ea0371f9cecd37"
            ]
        ]
    },
    {
        "id": "e8806a18af3b7faf",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0.1",
        "payloadType": "num",
        "x": 950,
        "y": 180,
        "wires": [
            [
                "88ea0371f9cecd37"
            ]
        ]
    },
    {
        "id": "dabefb1ece62d6e1",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 520,
        "wires": [
            [
                "5256af8b7309c113"
            ]
        ]
    },
    {
        "id": "1b3d47cfa4607aaa",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "bf2c1d5a22f56dd8",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "5256af8b7309c113"
            ]
        ]
    },
    {
        "id": "8481a5f62c29266b",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 1240,
        "wires": [
            [
                "3ddc8ec4b5d75af2"
            ]
        ]
    },
    {
        "id": "fa3ff57605345dc3",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "3b5324e3d80d96a1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 1220,
        "wires": [
            [
                "3ddc8ec4b5d75af2"
            ]
        ]
    },
    {
        "id": "3e0d6b3d8a72e4b6",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "01 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1500,
        "wires": [
            [
                "cd437e0a80c22bc0"
            ]
        ]
    },
    {
        "id": "7934d1c52982f0b3",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Abort manually",
        "func": "if (global.get(\"F_SOLAR.function_active_state\", \"file\") == 1 && msg.payload == 0) {\n    let msg2={} // Popup\n    msg2.payload = \"<B> Solar²DHW disabled</B>\" +\n    \"</br></br> A solar²DHW run is in progress...\" + \n    \"</br></br> Do you want to ABORT the run?</br></br>\";\n    msg2.value = msg.payload;\n\n    return msg2;\n}\n\nif (global.get(\"F_SOLAR.function_active_state\", \"file\") == 2 && msg.payload == 0) {\n    let msg2={} // Popup\n    msg2.payload = \"<B> Solar²DHW disabled</B>\" +\n    \"</br></br> A solar²DHW run has completed...\" + \n    \"</br></br> Do you want to RESET the status to Idle?</br></br>\";\n    msg2.value = msg.payload;\n\n    return msg2;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 3220,
        "wires": [
            [
                "303321d936e93089"
            ]
        ]
    },
    {
        "id": "303321d936e93089",
        "type": "trigger",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 440,
        "y": 3220,
        "wires": [
            [
                "f84826517a420fde",
                "57edeab9475a6a20"
            ]
        ]
    },
    {
        "id": "f84826517a420fde",
        "type": "trigger",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "op1": "",
        "op2": "[]",
        "op1type": "nul",
        "op2type": "json",
        "duration": "30",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 590,
        "y": 3220,
        "wires": [
            [
                "57edeab9475a6a20"
            ]
        ]
    },
    {
        "id": "57edeab9475a6a20",
        "type": "ui_toast",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "position": "dialog",
        "displayTime": "10",
        "highlight": "yellow",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No (default 30 sec)",
        "raw": true,
        "className": "popup_class",
        "topic": "",
        "name": "Yes / No",
        "x": 740,
        "y": 3220,
        "wires": [
            [
                "ba868579131b4ef5"
            ]
        ]
    },
    {
        "id": "ba868579131b4ef5",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Forward Yes",
        "func": "if (msg.payload === \"Yes\")   {\n    return msg;\n}\nreturn null;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 3220,
        "wires": [
            [
                "a2c6578da1065ba6"
            ]
        ]
    },
    {
        "id": "4fe035f4e6248924",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Disable Run (Manual)",
        "func": "if (msg.payload == 'Yes' || msg.payload == 'new_day' || msg.payload == 'timer') {                                                     // YES pressed by user. Initiating the abort\n    \n    var msg1                            ={};\n        msg1.topic = 'Solar function';                                          // This topic is required to alow the managers.\n    var msg2                            ={};\n    var msg99                           ={};\n        msg99.topic = \"Function Solar²DHW\";    \n    var msg4                            ={};\n    var F_SOLAR                         = global.get('F_SOLAR', \"file\");\n    var TOP4_Operating_Mode_State       = global.get('TOP4_Operating_Mode_State', \"file\");\n    var F_stored_next_operating_mode    = global.get('F_stored_next_operating_mode', \"file\");\n    var DHW_Current_SP                  = global.get('TOP9_DHW_Target_Temp', \"file\");\n    var function_active_state           = global.get('F_SOLAR.function_active_state', \"file\");\n\n    /////////////////////////// \n    \n    if (msg.payload == 'Yes') {\n        msg99.payload = \"Manually aborted\";\n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n        node.send([null, null, null, msg99])\n    }\n\n    if (msg.payload == 'new_day') {\n        global.set('F_SOLAR.Solar2DHW_DayCounter', 0,\"file\");                   // Reset the day-counter for the number aborted Solar²DHW runs\n    }\n\n    if (msg.payload == 'timer') {\n       \n        if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n        \n        var Solar2DHW_DayCounter = F_SOLAR.Solar2DHW_DayCounter;\n        if (Solar2DHW_DayCounter === undefined) { Solar2DHW_DayCounter = 0; }\n        Solar2DHW_DayCounter = Solar2DHW_DayCounter + 1;\n        global.set('F_SOLAR.Solar2DHW_DayCounter', Solar2DHW_DayCounter,\"file\");\n        if (Solar2DHW_DayCounter < 3) { msg99.payload = \"Solar²DHW run did not start in the last 15 minutes. Aborting attempt \" + Solar2DHW_DayCounter + \" of 3\"; }\n        if (Solar2DHW_DayCounter == 3) { msg99.payload = \"Solar²DHW run did not start in the last 15 minutes. Aborting last attempt \" + Solar2DHW_DayCounter + \" of 3. Day limit now reached)\"; }\n        node.send([null, null, null, msg99])\n    }\n\n    if (function_active_state == 1){\n        ///////////////////////////////////////////////////\n        if (DHW_Current_SP != F_SOLAR.dhw_sp_low) {\n            msg1.payload = F_SOLAR.dhw_sp_low;\n            msg99.payload = \"Restoring DHW setpoint to: \" + F_SOLAR.dhw_sp_low + \"°C\";\n            if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n            node.send([msg1, null, null, msg99]);\n        }\n\n        if (F_stored_next_operating_mode !== undefined) {\n            TOP4_Operating_Mode_State = global.get('TOP4_Operating_Mode_State', \"file\")                     // get the current OM\n            if (TOP4_Operating_Mode_State != F_stored_next_operating_mode) {                                // Check if it is already correct. If not, it should continue and correct it.\n                msg2.payload = F_stored_next_operating_mode;\n                if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Solar\"); }\n                msg99.payload = \"Restoring previous OperatingMode: \" + msg2.payload;\n                node.send([null, msg2, null, msg99]);\n            }\n            global.set('F_stored_next_operating_mode', undefined, \"file\");\n            msg99.payload = 'Stored next operating mode is removed'; node.send([null, null, null, msg99]); \n        }\n        if (global.get('TOP2_Force_DHW_State') == 1) {                                                      // When enabled, disable Force DHW mode again.\n            msg99.payload = 'Revert Force DHW';\n            msg4.payload = 0;\n            node.send([null, null, null, msg99, msg4]);\n        }\n    }\n    \n    global.set(\"F_SOLAR.function_active_state\", 0, \"file\");\n    flow.set('solar_function_status1', undefined, \"file\");\n    flow.set('solar_function_status2', undefined, \"file\");\n\n}\n",
        "outputs": 5,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 3120,
        "wires": [
            [
                "78507acac200e031"
            ],
            [
                "0edffe2f6a90c7de"
            ],
            [],
            [
                "ba8f8e1c71858357"
            ],
            [
                "934f1b63d4aaf4b0"
            ]
        ],
        "outputLabels": [
            "DHW_SP",
            "new_Operating_Mode_State",
            "solar_turn_on_heatpump",
            "log",
            "ForceDHW"
        ]
    },
    {
        "id": "89d1049d905b86e4",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "link in 97",
        "links": [
            "a2c6578da1065ba6",
            "890cabcd6ea4fff9"
        ],
        "x": 185,
        "y": 3140,
        "wires": [
            [
                "4fe035f4e6248924"
            ]
        ]
    },
    {
        "id": "a2c6578da1065ba6",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "link out 139",
        "mode": "link",
        "links": [
            "89d1049d905b86e4"
        ],
        "x": 1025,
        "y": 3220,
        "wires": []
    },
    {
        "id": "84fd5c4de621f384",
        "type": "link in",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "link in 98",
        "links": [
            "8e16d1ef3e972c95"
        ],
        "x": 115,
        "y": 3220,
        "wires": [
            [
                "7934d1c52982f0b3"
            ]
        ]
    },
    {
        "id": "72d461d425df2d20",
        "type": "moment",
        "z": "966985d68ebb4990",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "Europe/Amsterdam",
        "adjAmount": "0",
        "adjType": "hours",
        "adjDir": "add",
        "format": "HH:mm",
        "locale": "en-US",
        "output": "payload",
        "outputType": "msg",
        "outTz": "{{msg.outTz}}",
        "x": 480,
        "y": 3400,
        "wires": [
            [
                "cee35b0a1e2da0ea"
            ]
        ]
    },
    {
        "id": "4ea279c690f939e4",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "TimeZone",
        "func": "var NodeRed = global.get('NodeRed',\"file\");\nif (NodeRed === undefined){ NodeRed = {} ;}\n\nvar TZ = NodeRed.TZ;\nif (TZ === undefined) { TZ = \"\";}\n\nmsg.outTz = TZ;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 3400,
        "wires": [
            [
                "72d461d425df2d20"
            ]
        ]
    },
    {
        "id": "f15776a167c6b44a",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "link out 142",
        "mode": "link",
        "links": [
            "5a3e1810b8f2135a"
        ],
        "x": 1055,
        "y": 3140,
        "wires": []
    },
    {
        "id": "37b9b30a59f8e729",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "ForceDHW",
        "info": "",
        "x": 940,
        "y": 3140,
        "wires": []
    },
    {
        "id": "58c85357036405ba",
        "type": "ui_switch",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "UseForceDHW",
        "label": "Use Force DHW",
        "tooltip": "(Default Disabled) Set Force DHW toggle during Solar²DHW run. When this is disabled, the internal DHW run logic is followed to initiate the run or not.",
        "group": "b7f22c282fde0f86",
        "order": 12,
        "width": 9,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "use_force_dhw",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 560,
        "y": 2260,
        "wires": [
            [
                "ccb17c1dab2540fd"
            ]
        ]
    },
    {
        "id": "934f1b63d4aaf4b0",
        "type": "delay",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 780,
        "y": 3140,
        "wires": [
            [
                "f15776a167c6b44a"
            ]
        ]
    },
    {
        "id": "7d720a2b1a5bab52",
        "type": "inject",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "new_day",
        "payloadType": "str",
        "x": 130,
        "y": 3100,
        "wires": [
            [
                "4fe035f4e6248924"
            ]
        ]
    },
    {
        "id": "75a120223fbc5094",
        "type": "delay",
        "z": "966985d68ebb4990",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1370,
        "y": 3140,
        "wires": [
            [
                "a2ad78feba4a9dd9"
            ]
        ]
    },
    {
        "id": "a2ad78feba4a9dd9",
        "type": "change",
        "z": "966985d68ebb4990",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "timer",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 3140,
        "wires": [
            [
                "890cabcd6ea4fff9"
            ]
        ]
    },
    {
        "id": "890cabcd6ea4fff9",
        "type": "link out",
        "z": "966985d68ebb4990",
        "name": "link out 143",
        "mode": "link",
        "links": [
            "89d1049d905b86e4"
        ],
        "x": 1685,
        "y": 3140,
        "wires": []
    },
    {
        "id": "c74eaf61beecf962",
        "type": "trigger",
        "z": "966985d68ebb4990",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-1",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1390,
        "y": 3200,
        "wires": [
            [
                "5d1f0e5c627b8d4e"
            ]
        ]
    },
    {
        "id": "5d1f0e5c627b8d4e",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "Check DHW run",
        "func": "var compressor_frequency = global.get('compressor_frequency',\"file\");\nvar TOP60_Internal_Heater_State = global.get('TOP60_Internal_Heater_State',\"file\");\nvar TOP61_External_Heater_State = global.get('TOP61_External_Heater_State',\"file\");\n\nif (compressor_frequency > 0 || TOP60_Internal_Heater_State == 1 || TOP61_External_Heater_State == 1) {\n    var msg1 ={};\n    msg1.reset = 1;\n    return msg1;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 3200,
        "wires": [
            [
                "c74eaf61beecf962",
                "75a120223fbc5094"
            ]
        ]
    },
    {
        "id": "09d26cab08b3dc66",
        "type": "ui_dropdown",
        "z": "966985d68ebb4990",
        "name": "P1 reporting method",
        "label": "",
        "tooltip": "P1 reporting method",
        "place": "Select option",
        "group": "338420d1319e8350",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Type 1",
                "value": "type1",
                "type": "str"
            },
            {
                "label": "Type 2",
                "value": "type2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "user_select",
        "topicType": "str",
        "className": "",
        "x": 1600,
        "y": 360,
        "wires": [
            [
                "f3e2746d7aaeaa5f"
            ]
        ]
    },
    {
        "id": "ca62acbb8c24a15b",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "group": "338420d1319e8350",
        "name": "Line - Type",
        "order": 3,
        "width": 14,
        "height": 7,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>P1 reporting method</left> <br>\nThere are different P1 meters on the market depending on the brand, type or version. Some meters report both total delivery and total consumption as is, without calculating the result of the two.<br>\nType 1: Total consumption AND total production can have a value (not 0) at the same time<br>\nType 2: Total consumption OR total production has a value (not 0), the other is always reported as 0<br>\nThe differrence between the two types is the household's own consumption.<br>\n> Single Phase meters are always of type 2.<br>\n> You cannot choose what you want your meter to report. You need to select what your meter type actually is.<br>\n<br>\nScenario: L1 + L2 = 600W consumption and L3 = 1000W production.<br>\nExample type 1:<br>\nConsumption = L1 + L2 + L3 = 300 + 300 + 0 = 600W<br>\nProduction = L1 + L2 + L3 = 0 + 0 + 1000 = 1000W<br>\n<br>\nExample type 2:<br>\nConsumption = L1 + L2 + L3 = 300 + 300 + 0 = 600W >> 600 - 1000 = -400W >> Result = 0W<br>\nProduction = L1 + L2 + L3 = 0 + 0 + 1000 = 1000W >> 1000 - 600 = 400W >> Result 400W<br>\n<br>\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1570,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "e442b1d82b726adc",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "group": "338420d1319e8350",
        "order": 5,
        "width": 10,
        "height": 1,
        "name": "P1 reporting method txt",
        "label": "P1 reporting method",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1610,
        "y": 460,
        "wires": []
    },
    {
        "id": "f3e2746d7aaeaa5f",
        "type": "function",
        "z": "966985d68ebb4990",
        "name": "function 8",
        "func": "if (msg.topic != 'user_select') {\n    var msg1 = {};\n    msg1.payload = global.get('F_SOLAR.P1_type', \"file\");\n    if (msg1.payload === undefined) { \n        global.set('F_SOLAR.P1_type','type1',\"file\");\n        return null; }\n    msg1.topic = 'user_select';\n    return msg1\n}\n\nif (msg.topic === 'user_select') {\n    global.set('F_SOLAR.P1_type',msg.payload,\"file\");\n    return null;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1820,
        "y": 360,
        "wires": [
            [
                "09d26cab08b3dc66"
            ]
        ]
    },
    {
        "id": "81d6e634f91f379a",
        "type": "ui_template",
        "z": "966985d68ebb4990",
        "group": "2bd11d2d909e2ba3",
        "name": "",
        "order": 9,
        "width": 0,
        "height": 0,
        "format": "<html>\n<!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n\n<head>\n    <hr style=\"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\" ;>\n    <left>Chart info:<br>\n        For type 1 P1 meters, the charts represent the gross import/export kWh values<br>\n        For type 2 P1 meters, the charts represent the nett import/export kWh values<br>\n        <i>(The difference between the two types is the household own consumption)</i>\n    </left>\n\n\n</html>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1460,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "d8c5554f7ca93e4d",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "group": "338420d1319e8350",
        "order": 8,
        "width": 1,
        "height": 8,
        "name": "spaceerrrr",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1810,
        "y": 420,
        "wires": []
    },
    {
        "id": "86451a89c0cc8a6e",
        "type": "ui_text",
        "z": "966985d68ebb4990",
        "group": "338420d1319e8350",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "spacert",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1820,
        "y": 460,
        "wires": []
    },
    {
        "id": "bb3079717b437055",
        "type": "link in",
        "z": "966985d68ebb4990",
        "name": "link in 2",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 1685,
        "y": 280,
        "wires": [
            [
                "f3e2746d7aaeaa5f"
            ]
        ]
    },
    {
        "id": "8c9981c93a934211",
        "type": "inject",
        "z": "966985d68ebb4990",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 1610,
        "y": 320,
        "wires": [
            [
                "f3e2746d7aaeaa5f"
            ]
        ]
    },
    {
        "id": "0b0b29fb11118e6c",
        "type": "delay",
        "z": "966985d68ebb4990",
        "g": "bd6e0b75ff712b33",
        "name": "2/min",
        "pauseType": "queue",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 190,
        "y": 2500,
        "wires": [
            [
                "329a022ba526c218"
            ]
        ]
    },
    {
        "id": "e9cf167aeac6d0d4",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "2efa0af27c69d4d0",
        "name": "In",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 225,
        "y": 600,
        "wires": [
            [
                "aad8f63921d33903"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "4937a9ffd1fca661",
        "type": "function",
        "z": "966985d68ebb4990",
        "g": "233708268636f815",
        "name": "In",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 285,
        "y": 1320,
        "wires": [
            [
                "4d12c082bff0d9a8"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "9bf55ba2cae3c0c1",
        "type": "comment",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Quiet Mode",
        "info": "",
        "x": 950,
        "y": 3180,
        "wires": []
    },
    {
        "id": "0c161098aa5eeb1a",
        "type": "link out",
        "z": "966985d68ebb4990",
        "g": "6f4cdc97add442ff",
        "name": "Solar_quietModeOut",
        "mode": "link",
        "links": [
            "c33b3e865b1bd8b8"
        ],
        "x": 1055,
        "y": 3180,
        "wires": []
    },
    {
        "id": "72f2748729e53ad1",
        "type": "tab",
        "label": "WP Help",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "fca08ea5bf5103fd",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "Solar HELP",
        "style": {
            "label": true
        },
        "nodes": [
            "abdc4499891c6871",
            "739eb34ff6d8c742",
            "6eb23418ea8d86a1",
            "740159707b77305c",
            "e487a445e58768f0",
            "01a4ac4ad26a6b09",
            "468d1cde1e2b4ff3",
            "3b5ab802c150fd86",
            "dc156fecfc1bc1e8",
            "c4295ed66d438dd7",
            "0bc6f2130b8acb9d"
        ],
        "x": 134,
        "y": 99,
        "w": 472,
        "h": 382
    },
    {
        "id": "5505432507101e93",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "ccc HELP",
        "style": {
            "label": true
        },
        "nodes": [
            "be48f3104249b8a0",
            "b33b45b8a4e1398b",
            "184850f4f96ed36c",
            "da5eda62cc98aecc",
            "43be81558a98b102",
            "c2935eeb2b0919cf"
        ],
        "x": 134,
        "y": 499,
        "w": 622,
        "h": 202
    },
    {
        "id": "b5e32619ad0c206e",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "RTC HELP",
        "style": {
            "label": true
        },
        "nodes": [
            "ad4e277358b19235",
            "56f59b7df09abbf3",
            "d00691f660be457b",
            "5f6574f97f240326",
            "8982c1e161d9d215",
            "3c3c8472da1fb85a",
            "5442d7ccc5f28a3f"
        ],
        "x": 794,
        "y": 79,
        "w": 582,
        "h": 202
    },
    {
        "id": "c77aed9e30c539d5",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "Scheduler HELP",
        "style": {
            "label": true
        },
        "nodes": [
            "f9144fc6ad3350af",
            "ecf4984d100b1353",
            "4770fc4ef0f643b3",
            "973d8234e83e6744",
            "c38f069ac9641f6a",
            "00752e5f6b14036b",
            "d0bc87893510d46f",
            "347b614526bf4814",
            "8090bc95e8512738",
            "7ca958b4b94243f8"
        ],
        "x": 794,
        "y": 319,
        "w": 582,
        "h": 262
    },
    {
        "id": "fde5dafe04d72e23",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "SoftStart HELP",
        "style": {
            "label": true
        },
        "nodes": [
            "75571074f2ac434c",
            "c652e74baa241047",
            "088968fcdf03a215",
            "284c3282438b7e4c",
            "c54eb9703d5f9272",
            "e16790ec4eb50d6c",
            "8b7c9a76f8ddca81",
            "c96821120dd58acc",
            "8849a0faf2ae88ef"
        ],
        "x": 794,
        "y": 619,
        "w": 582,
        "h": 302
    },
    {
        "id": "17c379c76892162f",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "COOL HELP",
        "style": {
            "label": true
        },
        "nodes": [
            "b445415377a62384",
            "d8661c018a09abd2",
            "c63ac699b2d80d96",
            "a2b3dab1e41c9373",
            "53c5c87f7c903f13",
            "d2a7400a8f949e59"
        ],
        "x": 134,
        "y": 919,
        "w": 622,
        "h": 202
    },
    {
        "id": "2dcdb7857bd6aeb8",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "Temperature graphs",
        "style": {
            "label": true
        },
        "nodes": [
            "93759ef7c600fe14",
            "180294703c42c046",
            "7d8b052fee984598",
            "c925c031198f57c1",
            "56de4e61c43e26ae",
            "dd9ebb89f3e71e16",
            "b8b756f628b474fb"
        ],
        "x": 154,
        "y": 1159,
        "w": 432,
        "h": 162
    },
    {
        "id": "a3f845744b30c267",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "Efficiency graphs",
        "style": {
            "label": true
        },
        "nodes": [
            "81b0cbf75fe9ed92",
            "85adc292e5cdace2",
            "897bc542a342138d",
            "ffd410707afaabe9",
            "9a18b2fdbbfcef0e",
            "62950a96775f1683",
            "806ef01e375dce96"
        ],
        "x": 694,
        "y": 1159,
        "w": 432,
        "h": 162
    },
    {
        "id": "678356e0d4f2f034",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "Degree Days",
        "style": {
            "label": true
        },
        "nodes": [
            "64e1f8f65ebe4711",
            "5fbc0d70a6f5758e",
            "a39a1002bb65b329",
            "9bda60d3a84bfcbe",
            "a19ced7de80acf30",
            "88165fdabb135bf7",
            "f0770b3465c919d7"
        ],
        "x": 154,
        "y": 1399,
        "w": 432,
        "h": 162
    },
    {
        "id": "3483ac80557bca81",
        "type": "group",
        "z": "72f2748729e53ad1",
        "name": "Sensor help",
        "style": {
            "label": true
        },
        "nodes": [
            "0d930849ad31e35a",
            "717c11a0214a9106",
            "f2c61aa4a787d04d",
            "c0b49ac4678eee70",
            "4a6541e50192a614",
            "6673302e58397381"
        ],
        "x": 694,
        "y": 1399,
        "w": 432,
        "h": 162
    },
    {
        "id": "be48f3104249b8a0",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "5505432507101e93",
        "name": "",
        "group": "b021ff109e8a2288",
        "order": 8,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"CCC_Help\"],\"hide\":[\"CCC_Graph\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 230,
        "y": 580,
        "wires": [
            [
                "da5eda62cc98aecc"
            ]
        ]
    },
    {
        "id": "32e18af8aea0be90",
        "type": "link in",
        "z": "72f2748729e53ad1",
        "name": "UI Control",
        "links": [
            "284c3282438b7e4c",
            "3b5ab802c150fd86",
            "5f6574f97f240326",
            "973d8234e83e6744",
            "a2b3dab1e41c9373",
            "da5eda62cc98aecc",
            "c925c031198f57c1",
            "ffd410707afaabe9",
            "9bda60d3a84bfcbe",
            "f2c61aa4a787d04d",
            "c40f9cc2fac31d03",
            "464b869477a20de7"
        ],
        "x": 205,
        "y": 60,
        "wires": [
            [
                "f5eb45ad3e78471c"
            ]
        ]
    },
    {
        "id": "b33b45b8a4e1398b",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "5505432507101e93",
        "name": "",
        "group": "79eed3b289871944",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"CCC_Help\"],\"show\":[\"CCC_Graph\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 370,
        "y": 620,
        "wires": [
            [
                "da5eda62cc98aecc"
            ]
        ]
    },
    {
        "id": "f5eb45ad3e78471c",
        "type": "ui_ui_control",
        "z": "72f2748729e53ad1",
        "name": "",
        "events": "all",
        "x": 360,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "184850f4f96ed36c",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "5505432507101e93",
        "group": "79eed3b289871944",
        "order": 1,
        "width": 11,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 240,
        "y": 620,
        "wires": []
    },
    {
        "id": "da5eda62cc98aecc",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "5505432507101e93",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 715,
        "y": 540,
        "wires": []
    },
    {
        "id": "abdc4499891c6871",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "name": "",
        "group": "b7f22c282fde0f86",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"Solar²DHW_Help\"],\"hide\":[\"Solar²DHW_Charts\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 230,
        "y": 220,
        "wires": [
            [
                "3b5ab802c150fd86"
            ]
        ]
    },
    {
        "id": "739eb34ff6d8c742",
        "type": "inject",
        "z": "72f2748729e53ad1",
        "d": true,
        "g": "fca08ea5bf5103fd",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"Solar_P1_setup\",\"Solar_Help\"],\"show\":[\"Solar_Charts\",\"Solar_Setup\"]}}",
        "payloadType": "json",
        "x": 230,
        "y": 180,
        "wires": [
            [
                "3b5ab802c150fd86"
            ]
        ]
    },
    {
        "id": "6eb23418ea8d86a1",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "group": "55fef8703465841e",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 14,
        "height": 23,
        "format": "<h3>Solar</h3></br>\n<h3>What can this function do for you?</h3>\nThe aim of this function is to increase efficiency (and save cost) by utilize your own produced solar energy as much as\npossible. When there is solar energy in abundance, you can use that energy to heat up your DHW. To determine if there is\nenough solar energy, you need a power measurement. This can be a P1 power meter or you\ncan use the output from your inverter.\n</br></br><h3>How to setup?</h3>\nFirst you need to have your P1 sensor setup correctly in \"SYSTEM > SENSOR\".<br>\nSecondly, you need to set the DHW setpoints.</br>\n</br><u>DHW temperature setpoint</u>\nThese are the target temperatures for the water in DHW tank. \nDHW temperature setpoint - high will be used when power measurement dropped below the threshold.\nDHW temperature setpoint - low will be used after the DHW tank has reached its target temperature high.\n</br></br><u>Threshold detection method</u>\nThere are three options available.</br></br>\n<i>Option 1: Power Live (kW)</br></i>\nLive energy production in watt. See (1) in image below.</br></br>\n<i>Option 2: Today's production (kWh)</i>\nTodays energy production, expressed in kWh. Energy consumption will NOT be added to this value, it will only\ndecrease. See (2) in image below.</br></br>\n<i>Option 3: Today's result (kWh)</i>\nTodays result, which is the sum of production and consumption. See (3) in image below.</br>\n</br><u>Threshold</u>\nThis is the threshold for the power reading. When the measured value drops below threshold, the DHW temperature setpoint - high will be set as the new target value.</br>\n</br><u>Power on on heat pump</u>\nWhen the pump is off, and the threshold is reached, enabling this will turn on the heat pump. If this toggle is disabled, the pump will remain off.\n<br></br><u>Use Force DHW</u>\nBy default the internal panasonic logic will determine if a DHW run is required. By default, when the current temperature is above (52°C) minus (DHW delta), it will not start the DHW run. This could be wanted or not. This toggle will send the \"Force DHW\" command and force the dhw run to start. Note: The OperatingMode could be set to DHW-only until 00:00.<br>\n<br></br><u>Fallback to DHW (SP low) below 0 W?</u>\nOnly us this option when having an external heater, and disabled the compressor. <br>\nThis options applies only to threshold method \"Power live (kW)\", option 1. By default, once DHW temperature setpoint - high is being used, it will NOT switch back to DHW SP low until the temperature is reached. If you do want to fall back to DHW SP low when power production drops below zero watt, enable Fallback to DHW (SP) below 0 W?</br>Do not use this option if the dhw run is performed using compressor. It can cause may start/stops.</br> <br>\n<u>Cooldown period after DHW run</u>\nWhen the high DHW target temperature has been reached, the heatpump will stay in DHW mode for a set amount of time. This could help to prevent too hot water going through the HEAT system. \n</br></br><h3>Notes:</h3></br>\n- Power option 1 can cause power cycling",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 420,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "740159707b77305c",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "group": "55fef8703465841e",
        "name": "",
        "order": 4,
        "width": 14,
        "height": 14,
        "format": "<div height=\"300\" style=\"height: 300px;\">\n<img src=\"https://raw.githubusercontent.com/edterbak/NodeRed_Heishamon_control/main/images/2023-04-15%2018_59_44-Node-RED%20Dashboard.png\" width=700px><br/>\n</div>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 380,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "e487a445e58768f0",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "name": "",
        "group": "55fef8703465841e",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Solar²DHW_Help\"],\"show\":[\"Solar²DHW_Charts\",\"Solar²DHW_Setup\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 530,
        "y": 220,
        "wires": [
            [
                "3b5ab802c150fd86"
            ]
        ]
    },
    {
        "id": "01a4ac4ad26a6b09",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "group": "55fef8703465841e",
        "order": 5,
        "width": 14,
        "height": 1,
        "name": "spacer 14",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 380,
        "y": 440,
        "wires": []
    },
    {
        "id": "468d1cde1e2b4ff3",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "group": "55fef8703465841e",
        "order": 1,
        "width": 13,
        "height": 1,
        "name": "spacer 11",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 380,
        "y": 220,
        "wires": []
    },
    {
        "id": "3b5ab802c150fd86",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 525,
        "y": 140,
        "wires": []
    },
    {
        "id": "43be81558a98b102",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "5505432507101e93",
        "group": "79eed3b289871944",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 12,
        "height": 18,
        "format": "<h3>CCC - Custom Compensation Curve</h3>\n<br/>\n<h3>What is this?</h3><br/>\nThe panasonic heatpump can be operated with 'Compensation Curve'. This is an out-of-the-box functionality which is calculating the target water temperature based on the outside temperature. This is a Panasonic native function. The CCC is a customization of the CC.<br>\n<br/><h3>Why is this?</h3><br/>\nThe default CC functionality uses the outside temperature sensor on the heatpump or a separately installed external sensor. After this, the sensor is fixed. <br>\nThe placement of the used sensor (or heatpump) is critical for this functionality. If the sensor happens to be in direct sunlight, the reading can shift up by 10-15 degrees. This makes the default functionality kind of non-working.<br>\nWith this CUSTOM CC function, you can do the same with ANY sensor in node red. You can use any temperature sensor you have or even an 'external sensor' like a weather service is possible to use.<br>\n<br/><h3>What can this function do for you?</h3><br/>\nThe aim of this function is to dynamically change the water temperature used for heating, compensating for the outside\nweather. If it is very cold outside, you require more heat compared to when it is warmer outside to end up with a\ncomfortable house. This function will thuss compensate the increasing heat loss the colder it get outside.\n<br/>\nThis will allow the heat pump to run at a lower, more efficient rate saving you energy. This will reduce cycling of the\ncompressor to increase its lifetime.\n<br/><br/>\n<h3>How to setup?</h3>\n<br/><u>Temperature profile</u>\nHere you can program three points, where you give the outside temperature and the corresponding target water\ntemperatures.\n<br/>\nThe first (top) point is the highest outside temperature, by default this one is set to 15 °C. This corresponds to the\nmaximum outside temperature the Panasonic accepts.\nThe last (bottom) point should be the lowest outside temperature you will realistically experience in you situation.\n<br/>\nWith the center point you can adjust the curve more to your liking. This will give you the ability to give you a bit\nmore heat when freezing for example.\nThis will give you the CCC temperature profile graph.\nDefault values: xxx\n<br/><br/><u>Result</u>\nThe actual outside temperature is used to find the corresponding water temperature according to your given settings. The\nresult will be rounded to whole degrees celcius and shown at Calculated temp..\n<br/><br/><u>Advanced</u>\nIf you want to use the CCC functionality of the Panasonic itself instead of this flow, you can export the Temperature\nprofile to your HeishaMon / Panasonic.\n<br/><br/>\n<h3>Notes:</h3>\n- The Panasonic has its own outside thermometer, this is typically located in the little black rubber tube on the back\nof the device. It’s quite inaccurate, especially if the sun is allowed to reach it, it is strongly recommended to use a\nproper outside sensor<br/>\n- Outside temperature range: -20°C - 15°C<br/>\n- Water temperature range: 20°C - 60°C<br/>\n- The Panasonic internally works with 2 points, instead of the 3 in this flow<br/>\n- If you do not require three points, use 2 identical Water temperatures but unique Outside temperatures<br/>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 280,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "c2935eeb2b0919cf",
        "type": "inject",
        "z": "72f2748729e53ad1",
        "d": true,
        "g": "5505432507101e93",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"WAR_Help\"]}}",
        "payloadType": "json",
        "x": 230,
        "y": 540,
        "wires": [
            [
                "da5eda62cc98aecc"
            ]
        ]
    },
    {
        "id": "ad4e277358b19235",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "b5e32619ad0c206e",
        "name": "",
        "group": "1db6d698669f3827",
        "order": 10,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"RTC_Help\"],\"hide\":[\"RTC_Zone1\",\"RTC_Zone2\",\"RTC_Automations\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 890,
        "y": 160,
        "wires": [
            [
                "5f6574f97f240326"
            ]
        ]
    },
    {
        "id": "56f59b7df09abbf3",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "b5e32619ad0c206e",
        "name": "",
        "group": "ae6c2168304beda0",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"RTC_Help\",\"RTC_Automations\"],\"show\":[\"RTC_Zone1\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1030,
        "y": 200,
        "wires": [
            [
                "5f6574f97f240326"
            ]
        ]
    },
    {
        "id": "d00691f660be457b",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "b5e32619ad0c206e",
        "group": "ae6c2168304beda0",
        "order": 1,
        "width": 23,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 900,
        "y": 200,
        "wires": []
    },
    {
        "id": "5f6574f97f240326",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "b5e32619ad0c206e",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 1335,
        "y": 120,
        "wires": []
    },
    {
        "id": "8982c1e161d9d215",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "b5e32619ad0c206e",
        "group": "ae6c2168304beda0",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 24,
        "height": 26,
        "format": "<h3>RTC - Room Temperature Correction</h3>\n<br/>\n<h3>What can this function do for you?</h3>\nThis function corrects the water temperature (HEAT) based on the actual room temperature. This function is for example useful when the sun warms up the room. In this scenario, the function automatically lowers the setpoint if the room temperature increases.\n<br/><br/>\nThe source for the correction is the temperature difference between [Room actual] and [Room setpoint]. <br/>\n<br/>\nThe temperature difference is devided in ranges. You can set them under the [Difference] column.\nWhen the room is too warm, the water temperature is corrected with the negative correction value.<br/>\nWhen the room is too cold, the water temperature is corrected with the positive correction value.<br/>\nWithin a T diff range, the correction stays constant<br/>\n<br/>\nWhen this function is properly configured, it will result in a more stable (comfortable) room temperature. On the other hand, when not correctly\nconfigured it can result in more variations in the room temperature. This last scenario can causing additional wear and increased energy costs. So please take your\ntime to set it up right for your situation.\n<br/><br/>\n\n<h3>Configuration</h3>\nFirst enter a desired temperature at [Room setpoint].\n<br/>\nSecondly you need to enter at which point the water temperature will be changed by 1, 2 or 3 degrees celcius. This will\ntake a bit of experimenting. For example if you use floor heating smaller deltas (0.1) work better because by its nature it is\nslow to respond. When using radiators you can increase the deltas (0.5). Try to make small changes at a time and observe the result for\nat least 1 or 2 days.<br>\nLastly, enable the toggle [RTC] on the top left of the dashboard.\n<br/><br/>\n\nDefault values:<br/>\n+/-0,5 degree difference results in a correction of +/-1 degree. <br>\n+/-1,0 degree difference results in a correction of +/-2 degrees. <br>\n+/-1,5 degree difference results in a correction of +/-3 degrees. <br>\n<br>\n<h3>Requirements:</h3>\nThe Panasonic has a themperature sensor in the wall mounted Remote Controller. But... It is inaccurate and really not\nsuitable to use for this RTC function. Please use a custom indoor sensor with an accuracy of 0,1°C.\nFor example a BMP280 or BME280. Be sure to place it somewhere out of direct sunlight or a cold draft.<br/> The measurements need to be available in this Node Red flow.<br>\n<br/>\n-----------------------------------\n<br/>\n<u>Calculate linear correction</u>\nBy default, as a result of the temperature differece setpoint vs room temperature, the correction on the water temperature is a step-change. Between the last two  <br/>\nWhen enabled, the setpoints (water temperatures) will be incrementally calculated in steps of 1°C. This applies only between the +3 and +custom temperature ranges.<br/>\n<br/>\n<u>Automations:</u>\nTo make use of the automation, you need to set two temperatures (dT's). <br/>\n[Trigger action above dT]: When the room temperature is above this line, the selected action(s) will be executed.<br/>\n[Revert action below dT]: When the room temperature drops below this line, the reverse action(s) will be executed.<br/>\nBoth the above/below dT temperatures are relative to the setpoint.<br/>\n<br/>\nAction: Change operating mode<br/>\nIf the room temperature is above dT, the current operating mode will have HEAT mode removed from it.<br/>\nIf the room temperature is below dT, the current operating mode will have HEAT mode added to it.<br/>\n<br/>\nAction: Turn off/on power<br/>\nIf the room temperature is above dT, the heatpump will be turned off. (condition: Operating Mode must be Heat-only or Auto(Heat))<br/>\nIf the room temperature is below dT, the heatpump will be turned on again.<br/>\n<br/>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 940,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "3c3c8472da1fb85a",
        "type": "inject",
        "z": "72f2748729e53ad1",
        "d": true,
        "g": "b5e32619ad0c206e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"RTC_Help\"]}}",
        "payloadType": "json",
        "x": 890,
        "y": 120,
        "wires": [
            [
                "5f6574f97f240326"
            ]
        ]
    },
    {
        "id": "f9144fc6ad3350af",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "name": "",
        "group": "2b0c8e162d47abbb",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"Scheduler_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1030,
        "y": 400,
        "wires": [
            [
                "973d8234e83e6744"
            ]
        ]
    },
    {
        "id": "ecf4984d100b1353",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "name": "",
        "group": "a606e01fab1bbd66",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Scheduler_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1030,
        "y": 500,
        "wires": [
            [
                "973d8234e83e6744"
            ]
        ]
    },
    {
        "id": "4770fc4ef0f643b3",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "group": "a606e01fab1bbd66",
        "order": 1,
        "width": 14,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 900,
        "y": 500,
        "wires": []
    },
    {
        "id": "973d8234e83e6744",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 1335,
        "y": 360,
        "wires": []
    },
    {
        "id": "c38f069ac9641f6a",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "group": "a606e01fab1bbd66",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 15,
        "height": 32,
        "format": "<h3>Scheduler instructions</h3>\n<br/>\n<h3>What can the scheduler do for you?</h3>\nYou can program certain tasks to be started at the specified time and day.<br/>\n<br/>\n<h3>What is the main difference between this scheduler and the native Panasonic one?</h3>\nThe Panasonic scheduler always swtiches on the heat pump when a task is due. This scheduler offers you control over this\nbehavior.\n\nThe native Panasonic scheduler can be operational simultaneously with this scheduler. This can be convenient for some\nvery specific tasks, but it is strongly recommended to only use one scheduler to avoid conflicting tasks and unexpected\nbehavior. Both schedulers do not communicate.\n\n<br/><br/>\n<u>Enable</u>\nThis simply enables or disables the task.\n\n<br/><br/>\n<u>Name</u>\nGive your personal short name or description to the task.\n<br/><br/>\n<u>Action</u>\nSelect the action you want to perform.<br>\n\n<i>Force DHW</i><br/>\nThis action will do several things:<br/>\n1 - Add DHW to the current operating mode if missing<br/>\n2 - Turn on [Force DHW mode]<br/>\n3 - Execute the DHW run to the target temperature<br/>\n4 - Turn off [Force DHW mode]<br/>\n5 - Remove DHW from Operating mode again if it was missing at step 1<br/>\n<br/>\nAttention: The Force DHW run will not start if the current DHW temperature is above the set temperature in [Force DHW -\nAllow only below] in the 'related settings' section. If you do not want this, set this temperature very high (eg. 100\ndegree C). The Panasonic internal rules (minimum dT) will always be followed.\n<br/><br/>\nThe scheduled Force DHW action is fundamentally different compared to the switch Force DHW under settings or on the controller. They requires certain conditions.\n<br/><br/>\n<i>- Force Sterilization</i>\nThis action will do several things:<br/>\n1 - Add DHW to the current operating mode if missing<br/>\n2 - Turn on [Force DHW mode] + Turn on [Force Sterilization]<br/>\n3 - Execute the Sterilization run to the target temperature<br/>\n4 - Turn off [Force Sterilization mode] + Turn off [Force DHW mode]<br/>\n5 - Remove DHW from Operating mode again<br/>\n<br/>\n<i>- Quiet Mode</i>\nThis will set the quiet mode to the specified level.\n<br/><br/>\n<i>- Operation Mode</i>\nThis will set the operation mode as specified.\n<br><br>\n<i>- Nightreduction water temperature on/off</i>\nThis wil add a negative correction to the water temperature, which will result in a lower Final water temperature (but\nnever lower then 20 °C).\n<br/><br/>\n<i>- Nightreduction room temperature on/off</i>\nWhen on this will reduce the RTC room setpoint to the setpoint-low value set on the right.<br/>\nWhen off this will restore the RTC room setpoint to the setpoint-Normal value set on the right.<br/>\nDefaults: ON = 18 °C , OFF = 21 °C , RANGE 0 °C - 30 °C<br/>\n<br/>\n<u>Power on</u>\nBy default a task will not run if the heat pump is powered off. If you want the heat pump to be powered on and execute the task, enable the power on toggle.\n<br/><br/>\n<u>Heat water temperature limits</u>\nHere you can program the absolut upper and lower limits you never want HEAT to go over/under. This can be used to\nprevent oscillating behaviour, make compressor runs longer and the HP more efficient.</br>\n<u>Nightreduction Room setpoint</u><br/>\nHere you can set the room setpoint LOW and NORMAL when using task Nightreduction room setpoint.<br>\n<br>\n<u>Condition</u>\nEach line in the scheduler can be linked to one condition. When selecting a condition, the settings screen for that appears, with instructions.<br>\nNote that you can select multiple scheduled actions to one and the same condition. (flexible)<br><br>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 940,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "00752e5f6b14036b",
        "type": "inject",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"Scheduler_Help\"]}}",
        "payloadType": "json",
        "x": 890,
        "y": 360,
        "wires": [
            [
                "973d8234e83e6744"
            ]
        ]
    },
    {
        "id": "347b614526bf4814",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "group": "2b0c8e162d47abbb",
        "order": 1,
        "width": 21,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 900,
        "y": 400,
        "wires": []
    },
    {
        "id": "d0bc87893510d46f",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "group": "2b0c8e162d47abbb",
        "order": 5,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1220,
        "y": 400,
        "wires": []
    },
    {
        "id": "8090bc95e8512738",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "group": "9aec7afe54746c39",
        "name": "Line - Setup ",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Nightreduction water temperature</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1070,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "7ca958b4b94243f8",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "c77aed9e30c539d5",
        "group": "9aec7afe54746c39",
        "name": "Line - Setup ",
        "order": 3,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Nightreduction room temperature</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1230,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "75571074f2ac434c",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "name": "",
        "group": "c4606d0174cdbef4",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"SoftStart_Help\"],\"hide\":[\"SoftStart_Settings\",\"SoftStart_Advanced\",\"SoftStart_Quietmode_add-on_settings\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1030,
        "y": 700,
        "wires": [
            [
                "284c3282438b7e4c"
            ]
        ]
    },
    {
        "id": "c652e74baa241047",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "name": "",
        "group": "3226b17db86f4510",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"SoftStart_Help\",\"SoftStart_Advanced\",\"SoftStart_Quietmode_add-on_settings\"],\"show\":[\"SoftStart_Settings\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1030,
        "y": 800,
        "wires": [
            [
                "284c3282438b7e4c"
            ]
        ]
    },
    {
        "id": "088968fcdf03a215",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "group": "3226b17db86f4510",
        "order": 1,
        "width": 23,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 900,
        "y": 800,
        "wires": []
    },
    {
        "id": "284c3282438b7e4c",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 1335,
        "y": 660,
        "wires": []
    },
    {
        "id": "c54eb9703d5f9272",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "group": "3226b17db86f4510",
        "name": "Line - Instructions text pt1",
        "order": 3,
        "width": 24,
        "height": 6,
        "format": "<h3>SoftStart</h3>\n<br/>\n<h3>What can the SoftStart function do for you?</h3>\nDefault behaviour of the heatpump when the compressor starts for a HEAT run, is that the frequency (Hz) will go to medium / high level. The frequency stays high until the returning water temperature (See Temp. inlet (PV) at the Home screen) approaches the setpoint. Only then the compressor ramps down.\n</br></br>\nThe primary goal of this function is to quickly lower the compressor frequency after starting a HEAT run. The heatpump will more quickly be in a stable / low power operating windows. As a result of that the length of the run might increase, it consumes less energy and generating less noise. A downside of this could be that heating is slower.\n<br/><br/>\nA secondairy goal of this function is to increase compressor runtime by slowly increasing the water setpoint. The setpoint will contineously be moved just outside the window where it will stop a heating run. By allowing the setpont to slide up along with the returning water (Tinlet), the run length will not be terminated. A possible downside of this could be the room temperature getting too high. \n<br/>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 950,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "e16790ec4eb50d6c",
        "type": "inject",
        "z": "72f2748729e53ad1",
        "d": true,
        "g": "fde5dafe04d72e23",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"SoftStart_Help\"]}}",
        "payloadType": "json",
        "x": 890,
        "y": 660,
        "wires": [
            [
                "284c3282438b7e4c"
            ]
        ]
    },
    {
        "id": "dc156fecfc1bc1e8",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "name": "",
        "group": "24b2fad95360cd29",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "P1 setup",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "settings",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_P1_setup\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 240,
        "y": 260,
        "wires": [
            [
                "3b5ab802c150fd86"
            ]
        ]
    },
    {
        "id": "c4295ed66d438dd7",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "name": "",
        "group": "338420d1319e8350",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"SYSTEM_P1_setup\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 530,
        "y": 260,
        "wires": [
            [
                "3b5ab802c150fd86"
            ]
        ]
    },
    {
        "id": "0bc6f2130b8acb9d",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "fca08ea5bf5103fd",
        "group": "338420d1319e8350",
        "order": 1,
        "width": 13,
        "height": 1,
        "name": "spacer 11",
        "label": "P1 setup",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 380,
        "y": 260,
        "wires": []
    },
    {
        "id": "8b7c9a76f8ddca81",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "group": "3226b17db86f4510",
        "name": "",
        "order": 4,
        "width": 24,
        "height": 9,
        "format": "<div height=\"300\" style=\"height: 300px;\">\n\n<img src=\"https://raw.githubusercontent.com/edterbak/NodeRed_Heishamon_control/main/images/SoftStart_graph2.png\" width=700px><br/>\n\n</div>\nImage 1: kW Production now",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 900,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "c96821120dd58acc",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "fde5dafe04d72e23",
        "group": "3226b17db86f4510",
        "name": "Line - Instructions text pt2",
        "order": 5,
        "width": 24,
        "height": 20,
        "format": "<h3>How it works</h3>\nIn the graph above, shown is the compressor frequency (Hz) vs time (minutes).<br/>\n<br/>\n<h3>Primary goal - Reduce frequency ASAP</h3>\n<u>(1) Runtime</u>\nSet the duration this function to be active from the start. After this time, the correction on the water setpoint will be set to 0 (zero ) again. <i>Default: 15 minutes</i>\n<br/>\n<u>(2) Max. setpoint increase</u>\nThis will set the maximum setpoint increase for the water temperature. This is relative to the normally calculated water temperature. The higher\nincrease allowed, the longer the compressor will run. But of course, the higher the overshoot in room temperature could be. <i>Default: 1 °C</i><br/>\n<h4>Additional settings.</h4>\n<u>(3) QuietMode (Optional)</u>\nQuietMode 1, 2 and 3 have an effect on the maximum allowed compressor frequency and fan speed. QuietMode 3 will limit compressor and fan speed the most.</br> \nEnable / disable the use of QuietMode by the softstart function. </br>\n<i>Default: Disabled</i></bt></br>\nSet the duration for it to be active from the start of a HEAT run.<br/>\n<br/>\n<u>Reset after defrost</u>\nWhen enabled, the softstart function will be reset during a defrost. This will result in 'catching' the high compressor frequencies each time.\nWhen disabled, the counter will continue after a defrost. As a result of this, the softstart function can reach the 'end'-pont sooner. \n<br/><i>Default: Disabled</i>\n</br><br/>\n\n<h3>Secondary goal - Prevent short HEAT runs</h3>\n<u>(1) Runtime</u>\nUp to the user. Typically in the range of 1 - 24 hour(s).\n<br/><br/>\n<u>(2) Max. setpoint increase</u>\nUp to the user. Typically in the range of 2°C - 3°C degrees.\n<br/><br/>\n<br/>\nNote: When softstart function is enabled, it does not guarantee the compressor won't turn off within this time period. Normal internal logic of the Panasonic still applies, so when the water is warm enough the compressor stops.\n</br></br>\nNote 2: There are multiple types of heatpumps. Split units, monoblock, T-CAP. Not all types respond in the same way during a heat run. Example, the T-CAP can be slow to reduce the compressor frequency after start. ",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1110,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "8eceea67c56affae",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "d": true,
        "group": "3226b17db86f4510",
        "name": "Line - Instructions text pt2",
        "order": 6,
        "width": 24,
        "height": 20,
        "format": "<h3>How it works</h3>\nIn the graph above, shown is the compressor frequency (Hz) vs time (minutes).<br/>\n<br/>\n<h3>Primary goal - Reduce frequency ASAP</h3>\n<u>(1) Runtime</u>\nSet the duration this function to be active from the start. After this time, the correction on the water setpoint will be set to 0 (zero ) again. <i>Default: 15 minutes</i>\n<br/>\n<u>(2) Max. setpoint increase</u>\nThis will set the maximum setpoint increase for the water temperature. This is relative to the normally calculated water temperature. The higher\nincrease allowed, the longer the compressor will run. But of course, the higher the overshoot in room temperature could be. <i>Default: 1 °C</i><br/>\n<h4>Additional settings.</h4>\n<u>(3) QuietMode (Optional)</u>\nQuietMode 1, 2 and 3 have an effect on the maximum allowed compressor frequency and fan speed. QuietMode 3 will limit compressor and fan speed the most.</br> \nEnable / disable the use of QuietMode by the softstart function. </br>\n<i>Default: Disabled</i></bt></br>\nSet the duration for it to be active from the start of a HEAT run.<br/>\n<br/>\n<u>Reset after defrost</u>\nWhen enabled, the softstart function will be reset during a defrost. This will result in 'catching' the high compressor frequencies each time.\nWhen disabled, the counter will continue after a defrost. As a result of this, the softstart function can reach the 'end'-pont sooner. \n<br/><i>Default: Disabled</i>\n</br><br/>\n\n<h3>Secondary goal - Prevent short HEAT runs</h3>\n<u>(1) Runtime</u>\nUp to the user. Typically in the range of 1 - 24 hour(s).\n<br/><br/>\n<u>(2) Max. setpoint increase</u>\nUp to the user. Typically in the range of 2°C - 3°C degrees.\n<br/><br/>\n<br/>\nNote: When softstart function is enabled, it does not guarantee the compressor won't turn off within this time period. Normal internal logic of the Panasonic still applies, so when the water is warm enough the compressor stops.\n</br></br>\nNote 2: There are multiple types of heatpumps. Split units, monoblock, T-CAP. Not all types respond in the same way during a heat run. Example, the T-CAP can be slow to reduce the compressor frequency after start. ",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1570,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "8849a0faf2ae88ef",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "d": true,
        "g": "fde5dafe04d72e23",
        "name": "",
        "group": "3226b17db86f4510",
        "order": 7,
        "width": 24,
        "height": 1,
        "passthru": false,
        "label": "button help 1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "</br>   MQTT commands are being blocked. </br></br> Resume normal operation? </br> </br> _____________________________________________________ ",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1250,
        "y": 820,
        "wires": [
            [
                "9a90f895a332472c"
            ]
        ]
    },
    {
        "id": "9a90f895a332472c",
        "type": "ui_toast",
        "z": "72f2748729e53ad1",
        "d": true,
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1610,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "2c79bd3e2dc678e7",
        "type": "link in",
        "z": "72f2748729e53ad1",
        "name": "link in 52",
        "links": [
            "47cb7500b0321fc1",
            "49ebac0412d87642"
        ],
        "x": 255,
        "y": 840,
        "wires": [
            [
                "e487a445e58768f0",
                "b33b45b8a4e1398b",
                "56f59b7df09abbf3",
                "ecf4984d100b1353",
                "c652e74baa241047",
                "c4295ed66d438dd7",
                "d8661c018a09abd2",
                "7d8b052fee984598",
                "897bc542a342138d",
                "a39a1002bb65b329",
                "4a6541e50192a614"
            ]
        ]
    },
    {
        "id": "b445415377a62384",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "17c379c76892162f",
        "name": "",
        "group": "9bbcceeeb21d12ab",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"Cool_Help\"],\"hide\":[\"Cool_Settings\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 230,
        "y": 1000,
        "wires": [
            [
                "a2b3dab1e41c9373"
            ]
        ]
    },
    {
        "id": "d8661c018a09abd2",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "17c379c76892162f",
        "name": "",
        "group": "1110c1df5a310684",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Cool_Help\"],\"show\":[\"Cool_Settings\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 370,
        "y": 1040,
        "wires": [
            [
                "a2b3dab1e41c9373"
            ]
        ]
    },
    {
        "id": "c63ac699b2d80d96",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "17c379c76892162f",
        "group": "1110c1df5a310684",
        "order": 1,
        "width": 23,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 240,
        "y": 1040,
        "wires": []
    },
    {
        "id": "a2b3dab1e41c9373",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "17c379c76892162f",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 715,
        "y": 960,
        "wires": []
    },
    {
        "id": "53c5c87f7c903f13",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "17c379c76892162f",
        "group": "1110c1df5a310684",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 0,
        "height": 0,
        "format": "<h3>COOL function</h3>\n<br/>\n<h3>Requirements</h3>\n- Heatpump COOL mode using \"DIRECT\" water temperature control.<br>\n- Your own external temperature and humidity sensor<br>\n- Under [SYSTEM] > [SENSORS] this sensor needs to be connected to the respective 'COOL Function' items.<br>\n<br>\nVia the wallmounted controller, the heatpump needs to have the COOL function setup in \"DIRECT\" modus. \"Compensation Curve\" modus will not work. This setting for COOL is independant for HEAT. <br>\nWhen using the zone control method 'Thermostat x', cooling on/off is dependant on the room temperature. Thus it might be cooling too long, or not starting depeding on your room setpoint and actual temperature. <br>\n<br>\nIf you want to use this custom cool-function, you require a good external temperature and humidity sensor in the target area.<br>This sensor needs to be configured in the [System] > [Sensors] tab.<br>\nWith this information the dew point is calculated. The requested cool setpoint temperature will be automatically be corrected to be above the dew point.<br><br>\n<h3>What is a dew point?</h3>\nAir in a room contains a certain amount of water / humidity. This water is gaseous / vapour. When the air temperature lowers, the amount of humidity that is able to 'fit' in gaseous form, lowers as well. At a certain temperature it is at its maximum (100% humidity). Below this temperature, water vapour starts to condensate onto cold objects. <br>\nThe temperature where water in the air starts to condensate, is called the dew-point.\n<br/><br/>\n<h3>Why is calculating a dew point important?</h3>\nWhen the temperature of the cooling water is below the dew point, water will condensate on the radiators or your floor heating system. Water ends up on the floor. Combine this with a good ventilation system (read: endless supply of fresh air ... and gaseous water) this could become a big wet problem if you have a wooden floor.<br/><br/>\n<h3>I do not have a humidity sensor. Can I still cool?</h3>\nYes. Of course. You need to use the wall mounted controller.<br>\nThis function will not work, but you can still always set it manually. Friendly warning: Be aware of too low target temperatures. This can cause condens on your floor/pipes<br/><br/>\n<h3>Settings</h3>\n<u>Setpoint requested</u>\nSet the desired setpoint temperature of the cooling water.\n<br><br>\n<U>Safety margin:</U>\nThis value is added to the calculated dew point temperature. This margin is used to catch quickly changing indoor atmospheric conditions due to things like opening a window, cooking diner, boiling water, burning gas or lighting a lot of candles ... <br/>\nA good default is 1.5 °C. Change this at your own risk.\n<br><br>\n<u>Lower limit (man):</u>\nYou can manually set a fixed lower limit of the cooling set point.\n<br><br>\n<u>Lower limit (calc):</u>\nThis is the calculated lower limit of the setpoint. <br>\n[Value] = [dew point temperature] + [Safety margin] <br>\nThis value is not rounded.\n<br><br>\n<u>final setpoint:</u>\nThe final setpoint value is the [Lower limit (calc)] value but always rounded up. So a calculated value of 15.01 will result in a [Setpoint final] temperature of 16°C.\n<br><br>\n<u>Conditions:</u>\nThere are conditions for the function to allow sending a new final setpoint to the heat pump.<br>\nWhen the heatpump is turned OFF, the new setpoint wil NOT be sent. <br>\nWhen current operating mode is (0) Heat Only, (2) Auto(Heat), (3) DHW Only or (4) Heat+DHW, a new setpoint will NOT be sent<br>\n\nIn these cases, the calculated setpoint shown in the graph and settings will be incorrect or not updated.  \n\n\n<br><br><br>\nFor reference:<br>\nT dew point = 243.12 * A / (17.62 - A)<br>\nA = Math.log( RH / 100) / Math.log(2.718282) + 17.62 * Temperature / (243.12 + Temperature)\n<br><br>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 280,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "d2a7400a8f949e59",
        "type": "inject",
        "z": "72f2748729e53ad1",
        "d": true,
        "g": "17c379c76892162f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\":{\"hide\":[\"COOL_Help\"]}}",
        "payloadType": "json",
        "x": 230,
        "y": 960,
        "wires": [
            [
                "a2b3dab1e41c9373"
            ]
        ]
    },
    {
        "id": "93759ef7c600fe14",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "name": "",
        "group": "e374621a9f5ac0d6",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"Temperatures_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 230,
        "y": 1240,
        "wires": [
            [
                "c925c031198f57c1"
            ]
        ]
    },
    {
        "id": "180294703c42c046",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "group": "e374621a9f5ac0d6",
        "order": 1,
        "width": 23,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 240,
        "y": 1200,
        "wires": []
    },
    {
        "id": "7d8b052fee984598",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "name": "",
        "group": "fdd93dca20acdfce",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Temperatures_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 510,
        "y": 1240,
        "wires": [
            [
                "c925c031198f57c1"
            ]
        ]
    },
    {
        "id": "c925c031198f57c1",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 395,
        "y": 1200,
        "wires": []
    },
    {
        "id": "56de4e61c43e26ae",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "group": "fdd93dca20acdfce",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 13,
        "height": 13,
        "format": "<h3>Information about the graphs</h3>\n<br/>\n<h3>DHW</h3>\nThis graph shows information about the DHW tank.<br>\n- Tank Setpoint: Target temperature of the DHW tank<br>\n- Tank Actual: Actual temperature of the DHW tank<br>\n<br>\n<h3>HEAT</h3>\nThis graph shows information about the HEAT operation.<br>\n- Setpoint: Target temperature of the water<br>\n- Actual T(inlet): Actual water temperature entering the heatpump<br>\n- Actual T(outlet): Actual water tamperature exiting the heatpump<br>\n<br>\n\n<h3>Room Temperature</h3>\nThis graph shows information about the room temperatures.<br>\n- Setpoint: Target temperature of the room<br>\n- Room Actual: Actual room temperature<br>\n<br>\n\nNote:<br>\n- When the 3-way valvue is in position DHW, it logs the DHW temperatures. <br>\n- When the 3-way valvue is in position HEAT, it logs the HEAT temperatures. <br>\n<br>\n\n\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 460,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "dd9ebb89f3e71e16",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "group": "e374621a9f5ac0d6",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 240,
        "y": 1280,
        "wires": []
    },
    {
        "id": "81b0cbf75fe9ed92",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "name": "",
        "group": "fb77ab43998a2f18",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"Efficiency_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 770,
        "y": 1240,
        "wires": [
            [
                "ffd410707afaabe9"
            ]
        ]
    },
    {
        "id": "85adc292e5cdace2",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "group": "fb77ab43998a2f18",
        "order": 1,
        "width": 23,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 780,
        "y": 1200,
        "wires": []
    },
    {
        "id": "897bc542a342138d",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "name": "",
        "group": "064c9c202bf3ec8d",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Efficiency_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1050,
        "y": 1240,
        "wires": [
            [
                "ffd410707afaabe9"
            ]
        ]
    },
    {
        "id": "ffd410707afaabe9",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 945,
        "y": 1200,
        "wires": []
    },
    {
        "id": "9a18b2fdbbfcef0e",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "group": "064c9c202bf3ec8d",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 13,
        "height": 13,
        "format": "<h3>Information about the graphs</h3>\n<br/>\n<h3>Energy (W)</h3>\nThis graph shows information about the energy usage.<br>\nIt shows for both the HEAT and DHW mode the energy consumption and the energy production.<br>\n<br>\n<h3>Efficiency</h3>\n- COP: Co-efficient Of Performance. This is a ratio of (power output) over (power input)<br>\n- Evaporator outlet: Temperature of the coolant at the evaporator of heatpump.<br>\n- Defrost state: Indicates if a defrost cycle is in progres (1 or 0) <br>\n- Current: This is the actual power consumption of the heatpump (Ampere)<br>\n<br>\n<h3>Monthly Production (kWh)</h3>\nThis graph shows the produced amount of energy in the form of heat. This is calculated using the waterflow, water temperature inlet, water temperature outlet. <br> It is NOT the same as the energy usage of the heatpump. <br>\n<br>\n<h3>Monthly COP</h3>\nThis graph gives an historical overview of the calculated COP values. <br>\nThe COP for DHW operation and HEAT operation are separated out. <br>\n<br>\n<br>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1000,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "62950a96775f1683",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "group": "fb77ab43998a2f18",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 780,
        "y": 1280,
        "wires": []
    },
    {
        "id": "806ef01e375dce96",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "a3f845744b30c267",
        "group": "064c9c202bf3ec8d",
        "order": 1,
        "width": 12,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1040,
        "y": 1200,
        "wires": []
    },
    {
        "id": "b8b756f628b474fb",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "2dcdb7857bd6aeb8",
        "group": "fdd93dca20acdfce",
        "order": 1,
        "width": 12,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 500,
        "y": 1200,
        "wires": []
    },
    {
        "id": "64e1f8f65ebe4711",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "name": "",
        "group": "87be08e6a82ef6a0",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"Degree_days_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 230,
        "y": 1480,
        "wires": [
            [
                "9bda60d3a84bfcbe"
            ]
        ]
    },
    {
        "id": "5fbc0d70a6f5758e",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "group": "87be08e6a82ef6a0",
        "order": 1,
        "width": 23,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 240,
        "y": 1440,
        "wires": []
    },
    {
        "id": "a39a1002bb65b329",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "name": "",
        "group": "21f562f418c1ac52",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Degree_days_Help\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 510,
        "y": 1480,
        "wires": [
            [
                "9bda60d3a84bfcbe"
            ]
        ]
    },
    {
        "id": "9bda60d3a84bfcbe",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 395,
        "y": 1440,
        "wires": []
    },
    {
        "id": "a19ced7de80acf30",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "group": "21f562f418c1ac52",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 13,
        "height": 13,
        "format": "<h3>Information</h3>\n<br/>\n<h3>Degree days</h3>\nA Degree Day (dd) is a measure to indicate difference between the outside temperature and a reference temperature (18 °C). <br>\n<br>\nA Degree Day (dd) is calculated as:<br>\ndd = 18 - outside temperature.<br>\ndd is limited to 0 °C<br>\n<br>\n<b>Example 1:</b>\nOutside temperature: 15 °C<br>\ndd = 18 - 15 = 3 °C<br>\n<br>\n<b>Example 2:</b>\nOutside temperature: -5 °C<br>\ndd = 18 - (-5) = 23 °C<br>\n<br>\n<b>Example 3:</b>\nOutside temperature: 30 °C<br>\ndd = 18 - 30 (= -12 °C) = 0 °C<br> <br>\n<br>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 460,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "88165fdabb135bf7",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "group": "87be08e6a82ef6a0",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 240,
        "y": 1520,
        "wires": []
    },
    {
        "id": "f0770b3465c919d7",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "678356e0d4f2f034",
        "group": "21f562f418c1ac52",
        "order": 1,
        "width": 12,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 500,
        "y": 1440,
        "wires": []
    },
    {
        "id": "0d930849ad31e35a",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "3483ac80557bca81",
        "name": "",
        "group": "24b2fad95360cd29",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Help",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "info",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_Help_Sensors\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 770,
        "y": 1480,
        "wires": [
            [
                "f2c61aa4a787d04d"
            ]
        ]
    },
    {
        "id": "717c11a0214a9106",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "3483ac80557bca81",
        "group": "24b2fad95360cd29",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 780,
        "y": 1440,
        "wires": []
    },
    {
        "id": "f2c61aa4a787d04d",
        "type": "link out",
        "z": "72f2748729e53ad1",
        "g": "3483ac80557bca81",
        "name": "",
        "mode": "link",
        "links": [
            "32e18af8aea0be90"
        ],
        "x": 925,
        "y": 1440,
        "wires": []
    },
    {
        "id": "c0b49ac4678eee70",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "3483ac80557bca81",
        "group": "0f6e9adcc2474d02",
        "order": 1,
        "width": 12,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1040,
        "y": 1440,
        "wires": []
    },
    {
        "id": "4a6541e50192a614",
        "type": "ui_button",
        "z": "72f2748729e53ad1",
        "g": "3483ac80557bca81",
        "name": "",
        "group": "0f6e9adcc2474d02",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"SYSTEM_Help_Sensors\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1050,
        "y": 1480,
        "wires": [
            [
                "f2c61aa4a787d04d"
            ]
        ]
    },
    {
        "id": "6673302e58397381",
        "type": "ui_template",
        "z": "72f2748729e53ad1",
        "g": "3483ac80557bca81",
        "group": "0f6e9adcc2474d02",
        "name": "Line - Instructions text",
        "order": 3,
        "width": 13,
        "height": 17,
        "format": "<h3>MQTT sensors</h3>\nThis node red flow has some inbuilt custom functions like the WAR function, RTC function etc.<br>\nEach of the mentioned functions (in the purpose column) requires a dedicated measurement from a sensor. In this section you can connect each sensor to a specific function.<br>\n<br>\nFirst, make sure you have connected your sensors correctly in the flow tab: [WP Input].<br>\n<br>\nOnce the sensor is connected correctly, the dropdown list will start to be populated under 'MQTT sensor topic'. This can take a while be cause the list builds up as the values come in.<br>\n<br>\nWhen you see the correct topic, select it and wait and check if you see correct values.<br><br>\n<u>Note:</u>In case the list of topics does not seem to be updating after connecting it, please click the [trashcan] icon and start again by select the correct sensor.<br>\n<br>\n<h3>1 Wire sensors</h3>\nAs an alternative to the MQTT sensors, there is the 1 wire sensor option of heishamon. This allows you to receive 20+ measurements from various sensors and sensor types. <br>\n<br>\nYou can select a sensor, and 'connect' it to a specific function. But..!! Please make sure you do not have multiple sensors selected to be used for a single purpose (=function). This will probably cause issues. <br>\n<br>\nYou can add extra sensors to be shown in Temperature > DHW graph, Temperature > HEAT or Temperature Room temperature graphs. <br>\nIn this case, the name you enter under 'Description' will be used for the name in the graph.<br><br>\n<u>Note:</u>Changing the name after it is already plotted in the graph, probably requires you to reset the graph to remove the old legend entry. \n<br><br>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1000,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "5442d7ccc5f28a3f",
        "type": "ui_text",
        "z": "72f2748729e53ad1",
        "g": "b5e32619ad0c206e",
        "group": "ef3dbc543ae92bec",
        "order": 2,
        "width": 17,
        "height": 16,
        "name": "xxxxx",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1230,
        "y": 240,
        "wires": []
    },
    {
        "id": "35d210f042827344",
        "type": "tab",
        "label": "WP Scheduler",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b63004182c33d3b9",
        "type": "group",
        "z": "35d210f042827344",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "dce5daf12297877f",
            "56d4bfa341d3eded",
            "4f62466c41bb3667",
            "52fea7493d509740",
            "259ee5343901c67c",
            "c959ee1f94c31c45",
            "207821d9fd0df31e",
            "cd34d205525225ef",
            "27ad7f4523c5ac06",
            "07c12775c5faacae",
            "284a4b5256066615",
            "1d18cc8f09cfbdbc",
            "8c00f7e622b82f63",
            "ef28d0205d50cb26",
            "d0fda364deccc7f0",
            "47fe4c3f4736bcc8",
            "4ca97fe11f8196e4",
            "7a27b2c8c4721ed9",
            "55ed50ca78ad2e8e",
            "9b6adfc4b5fe33d9",
            "3e6fc746e7597b72",
            "572ff3b3b8a1d185",
            "68f4601da2aa107a",
            "aa04e7be9348a071",
            "8f7d82299e5dcf8a",
            "6021a18a5e9c23cb",
            "af9178426366861c",
            "ebc9b8c270d7c636",
            "e33b5a24cd58c8d2"
        ],
        "x": 2334,
        "y": 2339,
        "w": 1472,
        "h": 502
    },
    {
        "id": "92293ba8ccc5db0f",
        "type": "group",
        "z": "35d210f042827344",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "af36a209861f34c9",
            "977bf5eb11dcbcae",
            "4be14d43ed11df9e",
            "66751dfee126dd36",
            "ac07aae6820d664d",
            "20267081e902cf8f",
            "0e56417c81c6b1be",
            "50a7d35eec5ebb92",
            "620d3faff0a26d37",
            "b98e3d3337c01053",
            "827d25a8ccb91857",
            "3a71aada556a2950",
            "0a2fca7dbded32e0",
            "ddf3715aaea9672b",
            "6e79eaf44bdd252f",
            "05344a8f5a84a598",
            "ce6d6e5627ec1fa2",
            "1911fbfbf89866a8",
            "55a0fb67fbe206cf",
            "9c13f29571c31128"
        ],
        "x": 74,
        "y": 3039,
        "w": 1392,
        "h": 322
    },
    {
        "id": "8387b4df126e002c",
        "type": "group",
        "z": "35d210f042827344",
        "name": "Setpoints popups",
        "style": {
            "label": true
        },
        "nodes": [
            "149593cb5a59bfc2",
            "7c42986702362e7e",
            "d76b2de1985f09bb",
            "b6f2cfb3efd983c4",
            "a14f9aee7a90cce0",
            "b33abbe2fee043fb",
            "d0bd2ba9d6d4fa4f",
            "2fee17012ab3bcf3",
            "13f54518d82c8796",
            "6a6e0e79315f1423",
            "1e2795a950379445",
            "1c76ec837c811a63",
            "e9afc0729467ae1d",
            "525e9bfc80e7f5e5",
            "19cb9e9d4bfea67d",
            "c0d182e336a34912",
            "dfd6d3ff02d1dcbd",
            "9c75cdabfee5ec0f",
            "dcdab89bdeea4f88",
            "6be4546e88524a03",
            "d4915ffc7bf0e94e",
            "9752935949605e08"
        ],
        "x": 2614,
        "y": 1819,
        "w": 872,
        "h": 442
    },
    {
        "id": "af1f780bbdddde83",
        "type": "group",
        "z": "35d210f042827344",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "04d51dd3d6706289",
            "41e3d65e44f729b3",
            "64b63afc5d83d929",
            "aa67113ad3088493",
            "83791dcc23be38a9",
            "5ab7ad5b040ca231",
            "d71671801e83ccd8",
            "e95b104ec4b5b889",
            "23cce10c04b0a251",
            "d63e1d5671ed9af1",
            "cf6dfeda59a5ed1d",
            "8596a9f652603dac",
            "2d4eefbf9dcc6e9f",
            "7250ce16a456d262",
            "8b33ff42888d0c3b",
            "c0fdc0126f7d69c7"
        ],
        "x": 1874,
        "y": 1859,
        "w": 722,
        "h": 382
    },
    {
        "id": "40f0401e20235a07",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour1",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 22,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_1_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 180,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "243fa1e4e8cef5d0",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day1",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 21,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_1_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 180,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "ae1eb94c798ce73b",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 10,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Day",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 1670,
        "y": 120,
        "wires": []
    },
    {
        "id": "d1266a8821d5f723",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 11,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Hour",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 1950,
        "y": 120,
        "wires": []
    },
    {
        "id": "24c5c19b07f97e99",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 12,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Minutes",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 2240,
        "y": 120,
        "wires": []
    },
    {
        "id": "98499b42fe5f6688",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes1",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 23,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_1_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 180,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "e3d4b9d611e649e0",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch1",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 19,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_1_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 180,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "8fbe0ef4995f8e6a",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input1",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 20,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_1_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 180,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "e7b504fa96e19b50",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 9,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Name",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 1350,
        "y": 120,
        "wires": []
    },
    {
        "id": "d6b1a6d8ba28fbb0",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "Action",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 2510,
        "y": 120,
        "wires": []
    },
    {
        "id": "57dddda65db516a2",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action1",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 24,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_1_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 180,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "d3cb14cbe16aae48",
        "type": "inject",
        "z": "35d210f042827344",
        "name": "1 Trigger / 60 seconds",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 2560,
        "wires": [
            [
                "d7661361dc45a227",
                "5bada2ca15c02a60",
                "1b3cfb0717b453f9"
            ]
        ]
    },
    {
        "id": "d7661361dc45a227",
        "type": "moment",
        "z": "35d210f042827344",
        "name": "",
        "topic": "DayOfTheWeek",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Amsterdam",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "dddd",
        "locale": "en-US",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Europe/Amsterdam",
        "x": 440,
        "y": 2520,
        "wires": [
            [
                "aee82d7ed5267326"
            ]
        ]
    },
    {
        "id": "5bada2ca15c02a60",
        "type": "moment",
        "z": "35d210f042827344",
        "name": "",
        "topic": "Hour",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Amsterdam",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "HH",
        "locale": "en-US",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Europe/Amsterdam",
        "x": 410,
        "y": 2560,
        "wires": [
            [
                "aee82d7ed5267326"
            ]
        ]
    },
    {
        "id": "1b3cfb0717b453f9",
        "type": "moment",
        "z": "35d210f042827344",
        "name": "",
        "topic": "Minute",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Amsterdam",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "mm",
        "locale": "en-US",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Amsterdam",
        "x": 410,
        "y": 2600,
        "wires": [
            [
                "aee82d7ed5267326"
            ]
        ]
    },
    {
        "id": "aee82d7ed5267326",
        "type": "join",
        "z": "35d210f042827344",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 630,
        "y": 2560,
        "wires": [
            [
                "4d90f21594adec55"
            ]
        ]
    },
    {
        "id": "317942154b6d1cb3",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "",
        "mode": "link",
        "links": [
            "d9b3ca8bfaa4c10a",
            "ef28d0205d50cb26"
        ],
        "x": 2025,
        "y": 2520,
        "wires": []
    },
    {
        "id": "92b636a9597d91b2",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "",
        "mode": "link",
        "links": [
            "d0fda364deccc7f0",
            "d9b3ca8bfaa4c10a"
        ],
        "x": 2025,
        "y": 2560,
        "wires": []
    },
    {
        "id": "52b8feb14590a2b0",
        "type": "inject",
        "z": "35d210f042827344",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "trigger",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 320,
        "wires": [
            [
                "f5602874161743c8"
            ]
        ]
    },
    {
        "id": "14327004637e05c7",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "QM Scheduler to manager",
        "mode": "link",
        "links": [
            "74ccc8947e89976a"
        ],
        "x": 2025,
        "y": 2600,
        "wires": []
    },
    {
        "id": "c6801a6c865543b3",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "OperationMode Planning",
        "mode": "link",
        "links": [
            "d9b3ca8bfaa4c10a",
            "e73d130bb1839444"
        ],
        "x": 2025,
        "y": 2640,
        "wires": []
    },
    {
        "id": "be684538aa9a988e",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "Exit to Quiet Mode (Direct)",
        "info": "",
        "x": 2210,
        "y": 2580,
        "wires": []
    },
    {
        "id": "3155317a644ba5c6",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "Exit to Operation Mode (Direct)",
        "info": "",
        "x": 2310,
        "y": 2640,
        "wires": []
    },
    {
        "id": "dce5daf12297877f",
        "type": "function",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Schedule execution",
        "func": "// >> trigger 1\n// DHW / Sterilisation? This is defined in the topic\n// Topic: DHW or topic: Sterilization\n// payload 1 > initiate sequence. \n\n// Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n\n// Declaration of the variables. \nvar msg1 = {}, msg2 = {}, msg3 = {}, msg4 = {}, msg99 = {}; \nmsg99.topic = 'Scheduler'; \n// msg1     Output towards Operation mode\n// msg2     Output towards Force DHW mode on/off\n// msg3     output towards Force Sterilization on/off\n// msg4     empty\n\n//var TOP20_ThreeWay_Valve_State  =global.get('TOP20_ThreeWay_Valve_State');          // valvue position\nvar TOP10_DHW_Temp              =global.get('TOP10_DHW_Temp');                      // Current temperature of DHW vessel. \nvar TOP9_DHW_Target_Temp        =global.get('TOP9_DHW_Target_Temp',\"file\");         // Programmed DHW target temperature\n\nvar TOP2_Force_DHW_State        =global.get('TOP2_Force_DHW_State');                // Current DHW state (on / off). \nif (TOP2_Force_DHW_State === undefined) { return null; }\n\nvar TOP4_Operating_Mode_State   =global.get('TOP4_Operating_Mode_State',\"file\");    // get Current OperationMode\n\nvar TOP69_Sterilization_State   =global.get('TOP69_Sterilization_State',\"file\");    // Current sterilization state (on / off)\nif (TOP69_Sterilization_State === undefined) { return null; }\n\n// var TOP70_Sterilization_Temp    =global.get('TOP70_Sterilization_Temp',\"file\");     // Programmed sterilization target temperature\nvar DHW_threshold_upper         =global.get('DHW_threshold_upper',\"file\");          // Programmed treshold DHW tank temperature set from GUI\nvar DHW_boost_state             =global.get('DHW_boost_state',\"file\");\nvar F_stored_next_operating_mode=global.get('F_stored_next_operating_mode',\"file\");\nvar F_SOLAR                     = global.get('F_SOLAR',\"file\");\n\nvar Sterilization_active        = global.get('Sterilization_active', \"file\");\nvar Force_DHW_active            = global.get('Force_DHW_active', \"file\");\n\nvar old_OM;                                                                         // create empty variable.\nvar new_OM;                                                                         // create empty variable.\n\nif (TOP4_Operating_Mode_State === undefined || F_SOLAR === undefined || F_SOLAR.function_active_state === undefined || TOP10_DHW_Temp === undefined ) { return null; }\n\n/*\nInformation about default Panasonic behaviour:\nWhat happens if on the remote controller (not node red) you :\n////////////////////\n// Press ForceDHW //\n////////////////////\n\n    1 - Current OperatingMode is stored.\n    2 - Pump goes to DHW-Only\n    3 - Threewayvalve to position DHW\n    4 - Compressor on\n\n    *** do DHW Run ***\n\n    When the target temperature is reached, then:\n    5 - Pump OperatingMode goes back to stored mode\n    6 - Threeway valve to position HEAT\n    7 - ForceDHW is disabled (automatically)\n    8 - Continue normal operation in HEAT.\n\nBut what happens if you send through MQTT the command: \ntopic:\"panasonic_heat_pump/commands/SetDHWTemp\" with payload:\"1\"\n\n    Step 1, 2 and 5 are not done. So these need to be done manually....\n    But step 7 is done. For the end of the ForceDHW run, listening to the state change of ForceDHW from 1 to 0 is working.\n\n    Same applies for the sterelization run!\n\n    When the compressor stops and the ellecric heater continues to to heat up water to the target temperature.\n    When temperature is reached: \n    - The Threeway valve goes to HEAT mode, \n    - The water flow stops. \n    - When the temperature drops low enough, the Sterelization run toggle is set to 0.\n\nSoo... \nThis function manages the missing steps for the node red users. \nIF a user presses ForceDHW on the NodeREd flow, the ForceDHW 1 command will be sent, but also the missing steps 1, 2 and 5 will be taken care of!\n\n\n\n*/\n////////////////////////////////////////////////////////////////////////////////\n//                           START OF THE CYCLE                               //\n////////////////////////////////////////////////////////////////////////////////\n// START Force DHW cycle\nif (msg.topic === 'DHW' && msg.payload === 1 && TOP10_DHW_Temp < DHW_threshold_upper && F_SOLAR.function_active_state !== 1) {         // There is a temperature condition to start DHW heating or not. Change to your own desire.\n    // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n    \n    //global.set('TOP2_Force_DHW_State', undefined, \"file\"); // To prevent early DHW-END trigger\n    \n    old_OM = TOP4_Operating_Mode_State;\n        if (TOP4_Operating_Mode_State === 7) { old_OM = 2; }\n        if (TOP4_Operating_Mode_State === 8) { old_OM = 6; }\n    if (F_stored_next_operating_mode === undefined) { global.set('F_stored_next_operating_mode', old_OM, \"file\"); msg99.payload = 'Stored next operating mode is set to ' + old_OM; node.send([null, null, null, null, msg99]); }\n\n    setTimeout(function() { // Operation mode change\n        msg1.payload = 3;\n        if (TOP4_Operating_Mode_State === 3) { msg99.payload = 'Operation mode already (3)DHW-Only'; }\n        if (TOP4_Operating_Mode_State !== 3) { msg99.payload = 'Operation mode change to (3)DHW-Only';  }\n        node.send([null, null, null, null, msg99]);  // send new_OM\n        if (TOP4_Operating_Mode_State !== 3) { node.send([msg1,null]); }\n    }, 2500);\n\n    setTimeout(function () { // Set ForceDHW\n        msg2.payload = 1;\n            //global.set('Force_DHW_active', 1, \"file\");\n            global.set('F_RTC.automation_active', 0, \"file\");\n        msg99.payload = 'Enable ForceDHW';\n        node.send([null, msg2, null, null, msg99]);\n    }, 5000);\n    global.set('Force_DHW_active', 1, \"file\");\n    return null;\n}\n\n// START Force Sterilization cycle\nif (msg.topic === 'Sterilization' && msg.payload === 1  && F_SOLAR.function_active_state !== 1) {\n        // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n    \n    //global.set('TOP69_Sterilization_State', undefined, \"file\"); // To prevent early Sterelization-End trigger\n\n    old_OM = TOP4_Operating_Mode_State;\n    if (TOP4_Operating_Mode_State === 7) { old_OM = 2; }\n    if (TOP4_Operating_Mode_State === 8) { old_OM = 6; }\n    if (F_stored_next_operating_mode === undefined) { global.set('F_stored_next_operating_mode', old_OM, \"file\"); msg99.payload = 'Stored next operating mode is set to ' + old_OM; node.send([null, null, null, null, msg99]); }\n\n    setTimeout(function () { // Operation mode change\n        msg1.payload = 3;\n        if (TOP4_Operating_Mode_State === 3) { msg99.payload = 'Operation mode already (3)DHW-Only'; }\n        if (TOP4_Operating_Mode_State !== 3) { msg99.payload = 'Operation mode change to (3)DHW-Only'; }\n        node.send([null, null, null, null, msg99]);  // send new_OM\n        if (TOP4_Operating_Mode_State !== 3) { node.send([msg1, null]); }\n    }, 2500);\n\n    setTimeout(function () { // Set ForceSterilization\n        msg2.payload = 1; msg2.topic = 'Sterilization';\n        //global.set('Sterilization_active', 1, \"file\");\n        global.set('F_RTC.automation_active', 0, \"file\");\n        msg99.payload = 'Enable ForceSterilization';\n        node.send([null, null, msg2, null, msg99]);\n    }, 5000);\n    global.set('Sterilization_active', 1, \"file\");\n    return null;\n\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//                      END OF THE CYCLE                                      //\n////////////////////////////////////////////////////////////////////////////////\n\n// END FORCE DHW cycle\n//////////////////////\nif (Force_DHW_active === 1 && (TOP2_Force_DHW_State === 0 || (msg.topic == 'DHW' && msg.payload === 0))) {\n    // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n    \n    new_OM = F_stored_next_operating_mode;\n    global.set('Force_DHW_active', 0, \"file\");\n    var delay = 1000*60*15; // 15 minutes delay\n    \n    if (TOP2_Force_DHW_State === 1) { // This means that the user disabled ForceDHW via GUI.. Should react fast instead of timely.\n        msg2.payload = 0;\n        msg99.payload = 'Manually stopped ForceDHW. Reverting Operating Mode in 10 seconds'; \n        node.send([null, msg2, null, null, msg99]);\n        delay = 1000*10; // 10 seconds\n    }\n    else { msg99.payload = 'End ForceDHW cycle detected. Reverting Operating Mode in 15 minutes...'; node.send([null, null, null, null, msg99]);     }\n\n    setTimeout(function() { // Revert Operating Mode\n        msg1.payload = new_OM;\n        global.set('F_stored_next_operating_mode', undefined, \"file\");\n        if (msg1.payload !== undefined) {\n            msg99.payload = 'Revert to previous operating mode: ' + new_OM;\n            node.send([msg1, null, null, null, msg99]);\n        }\n    }, delay);\n    return null;\n}\n\n// END Sterilization cycle (Automatic)\n//////////////////////////////////////\nif (Sterilization_active === 1 && (TOP69_Sterilization_State === 0 || (msg.payload === 0 && msg.topic === 'Sterilization'))) {\n    // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n    \n    new_OM = F_stored_next_operating_mode;\n    global.set('Sterilization_active', 0, \"file\");\n    var delay = 1000 * 10; // 10 seconds delay\n\n    if (TOP69_Sterilization_State === 1) { // This means that the user disabled ForceSterilization via GUI.. Should react fast instead of timely.\n        msg3.payload = 0;\n        if (new_OM !== undefined) {msg99.payload = 'Manually stopped ForceSterilization. Reverting Operating Mode in 10 seconds'; node.send([null, null, null, null, msg99]) ; }\n        node.send([null, null, msg3, null, null]);\n    }\n    else { msg99.payload = 'End ForceSterilization cycle detected. Reverting Operating Mode in 10 seconds...'; node.send([null, null, null, null, msg99]); }\n\n    setTimeout(function () { // Revert Operating Mode\n        msg1.payload = new_OM;\n        global.set('F_stored_next_operating_mode', undefined, \"file\");\n        if (new_OM !== undefined) {\n            msg99.payload = 'Revert to previous operating mode: ' + new_OM;\n            node.send([msg1, null, null, null, msg99]);\n        }\n    }, delay);\n    return null;\n}\n\n\nvar TOP9_DHW_Target_Temp_Secondairy = global.get('TOP9_DHW_Target_Temp_Secondairy', \"file\");\nvar DHW_boost_state = global.get('DHW_boost_state', \"file\");\n\n// END DHW_boost_state cycle (Automatic)\nif (DHW_boost_state === 1 && Force_DHW_active === 1) {\n    if ((TOP2_Force_DHW_State === 0) || (msg.topic === 'DHW' && msg.payload === 0)) {\n        new_OM = F_stored_next_operating_mode;\n        \n        // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n\n        if (TOP4_Operating_Mode_State !== F_stored_next_operating_mode && F_stored_next_operating_mode !== undefined)\n            {setTimeout(function(){\n                msg1.payload = new_OM;                                      // set operationmode to remove DHW\n                node.send([msg1,null,null,null]);                           // send msg1 only, other outputs are null\n            }, 5000);}\n        global.set('Force_DHW_active',0,\"file\");\n        global.set('F_stored_next_operating_mode',undefined,\"file\");\n        msg99.payload = 'Stored next operating mode is removed'; node.send([null, null, null, null, msg99]);\n        msg2.payload = 0;                                               // Turn off Force DHW mode\n        msg2.topic = 'DHW End';\n        \n        var dhw_sp_low = global.get('F_SOLAR.dhw_sp_low',\"file\");\n        if (dhw_sp_low === undefined){ dhw_sp_low = null;}\n        \n        msg4.payload = dhw_sp_low;  msg4.topic = 'dhw_sp'\n        \n        return [null, msg2,null,msg4];\n    }\n}",
        "outputs": 5,
        "timeout": "0",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3050,
        "y": 2540,
        "wires": [
            [
                "6021a18a5e9c23cb"
            ],
            [
                "56d4bfa341d3eded",
                "84e59fd6bd8697ab"
            ],
            [
                "4f62466c41bb3667",
                "c39da0815cb8bf48"
            ],
            [
                "af9178426366861c"
            ],
            [
                "9815e18a26e4cd85"
            ]
        ],
        "outputLabels": [
            "Operation mode",
            "Force DHW",
            "Force Sterilization",
            "DHW SP Manager",
            "to log"
        ]
    },
    {
        "id": "56d4bfa341d3eded",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "ForceDHW_Scheduler",
        "mode": "link",
        "links": [
            "2ef668070522b01d",
            "5a3e1810b8f2135a"
        ],
        "x": 3385,
        "y": 2380,
        "wires": []
    },
    {
        "id": "4f62466c41bb3667",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "FoceSterilization_Scheduler",
        "mode": "link",
        "links": [
            "20e2544a8277d8c2"
        ],
        "x": 3415,
        "y": 2580,
        "wires": []
    },
    {
        "id": "52fea7493d509740",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit to Force DHW mode",
        "info": "",
        "x": 3630,
        "y": 2520,
        "wires": []
    },
    {
        "id": "259ee5343901c67c",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit to Sterilization Mode",
        "info": "",
        "x": 3630,
        "y": 2560,
        "wires": []
    },
    {
        "id": "c959ee1f94c31c45",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "OperationMode_Scheduler",
        "mode": "link",
        "links": [
            "e73d130bb1839444"
        ],
        "x": 3415,
        "y": 2420,
        "wires": []
    },
    {
        "id": "207821d9fd0df31e",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit to Operation Mode",
        "info": "",
        "x": 3620,
        "y": 2480,
        "wires": []
    },
    {
        "id": "cd34d205525225ef",
        "type": "inject",
        "z": "35d210f042827344",
        "d": true,
        "g": "b63004182c33d3b9",
        "name": "Check each minute",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "trigger",
        "payload": "1",
        "payloadType": "num",
        "x": 2820,
        "y": 2440,
        "wires": [
            [
                "dce5daf12297877f"
            ]
        ]
    },
    {
        "id": "27ad7f4523c5ac06",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Planning for forced DHW runs",
        "info": "",
        "x": 2560,
        "y": 2520,
        "wires": []
    },
    {
        "id": "07c12775c5faacae",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Function for execution of plan",
        "info": "",
        "x": 3080,
        "y": 2480,
        "wires": []
    },
    {
        "id": "284a4b5256066615",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Planning for Forced Sterilization runs",
        "info": "",
        "x": 2580,
        "y": 2560,
        "wires": []
    },
    {
        "id": "1d18cc8f09cfbdbc",
        "type": "change",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Topic Sterilization",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Sterilization",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2830,
        "y": 2560,
        "wires": [
            [
                "dce5daf12297877f"
            ]
        ]
    },
    {
        "id": "8c00f7e622b82f63",
        "type": "change",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Topic DHW",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "DHW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2850,
        "y": 2520,
        "wires": [
            [
                "dce5daf12297877f"
            ]
        ]
    },
    {
        "id": "ef28d0205d50cb26",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Planning_ForceDHW_topic",
        "links": [
            "317942154b6d1cb3"
        ],
        "x": 2385,
        "y": 2520,
        "wires": [
            [
                "8c00f7e622b82f63"
            ]
        ]
    },
    {
        "id": "d0fda364deccc7f0",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Planning_ForceSterilization_topic",
        "links": [
            "92b636a9597d91b2",
            "0a683587ca4fc25c"
        ],
        "x": 2385,
        "y": 2560,
        "wires": [
            [
                "1d18cc8f09cfbdbc"
            ]
        ]
    },
    {
        "id": "47fe4c3f4736bcc8",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "There is more logic required to execute Force DHW / sterilization runs. Multiple items switches",
        "info": "",
        "x": 2680,
        "y": 2400,
        "wires": []
    },
    {
        "id": "845e5ae092891549",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "This Block retreives the GUI input and pushes it to variables",
        "info": "",
        "x": 280,
        "y": 80,
        "wires": []
    },
    {
        "id": "016f1f556139c597",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "Evaluate each timestamp",
        "info": "",
        "x": 1310,
        "y": 2460,
        "wires": []
    },
    {
        "id": "67b90bdf1dc732d0",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "If timestamp matches >> output ",
        "info": "",
        "x": 1810,
        "y": 2440,
        "wires": []
    },
    {
        "id": "73c1eabffdfe4783",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 8,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Enable",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1080,
        "y": 120,
        "wires": []
    },
    {
        "id": "f5602874161743c8",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Schedule_xx topics",
        "func": "// variables to load on boot and periodically for dasboard\n\nvar var1 = \"Schedule_1\"\nvar var2 = \"Schedule_2\"\nvar var3 = \"Schedule_3\"\nvar var4 = \"Schedule_4\"\nvar var5 = \"Schedule_5\"\nvar var6 = \"Schedule_6\"\nvar var7 = \"Schedule_7\"\nvar var8 = \"Schedule_8\"\nvar var9 = \"Schedule_9\"\nvar var10= \"Schedule_10\"\n\n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={}, msg9={}, msg10={};\n\n\nmsg1.payload = var1; msg2.payload = var2; msg3.payload = var3; msg4.payload = var4; msg5.payload = var5; msg6.payload = var6;\nmsg7.payload = var7; msg8.payload = var8; msg9.payload = var9; msg10.payload = var10;\n\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10];",
        "outputs": 10,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 180,
        "wires": [
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ],
            [
                "698336312f37f38e"
            ]
        ],
        "outputLabels": [
            "Schedule_1_Description",
            "Schedule_1_day",
            "Schedule_1_hour",
            "Schedule_1_minutes",
            "Schedule_1_state",
            "Schedule_1_topic",
            "",
            "",
            "",
            ""
        ]
    },
    {
        "id": "698336312f37f38e",
        "type": "function",
        "z": "35d210f042827344",
        "name": "GET global / topics",
        "func": "// variables to load on boot for dasboard\n\nvar schedule_topic = msg.payload;\n\nvar msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={};//, msg9={}, msg10={};\n\n\nmsg1.payload = global.get(schedule_topic+'_Description',\"file\");\nmsg2.payload = global.get(schedule_topic+'_day',\"file\");\nmsg3.payload = global.get(schedule_topic+'_hour',\"file\");\nmsg4.payload = global.get(schedule_topic+'_minutes',\"file\");\nmsg5.payload = global.get(schedule_topic+'_state',\"file\");\nmsg6.payload = global.get(schedule_topic+'_action',\"file\");\nmsg7.payload = global.get(schedule_topic+'_override',\"file\");\nmsg8.payload = global.get(schedule_topic+'_condition',\"file\");\nmsg6.tooltip = '';\nif (msg6.payload == 'Room setpoint RTC' || msg6.payload == 'Water setpoint (heat shift)' || msg6.payload == 'Water setpoint (direct)' || msg6.payload == 'Room setpoint RTC') {\n    msg6.tooltip = global.get(schedule_topic+'_setpoint',\"file\");\n    msg6.tooltip = '<font size = 4px> Target is: ' + msg6.tooltip + ' °C</font>'\n}\nif (msg6.payload == 'toggle item') {\n    var items = global.get(schedule_topic + '_toggle_item', \"file\");\n    \n    if (items !== undefined) {\n        var state = items.State;\n        if (state === false) {state = 'off'}\n        if (state === true) { state = 'on' }\n        var list;\n        if (items.CCC_Z1 === true)      { list = 'CCC_Z1' }\n        if (items.CCC_Z2 === true)      { if (list !== undefined) { list += ', CCC_Z2' } else { list = 'CCC_Z2' } }\n\n        if (items.RTC_Z1 === true)      { if (list !== undefined) { list += ', RTC_Z1' } else { list = 'RTC_Z1' } }\n        if (items.RTC_Z2 === true)      { if (list !== undefined) { list += ', RTC_Z2' } else { list = 'RTC_Z2' } }\n        \n        if (items.SoftStart === true)   { if (list !== undefined) { list += ', SoftStart' } else { list = 'SoftStart' } }\n        if (items.SolarDHW === true)    { if (list !== undefined) { list += ', Solar²DHW' } else { list = 'Solar²DHW' } }\n            \n        msg6.tooltip = 'Turn ' + state + ': ' + list;\n    }\n    if (items === undefined) { msg6.payload = '' }\n}\n\n\n\n\n\nmsg1.topic = schedule_topic+'_Description';\nmsg2.topic = schedule_topic+'_day';\nmsg3.topic = schedule_topic+'_hour';\nmsg4.topic = schedule_topic+'_minutes';\nmsg5.topic = schedule_topic+'_state';\nmsg6.topic = schedule_topic+'_action';\nmsg7.topic = schedule_topic+'_override';\nmsg8.topic = schedule_topic+'_condition';\n\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8]; ",
        "outputs": 8,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 180,
        "wires": [
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ],
            [
                "58449f97376b98d9"
            ]
        ],
        "outputLabels": [
            "Schedule_x_Description",
            "Schedule_x_day",
            "Schedule_x_hour",
            "Schedule_x_minutes",
            "Schedule_x_state",
            "Schedule_x_topic",
            "Schedule_x_override",
            "Schedule_x_condition"
        ]
    },
    {
        "id": "79c82c463c263553",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_1_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_1_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_1_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 180,
        "wires": [
            [
                "e3d4b9d611e649e0"
            ],
            [
                "8fbe0ef4995f8e6a"
            ],
            [
                "243fa1e4e8cef5d0"
            ],
            [
                "40f0401e20235a07"
            ],
            [
                "98499b42fe5f6688"
            ],
            [
                "57dddda65db516a2"
            ],
            [
                "1372ccca982b4f0a"
            ],
            [
                "f6acd15f36324736"
            ]
        ]
    },
    {
        "id": "58449f97376b98d9",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "Scheduler_Load on boot",
        "mode": "link",
        "links": [
            "2bde70f7ec8740ee",
            "8e1f89a719096934",
            "750f2ca3ae772d5f",
            "598c7fd8d6681c1a",
            "ad4ce3a792ad76a6",
            "82508e256cc50ce7",
            "d73b8b0113a830fe",
            "357e2ed012a9bb42",
            "df58bbc82c06fc25",
            "fe86b16e9cc37804"
        ],
        "x": 615,
        "y": 180,
        "wires": []
    },
    {
        "id": "2bde70f7ec8740ee",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 180,
        "wires": [
            [
                "79c82c463c263553"
            ]
        ]
    },
    {
        "id": "1372ccca982b4f0a",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override1",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 25,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_1_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 180,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "86fe7a6080854779",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 14,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Power on",
        "format": "",
        "layout": "row-left",
        "className": "",
        "x": 2780,
        "y": 120,
        "wires": []
    },
    {
        "id": "d8e5ca53b22c577d",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour2",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 32,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_2_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 340,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "e411cdb2b3617a7e",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day2",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 31,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_2_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 340,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "0fcdf0e74a334edb",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes2",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 33,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_2_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 340,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "ce3b0c94ff7a8500",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch2",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 29,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_2_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 340,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "bbc0fc2f4315d9a0",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input2",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 30,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_2_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 340,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "bc2393868b4f66ed",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action2",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 34,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_2_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 340,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "9cf59f59ab99f77f",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_2_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_2_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_2_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 340,
        "wires": [
            [
                "ce3b0c94ff7a8500"
            ],
            [
                "bbc0fc2f4315d9a0"
            ],
            [
                "e411cdb2b3617a7e"
            ],
            [
                "d8e5ca53b22c577d"
            ],
            [
                "0fcdf0e74a334edb"
            ],
            [
                "bc2393868b4f66ed"
            ],
            [
                "479965c26a5f5d15"
            ],
            [
                "c904ad7bb0b016d8"
            ]
        ]
    },
    {
        "id": "8e1f89a719096934",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 340,
        "wires": [
            [
                "9cf59f59ab99f77f"
            ]
        ]
    },
    {
        "id": "479965c26a5f5d15",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override2",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 35,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_2_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 340,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "1f3a2d4f54594807",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_state",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(msg.topic,msg.payload,\"file\");\n\n\nif (msg.topic == 'Schedule_1_state')  { node.send([msg, null, null, null, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_2_state')  { node.send([null, msg, null, null, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_3_state')  { node.send([null, null, msg, null, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_4_state')  { node.send([null, null, null, msg, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_5_state')  { node.send([null, null, null, null, msg, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_6_state')  { node.send([null, null, null, null, null, msg, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_7_state')  { node.send([null, null, null, null, null, null, msg, null, null, null]) ;}\nif (msg.topic == 'Schedule_8_state')  { node.send([null, null, null, null, null, null, null, msg, null, null]) ;}\nif (msg.topic == 'Schedule_9_state')  { node.send([null, null, null, null, null, null, null, null, msg, null]) ;}\nif (msg.topic == 'Schedule_10_state') { node.send([null, null, null, null, null, null, null, null, null, msg]) ;}\n",
        "outputs": 10,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1215,
        "y": 1740,
        "wires": [
            [
                "e3d4b9d611e649e0"
            ],
            [
                "ce3b0c94ff7a8500"
            ],
            [
                "1a27db997a27a1dd"
            ],
            [
                "b01c2ff9f7469f79"
            ],
            [
                "5bd339d22882aa07"
            ],
            [
                "67c2c134c50ed462"
            ],
            [
                "87241aa5e6a2ccf7"
            ],
            [
                "62e00829c19bec7c"
            ],
            [
                "5a75949723c259df"
            ],
            [
                "bc8c769ccc26fa5d"
            ]
        ],
        "outputLabels": [
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "10"
        ],
        "l": false
    },
    {
        "id": "b4ab0c39c255e049",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_Description",
        "func": "global.set(msg.topic,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "a2cff14086311a49",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_day",
        "func": "\nglobal.set(msg.topic,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1880,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "c7cfdf9552b03480",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_hour",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(msg.topic,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2160,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "6e09f0a29207d5c9",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_minutes",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(msg.topic,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2470,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "f5c4b9e33c243507",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_action",
        "func": "global.set(msg.topic,msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2740,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "4fc691a1b1204c01",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_override",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\nglobal.set(msg.topic, msg.payload, \"file\");\n\nif (msg.topic == 'Schedule_1_override') { node.send([msg, null, null, null, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_2_override') { node.send([null, msg, null, null, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_3_override') { node.send([null, null, msg, null, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_4_override') { node.send([null, null, null, msg, null, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_5_override') { node.send([null, null, null, null, msg, null, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_6_override') { node.send([null, null, null, null, null, msg, null, null, null, null]) ;}\nif (msg.topic == 'Schedule_7_override') { node.send([null, null, null, null, null, null, msg, null, null, null]) ;}\nif (msg.topic == 'Schedule_8_override') { node.send([null, null, null, null, null, null, null, msg, null, null]) ;}\nif (msg.topic == 'Schedule_9_override') { node.send([null, null, null, null, null, null, null, null, msg, null]) ;}\nif (msg.topic == 'Schedule_10_override') { node.send([null, null, null, null, null, null, null, null, null, msg]) ;}\n",
        "outputs": 10,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2925,
        "y": 1740,
        "wires": [
            [
                "1372ccca982b4f0a"
            ],
            [
                "479965c26a5f5d15"
            ],
            [
                "57520972cf8f3282"
            ],
            [
                "73e5b776ee37e929"
            ],
            [
                "fd75ca33fe4a9589"
            ],
            [
                "4470d0d9384e5146"
            ],
            [
                "0a155882d5693fda"
            ],
            [
                "fe24caf7cb4e92d3"
            ],
            [
                "611bf69e3ab85546"
            ],
            [
                "a477e5b86fe9c792"
            ]
        ],
        "outputLabels": [
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "10"
        ],
        "l": false
    },
    {
        "id": "7a42e5778bf41519",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour3",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 42,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_3_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 500,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "d73541639351e613",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day3",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 41,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_3_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 500,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "871d8f6de9ad1a98",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes3",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 43,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_3_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 500,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "1a27db997a27a1dd",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch3",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 39,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_3_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 500,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "8a47deae609a4257",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input3",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 40,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_3_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 500,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "d15b2d0e98e01f65",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action3",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 44,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation Mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_3_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 500,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "cf847f1078676d93",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_3_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_3_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_3_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 500,
        "wires": [
            [
                "1a27db997a27a1dd"
            ],
            [
                "8a47deae609a4257"
            ],
            [
                "d73541639351e613"
            ],
            [
                "7a42e5778bf41519"
            ],
            [
                "871d8f6de9ad1a98"
            ],
            [
                "d15b2d0e98e01f65"
            ],
            [
                "57520972cf8f3282"
            ],
            [
                "b24f970c2d6262f9"
            ]
        ]
    },
    {
        "id": "750f2ca3ae772d5f",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 500,
        "wires": [
            [
                "cf847f1078676d93"
            ]
        ]
    },
    {
        "id": "57520972cf8f3282",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override3",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 45,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_3_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 500,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "5f74425ca9610401",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour4",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 52,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_4_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 660,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "612ac224e061cc79",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day4",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 51,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_4_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 660,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "0710a190d551707c",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes4",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 53,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_4_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 660,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "b01c2ff9f7469f79",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch4",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 49,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_4_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 660,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "9f04561329aa26f4",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input4",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 50,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_4_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 660,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "2a7fb72a1781fe14",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action4",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 54,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_4_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 660,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "a484cb58a507c3f2",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_4_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_4_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_4_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 660,
        "wires": [
            [
                "b01c2ff9f7469f79"
            ],
            [
                "9f04561329aa26f4"
            ],
            [
                "612ac224e061cc79"
            ],
            [
                "5f74425ca9610401"
            ],
            [
                "0710a190d551707c"
            ],
            [
                "2a7fb72a1781fe14"
            ],
            [
                "73e5b776ee37e929"
            ],
            [
                "e90e53734d73b6da"
            ]
        ]
    },
    {
        "id": "598c7fd8d6681c1a",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 660,
        "wires": [
            [
                "a484cb58a507c3f2"
            ]
        ]
    },
    {
        "id": "73e5b776ee37e929",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override4",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 55,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_4_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 660,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "a5c85f0332e4746d",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour5",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 62,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_5_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 820,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "53c6208ebe18f176",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day5",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 61,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_5_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 820,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "c649a3a840183e86",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes5",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 63,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_5_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 820,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "5bd339d22882aa07",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch5",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 59,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_5_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 820,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "cdd91f4f0777b0fc",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input5",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 60,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_5_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 820,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "9de114ee921577b7",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action5",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 64,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_5_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 820,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "c2dfc46bffb56c5f",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_5_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_5_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_5_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 820,
        "wires": [
            [
                "5bd339d22882aa07"
            ],
            [
                "cdd91f4f0777b0fc"
            ],
            [
                "53c6208ebe18f176"
            ],
            [
                "a5c85f0332e4746d"
            ],
            [
                "c649a3a840183e86"
            ],
            [
                "9de114ee921577b7"
            ],
            [
                "fd75ca33fe4a9589"
            ],
            [
                "82d6f38bd9764a93"
            ]
        ]
    },
    {
        "id": "ad4ce3a792ad76a6",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 820,
        "wires": [
            [
                "c2dfc46bffb56c5f"
            ]
        ]
    },
    {
        "id": "fd75ca33fe4a9589",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override5",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 65,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_5_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 820,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "3103abf9a680a9ea",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour6",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 72,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_6_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 980,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "a1866018a9f27226",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day6",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 71,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_6_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 980,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "51e9aad82e544c85",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes6",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 73,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_6_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 980,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "67c2c134c50ed462",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch6",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 69,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_6_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 980,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "1e30fa210ee856be",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input6",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 70,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_6_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 980,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "e72e318e1a456090",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action6",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 74,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_6_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 980,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "ab40d0b571d81193",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_6_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_6_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_6_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 980,
        "wires": [
            [
                "67c2c134c50ed462"
            ],
            [
                "1e30fa210ee856be"
            ],
            [
                "a1866018a9f27226"
            ],
            [
                "3103abf9a680a9ea"
            ],
            [
                "51e9aad82e544c85"
            ],
            [
                "e72e318e1a456090"
            ],
            [
                "4470d0d9384e5146"
            ],
            [
                "773eba4d817b8b93"
            ]
        ]
    },
    {
        "id": "82508e256cc50ce7",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 980,
        "wires": [
            [
                "ab40d0b571d81193"
            ]
        ]
    },
    {
        "id": "4470d0d9384e5146",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override6",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 75,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_6_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 980,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "f95cadbe3c3cd2f4",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour7",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 82,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_7_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 1140,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "fcf03506100353c9",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day7",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 81,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_7_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 1140,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "9fc9947dc30386f3",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes7",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 83,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_7_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 1140,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "87241aa5e6a2ccf7",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch7",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 79,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_7_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 1140,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "0a54cb095adcb787",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input7",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 80,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_7_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 1140,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "436b41690b969348",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action7",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 84,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_7_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 1140,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "a4e2c87bf04e065d",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_7_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_7_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_7_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 1140,
        "wires": [
            [
                "87241aa5e6a2ccf7"
            ],
            [
                "0a54cb095adcb787"
            ],
            [
                "fcf03506100353c9"
            ],
            [
                "f95cadbe3c3cd2f4"
            ],
            [
                "9fc9947dc30386f3"
            ],
            [
                "436b41690b969348"
            ],
            [
                "0a155882d5693fda"
            ],
            [
                "f314a9b676182c11"
            ]
        ]
    },
    {
        "id": "d73b8b0113a830fe",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 1140,
        "wires": [
            [
                "a4e2c87bf04e065d"
            ]
        ]
    },
    {
        "id": "0a155882d5693fda",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override7",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 85,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_7_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 1140,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "f93699165fe750ce",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour8",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 92,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_8_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 1300,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "b1956b6593a4a597",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day8",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 91,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_8_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 1300,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "0b60ef37733490bf",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes8",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 93,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_8_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 1300,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "62e00829c19bec7c",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch8",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 89,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_8_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 1300,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "32e23a19047b877e",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input8",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 90,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_8_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 1300,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "f511b9d4cedb0977",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action8",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 94,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_8_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 1300,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "e2a02a4bdcbb0432",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_8_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_8_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_8_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 1300,
        "wires": [
            [
                "62e00829c19bec7c"
            ],
            [
                "32e23a19047b877e"
            ],
            [
                "b1956b6593a4a597"
            ],
            [
                "f93699165fe750ce"
            ],
            [
                "0b60ef37733490bf"
            ],
            [
                "f511b9d4cedb0977"
            ],
            [
                "fe24caf7cb4e92d3"
            ],
            [
                "c8f137bcff651fba"
            ]
        ]
    },
    {
        "id": "357e2ed012a9bb42",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 1300,
        "wires": [
            [
                "e2a02a4bdcbb0432"
            ]
        ]
    },
    {
        "id": "fe24caf7cb4e92d3",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override8",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 95,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_8_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 1300,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "5b138a18f47114e3",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour9",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 102,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_9_hour",
        "topicType": "str",
        "className": "",
        "x": 1950,
        "y": 1460,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "37d57c847d1b5ff8",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day9",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 101,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_9_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 1460,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "663c8cf477dc16cb",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes9",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 103,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_9_minutes",
        "topicType": "str",
        "className": "",
        "x": 2240,
        "y": 1460,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "5a75949723c259df",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch9",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 99,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_9_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 1460,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "d77c206846bfe16d",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input9",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 100,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_9_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 1460,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "11958cca6fba73cb",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action9",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 104,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_9_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 1460,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "848ddfb953511b13",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_9_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_9_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_9_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 870,
        "y": 1460,
        "wires": [
            [
                "5a75949723c259df"
            ],
            [
                "d77c206846bfe16d"
            ],
            [
                "37d57c847d1b5ff8"
            ],
            [
                "5b138a18f47114e3"
            ],
            [
                "663c8cf477dc16cb"
            ],
            [
                "11958cca6fba73cb"
            ],
            [
                "611bf69e3ab85546"
            ],
            [
                "a147fe89247aa73b"
            ]
        ]
    },
    {
        "id": "df58bbc82c06fc25",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 1460,
        "wires": [
            [
                "848ddfb953511b13"
            ]
        ]
    },
    {
        "id": "611bf69e3ab85546",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override9",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 105,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_9_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2780,
        "y": 1460,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "e20f0e179a77b100",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Hour10",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 112,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_10_hour",
        "topicType": "str",
        "className": "",
        "x": 1960,
        "y": 1620,
        "wires": [
            [
                "c7cfdf9552b03480"
            ]
        ]
    },
    {
        "id": "88872f26b2ce5e9b",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Day10",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 111,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "Monday",
                "value": "Monday",
                "type": "str"
            },
            {
                "label": "Tuesday",
                "value": "Tuesday",
                "type": "str"
            },
            {
                "label": "Wednesday",
                "value": "Wednesday",
                "type": "str"
            },
            {
                "label": "Thursday",
                "value": "Thursday",
                "type": "str"
            },
            {
                "label": "Friday",
                "value": "Friday",
                "type": "str"
            },
            {
                "label": "Saturday",
                "value": "Saturday",
                "type": "str"
            },
            {
                "label": "Sunday",
                "value": "Sunday",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_10_day",
        "topicType": "str",
        "className": "",
        "x": 1670,
        "y": 1620,
        "wires": [
            [
                "a2cff14086311a49"
            ]
        ]
    },
    {
        "id": "1759cf2fcc472812",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Minutes10",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 113,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select",
                "value": "Select",
                "type": "str"
            },
            {
                "label": "00",
                "value": 0,
                "type": "num"
            },
            {
                "label": "01",
                "value": 1,
                "type": "num"
            },
            {
                "label": "02",
                "value": 2,
                "type": "num"
            },
            {
                "label": "03",
                "value": 3,
                "type": "num"
            },
            {
                "label": "04",
                "value": 4,
                "type": "num"
            },
            {
                "label": "05",
                "value": 5,
                "type": "num"
            },
            {
                "label": "06",
                "value": 6,
                "type": "num"
            },
            {
                "label": "07",
                "value": 7,
                "type": "num"
            },
            {
                "label": "08",
                "value": 8,
                "type": "num"
            },
            {
                "label": "09",
                "value": 9,
                "type": "num"
            },
            {
                "label": "10",
                "value": 10,
                "type": "num"
            },
            {
                "label": "11",
                "value": 11,
                "type": "num"
            },
            {
                "label": "12",
                "value": 12,
                "type": "num"
            },
            {
                "label": "13",
                "value": 13,
                "type": "num"
            },
            {
                "label": "14",
                "value": 14,
                "type": "num"
            },
            {
                "label": "15",
                "value": 15,
                "type": "num"
            },
            {
                "label": "16",
                "value": 16,
                "type": "num"
            },
            {
                "label": "17",
                "value": 17,
                "type": "num"
            },
            {
                "label": "18",
                "value": 18,
                "type": "num"
            },
            {
                "label": "19",
                "value": 19,
                "type": "num"
            },
            {
                "label": "20",
                "value": 20,
                "type": "num"
            },
            {
                "label": "21",
                "value": 21,
                "type": "num"
            },
            {
                "label": "22",
                "value": 22,
                "type": "num"
            },
            {
                "label": "23",
                "value": 23,
                "type": "num"
            },
            {
                "label": "24",
                "value": 24,
                "type": "num"
            },
            {
                "label": "25",
                "value": 25,
                "type": "num"
            },
            {
                "label": "26",
                "value": 26,
                "type": "num"
            },
            {
                "label": "27",
                "value": 27,
                "type": "num"
            },
            {
                "label": "28",
                "value": 28,
                "type": "num"
            },
            {
                "label": "29",
                "value": 29,
                "type": "num"
            },
            {
                "label": "30",
                "value": 30,
                "type": "num"
            },
            {
                "label": "31",
                "value": 31,
                "type": "num"
            },
            {
                "label": "32",
                "value": 32,
                "type": "num"
            },
            {
                "label": "33",
                "value": 33,
                "type": "num"
            },
            {
                "label": "34",
                "value": 34,
                "type": "num"
            },
            {
                "label": "35",
                "value": 35,
                "type": "num"
            },
            {
                "label": "36",
                "value": 36,
                "type": "num"
            },
            {
                "label": "37",
                "value": 37,
                "type": "num"
            },
            {
                "label": "38",
                "value": 38,
                "type": "num"
            },
            {
                "label": "39",
                "value": 39,
                "type": "num"
            },
            {
                "label": "40",
                "value": 40,
                "type": "num"
            },
            {
                "label": "41",
                "value": 41,
                "type": "num"
            },
            {
                "label": "42",
                "value": 42,
                "type": "num"
            },
            {
                "label": "43",
                "value": 43,
                "type": "num"
            },
            {
                "label": "44",
                "value": 44,
                "type": "num"
            },
            {
                "label": "45",
                "value": 45,
                "type": "num"
            },
            {
                "label": "46",
                "value": 46,
                "type": "num"
            },
            {
                "label": "47",
                "value": 47,
                "type": "num"
            },
            {
                "label": "48",
                "value": 48,
                "type": "num"
            },
            {
                "label": "49",
                "value": 49,
                "type": "num"
            },
            {
                "label": "50",
                "value": 50,
                "type": "num"
            },
            {
                "label": "51",
                "value": 51,
                "type": "num"
            },
            {
                "label": "52",
                "value": 52,
                "type": "num"
            },
            {
                "label": "53",
                "value": 53,
                "type": "num"
            },
            {
                "label": "54",
                "value": 54,
                "type": "num"
            },
            {
                "label": "55",
                "value": 55,
                "type": "num"
            },
            {
                "label": "56",
                "value": 56,
                "type": "num"
            },
            {
                "label": "57",
                "value": 57,
                "type": "num"
            },
            {
                "label": "58",
                "value": 58,
                "type": "num"
            },
            {
                "label": "59",
                "value": 59,
                "type": "num"
            }
        ],
        "payload": "",
        "topic": "Schedule_10_minutes",
        "topicType": "str",
        "className": "",
        "x": 2250,
        "y": 1620,
        "wires": [
            [
                "6e09f0a29207d5c9"
            ]
        ]
    },
    {
        "id": "bc8c769ccc26fa5d",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "switch10",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 109,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_10_state",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1080,
        "y": 1620,
        "wires": [
            [
                "1f3a2d4f54594807"
            ]
        ]
    },
    {
        "id": "99bf0b7454b3b5c0",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input10",
        "label": "",
        "tooltip": "",
        "group": "2b0c8e162d47abbb",
        "order": 110,
        "width": 5,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": 300,
        "topic": "Schedule_10_Description",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 1370,
        "y": 1620,
        "wires": [
            [
                "b4ab0c39c255e049"
            ]
        ]
    },
    {
        "id": "219fcc0259998439",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Action10",
        "label": "",
        "tooltip": "{{msg.tooltip}}",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 114,
        "width": 5,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Heat pump on",
                "value": "HP_turn_on",
                "type": "str"
            },
            {
                "label": "Heat pump off",
                "value": "HP_turn_off",
                "type": "str"
            },
            {
                "label": "Force DHW ",
                "value": "DHW",
                "type": "str"
            },
            {
                "label": "Force Sterilization",
                "value": "Sterilization",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "x",
                "type": "str"
            },
            {
                "label": "Quiet mode 0",
                "value": "QM_0",
                "type": "str"
            },
            {
                "label": "Quiet mode 1",
                "value": "QM_1",
                "type": "str"
            },
            {
                "label": "Quiet mode 2",
                "value": "QM_2",
                "type": "str"
            },
            {
                "label": "Quiet mode 3",
                "value": "QM_3",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "y",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat only",
                "value": "OperationMode0",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool only",
                "value": "OperationMode1",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto",
                "value": "OperationMode2",
                "type": "str"
            },
            {
                "label": "Operation mode - DHW only",
                "value": "OperationMode3",
                "type": "str"
            },
            {
                "label": "Operation mode - Heat+DHW",
                "value": "OperationMode4",
                "type": "str"
            },
            {
                "label": "Operation mode - Cool+DHW",
                "value": "OperationMode5",
                "type": "str"
            },
            {
                "label": "Operation mode - Auto+DHW",
                "value": "OperationMode6",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "z",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp on",
                "value": "NightReductionWaterTempOn",
                "type": "str"
            },
            {
                "label": "Nightreduction water temp off",
                "value": "NightReductionWaterTempOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "Z",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint on",
                "value": "NightReductionRoomSetpointOn",
                "type": "str"
            },
            {
                "label": "Nightreduction room setpoint off",
                "value": "NightReductionRoomSetpointOff",
                "type": "str"
            },
            {
                "label": "------------------------------",
                "value": "XX",
                "type": "str"
            },
            {
                "label": "Set room setpoint (RTC)",
                "value": "Room setpoint RTC",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat shift)",
                "value": "Water setpoint (heat shift)",
                "type": "str"
            },
            {
                "label": "Set water setpoint (heat direct)",
                "value": "Water setpoint (direct)",
                "type": "str"
            },
            {
                "label": "Set DHW setpoint",
                "value": "DHW setpoint",
                "type": "str"
            },
            {
                "label": "Toggle a function",
                "value": "toggle item",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_10_action",
        "topicType": "str",
        "className": "",
        "x": 2520,
        "y": 1620,
        "wires": [
            [
                "f5c4b9e33c243507",
                "525e9bfc80e7f5e5",
                "41e3d65e44f729b3"
            ]
        ]
    },
    {
        "id": "a43e0949567dc0ef",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "Schedule_10_",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Schedule_10_state",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_Description",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_day",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_hour",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_minutes",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_action",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_override",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Schedule_10_condition",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 880,
        "y": 1620,
        "wires": [
            [
                "bc8c769ccc26fa5d"
            ],
            [
                "99bf0b7454b3b5c0"
            ],
            [
                "88872f26b2ce5e9b"
            ],
            [
                "e20f0e179a77b100"
            ],
            [
                "1759cf2fcc472812"
            ],
            [
                "219fcc0259998439"
            ],
            [
                "a477e5b86fe9c792"
            ],
            [
                "8e3cfd35030617d7"
            ]
        ]
    },
    {
        "id": "fe86b16e9cc37804",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "",
        "links": [
            "58449f97376b98d9"
        ],
        "x": 755,
        "y": 1620,
        "wires": [
            [
                "a43e0949567dc0ef"
            ]
        ]
    },
    {
        "id": "a477e5b86fe9c792",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "name": "Override10",
        "label": "",
        "tooltip": "When the heatpump is off, should the scheduler turn it on and execute the schedule? (off=no / on=yes)",
        "group": "2b0c8e162d47abbb",
        "order": 115,
        "width": 2,
        "height": 1,
        "passthru": false,
        "decouple": "true",
        "topic": "Schedule_10_override",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2790,
        "y": 1620,
        "wires": [
            [
                "4fc691a1b1204c01"
            ]
        ]
    },
    {
        "id": "4d90f21594adec55",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Schedule_xx topics",
        "func": "// variables to load on boot and periodically for dasboard\n\nlet msg1={}, msg2={}, msg3={}, msg4={}, msg5={}, msg6={}, msg7={}, msg8={}, msg9={}, msg10={};\n\nmsg1.topic = \"Schedule_1\"\nmsg2.topic = \"Schedule_2\"\nmsg3.topic = \"Schedule_3\"\nmsg4.topic = \"Schedule_4\"\nmsg5.topic = \"Schedule_5\"\nmsg6.topic = \"Schedule_6\"\nmsg7.topic = \"Schedule_7\"\nmsg8.topic = \"Schedule_8\"\nmsg9.topic = \"Schedule_9\"\nmsg10.topic= \"Schedule_10\"\n\nmsg1.payload = msg.payload;\nmsg2.payload = msg.payload;\nmsg3.payload = msg.payload;\nmsg4.payload = msg.payload;\nmsg5.payload = msg.payload;\nmsg6.payload = msg.payload;\nmsg7.payload = msg.payload;\nmsg8.payload = msg.payload;\nmsg9.payload = msg.payload;\nmsg10.payload = msg.payload;\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10];\n",
        "outputs": 10,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 2560,
        "wires": [
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ],
            [
                "6a48a1a61f8fc344"
            ]
        ],
        "outputLabels": [
            "Schedule_1_Description",
            "Schedule_1_day",
            "Schedule_1_hour",
            "Schedule_1_minutes",
            "Schedule_1_state",
            "Schedule_1_topic",
            "",
            "",
            "",
            ""
        ]
    },
    {
        "id": "d69f1fa0c38f85ab",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "Scheduler in Dashboard",
        "info": "",
        "x": 820,
        "y": 60,
        "wires": []
    },
    {
        "id": "f217f942f56cbfa9",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "Power on Planning",
        "mode": "link",
        "links": [
            "071ac5a0f08a8fdb",
            "d9b3ca8bfaa4c10a"
        ],
        "x": 2025,
        "y": 2440,
        "wires": []
    },
    {
        "id": "e168945122de5aa2",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Function schedule",
        "func": "var topic = msg.topic;\nvar scheduleNumber = msg.topic.replace('Schedule_','');\n\nvar state = global.get(topic + '_state', \"file\") || 0;                               // Get state of the agenda item. \nvar F_RTC_automation_active = global.get('F_RTC.automation_active', \"file\");\nvar HP_state = global.get('TOP0_Heatpump_State', \"file\");                          // get the current state of the heatpump. Is it on or off.\n\n\nif (msg.force === 1 && msg.payload === 1 && msg.topic === 'DHW') {\n    if (HP_state === 0) {\n        if (F_RTC_automation_active === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n        let msg1 = {}; msg1 = { payload: 1, topic: \"override\" }; node.send([msg1, null]);\n    }\n    let msg2 = {}; msg2 = { payload: 1, topic: \"DHW\" };\n    node.send([null, msg2]);\n}\n\nif (msg.force === 1 && msg.payload === 0 && msg.topic === 'DHW') {\n    let msg2 = {}; msg2 = { payload: 0, topic: \"DHW\" };\n    node.send([null, msg2]);\n}\n\n/*\nif (msg.topic == 'GUI_DHW_automation_state' && msg.payload == 1) {\n    if (HP_state == 0) {\n        let msg1 = {}; msg1 = { payload: 1, topic: \"override\" }; node.send([msg1, null]);\n    }\n    var F_stored_next_operating_mode    = global.get('F_stored_next_operating_mode', \"file\");\n    var TOP4_Operating_Mode_State       = global.get('TOP4_Operating_Mode_State', \"file\");\n    var TOP20_ThreeWay_Valve_State      = global.get('TOP20_ThreeWay_Valve_State');\n        if (TOP20_ThreeWay_Valve_State == 1) { return null; } // exit if the 3way valve is already in DHW position...\n    global.set('F_RTC.automation_active', 0, \"file\"); \n    if (F_stored_next_operating_mode === undefined) { global.set('F_stored_next_operating_mode', TOP4_Operating_Mode_State,\"file\"); }\n    let msg5={}; msg5.payload = 3;  // DHW-Only\n    node.send([null,null,null,null,msg5]);\n    global.set('DHW_automation_active', 1, \"file\");\n    return null;\n}\n*/\n\nif (msg.topic === 'GUI_DHW_automation_state' && msg.payload === 0) {\n    var TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State');\n        if (TOP20_ThreeWay_Valve_State === 0) { return null; } // exit if the 3way valve is in ROOM position....\n    var F_stored_next_operating_mode = global.get('F_stored_next_operating_mode', \"file\");\n    if (F_stored_next_operating_mode !== undefined) {\n        let msg5 = {};\n        msg5.payload = F_stored_next_operating_mode;\n        node.send([null, null, null, null, msg5]);\n    }\n    global.set('DHW_automation_active', 0, \"file\");\n    return null;\n}\n\n\n\nif (state === 0)                                                            // Is it disabled? \n{ return null; }                                                           // output null to all pins and exit. else to continue.\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n\nelse {                                                                       // if not, continue...\n    var day_check = global.get(topic + '_day', \"file\");                   // get schedule variables.\n    var hour_check = global.get(topic + '_hour', \"file\");                  // get schedule variables.\n    var minutes_check = global.get(topic + '_minutes', \"file\");               // get schedule variables.\n\n    var solar_block_scheduler = global.get('solar_block_scheduler', \"file\");\n    var F_SOLAR = global.get('F_SOLAR', \"file\");\n\n    var F_stored_next_operating_mode = global.get('F_stored_next_operating_mode', \"file\");\n\n\n    var block_it = false;\n    if (solar_block_scheduler === true && F_SOLAR.function_active_state === 1) {\n        block_it = true;\n\n    }\n\n\n\n    // Check the programmed day compared current day.\n    if (day_check.includes(msg.payload[0])) { day_check = { payload: 1, topic: \"DayOfTheWeek\" }; }\n    else { day_check = { payload: 0, topic: \"DayOfTheWeek\" }; }\n\n    ////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////\n\n    // Check the programmed hour compared current hour.        \n    if (msg.payload[1] == hour_check) { hour_check = { payload: 1, topic: \"Hour\" }; }\n    else { hour_check = { payload: 0, topic: \"Hour\" }; }\n\n    ////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////\n\n    // Check the programmed minutes compared current minutes.\n    if (msg.payload[2] == minutes_check) { minutes_check = { payload: 1, topic: \"Minutes\" }; }\n    else { minutes_check = { payload: 0, topic: \"Minutes\" }; }\n\n    ////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////\n\n    if (day_check.payload === 1 && hour_check.payload === 1 && minutes_check.payload === 1)        // If all of the conditions are met (day + hour + minutes), then....\n    {\n        var CurrentTime = new Date().getTime();\n        var msg1 = {}, msg2 = {}, msg3 = {}, msg4 = {}, msg5 = {}, msg6 = {}, msg7 = {}, msg8 = {};\n        msg2.payload = 99; msg3.payload = 99; msg4.payload = 99; msg5.payload = 99; msg6.payload = 99; msg7.payload = 99;\n        //\n        //\n        //\n        ////////////////////////////////////////////////////////////////\n        //  Override the current powerstate of heat pump? //////////////\n        //\n        var override = global.get(topic + '_override', \"file\");         // get the current override state.\n        var NightReductionRoomSetpoint_state = global.get('NightReductionRoomSetpoint.state', \"file\");\n        ////////////////////////////////////////////////////////////////\n\n        var CurrentDHW = global.get('TOP10_DHW_Temp');\n\n        // ########## CONDITIONS #######################################\n        var msg99={};\n        var condition = global.get(msg.topic + '_condition', \"file\");\n        if (condition !== undefined) {\n            for (const value of condition) {\n                var Schedule_conditions_condition_xx = global.get('Schedule_conditions.' + value, \"file\");\n                if (Schedule_conditions_condition_xx === undefined) { Schedule_conditions_condition_xx = {}; }\n                if (Schedule_conditions_condition_xx.value === undefined || Schedule_conditions_condition_xx.value === null) { Schedule_conditions_condition_xx.value = 100000; }\n\n                if (condition !== undefined) { msg99.topic = 'Scheduler condition'; }\n\n                // DHW_temperature\n                if (Schedule_conditions_condition_xx.type === 'DHW_temperature') {\n                    if (Schedule_conditions_condition_xx.value !== undefined && CurrentDHW > Schedule_conditions_condition_xx.value) { msg99.payload = 'DHW temperature: ' + CurrentDHW + '. Condition: ' + Schedule_conditions_condition_xx.value + '°C. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                    //msg99.payload = 'Pass';\n\n                    //node.send([null,null,null,null,null,null,null,null,msg99])\n                }\n\n                // ELAPSED_TIME (time since last sterelization is less than)\n                if (Schedule_conditions_condition_xx.type === 'ELAPSED_TIME') {\n                    let last_run = global.get('Schedule_conditions.DHW_last_at_60C', \"file\");\n                    let CurrentTime = new Date().getTime();\n                    if (Schedule_conditions_condition_xx.value !== undefined && (CurrentTime - last_run) < Schedule_conditions_condition_xx.value * 60 * 60 * 1000 && last_run !== undefined) { msg99.payload = 'Time since last above 60°C: ' + ((CurrentTime - last_run) / 3600000).toFixed(2) + ' hours. Condition: ' + Schedule_conditions_condition_xx.value + ' hours. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                    //msg99.payload = 'Pass';\n\n                    //node.send([null,null,null,null,null,null,null,null,msg99])\n                }\n\n                // ELAPSED_TIME2 (time since DHW temp was on target temperature is less than)\n                if (Schedule_conditions_condition_xx.type === 'ELAPSED_TIME2') {\n                    let last_run = global.get('Schedule_conditions.DHW_last_at_target_temperature', \"file\");\n                    let CurrentTime = new Date().getTime();\n                    if (Schedule_conditions_condition_xx.value !== undefined && (CurrentTime - last_run) < Schedule_conditions_condition_xx.value * 60 * 60 * 1000 && last_run !== undefined) { msg99.payload = 'Time since last at DHW target: ' + ((CurrentTime - last_run) / 3600000).toFixed(2) + ' hours. Condition: ' + Schedule_conditions_condition_xx.value + ' hours. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                    //msg99.payload = 'Pass';\n\n                    //node.send([null,null,null,null,null,null,null,null,msg99])\n                }\n\n                // ELAPSED_TIME3 (time since previous trigger of this scheduled action is less than)\n                if (Schedule_conditions_condition_xx.type === 'ELAPSED_TIME3') {\n                    let last_run = global.get(msg.topic + '_last_run', \"file\");\n                    let CurrentTime = new Date().getTime();\n                    if (Schedule_conditions_condition_xx.value !== undefined && (CurrentTime - last_run) < Schedule_conditions_condition_xx.value * 60 * 60 * 1000 && last_run !== undefined) { msg99.payload = 'Time since last run: ' + ((CurrentTime - last_run) / 3600000).toFixed(2) + ' hours. Condition: ' + Schedule_conditions_condition_xx.value + ' hours. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                    //msg99.payload = 'Pass';\n\n                    //node.send([null,null,null,null,null,null,null,null,msg99])\n                }\n\n                // OUTSIDE_TEMP_ABOVE (Outside temperature is above the given temperature)\n                if (Schedule_conditions_condition_xx.type === 'OUTSIDE_TEMP_ABOVE') {\n                    var T_outside = global.get('T_outside', \"file\");\n                    if (Schedule_conditions_condition_xx.value !== undefined && T_outside > Schedule_conditions_condition_xx.value) { msg99.payload = 'Outside temperature: ' + T_outside + '. Condition: above ' + Schedule_conditions_condition_xx.value + '°C. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                }\n\n                // OUTSIDE_TEMP_BELOW (Outside temperature is below the given temperature)\n                if (Schedule_conditions_condition_xx.type === 'OUTSIDE_TEMP_BELOW') {\n                    var T_outside = global.get('T_outside', \"file\");\n                    if (Schedule_conditions_condition_xx.value !== undefined && T_outside < Schedule_conditions_condition_xx.value) { msg99.payload = 'Outside temperature: ' + T_outside + '. Condition: below ' + Schedule_conditions_condition_xx.value + '°C. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                }\n\n                // INSIDE_TEMP_ABOVE (Inside temperature is above the given temperature)\n                if (Schedule_conditions_condition_xx.type === 'INSIDE_TEMP_ABOVE') {\n                    var T_zone_1 = global.get('T_zone_1');\n                    if (Schedule_conditions_condition_xx.value !== undefined && T_zone_1 > Schedule_conditions_condition_xx.value) { msg99.payload = 'Inside temperature: ' + T_zone_1 + '. Condition: above ' + Schedule_conditions_condition_xx.value + '°C. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                }\n\n                // INSIDE_TEMP_BELOW (Inside temperature is below the given temperature)\n                if (Schedule_conditions_condition_xx.type === 'INSIDE_TEMP_BELOW') {\n                    var T_zone_1 = global.get('T_zone_1');\n                    if (Schedule_conditions_condition_xx.value !== undefined && T_zone_1 < Schedule_conditions_condition_xx.value) { msg99.payload = 'Inside temperature: ' + T_zone_1 + '. Condition: below ' + Schedule_conditions_condition_xx.value + '°C. Scheduled action (#' + scheduleNumber + ') blocked'; node.send([null, null, null, null, null, null, null, null, msg99]); return null; }\n                }\n\n            }\n        }\n        // #############################################################\n\n        if ((override === 1 && HP_state === 0) || msg.force === 1)                            // check if the override state is enabled, AND currently heatpump state is off \n        {\n            msg1 = { payload: 1, topic: \"override\" };\n            node.send([msg1, null, null, null, null, null, null, null, null])\n            \n        }\n        ////////////////////////////////////////////////////////////////\n        //\n        //\n        //\n\n        var CurrentHEAT = global.get('TOP5_Main_Inlet_Temp');\n        //\n        //\n        var action = global.get(topic + '_action', \"file\");             // get the action\n        \n        ////////////////////////////////////////////////////////////////\n\n        if (action === \"HP_turn_on\" && HP_state === 0)                   // check the action\n        {\n            msg1 = { source: \"flow\", payload: 1, topic: \"Turn ON HeatPump\" };       // Operation Mode action? >> to Operation MOde output pin 1\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Turn ON HeatPump';\n            global.set('F_RTC.automation_active', 0, \"file\");\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [msg1, null, null, null, null, null, null, null, msg99]\n        }\n        if (action === \"HP_turn_off\" && HP_state === 1 && block_it === false)                                   // check the action\n        {\n            msg1 = { source: \"flow\", payload: 0, topic: \"Turn OFF HeatPump\" };      // Operation Mode action? >> to Operation MOde output pin 1\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Turn OFF HeatPump';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [msg1, null, null, null, null, null, null, null, msg99]\n        }\n        ////////////////////////////////////////////////////////////////\n        //\n        //\n        //\n        ////////////////////////////////////////////////////////////////\n        if (action === \"DHW\")                                           // check the action if DHW (=Force DHW)\n        {\n            msg2 = { payload: 1, topic: \"DHW\" };                     // DHW action? >> to DHW output pin 2\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, msg2, null, null, null, null, null, null, msg99]\n\n        }\n        ////////////////////////////////////////////////////////////////\n        //\n        //\n        //\n        //\n        ////////////////////////////////////////////////////////////////\n        if (action === \"Sterilization\" && block_it === false)                                 // check the action\n        {\n            msg3 = { payload: 1, topic: \"Sterilization\" };         // Sterilization action? >> to Sterilization output pin 3\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force Sterelization';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, msg3, null, null, null, null, null, msg99]\n        }\n        ////////////////////////////////////////////////////////////////\n        //\n        //\n        //\n        //\n        //\n        ////////////////////////////////////////////////////////////////                \n        if (action === \"QM_0\")                                          // check the action\n        {\n            msg4.payload = 0; msg4.topic = \"Set QuietMode to\";           // QuietMode action? >> to Quiet MOde output pin 4\n            msg4.source = \"scheduler\";\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Set QuietMode OFF';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, null, msg4, null, null, null, null, msg99]\n        }\n        if (action === \"QM_1\")                                          // check the action\n        {\n            msg4.payload = 1; msg4.topic = \"Set QuietMode to\";           // QuietMode action? >> to Quiet MOde output pin 4\n            msg4.source = \"scheduler\";\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Set QuietMode 1';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, null, msg4, null, null, null, null, msg99]\n        }\n        if (action === \"QM_2\")                                          // check the action\n        {\n            msg4.payload = 2; msg4.topic = \"Set QuietMode to\";           // QuietMode action? >> to Quiet MOde output pin 4\n            msg4.source = \"scheduler\";\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Set QuietMode 2';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, null, msg4, null, null, null, null, msg99]\n        }\n        if (action === \"QM_3\")                                          // check the action\n        {\n            msg4.payload = 3; msg4.topic = \"Set QuietMode to\";           // QuietMode action? >> to Quiet MOde output pin 4\n            msg4.source = \"scheduler\";\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Set QuietMode 3';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, null, msg4, null, null, null, null, msg99]\n        }\n        ////////////////////////////////////////////////////////////////\n        //\n        //\n        // Scheduler - Operation Mode\n        //\n        ////////////////////////////////////////////////////////////////\n        // Operating mode (0=Heat only, 1=Cool only, 2=Auto(Heat), 3=DHW only, 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n        // Operating mode (0=Heat only, 2=Auto(Heat), 4=Heat+DHW, 5=Cool+DHW, 6=Auto(Heat)+DHW, 7=Auto(Cool), 8=Auto(Cool)+DHW)\n        if (action === \"OperationMode0\") {                               // check the action   \n            msg5.payload = 0;\n\n            if (global.get('Force_DHW_active', \"file\") === 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\"); \n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n        if (action === \"OperationMode1\")                                // check the action\n        {\n            msg5.payload = 1;\n            \n            if (global.get('Force_DHW_active', \"file\") === 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99]) \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\");\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n        if (action === \"OperationMode2\")                                // check the action\n        {\n            msg5.payload = 2;\n\n            if (global.get('Force_DHW_active', \"file\") == 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\");\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n        if (action === \"OperationMode3\")                                // check the action\n        {\n            msg5.payload = 3;\n            \n            if (global.get('Force_DHW_active', \"file\") === 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\");\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n        if (action === \"OperationMode4\")                                // check the action\n        {\n            msg5.payload = 4;\n\n            if (global.get('Force_DHW_active', \"file\") === 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\");\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n        if (action === \"OperationMode5\")                                // check the action\n        {\n            msg5.payload = 5;\n\n            if (global.get('Force_DHW_active', \"file\") === 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\");\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n        if (action === \"OperationMode6\")                                // check the action\n        {\n            msg5.payload = 6;\n\n            if (global.get('Force_DHW_active', \"file\") === 1) { \n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\"); \n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Force DHW active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99]\n            }\n            if (F_SOLAR.function_active_state === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', msg5.payload, \"file\");\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Solar function active. Not changing operating mode now, but setting next operating mode to ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, null, null, msg99];\n            }\n            if (F_RTC_automation_active === 1 && F_stored_next_operating_mode !== undefined) {\n                global.set('F_stored_next_operating_mode', undefined, \"file\");\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'RTC automation active. Stored next operating mode is removed';\n                if (override === 1) { global.set('F_RTC.automation_active', 0, \"file\"); }\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n            if (F_stored_next_operating_mode === undefined) {\n                msg5.topic = \"Scheduler - Set Operation Mode to: \" + msg5.payload;\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Change operating mode(' + msg5.payload + ')';\n                node.send([null, null, null, null, null, null, null, null, msg99])\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Stored next operating mode empty. Setting new operating mode to: ' + msg5.payload;\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, msg5, null, null, null, msg99];\n            }\n        }\n\n        ////////////////////////////////////////////////////////////////\n        //\n        ////////////////////////////////////////////////////////////////\n        if (action === \"NightReductionWaterTempOn\")                              // check the action\n        {\n            var correction = global.get(\"NightReductionWaterTemp.correction\", \"file\");           // get the nightreduction correction.\n            global.set(\"NightReductionWaterTemp.current_value\", correction, \"file\");\n            global.set(\"NightReductionWaterTemp.state\", 1, \"file\");\n            msg6 = { payload: correction, topic: \"Nightreduction\" };\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Enable NightReduction Water Temperature';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, null, null, null, msg6, null, null, msg99];\n        }\n        if (action === \"NightReductionWaterTempOff\")                             // check the action\n        {\n            global.set(\"NightReductionWaterTemp.current_value\", 0, \"file\");\n            global.set(\"NightReductionWaterTemp.state\", 0, \"file\");\n            msg6 = { payload: 0, topic: \"Nightreduction\" };\n            msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Disable NightReduction Water Temperature';\n            global.set(topic + '_last_run', CurrentTime, \"file\");\n            return [null, null, null, null, null, msg6, null, null, msg99];\n        }\n\n        ////////////////////////////////////////////////////////////////\n        if (action === \"NightReductionRoomSetpointOn\")                 // check the action\n        {\n            if (NightReductionRoomSetpoint_state === undefined || NightReductionRoomSetpoint_state == 0)          //only execute when not set\n            {\n                global.set(\"NightReductionRoomSetpoint.state\", 1, \"file\");\n                msg7 = { payload: 1, topic: \"NightReductionRoomSetpoint.state\" };\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Enable NightReduction Room Setpoint';\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, msg7, null, msg99];\n            }\n        }\n        if (action === \"NightReductionRoomSetpointOff\")                 // check the action\n        {\n            if (NightReductionRoomSetpoint_state === undefined) { NightReductionRoomSetpoint_state = 0; }\n            if (NightReductionRoomSetpoint_state == 1) //only execute change when set\n            {\n                global.set(\"NightReductionRoomSetpoint.state\", 0, \"file\");\n                msg7 = { payload: 0, topic: \"NightReductionRoomSetpoint.state\" };\n                msg99.topic = 'Scheduler (#' + scheduleNumber + ')'; msg99.payload = 'Disable NightReduction Room Setpoint';\n                global.set(topic + '_last_run', CurrentTime, \"file\");\n                return [null, null, null, null, null, null, msg7, null, msg99];\n            }\n        }\n        ////////////////////////////////////////////////////////////////\n        //\n        //\n        //\n        //\n        if (action === \"Water setpoint (heat shift)\")                 // check the action\n        {\n            msg8.payload = global.get(msg.topic + '_setpoint', \"file\");\n            msg8.target = global.get(msg.topic + '_target', \"file\");\n            msg8.topic = action;\n            node.send([null, null, null, null, null, null, null, msg8]);\n        }\n        if (action === \"Water setpoint (direct)\")                 // check the action\n        {\n            msg8.payload = global.get(msg.topic + '_setpoint', \"file\");\n            msg8.target = global.get(msg.topic + '_target', \"file\");\n            msg8.topic = action;\n            node.send([null, null, null, null, null, null, null, msg8]);\n        }\n        if (action === \"Room setpoint RTC\")                 // check the action\n        {\n            msg8.payload = global.get(msg.topic + '_setpoint', \"file\");\n            msg8.topic = action;\n            node.send([null, null, null, null, null, null, null, msg8]);\n        }\n        if (action === \"DHW setpoint\")                 // check the action\n        {\n            msg8.payload = global.get(msg.topic + '_setpoint', \"file\");\n            msg8.topic = action;\n            node.send([null, null, null, null, null, null, null, msg8]);\n        }\n        if (action === \"toggle item\")                 // check the action\n        {\n            msg8.topic = action;\n            msg8.payload = global.get(msg.topic + '_toggle_item', \"file\");\n            node.send([null, null, null, null, null, null, null, msg8]);\n        }\n\n        global.set(topic + '_last_run', CurrentTime, \"file\");\n\n    }\n    else {\n        return null;\n    }\n\n\n}",
        "outputs": 9,
        "timeout": "",
        "noerr": 0,
        "initialize": "\n",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 2560,
        "wires": [
            [
                "dc5991432f2fa36b"
            ],
            [
                "880faf9e562e2cf3"
            ],
            [
                "b26465510d1a2c16"
            ],
            [
                "e2654cbcd4e962c6"
            ],
            [
                "2559d6cd0bf05751"
            ],
            [
                "6f97b5d7ea5da767"
            ],
            [
                "8a9735b101f0cf03"
            ],
            [
                "dd36095ad4abca5a"
            ],
            [
                "acea208050889a80"
            ]
        ],
        "outputLabels": [
            "override / power on/off",
            "Force DHW",
            "Force Sterilization",
            "Quiet Mode",
            "Operation Mode",
            "NightReduction Water",
            "NightReduction Room",
            "ActionSetpoint",
            "to log"
        ]
    },
    {
        "id": "b91f0b27e28d647b",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "NightReduction Scheduler",
        "mode": "link",
        "links": [
            "44d83d4e58d63689"
        ],
        "x": 2025,
        "y": 2680,
        "wires": []
    },
    {
        "id": "4cbcfd45e4da8347",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "Exit to power on/off (override)",
        "info": "",
        "x": 2180,
        "y": 2480,
        "wires": []
    },
    {
        "id": "b9c4d8c5804b1549",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "Exit to Nightreduction (Direct)",
        "info": "",
        "x": 2180,
        "y": 2680,
        "wires": []
    },
    {
        "id": "b14565589916f129",
        "type": "comment",
        "z": "35d210f042827344",
        "name": ">>>>>>>>>>>>>>>>>>>>>>",
        "info": "",
        "x": 2200,
        "y": 2400,
        "wires": []
    },
    {
        "id": "9bc7c5fbeb1d1f6d",
        "type": "comment",
        "z": "35d210f042827344",
        "name": ">>>>>>>>>>>>>>>>>>>>>>",
        "info": "",
        "x": 2180,
        "y": 2520,
        "wires": []
    },
    {
        "id": "1bfb33b6618cd222",
        "type": "change",
        "z": "35d210f042827344",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Scheduler - Power",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2440,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "f0045be5a90c957f",
        "type": "change",
        "z": "35d210f042827344",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Scheduler - Set QuietMode",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2600,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "a040c5a397316aa6",
        "type": "change",
        "z": "35d210f042827344",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Scheduler - NightReduction water temp",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2680,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "9815e18a26e4cd85",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 4065,
        "y": 2540,
        "wires": []
    },
    {
        "id": "84e59fd6bd8697ab",
        "type": "change",
        "z": "35d210f042827344",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Scheduler - Force DHW",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2520,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "c39da0815cb8bf48",
        "type": "change",
        "z": "35d210f042827344",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Scheduler - Force Sterilization",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2560,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "d9b9cfbe76f8a7aa",
        "type": "change",
        "z": "35d210f042827344",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Scheduler - Operation Mode",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2480,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "dc5991432f2fa36b",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / block",
        "func": "var MQTT = global.get('MQTT',\"file\");\n\n// only pass the message when:\n// payload is not 99\n// MQTT is not activated >>>>  OR MQTT is activated AND blockmode = 2 AND scheduler is allowed\n\nif (msg.payload != 99 && (MQTT.block_active == 0 || (MQTT.block_active == 1 && MQTT.block_mode == 2 && MQTT.allow_scheduler == 1)))   {\n    return msg;\n}\nelse { return null }",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 2480,
        "wires": [
            [
                "f217f942f56cbfa9",
                "1bfb33b6618cd222"
            ]
        ]
    },
    {
        "id": "880faf9e562e2cf3",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / block",
        "func": "var MQTT = global.get('MQTT',\"file\");\n\n// only pass the message when:\n// payload is not 99\n// MQTT is not activated >>>>  OR MQTT is activated AND blockmode = 2 AND scheduler is allowed\n\nif (msg.payload != 99 && (MQTT.block_active == 0 || (MQTT.block_active == 1 && MQTT.block_mode == 2 && MQTT.allow_scheduler == 1)))   {\n    return msg;\n}\nelse { return null }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 2520,
        "wires": [
            [
                "6e6b758f54cd9b22"
            ]
        ]
    },
    {
        "id": "b26465510d1a2c16",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / block",
        "func": "var MQTT = global.get('MQTT',\"file\");\n\n// only pass the message when:\n// payload is not 99\n// MQTT is not activated >>>>  OR MQTT is activated AND blockmode = 2 AND scheduler is allowed\n\nif (msg.payload != 99 && (MQTT.block_active == 0 || (MQTT.block_active == 1 && MQTT.block_mode == 2 && MQTT.allow_scheduler == 1)))   {\n    return msg;\n}\nelse { return null }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 2560,
        "wires": [
            [
                "1a571f9216756e5e"
            ]
        ]
    },
    {
        "id": "e2654cbcd4e962c6",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / block",
        "func": "var MQTT = global.get('MQTT',\"file\");\n\n// only pass the message when:\n// payload is not 99\n// MQTT is not activated >>>>  OR MQTT is activated AND blockmode = 2 AND scheduler is allowed\n\nif (msg.payload != 99 && (MQTT.block_active == 0 || (MQTT.block_active == 1 && MQTT.block_mode == 2 && MQTT.allow_scheduler == 1)))   {\n    msg.source = \"scheduler\";\n    if (global.get('MQTT_Source') === undefined) { global.set('MQTT_Source', \"Scheduler\"); }\n    return msg;\n}\nelse { return null }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 2600,
        "wires": [
            [
                "9a097e6d95e1ca6e"
            ]
        ]
    },
    {
        "id": "2559d6cd0bf05751",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / block",
        "func": "var MQTT = global.get('MQTT',\"file\");\n\n// only pass the message when:\n// payload is not 99\n// MQTT is not activated >>>>  OR MQTT is activated AND blockmode = 2 AND scheduler is allowed\n\nif ( msg.payload != 99 && (MQTT.block_active == 0 || (MQTT.block_active == 1 && MQTT.block_mode == 2 && MQTT.allow_scheduler == 1) ) )   {\n    global.set('MQTT_Source', \"scheduler\");\n    return msg;\n}\nelse { return null }",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 2640,
        "wires": [
            [
                "12c1fd3169e6c639"
            ]
        ]
    },
    {
        "id": "6f97b5d7ea5da767",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / block",
        "func": "var MQTT = global.get('MQTT',\"file\");\n\n// only pass the message when:\n// payload is not 99\n// MQTT is not activated >>>>  OR MQTT is activated AND blockmode = 2 AND scheduler is allowed\n\nif (msg.payload != 99 && (MQTT.block_active == 0 || (MQTT.block_active == 1 && MQTT.block_mode == 2 && MQTT.allow_scheduler == 1)))   {\n    return msg;\n}\nelse { return null }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 2680,
        "wires": [
            [
                "c616ab1245360ad1"
            ]
        ]
    },
    {
        "id": "b9e99ae19c354ecc",
        "type": "comment",
        "z": "35d210f042827344",
        "name": "To LOGS",
        "info": "",
        "x": 4120,
        "y": 2500,
        "wires": []
    },
    {
        "id": "af36a209861f34c9",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Dashboard",
        "info": "",
        "x": 580,
        "y": 3120,
        "wires": []
    },
    {
        "id": "4ca97fe11f8196e4",
        "type": "function",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Check Nightreduction room status",
        "func": "let msg99={};   // pin 1 - ToLog\nlet msg2={};    // pin 2 - SP Room\n\nmsg99.topic = msg.topic;\n\nvar NightReductionRoomSetpoint = global.get('NightReductionRoomSetpoint',\"file\");\n    var SetpointLOW     = NightReductionRoomSetpoint.LOW;\n    var SetpointNORMAL  = NightReductionRoomSetpoint.NORMAL;\n    var NightReductionRoomSetpoint_state = NightReductionRoomSetpoint.state;\n\nif (NightReductionRoomSetpoint_state === undefined) \n    {\n        global.set(\"NightReductionRoomSetpoint.state\",0,\"file\");\n        NightReductionRoomSetpoint_state = 0;\n        return null;\n    }\n\nvar RoomSP;\n\nif (NightReductionRoomSetpoint_state == 1) \n    {\n        //retrieve value from dashboard\n        RoomSP = SetpointLOW;\n        global.set(\"F_RTC.z1.setpoint\", RoomSP, \"file\");\n        msg99.payload = \"ON, Room setpoint: \" + RoomSP + \" °C\";\n        msg2.payload = RoomSP;\n        msg2.currentstatus = 'Active';\n        \n        return [msg99, msg2]; //Pin 1 to log. Pin2 to write Room SP\n    }\n\nif (NightReductionRoomSetpoint_state == 0) \n    {\n        //retrieve value from dashboard\n        RoomSP = SetpointNORMAL;\n        global.set(\"F_RTC.z1.setpoint\", RoomSP, \"file\");\n        msg99.payload = \"OFF, Room setpoint: \" + RoomSP + \" °C\";\n        msg2.payload = RoomSP;\n        msg2.currentstatus = 'Inactive';\n        \n        return [msg99, msg2]; //Pin 1 to log. Pin2 to write Room SP\n    }\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2500,
        "y": 2720,
        "wires": [
            [
                "a0090b3fd8c64e10",
                "68f4601da2aa107a"
            ],
            [
                "ebc9b8c270d7c636"
            ]
        ],
        "outputLabels": [
            "ToLog",
            "RoomSP"
        ]
    },
    {
        "id": "7a27b2c8c4721ed9",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "link out 15",
        "mode": "link",
        "links": [
            "9a106cdefc873348",
            "ddf3715aaea9672b"
        ],
        "x": 3415,
        "y": 2760,
        "wires": []
    },
    {
        "id": "55ed50ca78ad2e8e",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "link out 16",
        "mode": "link",
        "links": [],
        "x": 3415,
        "y": 2800,
        "wires": []
    },
    {
        "id": "9b6adfc4b5fe33d9",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit SP to HA climate (optional)",
        "info": "",
        "x": 3650,
        "y": 2800,
        "wires": []
    },
    {
        "id": "3e6fc746e7597b72",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit SP to Dash",
        "info": "",
        "x": 3600,
        "y": 2760,
        "wires": []
    },
    {
        "id": "572ff3b3b8a1d185",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit to write RoomSP",
        "info": "",
        "x": 3620,
        "y": 2720,
        "wires": []
    },
    {
        "id": "977bf5eb11dcbcae",
        "type": "ui_numeric",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Nightreduction room setpoint low",
        "label": "Setpoint low",
        "tooltip": "",
        "group": "9aec7afe54746c39",
        "order": 5,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}} °C",
        "min": 0,
        "max": "30",
        "step": "0.1",
        "className": "",
        "x": 660,
        "y": 3200,
        "wires": [
            [
                "20267081e902cf8f"
            ]
        ]
    },
    {
        "id": "4be14d43ed11df9e",
        "type": "ui_numeric",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Nightreduction room setpoint normal",
        "label": "Setpoint normal",
        "tooltip": "",
        "group": "9aec7afe54746c39",
        "order": 6,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}} °C",
        "min": 0,
        "max": "30",
        "step": "0.1",
        "className": "",
        "x": 670,
        "y": 3260,
        "wires": [
            [
                "50a7d35eec5ebb92"
            ]
        ]
    },
    {
        "id": "66751dfee126dd36",
        "type": "ui_template",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "group": "9aec7afe54746c39",
        "name": "Line - Setup ",
        "order": 7,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 590,
        "y": 3160,
        "wires": [
            []
        ]
    },
    {
        "id": "ac07aae6820d664d",
        "type": "function",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "set NightReductionRoomSetpoint.LOW",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(\"NightReductionRoomSetpoint.LOW\",msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "20267081e902cf8f",
        "type": "rbe",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 910,
        "y": 3200,
        "wires": [
            [
                "ac07aae6820d664d"
            ]
        ]
    },
    {
        "id": "0e56417c81c6b1be",
        "type": "function",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "set NightReductionRoomSetpoint.NORMAL",
        "func": "msg.payload = Number(msg.payload).toFixed(1);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(\"NightReductionRoomSetpoint.NORMAL\",msg.payload,\"file\");\n\n//koppeling naar RTC room setpoint (F_RTC.z1.setpoint) alleen indien handmatig aangepast:\n//check of Night reduction room setpoint is niet actief:\n\nif ( global.get(\"NightReductionRoomSetpoint.state\", \"file\") == 0 ) {\n    let msg1 ={};                   //pin1 ---> link-out to F_RTC.z1.setpoint on dashboard RTC\n    msg1.payload = msg.payload;     //NightReductionRoomSetpoint.NORMAL \n    if (global.get('F_RTC.z1.setpoint', \"file\") == msg.payload ) { return null;} //only send when different\n    \n    global.set(\"F_RTC.z1.setpoint\", msg.payload, \"file\");\n    return msg1;\n}\n\nreturn null; //default send nothing\n\n\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 3260,
        "wires": [
            [
                "1911fbfbf89866a8"
            ]
        ]
    },
    {
        "id": "50a7d35eec5ebb92",
        "type": "rbe",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 910,
        "y": 3260,
        "wires": [
            [
                "0e56417c81c6b1be"
            ]
        ]
    },
    {
        "id": "620d3faff0a26d37",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Default values (first start)",
        "info": "",
        "x": 230,
        "y": 3180,
        "wires": []
    },
    {
        "id": "b98e3d3337c01053",
        "type": "inject",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Startup",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1800",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "trigger",
        "x": 180,
        "y": 3220,
        "wires": [
            [
                "827d25a8ccb91857"
            ]
        ]
    },
    {
        "id": "827d25a8ccb91857",
        "type": "function",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Load on boot",
        "func": "var NightReductionRoomSetpoint = global.get('NightReductionRoomSetpoint',\"file\");\n\nif (NightReductionRoomSetpoint === undefined){\n    global.set('NightReductionRoomSetpoint',{},\"file\")\n    return [null,null,null,msg];\n}\n\n    var SetpointLOW     = NightReductionRoomSetpoint.LOW;\n    var SetpointNORMAL  = NightReductionRoomSetpoint.NORMAL;\n    var NightReductionRoomSetpoint_state = NightReductionRoomSetpoint.state;\n\n    \nif (SetpointLOW === undefined)  {\n    SetpointLOW = 18;\n    global.set('NightReductionRoomSetpoint.LOW',18,\"file\");\n}\n    \n\nif (SetpointNORMAL === undefined) {\n    SetpointNORMAL = global.get('F_RTC.z1.setpoint',\"file\");\n    if  (SetpointNORMAL !== undefined)   {\n        global.set('NightReductionRoomSetpoint.NORMAL',SetpointNORMAL,\"file\");\n    }\n    else {return null;}     // prevent setting a default room SP due to timing issue. This is done elsewhere. Just exit and wait for it to populate with next passes.\n}\n\n\nif (NightReductionRoomSetpoint_state === undefined)   {\n    global.set('NightReductionRoomSetpoint.state',0,\"file\");\n    NightReductionRoomSetpoint_state = 0;\n}\n\n\nlet msg1 = {};    //  NightReductionRoomSetpoint.LOW\nlet msg2 = {};    //  NightReductionRoomSetpoint.NORMAL\nlet msg3 = {};  //  NightReductionRoomSetpoint_state.state\n\nmsg1.payload = SetpointLOW;\nmsg2.payload = SetpointNORMAL;\nmsg3.payload = NightReductionRoomSetpoint_state;\n\nreturn [msg1, msg2, msg3];",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 3220,
        "wires": [
            [
                "977bf5eb11dcbcae"
            ],
            [
                "4be14d43ed11df9e"
            ],
            [
                "0a2fca7dbded32e0"
            ],
            [
                "9c13f29571c31128"
            ]
        ],
        "outputLabels": [
            "SetpointLOW",
            "SetpointNORMAL",
            "NightReductionRoomSetpoint_state",
            "trigger re-evalutation"
        ]
    },
    {
        "id": "8a9735b101f0cf03",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Filter / no block",
        "func": "if (msg.payload != 99) {\n    msg.topic = \"Scheduler - Nightreduction room setpoint\";\n    return msg;\n}\n\nelse { return null }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1580,
        "y": 2720,
        "wires": [
            [
                "1c3a1716ed8db17d"
            ]
        ]
    },
    {
        "id": "5d320e94981761fc",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_10",
        "group": "2b0c8e162d47abbb",
        "order": 117,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_10",
        "topicType": "str",
        "x": 3440,
        "y": 1620,
        "wires": [
            [
                "bde3ed8785911ece",
                "01af4e578895cb64",
                "8b943ed66c6894fd"
            ]
        ]
    },
    {
        "id": "c4fb7de363d6e1c1",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_2",
        "group": "2b0c8e162d47abbb",
        "order": 37,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_2",
        "topicType": "str",
        "x": 3430,
        "y": 340,
        "wires": [
            [
                "8b943ed66c6894fd",
                "b29a79a606f67a94",
                "48bedc6898a86520"
            ]
        ]
    },
    {
        "id": "b0ab37d0a28d90d4",
        "type": "function",
        "z": "35d210f042827344",
        "name": "DELETE",
        "func": "if (msg.payload == \"delete\")\n    {\n        \n        \n        global.set(msg.topic + '_Description',undefined,\"file\");\n        global.set(msg.topic + '_day',undefined,\"file\");\n        global.set(msg.topic + '_hour',undefined,\"file\");\n        global.set(msg.topic + '_minutes',undefined,\"file\");\n        global.set(msg.topic + '_action',undefined,\"file\");\n        global.set(msg.topic + '_setpoint',undefined,\"file\");\n        global.set(msg.topic + '_override',undefined,\"file\");\n        global.set(msg.topic + '_state',0,\"file\");\n        global.set(msg.topic + '_condition',undefined,\"file\");\n        global.set(msg.topic + '_last_run',undefined,\"file\");\n        global.set(msg.topic + '_toggle_item', undefined, \"file\");\n        global.set(msg.topic + '_target', undefined, \"file\");\n\n\n    }\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3800,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "d6a7b4c88198805c",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_9",
        "group": "2b0c8e162d47abbb",
        "order": 107,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_9",
        "topicType": "str",
        "x": 3430,
        "y": 1460,
        "wires": [
            [
                "8b943ed66c6894fd",
                "e1900f0662ab8e89",
                "a2c614ccf1136bda"
            ]
        ]
    },
    {
        "id": "57e0c404bf54aba7",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_8",
        "group": "2b0c8e162d47abbb",
        "order": 97,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_8",
        "topicType": "str",
        "x": 3430,
        "y": 1300,
        "wires": [
            [
                "8b943ed66c6894fd",
                "82ec28563a45c0e1",
                "9493e487ba4b2168"
            ]
        ]
    },
    {
        "id": "c9e8507eeb72dae8",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_7",
        "group": "2b0c8e162d47abbb",
        "order": 87,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_7",
        "topicType": "str",
        "x": 3430,
        "y": 1140,
        "wires": [
            [
                "8b943ed66c6894fd",
                "54d2af3d1cbb0671",
                "7523f8903fb6cc1e"
            ]
        ]
    },
    {
        "id": "80971077c673d3a2",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_6",
        "group": "2b0c8e162d47abbb",
        "order": 77,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_6",
        "topicType": "str",
        "x": 3430,
        "y": 980,
        "wires": [
            [
                "8b943ed66c6894fd",
                "7ffe81943fa43415",
                "32e5d373c9dcf449"
            ]
        ]
    },
    {
        "id": "20053902cbf5c49a",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_5",
        "group": "2b0c8e162d47abbb",
        "order": 67,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_5",
        "topicType": "str",
        "x": 3430,
        "y": 820,
        "wires": [
            [
                "8b943ed66c6894fd",
                "c853ac3eb3f2d486",
                "0a51c4981f55f9f6"
            ]
        ]
    },
    {
        "id": "e87eaf09d103f9b1",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_4",
        "group": "2b0c8e162d47abbb",
        "order": 57,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_4",
        "topicType": "str",
        "x": 3430,
        "y": 660,
        "wires": [
            [
                "8b943ed66c6894fd",
                "48d83a6051b743c8",
                "7cb711e83a201701"
            ]
        ]
    },
    {
        "id": "7d9060288d6516b7",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_3",
        "group": "2b0c8e162d47abbb",
        "order": 47,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_3",
        "topicType": "str",
        "x": 3430,
        "y": 500,
        "wires": [
            [
                "8b943ed66c6894fd",
                "1f99be99de5ea946",
                "963350a5070e3897"
            ]
        ]
    },
    {
        "id": "684d1bcc0a898b4b",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "Delete Schedule_1",
        "group": "2b0c8e162d47abbb",
        "order": 27,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "delete",
        "payloadType": "str",
        "topic": "Schedule_1",
        "topicType": "str",
        "x": 3430,
        "y": 180,
        "wires": [
            [
                "8b943ed66c6894fd",
                "dad7d9da1cf67158",
                "5bec724ed77d6245"
            ]
        ]
    },
    {
        "id": "bde3ed8785911ece",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1620,
        "wires": [
            [
                "219fcc0259998439",
                "1759cf2fcc472812",
                "e20f0e179a77b100",
                "88872f26b2ce5e9b",
                "99bf0b7454b3b5c0"
            ]
        ]
    },
    {
        "id": "01af4e578895cb64",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1620,
        "wires": [
            [
                "bc8c769ccc26fa5d",
                "a477e5b86fe9c792",
                "8e3cfd35030617d7"
            ]
        ]
    },
    {
        "id": "8b943ed66c6894fd",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3650,
        "y": 1740,
        "wires": [
            [
                "b0ab37d0a28d90d4"
            ]
        ]
    },
    {
        "id": "e1900f0662ab8e89",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1460,
        "wires": [
            [
                "611bf69e3ab85546",
                "5a75949723c259df"
            ]
        ]
    },
    {
        "id": "a2c614ccf1136bda",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1460,
        "wires": [
            [
                "11958cca6fba73cb",
                "663c8cf477dc16cb",
                "5b138a18f47114e3",
                "37d57c847d1b5ff8",
                "d77c206846bfe16d",
                "a147fe89247aa73b"
            ]
        ]
    },
    {
        "id": "82ec28563a45c0e1",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1300,
        "wires": [
            [
                "fe24caf7cb4e92d3",
                "62e00829c19bec7c"
            ]
        ]
    },
    {
        "id": "9493e487ba4b2168",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1300,
        "wires": [
            [
                "f511b9d4cedb0977",
                "0b60ef37733490bf",
                "f93699165fe750ce",
                "b1956b6593a4a597",
                "32e23a19047b877e",
                "c8f137bcff651fba"
            ]
        ]
    },
    {
        "id": "54d2af3d1cbb0671",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1140,
        "wires": [
            [
                "0a155882d5693fda",
                "87241aa5e6a2ccf7"
            ]
        ]
    },
    {
        "id": "7523f8903fb6cc1e",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 1140,
        "wires": [
            [
                "436b41690b969348",
                "9fc9947dc30386f3",
                "f95cadbe3c3cd2f4",
                "fcf03506100353c9",
                "0a54cb095adcb787",
                "f314a9b676182c11"
            ]
        ]
    },
    {
        "id": "7ffe81943fa43415",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 980,
        "wires": [
            [
                "4470d0d9384e5146",
                "67c2c134c50ed462"
            ]
        ]
    },
    {
        "id": "32e5d373c9dcf449",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 980,
        "wires": [
            [
                "e72e318e1a456090",
                "51e9aad82e544c85",
                "3103abf9a680a9ea",
                "a1866018a9f27226",
                "1e30fa210ee856be",
                "773eba4d817b8b93"
            ]
        ]
    },
    {
        "id": "c853ac3eb3f2d486",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 820,
        "wires": [
            [
                "fd75ca33fe4a9589",
                "5bd339d22882aa07"
            ]
        ]
    },
    {
        "id": "0a51c4981f55f9f6",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 820,
        "wires": [
            [
                "9de114ee921577b7",
                "cdd91f4f0777b0fc",
                "53c6208ebe18f176",
                "a5c85f0332e4746d",
                "c649a3a840183e86",
                "82d6f38bd9764a93"
            ]
        ]
    },
    {
        "id": "48d83a6051b743c8",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 660,
        "wires": [
            [
                "73e5b776ee37e929",
                "b01c2ff9f7469f79"
            ]
        ]
    },
    {
        "id": "7cb711e83a201701",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 660,
        "wires": [
            [
                "9f04561329aa26f4",
                "612ac224e061cc79",
                "5f74425ca9610401",
                "0710a190d551707c",
                "2a7fb72a1781fe14",
                "e90e53734d73b6da"
            ]
        ]
    },
    {
        "id": "1f99be99de5ea946",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 500,
        "wires": [
            [
                "57520972cf8f3282",
                "1a27db997a27a1dd"
            ]
        ]
    },
    {
        "id": "963350a5070e3897",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 500,
        "wires": [
            [
                "8a47deae609a4257",
                "d73541639351e613",
                "7a42e5778bf41519",
                "871d8f6de9ad1a98",
                "d15b2d0e98e01f65",
                "b24f970c2d6262f9"
            ]
        ]
    },
    {
        "id": "b29a79a606f67a94",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 340,
        "wires": [
            [
                "479965c26a5f5d15",
                "ce3b0c94ff7a8500"
            ]
        ]
    },
    {
        "id": "48bedc6898a86520",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 340,
        "wires": [
            [
                "bbc0fc2f4315d9a0",
                "e411cdb2b3617a7e",
                "d8e5ca53b22c577d",
                "0fcdf0e74a334edb",
                "bc2393868b4f66ed",
                "c904ad7bb0b016d8"
            ]
        ]
    },
    {
        "id": "dad7d9da1cf67158",
        "type": "change",
        "z": "35d210f042827344",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 180,
        "wires": [
            [
                "1372ccca982b4f0a",
                "e3d4b9d611e649e0"
            ]
        ]
    },
    {
        "id": "5bec724ed77d6245",
        "type": "change",
        "z": "35d210f042827344",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3630,
        "y": 180,
        "wires": [
            [
                "57dddda65db516a2",
                "40f0401e20235a07",
                "243fa1e4e8cef5d0",
                "8fbe0ef4995f8e6a",
                "98499b42fe5f6688",
                "f6acd15f36324736"
            ]
        ]
    },
    {
        "id": "6261eb2d28619996",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 16,
        "width": 1,
        "height": 1,
        "name": "SPACER scheduler 1x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 3450,
        "y": 140,
        "wires": []
    },
    {
        "id": "3a71aada556a2950",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "Nightreduction Room setpoint_____________________________________ (some GUI changes are made on tab WP Help / Scheduler HELP)",
        "info": "",
        "x": 570,
        "y": 3080,
        "wires": []
    },
    {
        "id": "a0090b3fd8c64e10",
        "type": "change",
        "z": "35d210f042827344",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3870,
        "y": 2720,
        "wires": [
            [
                "9815e18a26e4cd85"
            ]
        ]
    },
    {
        "id": "257acc4dad15edc0",
        "type": "comment",
        "z": "35d210f042827344",
        "name": ">>>>>>>>>>>>>>>>>>>>>>",
        "info": "",
        "x": 2180,
        "y": 2720,
        "wires": []
    },
    {
        "id": "0a2fca7dbded32e0",
        "type": "ui_switch",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "",
        "label": "Current status",
        "tooltip": "",
        "group": "9aec7afe54746c39",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 600,
        "y": 3320,
        "wires": [
            [
                "05344a8f5a84a598"
            ]
        ]
    },
    {
        "id": "ddf3715aaea9672b",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "link in 18",
        "links": [
            "7a27b2c8c4721ed9"
        ],
        "x": 185,
        "y": 3320,
        "wires": [
            [
                "6e79eaf44bdd252f"
            ]
        ]
    },
    {
        "id": "68f4601da2aa107a",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "link out 30",
        "mode": "link",
        "links": [],
        "x": 3415,
        "y": 2720,
        "wires": []
    },
    {
        "id": "6e79eaf44bdd252f",
        "type": "function",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "currentstatus",
        "func": "let msg1 = {};\n//node.warn(msg.currentstatus);\nif (msg.currentstatus === \"Active\") {\n    msg1.payload = 1;\n    return msg1;\n}\n\nif (msg.currentstatus === \"Inactive\") {\n    msg1.payload = 0;\n    return msg1;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 3320,
        "wires": [
            [
                "0a2fca7dbded32e0"
            ]
        ]
    },
    {
        "id": "05344a8f5a84a598",
        "type": "rbe",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 910,
        "y": 3320,
        "wires": [
            [
                "ce6d6e5627ec1fa2"
            ]
        ]
    },
    {
        "id": "ce6d6e5627ec1fa2",
        "type": "function",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "set NightReductionRoomSetpoint.state",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\n\n//firts check if it's neccesary to set, to avoid log message:\nif (global.get(\"NightReductionRoomSetpoint.state\", \"file\") == msg.payload) { return null;} //disable message to log at start / 30 min\n\nglobal.set(\"NightReductionRoomSetpoint.state\", msg.payload, \"file\");\n\nmsg.topic = \"Function - Nightreduction room setpoint\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 3320,
        "wires": [
            [
                "4ca97fe11f8196e4"
            ]
        ]
    },
    {
        "id": "1911fbfbf89866a8",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "link out 31",
        "mode": "link",
        "links": [
            "9a106cdefc873348"
        ],
        "x": 1425,
        "y": 3260,
        "wires": []
    },
    {
        "id": "55a0fb67fbe206cf",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "link-in Night reduction room setpoint NORMAL",
        "links": [
            "28ade256a9b75487"
        ],
        "x": 415,
        "y": 3280,
        "wires": [
            [
                "4be14d43ed11df9e"
            ]
        ]
    },
    {
        "id": "9c13f29571c31128",
        "type": "delay",
        "z": "35d210f042827344",
        "g": "92293ba8ccc5db0f",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 3260,
        "wires": [
            [
                "827d25a8ccb91857"
            ]
        ]
    },
    {
        "id": "149593cb5a59bfc2",
        "type": "ui_ui_control",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "",
        "events": "all",
        "x": 3220,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "7c42986702362e7e",
        "type": "change",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Scheduler_Notification\"],\"hide\":[\"Scheduler_Scheduler\",\"Scheduler_Scheduler_related_settings\",\"Scheduler_Help\",\"Scheduler_function_actions\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2960,
        "y": 1860,
        "wires": [
            [
                "149593cb5a59bfc2"
            ]
        ]
    },
    {
        "id": "d76b2de1985f09bb",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 3,
        "width": 5,
        "height": 1,
        "name": "",
        "label": "{{msg.text1}}",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2690,
        "y": 2020,
        "wires": []
    },
    {
        "id": "b6f2cfb3efd983c4",
        "type": "ui_numeric",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "Temperature",
        "label": "",
        "tooltip": "",
        "group": "90c1cff3f272d850",
        "order": 4,
        "width": 3,
        "height": 1,
        "wrap": false,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}}°C",
        "min": 0,
        "max": "30",
        "step": "0.1",
        "className": "",
        "x": 2890,
        "y": 2020,
        "wires": [
            [
                "d4915ffc7bf0e94e"
            ]
        ]
    },
    {
        "id": "a14f9aee7a90cce0",
        "type": "ui_button",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "",
        "group": "90c1cff3f272d850",
        "order": 9,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "SET",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Scheduler_Notification\",\"Scheduler_Help\",\"Scheduler_function_actions\"],\"show\":[\"Scheduler_Scheduler\",\"Scheduler_Scheduler_related_settings\"]}}",
        "payloadType": "json",
        "topic": "set",
        "topicType": "str",
        "x": 2810,
        "y": 2080,
        "wires": [
            [
                "149593cb5a59bfc2",
                "e9afc0729467ae1d"
            ]
        ]
    },
    {
        "id": "b33abbe2fee043fb",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 8,
        "width": 8,
        "height": 1,
        "name": "empty",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 2910,
        "y": 1980,
        "wires": []
    },
    {
        "id": "d0bd2ba9d6d4fa4f",
        "type": "ui_template",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "name": "Line - Change Heat setpoint",
        "order": 1,
        "width": 10,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left><b></b></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2760,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "2fee17012ab3bcf3",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 5,
        "width": 1,
        "height": 4,
        "name": "1x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 3230,
        "y": 2080,
        "wires": []
    },
    {
        "id": "13f54518d82c8796",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 2,
        "width": 1,
        "height": 4,
        "name": "1x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2690,
        "y": 2080,
        "wires": []
    },
    {
        "id": "6a6e0e79315f1423",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 12,
        "width": 10,
        "height": 1,
        "name": "1x7",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2950,
        "y": 2120,
        "wires": []
    },
    {
        "id": "1e2795a950379445",
        "type": "ui_button",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "",
        "group": "90c1cff3f272d850",
        "order": 11,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Cancel",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"group\":{\"hide\":[\"Scheduler_Notification\",\"Scheduler_Help\",\"Scheduler_function_actions\"],\"show\":[\"Scheduler_Scheduler\",\"Scheduler_Scheduler_related_settings\"]}}",
        "payloadType": "json",
        "topic": "cancel",
        "topicType": "str",
        "x": 3080,
        "y": 2080,
        "wires": [
            [
                "149593cb5a59bfc2",
                "e9afc0729467ae1d"
            ]
        ]
    },
    {
        "id": "1c76ec837c811a63",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 10,
        "width": 4,
        "height": 1,
        "name": "1x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2690,
        "y": 1980,
        "wires": []
    },
    {
        "id": "e9afc0729467ae1d",
        "type": "function",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "store setpoint",
        "func": "if (msg.topic == \"set\"){\n    var top = context.get('temp_topic');\n    var pay = context.get('temp_payload');\n        global.set(top,pay,\"file\");\n    \n    var zone = context.get('temp_zone');\n    var top2 = context.get('temp_topic2');\n    \n    if (zone !== undefined) {\n        global.set(top2, zone, \"file\");\n    }\n    \n    return msg;\n}\n\nif (msg.topic == \"cancel\"){\n    context.set('temp_topic',undefined);\n    context.set('temp_topic2', undefined);\n    context.set('temp_payload',undefined);\n    context.set('temp_zone', undefined);\n    return null;\n}\n\nif (msg.range == \"ranges\") {\n    msg.topic = msg.topic.replace(\"action\", \"setpoint\");\n    context.set('temp_topic',msg.topic);\n    context.set('temp_payload',msg.payload);\n    return null;\n}\n\nif (msg.source === \"temperature\")  {\n    msg.topic = msg.topic.replace(\"action\", \"setpoint\");\n    context.set('temp_topic',msg.topic);\n    context.set('temp_payload',msg.payload);\n    return null;\n}\n\nif (msg.source === \"zone\") {\n    msg.topic = msg.topic.replace(\"action\", \"target\");\n    context.set('temp_topic2', msg.topic);\n    context.set('temp_zone', msg.payload);\n    return null;\n}\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3300,
        "y": 2020,
        "wires": [
            [
                "dfd6d3ff02d1dcbd"
            ]
        ]
    },
    {
        "id": "525e9bfc80e7f5e5",
        "type": "function",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "pupup setup",
        "func": "var pay = msg.topic.replace(\"action\", \"setpoint\");\n//pay = global.get(pay,\"file\");\n \nif (msg.payload == 'Water setpoint (heat shift)') {\n    \n    var msg1={}; \n    var msg2={};\n    msg1.ui_control = {min:-5, max:+5, step:1}; \n    // @ts-ignore\n    if (pay===undefined || pay > 5) {pay=0};\n    msg1.payload = pay; msg1.range = 'ranges'; msg1.topic = msg.topic;\n    \n    msg2.text1 = msg.payload;\n    msg2.note1 = \"This will set the shift level. <br>Range: -5 / +5 °C<br>Step size: 1°C<br><br>Note: Panasonic needs to be in 'Compensation-Curve'-mode\";\n    \n    return [msg1,msg2];\n}\n\n\nif (msg.payload == 'Water setpoint (direct)') {\n    \n    let msg1={}; let msg2={};\n    msg1 = {ui_control:{min:20, max:+65, step:1}}; \n    // @ts-ignore\n    if (pay===undefined || pay < 20) {pay=20}\n    msg1.payload = pay; msg1.range = 'ranges'; msg1.topic = msg.topic;\n    \n    msg2.text1 = msg.payload;\n    msg2.note1 = \"This will set the water temperature directly.<br>Range: 20 / 65 °C<br>Step size: 1°C<br><br>Note: Panasonic needs to be in 'Direct'-mode\";\n\n    return [msg1,msg2];\n}\n\n\nif (msg.payload == 'Room setpoint RTC') {\n    \n    let msg1={}; let msg2={};\n    msg1 = {ui_control:{min:5, max:+50, step:0.1}}; \n    // @ts-ignore\n    if (pay===undefined || pay < 5) {pay=20}\n    msg1.payload = pay; msg1.range = 'ranges'; msg1.topic = msg.topic;\n    \n    msg2.text1 = msg.payload;\n    msg2.note1 = \"This target roomtemperature for the RTC function.<br>Range: 5 / 50 °C<br>Step size: 0.1°C<br><br>Note: This applies only to the 'RTC'-function\";\n\n    return [msg1,msg2];\n}\n\n\nif (msg.payload == 'DHW setpoint') {\n    \n    let msg1={}; let msg2={};\n    msg1 = {ui_control:{min:40, max:+75, step:1}}; \n    // @ts-ignore\n    if (pay===undefined || pay < 40) {pay=40;}\n    // @ts-ignore\n    if (pay > 75) {pay=75;}\n    msg1.payload = pay; msg1.range = 'ranges'; msg1.topic = msg.topic;\n    \n    msg2.text1 = msg.payload;\n    msg2.note1 = \"Set a new target temperature for the DHW water.<br><br>Range: 40 / 75 °C<br>Step size: 1°C\";\n\n    return [msg1,msg2];\n}\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2710,
        "y": 1860,
        "wires": [
            [
                "b6f2cfb3efd983c4",
                "7c42986702362e7e",
                "6be4546e88524a03"
            ],
            [
                "19cb9e9d4bfea67d",
                "d76b2de1985f09bb"
            ]
        ]
    },
    {
        "id": "534c85f1af373b3c",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "to Schedule_xx topics",
        "links": [
            "dfd6d3ff02d1dcbd"
        ],
        "x": 160,
        "y": 360,
        "wires": [
            [
                "f5602874161743c8"
            ]
        ],
        "l": true
    },
    {
        "id": "dfd6d3ff02d1dcbd",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "link to Schedule_xx topics",
        "mode": "link",
        "links": [
            "534c85f1af373b3c"
        ],
        "x": 3445,
        "y": 2020,
        "wires": []
    },
    {
        "id": "19cb9e9d4bfea67d",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 13,
        "width": 10,
        "height": 4,
        "name": "8x2 note",
        "label": "{{msg.note1}}",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2960,
        "y": 2160,
        "wires": []
    },
    {
        "id": "dd36095ad4abca5a",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Setpoints",
        "func": "\n// pin 1: Water setpoint (heat shift)\n// pin 2: Water setpoint (direct)\n// pin 3: Room setpoint RTC\n// pin 4: to log\n// pin 5: to DHW setpoint\nlet msg99={};\n\nif (msg.topic === 'Water setpoint (heat shift)'){\n    msg99.topic = 'Scheduler - Set water setpoint (shift)';\n    msg99.payload = msg.payload;\n    return [msg,null,null,msg99];\n}\n\nif (msg.topic === 'Water setpoint (direct)'){\n    msg99.topic = 'Scheduler - Set water setpoint (direct)';\n    msg99.payload = msg.payload;\n    return [null,msg,null,msg99];\n}\n\nif (msg.topic === 'Room setpoint RTC'){\n    msg99.topic = 'Scheduler - Set room setpoint (RTC)';\n    msg99.payload = msg.payload;\n    return [null,null,msg,msg99];\n}\n\n\nif (msg.topic === 'DHW setpoint'){\n    msg99.topic = 'Scheduler - DHW setpoint';\n    msg99.payload = msg.payload;\n    return [null,null,null,msg99,msg];\n}\n\n// Forwarding the information to next function node if topic is toggle item\nif (msg.topic === 'toggle item') {\n    return [null, null, null, null, null, msg];\n}\n",
        "outputs": 6,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 2740,
        "wires": [
            [
                "3c7256b41577c8e5"
            ],
            [
                "3c7256b41577c8e5"
            ],
            [
                "ca6a3a25d3074b64"
            ],
            [
                "f41ec824afb63153"
            ],
            [
                "e7d5b3d47ad1c53a"
            ],
            [
                "b7f0fdbf9ddb2a8a"
            ]
        ],
        "outputLabels": [
            "Water setpoint (heat shift)",
            "Water setpoint (direct)",
            "Room setpoint RTC",
            "to log",
            "DHW setpoint",
            "Toggle menu item"
        ]
    },
    {
        "id": "ca6a3a25d3074b64",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out to RTC setpoint",
        "mode": "link",
        "links": [
            "9a106cdefc873348"
        ],
        "x": 1425,
        "y": 2740,
        "wires": []
    },
    {
        "id": "3c7256b41577c8e5",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out to SP Manager Z1_Z2",
        "mode": "link",
        "links": [
            "2d52ca9e08c7fb9a"
        ],
        "x": 1375,
        "y": 2700,
        "wires": []
    },
    {
        "id": "c0d182e336a34912",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "link in 51",
        "links": [
            "47cb7500b0321fc1"
        ],
        "x": 2805,
        "y": 2120,
        "wires": [
            [
                "1e2795a950379445"
            ]
        ]
    },
    {
        "id": "aa04e7be9348a071",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "link out to DHW setpoint",
        "mode": "link",
        "links": [
            "327f3ad0eae0d7d5"
        ],
        "x": 3415,
        "y": 2620,
        "wires": []
    },
    {
        "id": "8f7d82299e5dcf8a",
        "type": "comment",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "Exit to DHW SP manager",
        "info": "",
        "x": 3630,
        "y": 2620,
        "wires": []
    },
    {
        "id": "0544bbb49cbd245a",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_01",
        "label": "Condition 01:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 4,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_01",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 1840,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "d8e03fdb71a6f2fb",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "decdc0db03cb6227",
        "order": 25,
        "width": 17,
        "height": 1,
        "name": "note",
        "label": "Note. If the condition is TRUE, the scheduled task will be blocked",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 680,
        "y": 2240,
        "wires": []
    },
    {
        "id": "11554b0d6d72d08f",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input1",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_01",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 1840,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "b69a19e4b1334fa5",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_02",
        "label": "Condition 02:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 7,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_02",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 1880,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "a6e14f9f36b96843",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "link in 62",
        "links": [
            "49ebac0412d87642",
            "d63e1d5671ed9af1"
        ],
        "x": 115,
        "y": 280,
        "wires": [
            [
                "f5602874161743c8"
            ]
        ]
    },
    {
        "id": "8e3cfd35030617d7",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition10",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 116,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_10_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 1620,
        "wires": [
            [
                "8f344e97a91251d5",
                "3dd4ba546f5d887e"
            ]
        ]
    },
    {
        "id": "8f344e97a91251d5",
        "type": "function",
        "z": "35d210f042827344",
        "name": "set.Schedule_x_condition",
        "func": "if (msg.payload.includes('none') === true) {\n    global.set(msg.topic, undefined, \"file\");\n    return null;\n}\n\nglobal.set(msg.topic,msg.payload,\"file\");\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3290,
        "y": 1740,
        "wires": [
            [
                "216334dde1648924"
            ]
        ]
    },
    {
        "id": "6a48a1a61f8fc344",
        "type": "function",
        "z": "35d210f042827344",
        "name": "function 31",
        "func": "var Schedule_1_state = global.get('Schedule_1_state',\"file\");\nvar Schedule_2_state = global.get('Schedule_2_state',\"file\");\nvar Schedule_3_state = global.get('Schedule_3_state',\"file\");\nvar Schedule_4_state = global.get('Schedule_4_state',\"file\");\nvar Schedule_5_state = global.get('Schedule_5_state',\"file\");\nvar Schedule_6_state = global.get('Schedule_6_state',\"file\");\nvar Schedule_7_state = global.get('Schedule_7_state',\"file\");\nvar Schedule_8_state = global.get('Schedule_8_state',\"file\");\nvar Schedule_9_state = global.get('Schedule_9_state',\"file\");\nvar Schedule_10_state = global.get('Schedule_10_state',\"file\");\n\nif (Schedule_1_state === 1 && msg.topic == 'Schedule_1') { return msg }\nif (Schedule_2_state === 1 && msg.topic == 'Schedule_2') { return msg }\nif (Schedule_3_state === 1 && msg.topic == 'Schedule_3') { return msg }\nif (Schedule_4_state === 1 && msg.topic == 'Schedule_4') { return msg }\nif (Schedule_5_state === 1 && msg.topic == 'Schedule_5') { return msg }\nif (Schedule_6_state === 1 && msg.topic == 'Schedule_6') { return msg }\nif (Schedule_7_state === 1 && msg.topic == 'Schedule_7') { return msg }\nif (Schedule_8_state === 1 && msg.topic == 'Schedule_8') { return msg }\nif (Schedule_9_state === 1 && msg.topic == 'Schedule_9') { return msg }\nif (Schedule_10_state === 1 && msg.topic == 'Schedule_10') { return msg }",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 2560,
        "wires": [
            [
                "e168945122de5aa2"
            ]
        ]
    },
    {
        "id": "fb787bd66613fb70",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_03",
        "label": "Condition 03:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 9,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_03",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 1920,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "92f9bdf78a061e5d",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_04",
        "label": "Condition 04:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 11,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_04",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 1960,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "730bac2b62298b0e",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_05",
        "label": "Condition 05:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 13,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_05",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 2000,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "b86369771a709263",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_06",
        "label": "Condition 06:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 15,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_06",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 2040,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "f0bcc033e490736b",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_07",
        "label": "Condition 07:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 17,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_07",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 2080,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "12641cfda977bcf1",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_08",
        "label": "Condition 08:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 19,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_08",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 2120,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "1dfdb11f717c8ad2",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_09",
        "label": "Condition 09:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 21,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_09",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 2160,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "184f2de25e86640f",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "condition_10",
        "label": "Condition 10:   Block if",
        "tooltip": "",
        "place": "Select option",
        "group": "decdc0db03cb6227",
        "order": 23,
        "width": 14,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Select option",
                "value": "none",
                "type": "str"
            },
            {
                "label": "DHW temperature is above",
                "value": "DHW_temperature",
                "type": "str"
            },
            {
                "label": "time since last sterelization is less than",
                "value": "ELAPSED_TIME",
                "type": "str"
            },
            {
                "label": "time since DHW temp was on target temperature is less than",
                "value": "ELAPSED_TIME2",
                "type": "str"
            },
            {
                "label": "time since previous trigger of this scheduled action is less than ",
                "value": "ELAPSED_TIME3",
                "type": "str"
            },
            {
                "label": "Outside temperature is higher than",
                "value": "OUTSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Outside temperature is lower than",
                "value": "OUTSIDE_TEMP_BELOW",
                "type": "str"
            },
            {
                "label": "Inside temperature is higher than",
                "value": "INSIDE_TEMP_ABOVE",
                "type": "str"
            },
            {
                "label": "Inside temperature is lower than",
                "value": "INSIDE_TEMP_BELOW",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "condition_10",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 2200,
        "wires": [
            [
                "2b9f10c0ddbd0b85"
            ]
        ]
    },
    {
        "id": "2b9f10c0ddbd0b85",
        "type": "function",
        "z": "35d210f042827344",
        "name": "Condition details",
        "func": "\nif (msg.payload!='none') {global.set('Schedule_conditions.'+msg.topic+'.type',msg.payload,\"file\");}\nif (msg.payload=='none') {global.set('Schedule_conditions.'+msg.topic,undefined,\"file\");}\n\n\nif (msg.payload == \"DHW_temperature\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"°C\";\n    msg.tooltip = \"Range: 0-75 °C\";\n    global.set('Schedule_conditions.'+msg.topic+'.upperlimit',75,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.lowerlimit',0,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n}\nif (msg.payload == \"ELAPSED_TIME\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"Hours\";\n    msg.tooltip = \"Range: 0-500 hours\";\n    global.set('Schedule_conditions.'+msg.topic+'.upperlimit',500,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.lowerlimit',0,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n}\nif (msg.payload == \"ELAPSED_TIME2\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"Hours\";\n    msg.tooltip = \"Range: 0-500 hours\";\n    global.set('Schedule_conditions.'+msg.topic+'.upperlimit',500,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.lowerlimit',0,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n}\nif (msg.payload == \"ELAPSED_TIME3\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"Hours\";\n    msg.tooltip = \"Range: 0-500 hours\";\n    global.set('Schedule_conditions.'+msg.topic+'.upperlimit',500,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.lowerlimit',0,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n}\n\nif (msg.payload == \"OUTSIDE_TEMP_ABOVE\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"°C\";\n    msg.tooltip = \"Range: -20/+75 °C\";\n    global.set('Schedule_conditions.'+msg.topic+'.upperlimit',75,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.lowerlimit',-20,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n}\n\nif (msg.payload == \"OUTSIDE_TEMP_BELOW\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"°C\";\n    msg.tooltip = \"Range: -20/+75 °C\";\n    global.set('Schedule_conditions.'+msg.topic+'.upperlimit',75,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.lowerlimit',-20,\"file\");\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n}\n\nif (msg.payload == \"INSIDE_TEMP_ABOVE\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"°C\";\n    msg.tooltip = \"Range: 0-40 °C\";\n    global.set('Schedule_conditions.' + msg.topic + '.upperlimit', 40, \"file\");\n    global.set('Schedule_conditions.' + msg.topic + '.lowerlimit', 0, \"file\");\n    global.set('Schedule_conditions.' + msg.topic + '.value', undefined, \"file\");\n    return msg;\n}\n\nif (msg.payload == \"INSIDE_TEMP_BELOW\") {\n    msg.payload = '0';\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = \"°C\";\n    msg.tooltip = \"Range: 0-40 °C\";\n    global.set('Schedule_conditions.' + msg.topic + '.upperlimit', 40, \"file\");\n    global.set('Schedule_conditions.' + msg.topic + '.lowerlimit', 0, \"file\");\n    global.set('Schedule_conditions.' + msg.topic + '.value', undefined, \"file\");\n    return msg;\n}\n\n\n\n\n\n\nif (msg.payload == \"none\") {\n    msg.payload = 1;\n    msg.label = '------';\n    msg.tooltip = '------';\n    node.send(msg);\n    msg.payload = '';\n    msg.label = '';\n    msg.tooltip = '';\n    global.set('Schedule_conditions.'+msg.topic+'.value',undefined,\"file\");\n    return msg;\n\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 1840,
        "wires": [
            [
                "e67cac66797822c9"
            ]
        ]
    },
    {
        "id": "09ad5bc7494d3bae",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input2",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 8,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_02",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 1880,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "81c7eb5abe1acd21",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input3",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_03",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 1920,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "a82e0461d3df88ba",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input4",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 12,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_04",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 1960,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "8d310d74f111808e",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input5",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 14,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_05",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 2000,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "e7c780b04e58991f",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input6",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 16,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_06",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 2040,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "ad9c5e342b8c0e4d",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input7",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 18,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_07",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 2080,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "a80cfb45d2ed4485",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input8",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 20,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_08",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 2120,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "2d46ae559a35d285",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input9",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 22,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_09",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 2160,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "d638e2c6cafc1247",
        "type": "ui_text_input",
        "z": "35d210f042827344",
        "name": "text input10",
        "label": "{{msg.label}}",
        "tooltip": "{{msg.tooltip}}",
        "group": "decdc0db03cb6227",
        "order": 24,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "number",
        "delay": "500",
        "topic": "condition_10",
        "sendOnBlur": false,
        "className": "",
        "topicType": "str",
        "x": 1290,
        "y": 2200,
        "wires": [
            [
                "1da654b8422cbda9"
            ]
        ]
    },
    {
        "id": "1da654b8422cbda9",
        "type": "function",
        "z": "35d210f042827344",
        "name": "upper/lower limits",
        "func": "var conditions =    global.get('Schedule_conditions.'+msg.topic,\"file\");\n\n\nif (msg.payload > conditions.upperlimit) {msg.payload = conditions.upperlimit}\nif (msg.payload < conditions.lowerlimit) {msg.payload = conditions.lowerlimit}\n\nglobal.set('Schedule_conditions.'+msg.topic+'.value',msg.payload,\"file\");\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1510,
        "y": 2200,
        "wires": [
            [
                "bb74ee97ca071609"
            ]
        ]
    },
    {
        "id": "e67cac66797822c9",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "condition_01",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_02",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_03",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_04",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_05",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_06",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_07",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_08",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_09",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_10",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 10,
        "x": 1110,
        "y": 1900,
        "wires": [
            [
                "11554b0d6d72d08f"
            ],
            [
                "09ad5bc7494d3bae"
            ],
            [
                "81c7eb5abe1acd21"
            ],
            [
                "a82e0461d3df88ba"
            ],
            [
                "8d310d74f111808e"
            ],
            [
                "e7c780b04e58991f"
            ],
            [
                "ad9c5e342b8c0e4d"
            ],
            [
                "a80cfb45d2ed4485"
            ],
            [
                "2d46ae559a35d285"
            ],
            [
                "d638e2c6cafc1247"
            ]
        ]
    },
    {
        "id": "bb74ee97ca071609",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "condition_01",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_02",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_03",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_04",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_05",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_06",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_07",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_08",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_09",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_10",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 10,
        "x": 1110,
        "y": 2060,
        "wires": [
            [
                "11554b0d6d72d08f"
            ],
            [
                "09ad5bc7494d3bae"
            ],
            [
                "81c7eb5abe1acd21"
            ],
            [
                "a82e0461d3df88ba"
            ],
            [
                "8d310d74f111808e"
            ],
            [
                "e7c780b04e58991f"
            ],
            [
                "ad9c5e342b8c0e4d"
            ],
            [
                "a80cfb45d2ed4485"
            ],
            [
                "2d46ae559a35d285"
            ],
            [
                "d638e2c6cafc1247"
            ]
        ]
    },
    {
        "id": "a147fe89247aa73b",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition09",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 106,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_9_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 1460,
        "wires": [
            [
                "8f344e97a91251d5",
                "54cb085390734540"
            ]
        ]
    },
    {
        "id": "f6acd15f36324736",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition01",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 26,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_1_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 180,
        "wires": [
            [
                "8f344e97a91251d5",
                "9ed21e4bc022f0f9"
            ]
        ]
    },
    {
        "id": "acea208050889a80",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "ToLog",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1515,
        "y": 2760,
        "wires": []
    },
    {
        "id": "c8f137bcff651fba",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition08",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 96,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_8_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 1300,
        "wires": [
            [
                "8f344e97a91251d5",
                "947134b7bba6db74"
            ]
        ]
    },
    {
        "id": "f314a9b676182c11",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition07",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 86,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_7_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 1140,
        "wires": [
            [
                "8f344e97a91251d5",
                "9ea62ac24f82336f"
            ]
        ]
    },
    {
        "id": "773eba4d817b8b93",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition06",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 76,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_6_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 980,
        "wires": [
            [
                "8f344e97a91251d5",
                "a1aabb7ee798e9d6"
            ]
        ]
    },
    {
        "id": "82d6f38bd9764a93",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition05",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 66,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_5_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 820,
        "wires": [
            [
                "8f344e97a91251d5",
                "9aeed9019812c599"
            ]
        ]
    },
    {
        "id": "e90e53734d73b6da",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition04",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 56,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_4_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 660,
        "wires": [
            [
                "8f344e97a91251d5",
                "babe98b784a672f6"
            ]
        ]
    },
    {
        "id": "b24f970c2d6262f9",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition03",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 46,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_3_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 500,
        "wires": [
            [
                "8f344e97a91251d5",
                "0ac021e4786e8145"
            ]
        ]
    },
    {
        "id": "c904ad7bb0b016d8",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "name": "Condition02",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "2b0c8e162d47abbb",
        "order": 36,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": true,
        "options": [
            {
                "label": "Condition 1",
                "value": "condition_01",
                "type": "str"
            },
            {
                "label": "Condition 2",
                "value": "condition_02",
                "type": "str"
            },
            {
                "label": "Condition 3",
                "value": "condition_03",
                "type": "str"
            },
            {
                "label": "Condition 4",
                "value": "condition_04",
                "type": "str"
            },
            {
                "label": "Condition 5",
                "value": "condition_05",
                "type": "str"
            },
            {
                "label": "Condition 6",
                "value": "condition_06",
                "type": "str"
            },
            {
                "label": "Condition 7",
                "value": "condition_07",
                "type": "str"
            },
            {
                "label": "Condition 8",
                "value": "condition_08",
                "type": "str"
            },
            {
                "label": "Condition 9",
                "value": "condition_09",
                "type": "str"
            },
            {
                "label": "Condition 10",
                "value": "condition_10",
                "type": "str"
            },
            {
                "label": "None",
                "value": "none",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "Schedule_2_condition",
        "topicType": "str",
        "className": "",
        "x": 3050,
        "y": 340,
        "wires": [
            [
                "8f344e97a91251d5",
                "6fa7b868995a8d8e"
            ]
        ]
    },
    {
        "id": "4e9428bb306835e7",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 15,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "Condition",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3040,
        "y": 140,
        "wires": []
    },
    {
        "id": "9ed21e4bc022f0f9",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 180,
        "wires": [
            [
                "f6acd15f36324736"
            ]
        ]
    },
    {
        "id": "6fa7b868995a8d8e",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 340,
        "wires": [
            [
                "c904ad7bb0b016d8"
            ]
        ]
    },
    {
        "id": "0ac021e4786e8145",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 500,
        "wires": [
            [
                "b24f970c2d6262f9"
            ]
        ]
    },
    {
        "id": "babe98b784a672f6",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 660,
        "wires": [
            [
                "e90e53734d73b6da"
            ]
        ]
    },
    {
        "id": "9aeed9019812c599",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 820,
        "wires": [
            [
                "82d6f38bd9764a93"
            ]
        ]
    },
    {
        "id": "a1aabb7ee798e9d6",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 980,
        "wires": [
            [
                "773eba4d817b8b93"
            ]
        ]
    },
    {
        "id": "9ea62ac24f82336f",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 1140,
        "wires": [
            [
                "f314a9b676182c11"
            ]
        ]
    },
    {
        "id": "947134b7bba6db74",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 1300,
        "wires": [
            [
                "c8f137bcff651fba"
            ]
        ]
    },
    {
        "id": "54cb085390734540",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = ''; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 1460,
        "wires": [
            [
                "a147fe89247aa73b"
            ]
        ]
    },
    {
        "id": "3dd4ba546f5d887e",
        "type": "function",
        "z": "35d210f042827344",
        "name": "none",
        "func": "if (msg.payload.includes('none') === true) { msg.payload = '' ; return msg }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 1620,
        "wires": [
            [
                "8e3cfd35030617d7"
            ]
        ]
    },
    {
        "id": "216334dde1648924",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "",
        "group": "2b0c8e162d47abbb",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Conditions",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "settings",
        "payload": "{\"group\":{\"show\":[\"Scheduler_Conditions\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 3490,
        "y": 1820,
        "wires": [
            [
                "d237190377c1112c"
            ]
        ]
    },
    {
        "id": "6b0824e7db729160",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 3,
        "width": 1,
        "height": 1,
        "name": "SPACER scheduler 1x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 3530,
        "y": 1780,
        "wires": []
    },
    {
        "id": "0beb0e5d78ac91df",
        "type": "ui_template",
        "z": "35d210f042827344",
        "group": "decdc0db03cb6227",
        "name": "Condition help",
        "order": 6,
        "width": 11,
        "height": 11,
        "format": "<div ng-bind-html=\"msg.payload\"></div>\nSetting a condition is optional. <br>\nFor every scheduled action you can define a blocking condition. This means that when the scheduled action is triggered the condition is evaluated.<br>\nWhen the condition is TRUE, the action will be blocked.<br>\n\n<br>\nThe conditions are:<br><br>\n<u>DHW temperature is above</u>\nIf the last measured DHW temperature is above the given value, the action will be blocked.<br><br>\n\n<u>time since last sterelization is less than</u>\nIf the DHW temperature is 60°C or higher, it takes minutes to sterelize (kill legionella) the tank. The date/time the water is 60+°C is stored. If the elapsed time since then is less than the given value, the action will be blocked. (Note: make sure the measured temperature is good and representative in the tank)\n<br><br>\n<u>time since DHW temp was on target temperature is less than</u>\nThe date/time the water is at the target temperature is stored. If the elapsed time since then is less than the given value, the action will be blocked.<br><br> \n<u>time since previous trigger of this scheduled action is less than</u>\nThe date/time of each scheduled action is stored. If the elapsed time since then is less than the given value, the action will be blocked. ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1680,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "a0a2fc90ea4e5b73",
        "type": "ui_template",
        "z": "35d210f042827344",
        "group": "decdc0db03cb6227",
        "name": "Line - Setup export",
        "order": 3,
        "width": 28,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Condition configuration</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1690,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "4a7be89a2e603bb8",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "decdc0db03cb6227",
        "order": 1,
        "width": 27,
        "height": 1,
        "name": "filler text",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1660,
        "y": 1860,
        "wires": []
    },
    {
        "id": "0de8f264a17d3d32",
        "type": "ui_button",
        "z": "35d210f042827344",
        "name": "close",
        "group": "decdc0db03cb6227",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "close",
        "payload": "{\"group\":{\"hide\":[\"Scheduler_Conditions\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1650,
        "y": 1820,
        "wires": [
            [
                "062207b0f6922685"
            ]
        ]
    },
    {
        "id": "d237190377c1112c",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 67",
        "mode": "link",
        "links": [
            "dbcf60ce513ff3ae"
        ],
        "x": 3615,
        "y": 1820,
        "wires": []
    },
    {
        "id": "062207b0f6922685",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 68",
        "mode": "link",
        "links": [
            "dbcf60ce513ff3ae"
        ],
        "x": 1765,
        "y": 1820,
        "wires": []
    },
    {
        "id": "bd0a287533674d75",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "link in 63",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 1535,
        "y": 1820,
        "wires": [
            [
                "0de8f264a17d3d32"
            ]
        ]
    },
    {
        "id": "e7d5b3d47ad1c53a",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 69",
        "mode": "link",
        "links": [
            "61def1f2090e360a"
        ],
        "x": 1425,
        "y": 2780,
        "wires": []
    },
    {
        "id": "f41ec824afb63153",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 70",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1405,
        "y": 2760,
        "wires": []
    },
    {
        "id": "b7ba3cde110cd1ba",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "link in 64",
        "links": [
            "47cb7500b0321fc1"
        ],
        "x": 185,
        "y": 2220,
        "wires": [
            [
                "39e791e51b901015"
            ]
        ]
    },
    {
        "id": "39e791e51b901015",
        "type": "function",
        "z": "35d210f042827344",
        "name": "restore type and value",
        "func": "let i = 1;\nwhile (i < 11) {\n    \n    var topic_name;\n    var msg1={};\n    var msg2={};\n    var msg3={}; msg3.payload=0; msg3.label = '------'; msg3.tooltip = '------';\n    \n    \n    \n    if (i < 10)     {topic_name = 'condition_0'}\n    else            {topic_name = 'condition_'}\n    \n    if (global.get('Schedule_conditions.'+topic_name+i,\"file\") !== undefined) {\n        msg3.topic      =  topic_name + i;\n        node.send([null,msg3]);\n\n        // type\n        msg1.payload    = global.get('Schedule_conditions.'+topic_name+i+'.type',\"file\");\n        msg1.topic      =  topic_name + i;\n        \n        // value\n        msg2.payload    = global.get('Schedule_conditions.'+topic_name+i+'.value',\"file\");\n        msg2.topic      = topic_name + i;\n    \n            if (msg1.payload == \"DHW_temperature\") {\n                msg2.label = \"°C\";\n                msg2.tooltip = \"Range: 0-75 °C\";\n                \n            }\n            \n            if (msg1.payload == \"ELAPSED_TIME\") {\n                msg2.label = \"Hours\";\n                msg2.tooltip = \"Range: 0-500 hours\";\n            }\n            \n            if (msg1.payload == \"ELAPSED_TIME2\") {\n                msg2.label = \"Hours\";\n                msg2.tooltip = \"Range: 0-500 hours\";\n            }\n\n            if (msg.payload == \"ELAPSED_TIME3\") {\n                msg2.label = \"Hours\";\n                msg2.tooltip = \"Range: 0-500 hours\";\n            }\n\n        node.send([msg1,msg2]);\n        \n    }\n\n    i++;\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 2220,
        "wires": [
            [
                "35e2711cece61d0b"
            ],
            [
                "cc0e8acfaa76166a"
            ]
        ],
        "outputLabels": [
            "type",
            "value"
        ]
    },
    {
        "id": "35e2711cece61d0b",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "restore",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "condition_01",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_02",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_03",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_04",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_05",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_06",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_07",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_08",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_09",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_10",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 10,
        "x": 520,
        "y": 1900,
        "wires": [
            [
                "0544bbb49cbd245a"
            ],
            [
                "b69a19e4b1334fa5"
            ],
            [
                "fb787bd66613fb70"
            ],
            [
                "92f9bdf78a061e5d"
            ],
            [
                "730bac2b62298b0e"
            ],
            [
                "b86369771a709263"
            ],
            [
                "f0bcc033e490736b"
            ],
            [
                "12641cfda977bcf1"
            ],
            [
                "1dfdb11f717c8ad2"
            ],
            [
                "184f2de25e86640f"
            ]
        ]
    },
    {
        "id": "cc0e8acfaa76166a",
        "type": "switch",
        "z": "35d210f042827344",
        "name": "restore",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "condition_01",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_02",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_03",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_04",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_05",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_06",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_07",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_08",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_09",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "condition_10",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 10,
        "x": 1100,
        "y": 2220,
        "wires": [
            [
                "11554b0d6d72d08f"
            ],
            [
                "09ad5bc7494d3bae"
            ],
            [
                "81c7eb5abe1acd21"
            ],
            [
                "a82e0461d3df88ba"
            ],
            [
                "8d310d74f111808e"
            ],
            [
                "e7c780b04e58991f"
            ],
            [
                "ad9c5e342b8c0e4d"
            ],
            [
                "a80cfb45d2ed4485"
            ],
            [
                "2d46ae559a35d285"
            ],
            [
                "d638e2c6cafc1247"
            ]
        ]
    },
    {
        "id": "6e6b758f54cd9b22",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1715,
        "y": 2520,
        "wires": [
            [
                "317942154b6d1cb3"
            ]
        ],
        "l": false
    },
    {
        "id": "1a571f9216756e5e",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1715,
        "y": 2560,
        "wires": [
            [
                "92b636a9597d91b2"
            ]
        ],
        "l": false
    },
    {
        "id": "9a097e6d95e1ca6e",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1715,
        "y": 2600,
        "wires": [
            [
                "14327004637e05c7",
                "f0045be5a90c957f"
            ]
        ],
        "l": false
    },
    {
        "id": "12c1fd3169e6c639",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1715,
        "y": 2640,
        "wires": [
            [
                "c6801a6c865543b3"
            ]
        ],
        "l": false
    },
    {
        "id": "c616ab1245360ad1",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1715,
        "y": 2680,
        "wires": [
            [
                "b91f0b27e28d647b",
                "a040c5a397316aa6"
            ]
        ],
        "l": false
    },
    {
        "id": "1c3a1716ed8db17d",
        "type": "delay",
        "z": "35d210f042827344",
        "name": "",
        "pauseType": "delay",
        "timeout": "1000",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1715,
        "y": 2720,
        "wires": [
            [
                "4ca97fe11f8196e4"
            ]
        ],
        "l": false
    },
    {
        "id": "9c75cdabfee5ec0f",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "link in 65",
        "links": [
            "04d51dd3d6706289"
        ],
        "x": 3025,
        "y": 1900,
        "wires": [
            [
                "149593cb5a59bfc2"
            ]
        ]
    },
    {
        "id": "04d51dd3d6706289",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "link out 71",
        "mode": "link",
        "links": [
            "9c75cdabfee5ec0f"
        ],
        "x": 2555,
        "y": 1900,
        "wires": []
    },
    {
        "id": "41e3d65e44f729b3",
        "type": "function",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "function 37",
        "func": "if (msg.payload == 'toggle item') {\n\n    var msg1 = {};\n    \n\n    msg1.topic = msg.topic.replace(\"action\", \"toggle_item\");\n    var value1 = global.get(msg1.topic,\"file\");\n    \n    if (value1 === undefined) { msg1.payload = { \" \": \"\", \"WAR\": false, \"RTC\": false, \"SoftStart\": false, \"Solar2DHW\": false, \"State\": false } }\n    else {msg1.payload = value1}\n\n    return [msg1]\n\n    }\n\n\nreturn null\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2030,
        "y": 1900,
        "wires": [
            [
                "64b63afc5d83d929",
                "aa67113ad3088493",
                "d71671801e83ccd8"
            ]
        ],
        "outputLabels": [
            "msg1 - show pop-up"
        ]
    },
    {
        "id": "64b63afc5d83d929",
        "type": "change",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "Show submenu",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Scheduler_function_actions\"],\"hide\":[\"Scheduler_Scheduler\",\"Scheduler_Scheduler_related_settings\",\"Scheduler_Help\",\"Scheduler_Conditions\",\"Scheduler_Notification\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2380,
        "y": 1900,
        "wires": [
            [
                "04d51dd3d6706289",
                "2d4eefbf9dcc6e9f"
            ]
        ]
    },
    {
        "id": "aa67113ad3088493",
        "type": "ui_form",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "form Select functions",
        "label": "",
        "group": "5cfc57b36b31394c",
        "order": 2,
        "width": 6,
        "height": 1,
        "options": [
            {
                "label": "Select function(s) to change",
                "value": " ",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "CCC (Zone 1)",
                "value": "CCC_Z1",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "CCC (Zone 2)",
                "value": "CCC_Z2",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "RTC (Zone 1)",
                "value": "RTC_Z1",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "RTC (Zone 2)",
                "value": "RTC_Z2",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "SoftStart",
                "value": "SoftStart",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "Solar²DHW",
                "value": "Solar2DHW",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "Set the desired state",
                "value": " ",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "State",
                "value": "State",
                "type": "switch",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            " ": "",
            "CCC_Z1": false,
            "CCC_Z2": false,
            "RTC_Z1": false,
            "RTC_Z2": false,
            "SoftStart": false,
            "Solar2DHW": false,
            "State": false
        },
        "payload": "",
        "submit": "Save",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 2000,
        "y": 1980,
        "wires": [
            [
                "5ab7ad5b040ca231"
            ]
        ]
    },
    {
        "id": "83791dcc23be38a9",
        "type": "ui_template",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "group": "5cfc57b36b31394c",
        "name": "HEAD",
        "order": 5,
        "width": 6,
        "height": 2,
        "format": "<html>\n<!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n\n<head>\n    <left>\n        <h1>Scheduler action</h1>\n        <br>\n    </left>\n    <hr style=\"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\" ;>\n\n</head>\n\n\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2050,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "5ab7ad5b040ca231",
        "type": "function",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "function 38",
        "func": "if (msg.payload.CCC_Z1 === false && msg.payload.RTC_Z1 === false && msg.payload.CCC_Z2 === false && msg.payload.RTC_Z2 === false && msg.payload.SoftStart === false && msg.payload.Solar2DHW === false) {\n    global.set(msg.topic, undefined, \"file\");\n    \n    msg.topic = msg.topic.replace(\"toggle_item\", \"action\");\n    global.set(msg.topic, undefined, \"file\");\n    \n    return msg;\n} \n\nglobal.set(msg.topic, msg.payload, \"file\");\nreturn msg\n\n\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2190,
        "y": 1980,
        "wires": [
            [
                "23cce10c04b0a251",
                "cf6dfeda59a5ed1d",
                "7250ce16a456d262"
            ]
        ]
    },
    {
        "id": "d71671801e83ccd8",
        "type": "ui_form",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "form cancel button",
        "label": "",
        "group": "5cfc57b36b31394c",
        "order": 1,
        "width": 6,
        "height": 1,
        "options": [
            {
                "label": " ",
                "value": " ",
                "type": "text",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            " ": ""
        },
        "payload": "",
        "submit": "Cancel",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 2010,
        "y": 2020,
        "wires": [
            [
                "23cce10c04b0a251",
                "cf6dfeda59a5ed1d"
            ]
        ]
    },
    {
        "id": "e95b104ec4b5b889",
        "type": "ui_template",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "group": "5cfc57b36b31394c",
        "name": "FOOTER",
        "order": 6,
        "width": 6,
        "height": 4,
        "format": "<html>\n<!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<left>\n    <br>\n    Note:<br><br>\n    Only the selected items will be changed to the new state.<br>\n    Items not selected wil remain unchanged upon execution.<br>\n</left>\n\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 2040,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "23cce10c04b0a251",
        "type": "change",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "Hide submenu",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Scheduler_Notification\",\"Scheduler_Help\",\"Scheduler_function_actions\",\"Scheduler_Conditions\"],\"show\":[\"Scheduler_Scheduler\",\"Scheduler_Scheduler_related_settings\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2380,
        "y": 2020,
        "wires": [
            [
                "04d51dd3d6706289",
                "7250ce16a456d262"
            ]
        ]
    },
    {
        "id": "b7f0fdbf9ddb2a8a",
        "type": "function",
        "z": "35d210f042827344",
        "name": "toggle item",
        "func": "var item = msg.payload;\n    if (item === undefined) {return null}\n\nvar list;\nvar state;\nif (item.State === true) { msg.payload = 1 ; state = 'ON'}\nif (item.State === false) { msg.payload = 0 ; state = 'OFF'}\n\n\n\nif (item.CCC_Z1 === true) { \n    msg.topic = 'Correction_0_WAR_on_off'; \n    list = 'CCC_Z1';\n    node.send([msg, null, null, null]) \n    }\n\nif (item.RTC_Z1 === true) { \n    msg.topic = 'Scheduled action'; \n    if (list !== undefined) {list += ', RTC_Z1'}\n    else {list = 'RTC_Z1'}\n    node.send([null, msg, null, null]) \n    }\nif (item.SoftStart === true) { \n    if (list !== undefined) { list += ', SoftStart' }\n    else { list = 'SoftStart' }\n    node.send([null, null, msg, null]) \n    }\n\nif (item.Solar2DHW === true) { \n    if (list !== undefined) { list += ', Solar²DHW' }\n    else { list = 'Solar²DHW' }\n    node.send([null, null, null, msg]) \n    }\n\nif (item.CCC_Z2 === true) {\n    msg.topic = 'Correction_0_WAR_on_off';\n    if (list !== undefined) { list += ', CCC_Z2' }\n    else { list = 'CCC_Z2' }\n    node.send([null, null, null, null, null, msg])\n}\n\nif (item.RTC_Z2 === true) {\n    msg.topic = 'Scheduled action';\n    if (list !== undefined) { list += ', RTC_Z2' }\n    else { list = 'RTC_Z2' }\n    node.send([null, null, null, null, null, null, msg])\n}\n\nvar msg99 = {};\nmsg99.topic = 'Scheduler';\nmsg99.payload = 'Turn ' + state + ' function: ' + list;\n\n\n\n// msg to log\nnode.send([null,null,null,null,msg99])",
        "outputs": 7,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 2900,
        "wires": [
            [
                "34e923228bf51ddf"
            ],
            [
                "eb88ab4567d68ff5"
            ],
            [
                "029c63457cab9dc0"
            ],
            [
                "cd1b20e317c3d446"
            ],
            [
                "acea208050889a80"
            ],
            [
                "2080fad3ea57db19"
            ],
            [
                "e24be9e38b2cf80f"
            ]
        ],
        "outputLabels": [
            "CCC_Z1",
            "RTC_Z1",
            "SOFTSTART",
            "SOLAR2DHW",
            "LOG",
            "CCC_Z2",
            "RTC_Z2"
        ]
    },
    {
        "id": "34e923228bf51ddf",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 72",
        "mode": "link",
        "links": [
            "01d75eec1bfe68d4"
        ],
        "x": 1395,
        "y": 2840,
        "wires": []
    },
    {
        "id": "eb88ab4567d68ff5",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 73",
        "mode": "link",
        "links": [
            "942f2ca34abfe8ac"
        ],
        "x": 1415,
        "y": 2860,
        "wires": []
    },
    {
        "id": "029c63457cab9dc0",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 74",
        "mode": "link",
        "links": [
            "6bb32dd02ad372d4"
        ],
        "x": 1455,
        "y": 2880,
        "wires": []
    },
    {
        "id": "cd1b20e317c3d446",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 75",
        "mode": "link",
        "links": [
            "4ed5f3924acf26ff"
        ],
        "x": 1455,
        "y": 2920,
        "wires": []
    },
    {
        "id": "d63e1d5671ed9af1",
        "type": "link out",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "link out 76",
        "mode": "link",
        "links": [
            "a6e14f9f36b96843"
        ],
        "x": 2525,
        "y": 2080,
        "wires": []
    },
    {
        "id": "cf6dfeda59a5ed1d",
        "type": "delay",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2360,
        "y": 2080,
        "wires": [
            [
                "d63e1d5671ed9af1"
            ]
        ]
    },
    {
        "id": "8596a9f652603dac",
        "type": "trigger",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "",
        "op1": "",
        "op2": "{\"group\":{\"hide\":[\"Scheduler_Notification\",\"Scheduler_Help\",\"Scheduler_function_actions\",\"Scheduler_Conditions\"],\"show\":[\"Scheduler_Scheduler\",\"Scheduler_Scheduler_related_settings\"]}}",
        "op1type": "nul",
        "op2type": "json",
        "duration": "15",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2370,
        "y": 2140,
        "wires": [
            [
                "04d51dd3d6706289"
            ]
        ]
    },
    {
        "id": "2d4eefbf9dcc6e9f",
        "type": "change",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "start",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2130,
        "y": 2120,
        "wires": [
            [
                "8596a9f652603dac"
            ]
        ]
    },
    {
        "id": "7250ce16a456d262",
        "type": "change",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "1",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2130,
        "y": 2160,
        "wires": [
            [
                "8596a9f652603dac"
            ]
        ]
    },
    {
        "id": "efe3dd019498a583",
        "type": "link in",
        "z": "35d210f042827344",
        "name": "link in 71",
        "links": [
            "fb5aeb896e8acc76",
            "5c677fecb54920ff",
            "9bc9b1a547ea7ef6"
        ],
        "x": 1085,
        "y": 2520,
        "wires": [
            [
                "e168945122de5aa2"
            ]
        ]
    },
    {
        "id": "6021a18a5e9c23cb",
        "type": "function",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "function 84",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3225,
        "y": 2500,
        "wires": [
            [
                "d9b9cfbe76f8a7aa",
                "c959ee1f94c31c45"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "af9178426366861c",
        "type": "function",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "function 85",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3235,
        "y": 2620,
        "wires": [
            [
                "aa04e7be9348a071"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "ebc9b8c270d7c636",
        "type": "function",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "function 86",
        "func": "return msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2695,
        "y": 2780,
        "wires": [
            [
                "7a27b2c8c4721ed9",
                "55ed50ca78ad2e8e"
            ]
        ],
        "icon": "node-red/arrow-in.svg",
        "l": false
    },
    {
        "id": "c0fdc0126f7d69c7",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "link in 75",
        "links": [
            "49ebac0412d87642"
        ],
        "x": 2005,
        "y": 2200,
        "wires": [
            [
                "8b33ff42888d0c3b"
            ]
        ]
    },
    {
        "id": "8b33ff42888d0c3b",
        "type": "function",
        "z": "35d210f042827344",
        "g": "af1f780bbdddde83",
        "name": "function 90",
        "func": "let msg1={};\nmsg1.payload=1;\nreturn msg1;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 2200,
        "wires": [
            [
                "23cce10c04b0a251"
            ]
        ]
    },
    {
        "id": "e33b5a24cd58c8d2",
        "type": "link in",
        "z": "35d210f042827344",
        "g": "b63004182c33d3b9",
        "name": "link in 76",
        "links": [
            "8ed91c4260d9b758",
            "b131edf180140fb6"
        ],
        "x": 2905,
        "y": 2480,
        "wires": [
            [
                "dce5daf12297877f"
            ]
        ]
    },
    {
        "id": "61481a6e99401f2f",
        "type": "function",
        "z": "35d210f042827344",
        "name": "function 110",
        "func": "\nvar override = global.get('Schedule_1_override',\"file\");\nvar HP_state = global.get('TOP0_Heatpump_State', \"file\");\n\nif (HP_state == 1) {\n    return msg;\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1590,
        "y": 2320,
        "wires": [
            [
                "4b551d1a6dec4aad"
            ]
        ]
    },
    {
        "id": "e2518b7c3f477746",
        "type": "inject",
        "z": "35d210f042827344",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1400,
        "y": 2320,
        "wires": [
            [
                "61481a6e99401f2f"
            ]
        ]
    },
    {
        "id": "4b551d1a6dec4aad",
        "type": "debug",
        "z": "35d210f042827344",
        "name": "debug 359",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1760,
        "y": 2320,
        "wires": []
    },
    {
        "id": "ace1c289fb9d01d0",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 18,
        "width": 1,
        "height": 1,
        "name": "#1",
        "label": "#1",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 220,
        "wires": []
    },
    {
        "id": "42d7b810937b1eee",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 28,
        "width": 1,
        "height": 1,
        "name": "#2",
        "label": "#2",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 380,
        "wires": []
    },
    {
        "id": "27af1c0d0307cabf",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 38,
        "width": 1,
        "height": 1,
        "name": "#3",
        "label": "#3",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 540,
        "wires": []
    },
    {
        "id": "8289171ec4091397",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 48,
        "width": 1,
        "height": 1,
        "name": "#4",
        "label": "#4",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 700,
        "wires": []
    },
    {
        "id": "5b38f36e5a2a69c8",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 58,
        "width": 1,
        "height": 1,
        "name": "#5",
        "label": "#5",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 860,
        "wires": []
    },
    {
        "id": "090e94afc16817e5",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 68,
        "width": 1,
        "height": 1,
        "name": "#6",
        "label": "#6",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 1020,
        "wires": []
    },
    {
        "id": "8fed9f7d60769998",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 78,
        "width": 1,
        "height": 1,
        "name": "#7",
        "label": "#7",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 1180,
        "wires": []
    },
    {
        "id": "40f60c31cf47f178",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 88,
        "width": 1,
        "height": 1,
        "name": "#8",
        "label": "#8",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 1340,
        "wires": []
    },
    {
        "id": "5b506ef531cfaa32",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 98,
        "width": 1,
        "height": 1,
        "name": "#9",
        "label": "#9",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 1500,
        "wires": []
    },
    {
        "id": "9ad63ed6eb875656",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 108,
        "width": 1,
        "height": 1,
        "name": "#10",
        "label": "#10",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 1660,
        "wires": []
    },
    {
        "id": "906e23350aa78b79",
        "type": "ui_text",
        "z": "35d210f042827344",
        "group": "2b0c8e162d47abbb",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "#",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 100,
        "wires": []
    },
    {
        "id": "2080fad3ea57db19",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "ef4ade1fff94fc42"
        ],
        "x": 1415,
        "y": 2940,
        "wires": []
    },
    {
        "id": "e24be9e38b2cf80f",
        "type": "link out",
        "z": "35d210f042827344",
        "name": "link out 6",
        "mode": "link",
        "links": [
            "d60cb7d9078bfdaf"
        ],
        "x": 1395,
        "y": 2960,
        "wires": []
    },
    {
        "id": "6be4546e88524a03",
        "type": "ui_dropdown",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "TargetDropDown",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "90c1cff3f272d850",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Zone 1",
                "value": "Z1",
                "type": "str"
            },
            {
                "label": "Zone 2",
                "value": "Z2",
                "type": "str"
            },
            {
                "label": "Zone 1 + 2",
                "value": "Z1_Z2",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 2990,
        "y": 2220,
        "wires": [
            [
                "9752935949605e08"
            ]
        ]
    },
    {
        "id": "dcdab89bdeea4f88",
        "type": "ui_text",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "group": "90c1cff3f272d850",
        "order": 6,
        "width": 5,
        "height": 1,
        "name": "TargetZone(s)",
        "label": "Target zone(s)",
        "format": "",
        "layout": "row-right",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 2780,
        "y": 2220,
        "wires": []
    },
    {
        "id": "d4915ffc7bf0e94e",
        "type": "change",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3080,
        "y": 2020,
        "wires": [
            [
                "e9afc0729467ae1d"
            ]
        ]
    },
    {
        "id": "9752935949605e08",
        "type": "change",
        "z": "35d210f042827344",
        "g": "8387b4df126e002c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "zone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3180,
        "y": 2220,
        "wires": [
            [
                "e9afc0729467ae1d"
            ]
        ]
    },
    {
        "id": "3aa03811830ef29e",
        "type": "tab",
        "label": "WP System",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d31e83867f2e0227",
        "type": "group",
        "z": "3aa03811830ef29e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "3240ca538c2a5df3",
            "d43ee06ee34140d5",
            "a3a41ed73245a328",
            "50cd2358bc4fed85",
            "4120fc9975690028",
            "6a54feb677599729",
            "510f802795714d75"
        ],
        "x": 2114,
        "y": 539,
        "w": 692,
        "h": 222
    },
    {
        "id": "5c3df7b5fb0fa130",
        "type": "group",
        "z": "3aa03811830ef29e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "e5ee81fbd045b5ef",
            "258316e7112c15b4",
            "6f8b37b8a4354baf",
            "cc96d0a80f6bdef4",
            "71bc363e9bca5fa6",
            "9e1b71b301e9e79d",
            "44cd6ca0f672e121",
            "d11ec0cafa6ed09f",
            "c38da5f9e3ce0d13",
            "ab0c73c86987caf3",
            "09edf2907086baf2",
            "5837cbf37ef47ea6"
        ],
        "x": 1944,
        "y": 1399,
        "w": 872,
        "h": 302
    },
    {
        "id": "404eed4ef9d90803",
        "type": "group",
        "z": "3aa03811830ef29e",
        "name": "Show / hide menu section",
        "style": {
            "label": true
        },
        "nodes": [
            "a42f4f922e494524",
            "0b8747d2da0482a3",
            "bc563b90430840aa",
            "63c695317a49ea6b",
            "ec21e518e2ade1eb",
            "c5e1f08f07eb647b",
            "0911a9edae380679"
        ],
        "x": 2014,
        "y": 19,
        "w": 812,
        "h": 122
    },
    {
        "id": "c361a153997d2dfd",
        "type": "group",
        "z": "3aa03811830ef29e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "0f0ace5816c4fe0a",
            "c5ae638b1b65bff4"
        ],
        "x": 824,
        "y": 159,
        "w": 252,
        "h": 142
    },
    {
        "id": "8fe25c73d37fe670",
        "type": "group",
        "z": "3aa03811830ef29e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "51c0bb5ee4bb4f0f",
            "bffa098ab7b94669",
            "28fafb00eff46231",
            "eb0c82f6553d8182",
            "96d1b2a3bba37ab3",
            "9439217717d533c8",
            "e45c612a7cd81bca",
            "78ea8dcdc912cc07",
            "280ef51b4c314e1a",
            "fdd9c7ec95eff575",
            "142d3fc7ce50b860",
            "ab61cc041f990a5e",
            "b0db0c075b6cada4",
            "5c678c17c0272bd7",
            "f68241d2cf6a74e8",
            "110b1d924469e409",
            "338e6b81ea5e1e06",
            "59ac957754893b83",
            "6be67176d1f660cc",
            "05b0e21936f66dca",
            "498c5eb0c718380d",
            "776cbfd355ed920f",
            "e335ee2f6e1f9957",
            "f4fa02505ab621d5",
            "319c435620e4980f",
            "867fcdc764bf28f1",
            "a53f9fb190ca01ea",
            "ac8ee41d4f78120e",
            "43bf696dbf416cb0",
            "7257e77181b2e1a4",
            "cb7b5a6a14926482",
            "6c31c89912e87024",
            "5945f577b64bd499",
            "00b957e057fd4843",
            "f9048baa0aa4d07d",
            "a3eab03124fb697b",
            "376a174e36667b9d",
            "e8e1e41f1c85ca7a",
            "1f82dc785dc48abf",
            "ce0115cd2e7f2ac7",
            "419fb911b5aa7d3e",
            "646815dd1d600ff2",
            "cfcc8b51c90050ac",
            "1d0bdc24983833d5"
        ],
        "x": 2044,
        "y": 259,
        "w": 942,
        "h": 1162
    },
    {
        "id": "0bb11670c285bff1",
        "type": "group",
        "z": "3aa03811830ef29e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "a8d0be4408703f65",
            "bf4e74cd2b591a26",
            "cba9af7ca5d830ba",
            "a6a546d71cb6c3c9",
            "0eec66bcde81e7bf",
            "1624dc37720ea0f6",
            "645258b618c6186b",
            "fb3f6458755be846",
            "62f798bf3b269fb8",
            "4eab814831da1cf7",
            "6241ed2b12f12331",
            "37dfca7cd812ec3b",
            "6bdadcca19574473",
            "4ebf2601353294cb",
            "3f207fc52ec0027e",
            "740a027c146249ae",
            "70b30de18eac8972",
            "70016d3833197d68",
            "45838d6ea55cd401"
        ],
        "x": 1494,
        "y": 259,
        "w": 512,
        "h": 722
    },
    {
        "id": "b4e7d28c61065a10",
        "type": "group",
        "z": "3aa03811830ef29e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "f233670d8569fc20",
            "54bfc60418e56a9b",
            "fb74e5d35106e2b9",
            "f9c1a6778b03a810",
            "67a7a74773ea6560",
            "716a35b80ac09a85",
            "c0148bdd1814580f",
            "c2d0c237af80e591",
            "5998c26dd710f4f1",
            "e112c36e957452a3",
            "42db2c5a1500bee2",
            "ee674cfd16767755",
            "f6260e40072e9c45",
            "14fbc980fb2680f1",
            "94f9b89e93918fa6",
            "c96747c13bdcbcd3",
            "9293ce0fe3ffaed3"
        ],
        "x": 1474,
        "y": 999,
        "w": 432,
        "h": 602
    },
    {
        "id": "9ad65d8ac40d3b19",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "SYSTEM HEALTH",
        "info": "",
        "x": 130,
        "y": 140,
        "wires": []
    },
    {
        "id": "59f295a319957fc3",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "LOG",
        "info": "",
        "x": 370,
        "y": 140,
        "wires": []
    },
    {
        "id": "d6c24d84dd4b55eb",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "HW INFORMATION",
        "info": "",
        "x": 630,
        "y": 140,
        "wires": []
    },
    {
        "id": "726819233aa921e5",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "MENU CONFIG",
        "info": "",
        "x": 900,
        "y": 140,
        "wires": []
    },
    {
        "id": "d893e0e05a2f4786",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "ABOUT",
        "info": "",
        "x": 1230,
        "y": 140,
        "wires": []
    },
    {
        "id": "4ad1dd213be1bcfe",
        "type": "ui_ui_control",
        "z": "3aa03811830ef29e",
        "name": "",
        "events": "all",
        "x": 280,
        "y": 60,
        "wires": [
            [
                "c63327653e3140e5"
            ]
        ]
    },
    {
        "id": "b6bd3a764d893318",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "SYSTEM HEALTH",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "favorite",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_SYSTEM_HEALTH\"],\"hide\":[\"SYSTEM_LOG\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_MENU\",\"SYSTEM_ABOUT\",\"SYSTEM_MQTT\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "dbcf60ce513ff3ae",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "to ui control",
        "links": [
            "ad0975065f9323c6",
            "bc563b90430840aa",
            "5837cbf37ef47ea6",
            "ad7996a6a3e6085b",
            "d237190377c1112c",
            "062207b0f6922685"
        ],
        "x": 165,
        "y": 60,
        "wires": [
            [
                "4ad1dd213be1bcfe"
            ]
        ]
    },
    {
        "id": "7d97d279c32a474a",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "ec94eaa0930738be",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "SYSTEM HEALTH",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 130,
        "y": 320,
        "wires": []
    },
    {
        "id": "ad0975065f9323c6",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "name": "link out 24",
        "mode": "link",
        "links": [
            "dbcf60ce513ff3ae"
        ],
        "x": 305,
        "y": 260,
        "wires": []
    },
    {
        "id": "3a86dae674a0f12f",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "LOG",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "history",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_LOG\"],\"hide\":[\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_MENU\",\"SYSTEM_ABOUT\",\"SYSTEM_MQTT\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 390,
        "y": 200,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "d01467831b5376d8",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "HARDWARE",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "memory",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_HW_INFORMATION\"],\"hide\":[\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_MENU\",\"SYSTEM_ABOUT\",\"SYSTEM_LOG\",\"SYSTEM_MQTT\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 610,
        "y": 200,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "c23026d28e7fbe42",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "About",
        "group": "70a5fe6af8ed1d29",
        "order": 9,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "About",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "help",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_ABOUT\"],\"hide\":[\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_MENU\",\"SYSTEM_LOG\",\"SYSTEM_MQTT\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1250,
        "y": 200,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "fa276db3a5fd6186",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "70a5fe6af8ed1d29",
        "name": "Line - Setup ",
        "order": 10,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 110,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "205ffcc404e58973",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "b7f740331bca1b3f",
        "name": "Line - Contributions text",
        "order": 3,
        "width": 7,
        "height": 14,
        "format": "<h3>Heishamon to Node Red</h3>\n<p>Github page: <a href=\"https://github.com/edterbak/NodeRed_Heishamon_control\" target=\"_blank\\\">here</a>.</p>\n</br>\n<h3>Author(s):</h3></br>\nEd ter bak (alias)</br>\n</br>\n\n<h3>Thanks and gratitude goes to:</h3>\nEgyras</br>\nCurlyMo</br>\nAUijtdehaag</br>\nlampy25</br>\ntimovd</br>\nE1cid</br>\nJavaboon</br>\nAikon</br>\nMikeyMan</br>\nblb4</br>\nsjampeter</br>\nThe-Source</br>\nBazemanMK</br>\n</br>\n<b>And a special thanks to:</b></br>\n>>  Maarten69 (alias)  << </br>\n>>  Jens  << </br>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1310,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "3240ca538c2a5df3",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "group": "82f1040c4d704f04",
        "order": 11,
        "width": 7,
        "height": 1,
        "name": "",
        "label": "Select allowed functions",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2490,
        "y": 600,
        "wires": []
    },
    {
        "id": "a42f4f922e494524",
        "type": "trigger",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "",
        "op1": "",
        "op2": "{\"tab\":\"Power\"}",
        "op1type": "nul",
        "op2type": "json",
        "duration": "3",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2530,
        "y": 100,
        "wires": [
            [
                "0b8747d2da0482a3",
                "bc563b90430840aa"
            ]
        ]
    },
    {
        "id": "0b8747d2da0482a3",
        "type": "trigger",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "",
        "op1": "",
        "op2": "{\"tabs\":{\"hide\":[\"Power\"]}}",
        "op1type": "nul",
        "op2type": "json",
        "duration": "3",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2730,
        "y": 100,
        "wires": [
            [
                "bc563b90430840aa"
            ]
        ]
    },
    {
        "id": "bc563b90430840aa",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "link out 25",
        "mode": "link",
        "links": [
            "dbcf60ce513ff3ae"
        ],
        "x": 2375,
        "y": 60,
        "wires": []
    },
    {
        "id": "d43ee06ee34140d5",
        "type": "ui_switch",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "name": "",
        "label": "RTC on/off",
        "tooltip": "",
        "group": "82f1040c4d704f04",
        "order": 12,
        "width": 7,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Allow_function_rtc_onoff",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2450,
        "y": 640,
        "wires": [
            [
                "4120fc9975690028"
            ]
        ]
    },
    {
        "id": "a3a41ed73245a328",
        "type": "ui_switch",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "name": "",
        "label": "Solar",
        "tooltip": "",
        "group": "82f1040c4d704f04",
        "order": 13,
        "width": 7,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Allow_function_solar",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2430,
        "y": 680,
        "wires": [
            [
                "4120fc9975690028"
            ]
        ]
    },
    {
        "id": "50cd2358bc4fed85",
        "type": "ui_switch",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "name": "",
        "label": "Scheduled tasks",
        "tooltip": "",
        "group": "82f1040c4d704f04",
        "order": 14,
        "width": 7,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Allow_scheduled_tasks",
        "topicType": "str",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 2460,
        "y": 720,
        "wires": [
            [
                "4120fc9975690028"
            ]
        ]
    },
    {
        "id": "63c695317a49ea6b",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"tabs\":{\"hide\":[\"Power\"]}}",
        "payloadType": "str",
        "x": 2110,
        "y": 60,
        "wires": [
            [
                "c5e1f08f07eb647b"
            ]
        ]
    },
    {
        "id": "4120fc9975690028",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "name": "off_topic_to_variable",
        "func": "if (msg.topic == 'Allow_function_rtc_onoff'){\n    global.set('MQTT.allow_rtc_onoff',msg.payload,\"file\");\n}\n\nif (msg.topic == 'Allow_scheduled_tasks'){\n    global.set('MQTT.allow_scheduler',msg.payload,\"file\");\n    \n}\nif (msg.topic == 'Allow_function_solar'){\n    global.set('MQTT.allow_solar',msg.payload,\"file\");\n\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2680,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "6a54feb677599729",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "name": "load on boot MQTT",
        "func": "var MQTT  = global.get('MQTT',\"file\"); \n\nlet msg1={};\nlet msg2={};\nlet msg3={};\nlet msg4={};\n\n\n\n\nif (MQTT===undefined){\n    MQTT = {};\n}\n\nif (MQTT.block_active===undefined){\n    MQTT = {};\n    global.set('MQTT.block_active',0,\"file\");\n}\n\nif (MQTT.allow_rtc_onoff===undefined){\n    global.set('MQTT.allow_rtc_onoff',0,\"file\");\n    MQTT.allow_rtc_onoff=0;\n}\n\nif (MQTT.allow_scheduler===undefined){\n    global.set('MQTT.allow_scheduler',0,\"file\"); \n    MQTT.allow_scheduler=0;\n}\n\nif (MQTT.allow_solar===undefined){\n    global.set('MQTT.allow_solar',0,\"file\"); \n    MQTT.allow_solar=0;\n}\nif (MQTT.block_mode===undefined){\n    global.set('MQTT.block_mode',1,\"file\");\n    MQTT.block_mode = 1;\n}\n\n\nmsg1.payload = MQTT.allow_rtc_onoff;\nmsg2.payload = MQTT.allow_scheduler;\nmsg3.payload = MQTT.allow_solar;\n\nif (MQTT.block_mode == 1){msg4.payload = 'MQTT_default_1';}\nif (MQTT.block_mode == 2){msg4.payload = 'MQTT_default_2';}\nif (MQTT.block_mode == 3){msg4.payload = 'MQTT_default_3';}\n\n\nreturn [msg1,msg2,msg3,msg4];\n\n",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 640,
        "wires": [
            [
                "d43ee06ee34140d5"
            ],
            [
                "50cd2358bc4fed85"
            ],
            [
                "a3a41ed73245a328"
            ],
            [
                "28fafb00eff46231",
                "1d0bdc24983833d5"
            ]
        ]
    },
    {
        "id": "510f802795714d75",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "g": "d31e83867f2e0227",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2230,
        "y": 580,
        "wires": [
            [
                "6a54feb677599729"
            ]
        ]
    },
    {
        "id": "ec21e518e2ade1eb",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "shutdown popup (up)",
        "links": [
            "6f8b37b8a4354baf"
        ],
        "x": 2085,
        "y": 100,
        "wires": [
            [
                "0911a9edae380679"
            ]
        ]
    },
    {
        "id": "c5e1f08f07eb647b",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "function 9",
        "func": "var TOP0_Heatpump_State      = global.get('TOP0_Heatpump_State',\"file\");\n\nif (TOP0_Heatpump_State == 1) {\n        return msg;\n    }\n    \n    \n    ",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2260,
        "y": 60,
        "wires": [
            [
                "bc563b90430840aa"
            ]
        ]
    },
    {
        "id": "e5ee81fbd045b5ef",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "Heatpump_State input",
        "links": [
            "a0d8b4706f8d61b1"
        ],
        "x": 1985,
        "y": 1440,
        "wires": [
            [
                "258316e7112c15b4",
                "44cd6ca0f672e121"
            ]
        ]
    },
    {
        "id": "258316e7112c15b4",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "Shutdown detection",
        "func": "if (msg.payload == 1)       { return null; } //exit if power state is on\n\nvar TOP0_Heatpump_State = global.get(\"TOP0_Heatpump_State\", \"file\");\nvar VirtualState = global.get('VirtualState');\n\n\nif (VirtualState == 0) { return null; } // TOP0_Heatpump_State will be 0 soon\n\nvar MQTT_Source = global.get('MQTT_Source'); //Memory Only\nif (MQTT_Source == \"GUI\") { return null; } //continue only if origin mqtt broker\n\n\n\nlet msg99={};   //  pin 2 - info to Log\nlet msg1={};    //  pin 3 - trigger for shutdown\n\nmsg1.source = \"shutdown_detection\";\n\n\n\n\n        msg99.topic = 'POWER';\n        if (msg.source == \"mqtt\"){msg99.payload = 'Manual OFF detected. (Remote Controller)';}\n        var option = global.get('MQTT.block_mode',\"file\");\n\n        if (option === undefined) {\n            msg99.payload = msg99.payload + ' - No default action set yet. No restrictions applied';\n            global.set('MQTT.block_active',0, \"file\");\n            global.set('MQTT.block_mode',3, \"file\");\n            msg1.payload = 0;                           // MQTT-switch payload and pop-up\n            return [msg99,msg1];\n        }        \n        \n        if (option == 1)  {\n            global.set('MQTT.block_active',1, \"file\");\n            msg99.payload = msg99.payload + ' - Default action used: Block all';\n            msg1.payload = 1;                           // MQTT-switch payload and pop-up\n            return [msg99,msg1];               // <<<<< Send MQTT out\n        }\n\n        if (option == 2)  {\n            global.set('MQTT.block_active',1, \"file\");\n            msg99.payload = msg99.payload + ' - Default action used: Block custom';\n            msg1.payload = 1;                           // MQTT-switch payload and pop-up\n            return [msg99,msg1];               // <<<<< Send MQTT out\n        }\n\n        if (option == 3)   {\n            global.set('MQTT.block_active',0, \"file\");\n            msg99.payload = msg99.payload + ' - Default action used: Unrestricted';            \n            msg1.payload = 0;                           // MQTT-switch payload and pop-up\n            return [msg99,msg1];\n        }\n\n\n\n\n\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2220,
        "y": 1440,
        "wires": [
            [
                "71bc363e9bca5fa6"
            ],
            [
                "6f8b37b8a4354baf"
            ]
        ],
        "outputLabels": [
            "info to Log",
            "trigger for shutdown popup (start)"
        ]
    },
    {
        "id": "6f8b37b8a4354baf",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "trigger for shutdown popup (start)",
        "mode": "link",
        "links": [
            "ec21e518e2ade1eb",
            "172fe3f8a616d7b8"
        ],
        "x": 2775,
        "y": 1440,
        "wires": []
    },
    {
        "id": "cc96d0a80f6bdef4",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "trigger for shutdown popup (end)",
        "mode": "link",
        "links": [
            "172fe3f8a616d7b8"
        ],
        "x": 2775,
        "y": 1540,
        "wires": []
    },
    {
        "id": "71bc363e9bca5fa6",
        "type": "rbe",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2450,
        "y": 1660,
        "wires": [
            [
                "9e1b71b301e9e79d"
            ]
        ]
    },
    {
        "id": "9e1b71b301e9e79d",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "link out to log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 2775,
        "y": 1660,
        "wires": []
    },
    {
        "id": "44cd6ca0f672e121",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "Restart detection",
        "func": "// This function also show manual power on/off to log when switch \"Extend debugging\" is active.\n\nmsg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nmsg.topic = 'TOP0_Heatpump_State';\n\nvar TOP0_Heatpump_State      = global.get(\"TOP0_Heatpump_State\",\"file\");\nvar Debugging           = global.get('Debugging', \"file\");\nif (Debugging === undefined) { Debugging = 0; } // used to show more detection to log\n\nvar popup_state         = flow.get('stop_popup');\nif (popup_state === undefined)  {\n    popup_state = 0;\n}\n\nlet msg99={};   //  pin 1 - info to Log\nlet msg1={};    //  pin 2 - trigger popup\nmsg1.source = \"shutdown_detection\";\nlet msg2={};    //  pin 3 - \n\nvar VirtualState = global.get('VirtualState');\n\nvar MQTT = global.get('MQTT',\"file\");\nif (MQTT === undefined){global.set('MQTT',{},\"file\"); return [null,null,null,msg];}\n\n\nif (msg.payload == 1) { \n        msg99.topic = 'POWER';\n        msg99.payload = 'ON detected';\n        if (VirtualState == 0) { msg99.payload = msg99.payload + ' [Remote Controller]'; }\n        if (VirtualState == 1) { msg99.payload = msg99.payload + ' [Flow]'; }\n        msg1.payload = 0;                           // MQTT block value\n\n\n        if (MQTT.block_active == 1  && popup_state == 0) {\n            //get block_mode\n            var value = MQTT.block_mode;\n            var Blockmode = \"undefined\";\n            if (value === 1) { Blockmode = \"BLOCK ALL\"; }\n            if (value === 2) { Blockmode = \"CUSTOM\"; }\n            if (value === 3) { Blockmode = \"UNRESTRICTED\"; }\n            msg2.topic = \"Power on heatpump detected\";\n            msg2.payload = \"</br>   MQTT commands are being blocked (\" + Blockmode + \") </br></br> Resume normal operation? </br> </br> _____________________________________________________ \"\n            return [msg99,null,msg2]\n        }\n\n        flow.set('stop_popup',0);\n        if (Debugging == 1 || VirtualState == 0) { return [msg99, msg1, null]; } else { return [null, msg1, null]; } //only show in log when \"Extend logging\"-switch is enabled or remote controller.\n    }\n    \n    else {\n            msg99.topic = 'POWER';\n            msg99.payload = 'OFF detected';\n    if (VirtualState == 0) { msg99.payload = msg99.payload + ' [Flow]'; }\n            if (VirtualState == 1) { msg99.payload = msg99.payload + ' [Remote Controller]'; }\n\n    if (Debugging == 1 || VirtualState == 1) { return [msg99, null, null]; } else { return [null, null, null]; } //only show in log when \"Extend logging\"-switch is enabled or remote controller.\n}\n\n\n\n\n\n\n",
        "outputs": 4,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2220,
        "y": 1540,
        "wires": [
            [
                "71bc363e9bca5fa6"
            ],
            [
                "cc96d0a80f6bdef4",
                "09edf2907086baf2"
            ],
            [
                "d11ec0cafa6ed09f"
            ],
            []
        ],
        "outputLabels": [
            "info to Log",
            "",
            "",
            "re-evaluate"
        ]
    },
    {
        "id": "d11ec0cafa6ed09f",
        "type": "ui_toast",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "Yes, lift block",
        "cancel": "No, continue block",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 2480,
        "y": 1580,
        "wires": [
            [
                "ab0c73c86987caf3"
            ]
        ]
    },
    {
        "id": "c38da5f9e3ce0d13",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "Power on heatpump detected",
        "payload": "</br>   MQTT commands are being blocked. </br></br> Resume normal operation? </br> </br> _____________________________________________________ ",
        "payloadType": "str",
        "x": 2250,
        "y": 1600,
        "wires": [
            [
                "d11ec0cafa6ed09f"
            ]
        ]
    },
    {
        "id": "ab0c73c86987caf3",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "lift block",
        "func": "//******************************************************************************\nif (msg.payload == \"Yes, lift block\") {\n    global.set('MQTT.block_active',0, \"file\");\n    flow.set('stop_popup',0);\n    \n    let msg1={};\n    let msg2={};\n    \n    msg1.topic = 'SYSTEM';\n    msg1.payload = \"MQTT-Commands to HP will be sent normally.\";\n\n    msg2.payload = 0;\n    msg2.source = \"shutdown_detection\";\n    \n    return [msg1,msg2];\n\n}\n\n//******************************************************************************\nif (msg.payload == \"No, continue block\")    {\n    flow.set('stop_popup',1);\n    \n    return null;\n}\n\n//******************************************************************************\nelse {\n    return null;\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2630,
        "y": 1580,
        "wires": [
            [
                "71bc363e9bca5fa6"
            ],
            [
                "cc96d0a80f6bdef4"
            ]
        ]
    },
    {
        "id": "09edf2907086baf2",
        "type": "change",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tabs\":{\"hide\":[\"hidden_tab1\"]}}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2650,
        "y": 1500,
        "wires": [
            [
                "5837cbf37ef47ea6"
            ]
        ]
    },
    {
        "id": "5837cbf37ef47ea6",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "5c3df7b5fb0fa130",
        "name": "link out 26",
        "mode": "link",
        "links": [
            "dbcf60ce513ff3ae"
        ],
        "x": 2775,
        "y": 1500,
        "wires": []
    },
    {
        "id": "9a3e8e959a51d403",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "To be added on later",
        "info": "",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "0f0ace5816c4fe0a",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "c361a153997d2dfd",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "MENU CONFIG",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "menu",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_MENU\"],\"hide\":[\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_ABOUT\",\"SYSTEM_LOG\",\"SYSTEM_MQTT\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 930,
        "y": 200,
        "wires": [
            [
                "ad0975065f9323c6",
                "c5ae638b1b65bff4"
            ]
        ]
    },
    {
        "id": "cdbfdf626a17263f",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "b7f740331bca1b3f",
        "name": "Line - Changelog",
        "order": 2,
        "width": 17,
        "height": 14,
        "format": "<u>Changelog Summary</u></br>\n\n</br>\nVersion 26.1.1 Beta</br>\nChanges:</br>\n- Fix Chart storage: SoftStart chart. Chart survives restarts now.</br>\n- Fix Chart storage: Efficiency - Energy. Chart survives restarts now.</br>\n- Fix Chart storage: Efficiency - Efficiency. Chart survives restarts now.</br>\n- Fix Boot behavior: Heat Delta, Cool Delta and SetHeaterDelayTime during startup.</br>\n- Fix MQTT: Do not start command checking when not all current values are known.</br>\n- Fix MQTT: Command checking functionality now first looks if the actual value is already the same as the new command value. If so, it does not perform the checking loop.</br>\n</br>\n\n</br>\nVersion 25.06 (! Beta 6 !)</br>\nChanges:</br>\n- Enhancement: Merged both Compare SP (z1) and (z2) functions into a single function. This reduces simultaneous sending of the same setcurve mqtt command.</br>\n- Enhancement: Modified the function to check all sent MQTT commands. Now command prefix independant.</br>\n- Enhancement: Added a small function to throttle the amount of MQTT commands being sent ad a time. Rate limit is set  to 1 per 7 seconds. All commands are queued. </br>\n- Fix Scheduler: some conditions did not pass with '==='. fixed.</br>\n</br>\n\n</br>\nVersion 25.06 (! Beta 5 !)</br>\nChanges:</br>\n- Fix Softstart: Buffertank enabled would have bad performance. Variable was not initialized propperly.</br>\n- Fix Zone2: No change in setpoint being sent other than 0 or 1. There was a math error.</br>\n- Fix Zone2: MQTT Comand spamming resolved.</br>\n- New Feature: Created a generic control mechanism to verify sent commands have been processed. If not, a retry is initiated with a maximum retrycount of 3 for each topic. This is done for a couple of the most important commands.</br>\n- Added an auto-tuning noice filter to the input sensors by default.</br>\n- Fix Scheduler: Toggle functions to accomadate zone 1 and zone 2 were not adjusted yet. Now they should be working</br>\n- Fix Scheduler: Removing line 2 did not work. Now it does. \n- Fix QoS: Heishamon does not support QoS 1 or 2. Forced all mqtt topics/commands back to 0 again. \n</br>\n\n\n</br>\nVersion 25.06 (! Beta 4 !)</br>\nChanges:</br>\n- Fix SP_Final: Initial calculation did not resolve. Resulting in no mqtt commands being sent to set heat</br>\n- Enhancement: Introduced 'Kalman' filter for jitter reduction on custom sensors for T-outside and T-inside\n\n</br>\nVersion 25.06 (! Beta 3 !)</br>\nChanges:</br>\n- Fix CCC: Incorrectly used TOP27 instead of TOP42/TOP43 for zone 1/2. Corrected this.</br>\n- Improvement: HEAT commands are being sent in more situations now. Even when DHW-only is active.<br>\n- Improvement: SoftStart function. Logic revised to have less limitations.<br>\n- Improvement: SoftStart function. More information in the softstart tab <br>\n- Improvement: The resending of Set Heat commands is abandoned. I now assume a sent message will be received. No active checking every 28seconds anymore.<br>\n- Improvement: Dashboard generic. Layout changes, making it more uniform (half way through the process now)<br>\n- Improvement: Scheduler conditions - Modified the lowerlimit of the outside temperature condition from 0 to -20</br>\n</br>\n\n</br>\nVersion 25.06 (! Beta 2 !)</br>\nChanges:</br>\n- Fix CCC: In Direct mode, disabling CCC function set the target temperature to 20 instead of the given setpoint.</br>\n- Fix SoftStart: When using buffertank and softstart together, the setpoint could be set too low, triggering the compressor-stop.</br>\n- Enhancement: PumpSpeed function added the active mode in the graph (Mode 0=Function off / 1=Low / 2=HEAT / 3=DHW)</br>\n- Enhancement: Added a LOT of additional external link-in nodes in WP Input tab. </br>\n</br>\n\n</br>\nVersion 25.06 (! Beta 1 !)</br>\nChanges:</br>\n- Fix SoftStart: Aligned the function to operate better with 2 zones</br>\n- Fix SoftStart: Fixed an error in fetching RTC z2 result. It was fetching RTC z1 result</br>\n- Fix CCC: Zone 2 logic was different from Zone 1 logic</br>\n- Enhancement: Added a LOT of new external input options in the tab [WP Input] (WIP)</br>\n</br>\n\n</br>\nVersion 25.05 (! ALPHA 8!)</br>\nChanges:</br>\n- Fixed SoftStart function. It was dead...</br>\n- Changed a little bit on logging for 2 zones. Should be quieter now in the log</br>\n<br>\n\n</br>\nVersion 25.05 (! ALPHA 7!)</br>\nChanges:</br>\n- Fixed zone 1 being set instead of zone 2</br>\n- Fixed SoftStart graph not showing actual calculated setpoint</br>\n- Modified SoftStart function to compensate for buffertank usage</br>\n- Improved Temperature graph</br>\n- Modified additional T outside, T sensor Z1+Z2 logic again. </br>\n</br>\n\n</br>\nVersion 25.05 (!ALPHA 6!)</br>\nChanges:</br>\n- Fixed CCC zone 1 toggle refucing to play nice with us</br>\n- Fixed Final water temperature for zone 2 (not updating)</br>\n- </br>\n</br>\n\n\n</br>\nVersion 25.05 (!ALPHA 5!)</br>\nChanges:</br>\n- Fixed MQTT command: SetCurve NULL spam-issue.</br>\n- Added boot note to inform users</br>\n- Improved cold boot startup logic in general. Not perfect yet, but way better.</br>\n</br>\n\n</br>\nVersion 25.05 (!ALPHA 4!)</br>\nChanges:</br>\n- Added logic about the selected p1 meter-type so it does not forget the selected value in the dashboard.</br>\n- Added delay funtionality to \"Auto start DHW\" option. Popup and all. </br>\n- Improved on Solar²DHW dashboard. Tried to reduce too large datasets to prevent loading issues.</br>\n\n\n</br>\nVersion 25.04 (!ALPHA! 3)</br>\nChanges:</br>\n- Fixed Scheduler which did not work at all. Disabled trigger > Enable.</br>\n- Changed the button actions for zone 1 and 2 to not remove a chart</br>\n- Changed the storege of RTC chart to make it more robust</br>\n- Added Zone 1 and Zone 2 above the RTC charts to make it more clear what is selected.</br>\n- Removed some entries for Zone 2 in Settings tab.</br>\n- Moved Zone 2 Cool from Settings tab to Home tab. </br>\n</br>\n\n</br>\nVersion 25.03 (!ALPHA! 2)</br>\n</br>\nChanges:</br>\n- Renamed the WAR function to CCC function. WAR is Dutch for Weers Afhenkelijke Regeling. CCC is Custom Compensation Curve. Seems more logical and intuitive..<br>\n- Changed all variables related to CCC function to a structured F_CCC.z1... version.<br>\n- Added 2nd zone for CCC function. <br>\n- Changed all variables related to RTC function to a structured F_RTC.z1 and F_RTC.z2 version.<br>\n- Added 2nd zone for RTC function.<br>\n- In System > Sensors: Added an extra sensor for RTC zone 2<br>\n- Modified COOL function: Safety margin of 0 now possible. Added this in the HELP section.<br>\n- Improved Scheduler: The schedule # is now shown in GUI and it should be shown in the log.<br>\n- Fixed COOL function: The flow was sending 2 decimal accurate setpoints, resulting in a lot of mqtt commands being needlessly sent. Now the target is rounded to the whole digit. <br>\n- Scheduler tasks are adjusted to function for Zone 1 or/and Zone 2<br>\n\n\n</br>\nVersion 25.02 (Stable)</br>\n</br>\nChanges:</br>\n- Attempt to fix \"Boost DHW now\" funciton. Switching to COOL mode when DHW mode is already active.<br>\n- Added Energy production for HEAT and DHW bar-chart. Thanks to WP-Rue !!!</br>\n- Added BufferTankDelta to the settings page</br>\n- Added BufferTank info in SYSTEM > Hardware page</br>\n- Improved WP Input tab a lot on connections from external sources. Much clearer</br>\n</br>\n\nVersion 25.01 (Stable)</br>\n</br>\nChanges:</br>\n- Added \"Use Force DHW\" toggle on Solar²DHW tab. This can be enabled to solve DHW runs which never end.<br>\n- Attempt to fix possible blanc MQTT commands to OperatingMode after BOOST DHW now function.<br>\n- Attempt to fix Boost DHW now toggle 'sticking'\n</br>\n</br>\n\nVersion 25.00 (Stable)</br>\n</br>\nMajor changes:</br>\n- Firmware Support: Added compatibility with Heishamon Firmware 3.9</br>\n- SoftStart function rewrite: now with improved relax frequency and TCAP recognition</br>\n- Scheduler Enhancements: Added more actions</br>\n- Scheduler Enhancements: Added more advanced conditions (room/outside temperature thresholds)</br>\n- Sensors: Added extra 1-wire sensor support to show in graphs of DHW, HEAT, and ROOM temps</br>\n</br>\n</br>\nSoftStart function:</br>\n- SoftStart Fixes: Resolved bugs related to defrost phase and startup loops</br>\n</br>\nRTC function:</br>\n- Multiple improvements to prevent premature triggering</br>\n- Multiple improvements for the reverting actions</br>\n- MQTT Fixes: Eliminated repeating commands like SetZ1CoolRequestTemperature</br>\n</br>\nCharts & UI Improvements:</br>\n- Home screen: If Fan2 is present, it will show up (and stay) after first value enters.</br>\n- Home screen: Added Heater, it will show up (and stay) after first value enters. And when active, it will light up.</br>\n- Translated some chart labels from Dutch to English</br>\n</br>\nSolar²DHW:</br>\n- Forced DHW-only mode during a run for better compatibility with HEAT+DHW</br>\n- Improved kWh calculations and graph visuals</br>\n- More robust energy tracking in Solar²DHW (fixed NaNs, graph is now more robust, but could increase loading a bit)</br>\n- Moved P1 setup to [SYSTEM] > [SENSORS] tab. Much better.</br>\n</br>\nMiscellaneous Fixes:</br>\n- Reading Panasonic details logic rewritten for fw3.9</br>\n- Powerful mode toggle fix</br>\n- Pressure readout (TOP115) added</br>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1300,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "51c0bb5ee4bb4f0f",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "name": "Line - Setup ",
        "order": 2,
        "width": 12,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2390,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "bffa098ab7b94669",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "name": "Line - ATTENTION top text",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<H1>Manual OFF button press detected on the controller</H1>\nPlease select how the Node Red flow should continue to behave.</br></br>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2440,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "28fafb00eff46231",
        "type": "ui_dropdown",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "00f6a5c103e9ef2f",
        "order": 3,
        "width": 5,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "BLOCK ALL",
                "value": "MQTT_default_1",
                "type": "str"
            },
            {
                "label": "CUSTOM",
                "value": "MQTT_default_2",
                "type": "str"
            },
            {
                "label": "UNRESTRICTED",
                "value": "MQTT_default_3",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 2380,
        "y": 1140,
        "wires": [
            [
                "376a174e36667b9d"
            ]
        ]
    },
    {
        "id": "eb0c82f6553d8182",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "group": "82f1040c4d704f04",
        "order": 16,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Unrestricted",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "MQTT_default_3",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 2390,
        "y": 900,
        "wires": [
            [
                "28fafb00eff46231",
                "1d0bdc24983833d5"
            ]
        ]
    },
    {
        "id": "96d1b2a3bba37ab3",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "group": "82f1040c4d704f04",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Custom",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "MQTT_default_2",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 2380,
        "y": 540,
        "wires": [
            [
                "28fafb00eff46231",
                "1d0bdc24983833d5"
            ]
        ]
    },
    {
        "id": "9439217717d533c8",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "group": "82f1040c4d704f04",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Block all",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "MQTT_default_1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 2380,
        "y": 400,
        "wires": [
            [
                "28fafb00eff46231",
                "1d0bdc24983833d5"
            ]
        ]
    },
    {
        "id": "e45c612a7cd81bca",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 17,
        "width": 9,
        "height": 2,
        "name": "Unrestricted text",
        "label": "All Node Red functions will stay active. If you have set the RTC on/off function, it will be able to turn on the heatpump automatically. If the solar function is enabled, it will be able to turn on the heatpump automatically.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2400,
        "y": 940,
        "wires": []
    },
    {
        "id": "78ea8dcdc912cc07",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 8,
        "width": 9,
        "height": 2,
        "name": "Custom text",
        "label": "In the \"Custom settings\" section you can specify which action will be allowed to keep functioning when you manually turned off the heatpump.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2550,
        "y": 540,
        "wires": []
    },
    {
        "id": "280ef51b4c314e1a",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 4,
        "width": 9,
        "height": 2,
        "name": "Block all text",
        "label": "This mode will not allow any command to be sent to the heatpump. This means the heatpump will never turn on automatically. This needs to be done manually.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2550,
        "y": 400,
        "wires": []
    },
    {
        "id": "fdd9c7ec95eff575",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "name": "Line - attentiontab1",
        "order": 6,
        "width": 12,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2410,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "142d3fc7ce50b860",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "name": "Line - attentiontab2",
        "order": 15,
        "width": 12,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2410,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "ab61cc041f990a5e",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "name": "Line - attentiontab3",
        "order": 1,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>Default</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2410,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "b0db0c075b6cada4",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 5,
        "width": 3,
        "height": 1,
        "name": "spacer 1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2380,
        "y": 440,
        "wires": []
    },
    {
        "id": "5c678c17c0272bd7",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 9,
        "width": 3,
        "height": 5,
        "name": "spacer 2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2380,
        "y": 580,
        "wires": []
    },
    {
        "id": "f68241d2cf6a74e8",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 18,
        "width": 3,
        "height": 1,
        "name": "spacer 3",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2380,
        "y": 980,
        "wires": []
    },
    {
        "id": "110b1d924469e409",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Attention setdefault",
        "label": "Current default",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 2410,
        "y": 1100,
        "wires": []
    },
    {
        "id": "338e6b81ea5e1e06",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "order": 5,
        "width": 8,
        "height": 2,
        "name": "attention setdefault text",
        "label": "When a default action is set, this will automatically be executed from that moment onward.",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2430,
        "y": 1260,
        "wires": []
    },
    {
        "id": "59ac957754893b83",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "name": "Line - attentiontab4",
        "order": 4,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2410,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "6be67176d1f660cc",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "MQTT.block_mode",
        "func": "/*\nMQTT.\nblock_mode - 1 - BLOCK ALL\nblock_mode - 2 - CUSTOM\nblock_mode - 3 - UNRESTRICTED\n*/\n\nif (msg.source == \"block_switch\") return null; //do nothing just updated combobox only\n\n\nvar Block_mode = global.get('MQTT.block_mode',\"file\");\n\nif (msg.payload == \"MQTT_default_1\" && Block_mode != 1){\n    global.set('MQTT.block_mode',1,\"file\");    //off_default_1 - BLOCK ALL\n    global.set('MQTT.block_mode_previous', 1, \"file\");\n}\n\nif (msg.payload == \"MQTT_default_2\" && Block_mode != 2){\n    global.set('MQTT.block_mode',2,\"file\");        //off_default_2 - CUSTOM\n    global.set('MQTT.block_mode_previous', 2, \"file\");\n}\n\nif (msg.payload == \"MQTT_default_3\" && Block_mode != 3) {\n    global.set('MQTT.block_mode',3,\"file\");        //off_default_3 - UNRESTRICTED\n    global.set('MQTT.block_mode_previous', 3, \"file\");\n    global.set('MQTT.block_active', 0, \"file\"); //lift block after selecting action\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2830,
        "y": 1160,
        "wires": [
            [
                "867fcdc764bf28f1",
                "f9048baa0aa4d07d"
            ]
        ]
    },
    {
        "id": "05b0e21936f66dca",
        "type": "change",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": " ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2150,
        "y": 1140,
        "wires": [
            [
                "28fafb00eff46231",
                "319c435620e4980f",
                "1d0bdc24983833d5"
            ]
        ]
    },
    {
        "id": "498c5eb0c718380d",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "clear selection",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2170,
        "y": 1100,
        "wires": [
            [
                "05b0e21936f66dca"
            ]
        ]
    },
    {
        "id": "776cbfd355ed920f",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "->Notify!",
        "mode": "link",
        "links": [
            "c764c19340b7b720"
        ],
        "x": 2935,
        "y": 1120,
        "wires": []
    },
    {
        "id": "e335ee2f6e1f9957",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "Notification and log",
        "info": "",
        "x": 2830,
        "y": 1000,
        "wires": []
    },
    {
        "id": "f4fa02505ab621d5",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "82f1040c4d704f04",
        "order": 10,
        "width": 2,
        "height": 4,
        "name": "spacer 5",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2480,
        "y": 620,
        "wires": []
    },
    {
        "id": "319c435620e4980f",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "reset default_selection",
        "func": "if (msg.payload == \"\")   {\n    global.set('MQTT.block_mode',undefined,\"file\");\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2200,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "867fcdc764bf28f1",
        "type": "rbe",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2790,
        "y": 1100,
        "wires": [
            [
                "776cbfd355ed920f",
                "e8e1e41f1c85ca7a",
                "1f82dc785dc48abf"
            ]
        ]
    },
    {
        "id": "a53f9fb190ca01ea",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "ATTENTION",
        "info": "",
        "x": 2170,
        "y": 300,
        "wires": []
    },
    {
        "id": "ac8ee41d4f78120e",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "Default --------------------------------------------------------------------------------------",
        "info": "",
        "x": 2350,
        "y": 1020,
        "wires": []
    },
    {
        "id": "43bf696dbf416cb0",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "group": "00f6a5c103e9ef2f",
        "order": 8,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "Actual status only, no button.",
        "color": "{{msg.color}}",
        "bgcolor": "{{msg.bgcolor}}",
        "className": "",
        "icon": "",
        "payload": "999",
        "payloadType": "num",
        "topic": "button_press",
        "topicType": "str",
        "x": 2590,
        "y": 1340,
        "wires": [
            [
                "a3eab03124fb697b"
            ]
        ]
    },
    {
        "id": "7257e77181b2e1a4",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "name": "Line - attentiontab5",
        "order": 6,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>MQTT block status</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2410,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "cb7b5a6a14926482",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "order": 9,
        "width": 5,
        "height": 1,
        "name": "MQTT commands are being",
        "label": "",
        "format": "{{msg.result}}",
        "layout": "row-left",
        "className": "",
        "x": 2380,
        "y": 1340,
        "wires": []
    },
    {
        "id": "6c31c89912e87024",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "00f6a5c103e9ef2f",
        "name": "Line - attentiontab6",
        "order": 10,
        "width": 8,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 2410,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "5945f577b64bd499",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "link in to block_button",
        "links": [
            "c3c58f9072c16f58"
        ],
        "x": 2625,
        "y": 1300,
        "wires": [
            [
                "f9048baa0aa4d07d"
            ]
        ]
    },
    {
        "id": "00b957e057fd4843",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "link out to block_toggle",
        "mode": "link",
        "links": [
            "172fe3f8a616d7b8"
        ],
        "x": 2945,
        "y": 1340,
        "wires": []
    },
    {
        "id": "f9048baa0aa4d07d",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "function 11",
        "func": "var block_active = global.get('MQTT.block_active',\"file\");\n\nif (block_active == 0) { msg.payload = 0; }\nif (block_active == 1) { msg.payload = 1; }\n\nif (msg.payload == 1){\n    msg.label = \"block\";\n    msg.color = \"white\";\n    msg.bgcolor = \"red\";\n    msg.result = \"MQTT commands are blocked\";\n}\nif (msg.payload == 0){\n    msg.label = \"allow\";\n    msg.color = \"white\";\n    msg.bgcolor = \"green\";\n    msg.result = \"MQTT commands are allowed\";\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2810,
        "y": 1300,
        "wires": [
            [
                "43bf696dbf416cb0",
                "cb7b5a6a14926482",
                "fb74e5d35106e2b9",
                "f9c1a6778b03a810"
            ]
        ],
        "outputLabels": [
            "to button"
        ]
    },
    {
        "id": "a3eab03124fb697b",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "function 12",
        "func": "if (msg.payload == 999) return null; // exit, do not act as a button (show status only)\n\n\nvar block_active = global.get('MQTT.block_active',\"file\");\n\n\nif (msg.topic == \"button_press\"){\n    if (block_active == 1){msg.payload = 0;}\n    if (block_active == 0){msg.payload = 1;}\n}\n\n\nif (msg.payload == 1){\n    msg.label = \"block\";\n    msg.color = \"white\";\n    msg.bgcolor = \"red\";\n    msg.result = \"MQTT commands are blocked\";\n}\nif (msg.payload == 0){\n    msg.label = \"allow\";\n    msg.color = \"white\";\n    msg.bgcolor = \"green\";\n    msg.result = \"MQTT commands are allowed\";\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2810,
        "y": 1340,
        "wires": [
            [
                "43bf696dbf416cb0",
                "cb7b5a6a14926482",
                "00b957e057fd4843",
                "fb74e5d35106e2b9",
                "f9c1a6778b03a810"
            ]
        ],
        "outputLabels": [
            "to button"
        ]
    },
    {
        "id": "376a174e36667b9d",
        "type": "rbe",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 2650,
        "y": 1160,
        "wires": [
            [
                "6be67176d1f660cc"
            ]
        ]
    },
    {
        "id": "e8e1e41f1c85ca7a",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "to update block_mode MQTT_block button",
        "mode": "link",
        "links": [
            "d2415b149ef2f275"
        ],
        "x": 2935,
        "y": 1080,
        "wires": []
    },
    {
        "id": "1f82dc785dc48abf",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "log",
        "func": "/*\nMQTT.\nblock_mode - 1 - BLOCK ALL\nblock_mode - 2 - CUSTOM\nblock_mode - 3 - UNRESTRICTED\n*/\n\nvar Block_mode = global.get('MQTT.block_mode', \"file\") || \"not set\";\nif (Block_mode == 1) Block_mode = \"BLOCK ALL\";\nif (Block_mode == 2) Block_mode = \"CUSTOM\";\nif (Block_mode == 3) Block_mode = \"UNRESTRICTED\";\n\nvar Block_active = global.get('MQTT.block_active', \"file\");\nif (Block_active == 0) Block_active = \"MQTT block inactive\";\nif (Block_active == 1) Block_active = \"<b>MQTT block active</b>\";\n\nmsg.topic = \"SYSTEM\";\nmsg.payload = Block_active + \", default block mode: \" + Block_mode;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2790,
        "y": 1040,
        "wires": [
            [
                "ce0115cd2e7f2ac7"
            ]
        ]
    },
    {
        "id": "ce0115cd2e7f2ac7",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "to input LOGS",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 2935,
        "y": 1040,
        "wires": []
    },
    {
        "id": "419fb911b5aa7d3e",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "update dropdown box with block_mode status",
        "links": [
            "bb5e36b2c205a984"
        ],
        "x": 2085,
        "y": 1060,
        "wires": [
            [
                "646815dd1d600ff2"
            ]
        ]
    },
    {
        "id": "646815dd1d600ff2",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "change",
        "func": "// convert payload to block_mode name (used by combobox)\nlet msg1 = {};\nmsg1.source = \"block_switch\";\n\nif (msg.payload == 1) msg1.payload = \"MQTT_default_1\"; // BLOCK_ALL\nif (msg.payload == 2) msg1.payload = \"MQTT_default_2\"; // BLOCK CUSTOM\nif (msg.payload == 3) msg1.payload = \"MQTT_default_3\"; // UNRESTRICTED \n\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2180,
        "y": 1060,
        "wires": [
            [
                "28fafb00eff46231",
                "1d0bdc24983833d5"
            ]
        ]
    },
    {
        "id": "775b498383c88430",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "MQTT",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "wifi",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_MQTT\"],\"hide\":[\"SYSTEM_ABOUT\",\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_MENU\",\"SYSTEM_LOG\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 1581,
        "y": 201,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "2d8b1e1ac57fc5ec",
        "type": "comment",
        "z": "3aa03811830ef29e",
        "name": "MQTT",
        "info": "",
        "x": 1550,
        "y": 140,
        "wires": []
    },
    {
        "id": "a8d0be4408703f65",
        "type": "mqtt in",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "name": "",
        "topic": "panasonic_heat_pump/stats",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1640,
        "y": 360,
        "wires": [
            [
                "bf4e74cd2b591a26"
            ]
        ]
    },
    {
        "id": "bf4e74cd2b591a26",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "name": "Processing",
        "func": "let msg1={};\nlet msg2={};\nlet msg3={};\nlet msg4={};\nlet msg5={};\nlet msg6={};\nlet msg7={};\nlet msg8={};\nlet msg9={};\nlet msg10={};\nlet msg11={};\nlet msg12={};\n\nmsg1.payload = msg.payload.uptime;\nmsg2.payload = msg.payload.voltage\nmsg3.payload = msg.payload[\"free memory\"]\nmsg4.payload = msg.payload.wifi\nmsg5.payload = msg.payload[\"mqtt reconnects\"]\nmsg6.payload = msg.payload[\"total reads\"]\nmsg7.payload = msg.payload[\"good reads\"]\nmsg8.payload = msg.payload[\"bad crc reads\"]\nmsg9.payload = msg.payload[\"bad header reads\"]\nmsg10.payload = msg.payload[\"too short reads\"]\nmsg11.payload = msg.payload[\"too long reads\"]\nmsg12.payload = msg.payload[\"timeout reads\"]\n\nreturn [msg1,msg2,msg3,msg4,msg5,msg6,msg7,msg8,msg9,msg10,msg11,msg12]\n\n",
        "outputs": 12,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1590,
        "y": 500,
        "wires": [
            [
                "4ebf2601353294cb"
            ],
            [
                "cba9af7ca5d830ba"
            ],
            [
                "a6a546d71cb6c3c9"
            ],
            [
                "0eec66bcde81e7bf"
            ],
            [
                "1624dc37720ea0f6"
            ],
            [
                "645258b618c6186b"
            ],
            [
                "fb3f6458755be846"
            ],
            [
                "62f798bf3b269fb8"
            ],
            [
                "4eab814831da1cf7"
            ],
            [
                "6241ed2b12f12331"
            ],
            [
                "37dfca7cd812ec3b"
            ],
            [
                "6bdadcca19574473"
            ]
        ]
    },
    {
        "id": "cba9af7ca5d830ba",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 30,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Voltage",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 1780,
        "y": 740,
        "wires": []
    },
    {
        "id": "a6a546d71cb6c3c9",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 24,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Free memory",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "className": "",
        "x": 1590,
        "y": 760,
        "wires": []
    },
    {
        "id": "0eec66bcde81e7bf",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 28,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Wifi signal",
        "format": "{{msg.payload}} %",
        "layout": "row-spread",
        "className": "",
        "x": 1790,
        "y": 780,
        "wires": []
    },
    {
        "id": "1624dc37720ea0f6",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 36,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "MQTT reconnects",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1610,
        "y": 800,
        "wires": []
    },
    {
        "id": "645258b618c6186b",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 39,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Total reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1790,
        "y": 820,
        "wires": []
    },
    {
        "id": "fb3f6458755be846",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 23,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Good reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1590,
        "y": 840,
        "wires": []
    },
    {
        "id": "62f798bf3b269fb8",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 29,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Bad CRC reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1800,
        "y": 860,
        "wires": []
    },
    {
        "id": "4eab814831da1cf7",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 33,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Bad header reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1610,
        "y": 880,
        "wires": []
    },
    {
        "id": "6241ed2b12f12331",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 40,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Too short reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1800,
        "y": 900,
        "wires": []
    },
    {
        "id": "37dfca7cd812ec3b",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 37,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Too long reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1600,
        "y": 920,
        "wires": []
    },
    {
        "id": "6bdadcca19574473",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 42,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Timeout reads",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1800,
        "y": 940,
        "wires": []
    },
    {
        "id": "4ebf2601353294cb",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "name": "Uptime translate",
        "func": "let msg0={};//seconds\nlet msg1={};//minutes\nlet msg2={};//hours\nlet msg3={};//days\nlet msg4={};//years\nlet msg5={};//combo\n\nvar D;\nvar Y;\n\n//*****year\nmsg4.payload = msg.payload / ( 1000*60*60*24*365);\nmsg4.payload = Math.floor(msg4.payload);\nif (msg4.payload > 1) {Y = 'Years/';}\nif (msg4.payload <= 1) {Y = 'Year/';}\n\n//*****days\nmsg3.payload = msg.payload - (msg4.payload * ( 1000*60*60*24*365));\nmsg3.payload = msg3.payload / ( 1000*60*60*24);\nmsg3.payload = Math.floor(msg3.payload);\n\nif (msg3.payload > 1) {D = ' Days, ';}\nif (msg3.payload <= 1) {D = ' Day, ';}\n\n//*****hours\nmsg2.payload = msg.payload - (msg4.payload * ( 1000*60*60*24*365)) - (msg3.payload * ( 1000*60*60*24));\nmsg2.payload = msg2.payload / ( 1000*60*60);\nmsg2.payload = Math.floor(msg2.payload);\n//msg2.payload = msg2.payload.padStart(2)\nmsg2.payload = msg2.payload.toString().padStart(2,\"0\")\n\n\n//*****minutes\nmsg1.payload = msg.payload - (msg4.payload * ( 1000*60*60*24*365)) - (msg3.payload * ( 1000*60*60*24)) - (msg2.payload * ( 1000*60*60));\nmsg1.payload = msg1.payload / ( 1000*60);\nmsg1.payload = Math.floor(msg1.payload);\nmsg1.payload = msg1.payload.toString().padStart(2,\"0\")\n\n//*****seconds\nmsg0.payload = msg.payload - (msg4.payload * ( 1000*60*60*24*365)) - (msg3.payload * ( 1000*60*60*24)) - (msg2.payload * ( 1000*60*60)) -  (msg1.payload * ( 1000*60));\nmsg0.payload = msg0.payload / 1000;\nmsg0.payload = Math.floor(msg0.payload);\nmsg0.payload = msg0.payload.toString().padStart(2,\"0\")\n\n\n//////////////////////////////////////////////\nif (msg4.payload >= 1)  { msg5.payload = msg4.payload + Y +  msg3.payload + D + msg2.payload + \"h\" + msg1.payload + \" \" + msg0.payload + \"s\";    }\nelse                    { msg5.payload =                     msg3.payload + D + msg2.payload + \"h\" + msg1.payload + \" \" + msg0.payload + \"s\";    }\n\n\nreturn [msg5];\n\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 720,
        "wires": [
            [
                "3f207fc52ec0027e"
            ]
        ],
        "outputLabels": [
            "Uptime"
        ]
    },
    {
        "id": "3f207fc52ec0027e",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 32,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Uptime",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1780,
        "y": 720,
        "wires": []
    },
    {
        "id": "740a027c146249ae",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "name": "Line - Heishamon information",
        "order": 21,
        "width": 0,
        "height": 0,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left><b>Heishamon information</b></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1640,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "f233670d8569fc20",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "name": "Line - MQTT Block",
        "order": 1,
        "width": 24,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left><b>MQTT Block</b></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1590,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "54bfc60418e56a9b",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 3,
        "width": 7,
        "height": 5,
        "name": "spacer 0",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1560,
        "y": 1220,
        "wires": []
    },
    {
        "id": "fb74e5d35106e2b9",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "name": "",
        "group": "d95eca50f9342e76",
        "order": 8,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "{{msg.label}}",
        "tooltip": "Actual status only, no button.",
        "color": "{{msg.color}}",
        "bgcolor": "{{msg.bgcolor}}",
        "className": "",
        "icon": "",
        "payload": "999",
        "payloadType": "num",
        "topic": "button_press",
        "topicType": "str",
        "x": 1550,
        "y": 1120,
        "wires": [
            [
                "a3eab03124fb697b"
            ]
        ]
    },
    {
        "id": "f9c1a6778b03a810",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 10,
        "width": 5,
        "height": 1,
        "name": "MQTT commands are being",
        "label": "",
        "format": "{{msg.result}}",
        "layout": "row-left",
        "className": "",
        "x": 1760,
        "y": 1120,
        "wires": []
    },
    {
        "id": "67a7a74773ea6560",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 12,
        "width": 4,
        "height": 1,
        "name": "Attention setdefault",
        "label": "Default blockmode",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 1590,
        "y": 1180,
        "wires": []
    },
    {
        "id": "716a35b80ac09a85",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 2,
        "width": 9,
        "height": 1,
        "name": "",
        "label": "Current settings",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1580,
        "y": 1080,
        "wires": []
    },
    {
        "id": "c0148bdd1814580f",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 7,
        "width": 1,
        "height": 1,
        "name": "spacer 01x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1570,
        "y": 1260,
        "wires": []
    },
    {
        "id": "c2d0c237af80e591",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 9,
        "width": 1,
        "height": 1,
        "name": "spacer 01x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1570,
        "y": 1300,
        "wires": []
    },
    {
        "id": "0911a9edae380679",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "g": "404eed4ef9d90803",
        "name": "",
        "group": "d95eca50f9342e76",
        "order": 5,
        "width": 2,
        "height": 1,
        "passthru": true,
        "label": "Setup",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tabs\":{\"show\":[\"Power\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 2270,
        "y": 100,
        "wires": [
            [
                "bc563b90430840aa",
                "a42f4f922e494524"
            ]
        ]
    },
    {
        "id": "5998c26dd710f4f1",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 6,
        "width": 1,
        "height": 1,
        "name": "spacer 01x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1570,
        "y": 1360,
        "wires": []
    },
    {
        "id": "e112c36e957452a3",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 4,
        "width": 5,
        "height": 1,
        "name": "Setup shutdown response",
        "label": "Setup shutdown response",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "x": 1610,
        "y": 1400,
        "wires": []
    },
    {
        "id": "cfcc8b51c90050ac",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "group": "d95eca50f9342e76",
        "order": 13,
        "width": 5,
        "height": 1,
        "name": "current blockmode payload",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 2760,
        "y": 900,
        "wires": []
    },
    {
        "id": "1d0bdc24983833d5",
        "type": "function",
        "z": "3aa03811830ef29e",
        "g": "8fe25c73d37fe670",
        "name": "Translate",
        "func": "if (msg.payload == 'MQTT_default_1'){\n    msg.payload = 'BLOCK ALL';\n}\n\n\nif (msg.payload == 'MQTT_default_2'){\n    msg.payload = 'CUSTOM';\n    \n}\n\nif (msg.payload == 'MQTT_default_3'){\n    msg.payload = 'UNRESTRICTED';\n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2680,
        "y": 940,
        "wires": [
            [
                "cfcc8b51c90050ac"
            ]
        ]
    },
    {
        "id": "42db2c5a1500bee2",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 19,
        "width": 9,
        "height": 1,
        "name": "spacer 04",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1560,
        "y": 1440,
        "wires": []
    },
    {
        "id": "ee674cfd16767755",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 34,
        "width": 6,
        "height": 4,
        "name": "spacer 2x2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1610,
        "y": 1520,
        "wires": []
    },
    {
        "id": "f6260e40072e9c45",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 38,
        "width": 6,
        "height": 3,
        "name": "spacer 2x2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1610,
        "y": 1560,
        "wires": []
    },
    {
        "id": "4dfd92d952236e82",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "4a119e18236415e9",
        "name": "Line - DASHBOARD CONFIGURATION",
        "order": 13,
        "width": 24,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left><b>DASHBOARD CONFIGURATION</b></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1000,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "e4a4fc20462d5562",
        "type": "ui_form",
        "z": "3aa03811830ef29e",
        "name": "group - Home screen",
        "label": "Home",
        "group": "4a119e18236415e9",
        "order": 9,
        "width": 4,
        "height": 1,
        "options": [
            {
                "label": "HEAT (zone 1)",
                "value": "Home_HEAT_(zone_1)",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "HEAT (zone 2)",
                "value": "Home_HEAT_(zone_2)",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "DHW",
                "value": "Home_DHW",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "COOL",
                "value": "Home_COOL",
                "type": "checkbox",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "Home_HEAT_(zone_1)": false,
            "Home_HEAT_(zone_2)": false,
            "Home_DHW": false,
            "Home_COOL": false
        },
        "payload": "",
        "submit": "Set",
        "cancel": "cancel",
        "topic": "group",
        "topicType": "str",
        "splitLayout": false,
        "className": "",
        "x": 920,
        "y": 660,
        "wires": [
            [
                "b7a1e39d48d6b353"
            ]
        ]
    },
    {
        "id": "e35b7df78bc6f722",
        "type": "ui_form",
        "z": "3aa03811830ef29e",
        "name": "group - Main tabs",
        "label": "",
        "group": "4a119e18236415e9",
        "order": 1,
        "width": 4,
        "height": 1,
        "options": [
            {
                "label": "SETTINGS",
                "value": "SETTINGS",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "CCC",
                "value": "CCC",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "RTC",
                "value": "RTC",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "COOL",
                "value": "COOL",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "SOFTSTART",
                "value": "SOFTSTART",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "PUMPSPEED",
                "value": "Pumpspeed",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "Solar²DHW",
                "value": "Solar²DHW",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "SCHEDULER",
                "value": "SCHEDULER",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "TEMPERATURES",
                "value": "TEMPERATURES",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "EFFICIENCY",
                "value": "EFFICIENCY",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "DEGREE DAYS",
                "value": "Degree_days",
                "type": "checkbox",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "SETTINGS": false,
            "CCC": false,
            "RTC": false,
            "COOL": false,
            "SOFTSTART": false,
            "Pumpspeed": false,
            "Solar²DHW": false,
            "SCHEDULER": false,
            "TEMPERATURES": false,
            "EFFICIENCY": false,
            "Degree_days": false
        },
        "payload": "",
        "submit": "Set",
        "cancel": "cancel",
        "topic": "tabs",
        "topicType": "str",
        "splitLayout": false,
        "className": "",
        "x": 910,
        "y": 620,
        "wires": [
            [
                "b7a1e39d48d6b353"
            ]
        ]
    },
    {
        "id": "5a44b5cc5e9f4844",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "Store settings",
        "func": "var GUI = global.get('GUI',\"file\");\n\nif (GUI === undefined) {GUI={};}\n\n//////////////////////\n// SET variable GUI //\n//////////////////////\nif (msg.topic != \"trigger\" && msg.payload != \"connect\" && msg.payload != \"change\"){\n    global.set('GUI.' + msg.topic,msg,\"file\");\n}\n\n\n\n\n//////////////////////\n// Trigger command  // \n//////////////////////\nif (msg.topic==\"trigger\")   {\n    if (GUI===undefined) {return null;}\n    var object = GUI;\n    delete object._msgid;\n    \n    for (var property in object) {\n    node.send([null,object[property]]);\n    }\n}\n\n\nif (msg.payload==\"connect\")   {\n    if (GUI===undefined) {return null;}\n    var object = GUI;\n    delete object._msgid;\n    \n    for (var property in object) {\n    node.send([null,null,object[property]]);\n    }\n}\n",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 860,
        "wires": [
            [
                "76dca09b425ef4cb"
            ],
            [
                "e35b7df78bc6f722",
                "e4a4fc20462d5562",
                "7fa1754db79c4869",
                "76dca09b425ef4cb"
            ],
            [
                "76dca09b425ef4cb"
            ]
        ],
        "outputLabels": [
            "set",
            "trigger",
            "connect"
        ]
    },
    {
        "id": "e6dd0cd84e528398",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "1eb6d525c86c4977",
        "order": 13,
        "width": 12,
        "height": 12,
        "name": "spacer abc",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 310,
        "y": 460,
        "wires": []
    },
    {
        "id": "8576379c0665d73d",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "4a119e18236415e9",
        "name": "Line - Main Tabs",
        "order": 3,
        "width": 4,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left><b>Main Tabs</b></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 920,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "5d3d8ab2e8e22c40",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "4a119e18236415e9",
        "name": "Line - Tab content",
        "order": 5,
        "width": 20,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left><b>Tab content</b></left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 970,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "ad7996a6a3e6085b",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "name": "link out 42",
        "mode": "link",
        "links": [
            "dbcf60ce513ff3ae"
        ],
        "x": 1205,
        "y": 800,
        "wires": []
    },
    {
        "id": "f9a8a11ad37a32a3",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "split",
        "func": "\n\nif (msg.payload===true){\n    msg.state=\"show\";\n}\n\nif (msg.payload===false){\n    msg.state=\"hide\";\n}\n\nif (msg.type.includes(\"group\")) {msg.type=\"group\";}\n\n\nreturn msg",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 800,
        "wires": [
            [
                "c7f9b5c422ad6f87"
            ]
        ]
    },
    {
        "id": "76dca09b425ef4cb",
        "type": "split",
        "z": "3aa03811830ef29e",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": "1",
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "property": "payload",
        "x": 850,
        "y": 800,
        "wires": [
            [
                "f9a8a11ad37a32a3"
            ]
        ]
    },
    {
        "id": "c7f9b5c422ad6f87",
        "type": "template",
        "z": "3aa03811830ef29e",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"{{type}}\": {\n        \"{{state}}\": [\n            \"{{topic}}\"\n        ]\n    }\n}\n",
        "output": "json",
        "x": 1100,
        "y": 800,
        "wires": [
            [
                "ad7996a6a3e6085b"
            ]
        ]
    },
    {
        "id": "3d5dc66749eac00f",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "GUI_dashboard_trigger",
        "links": [
            "49ebac0412d87642",
            "47cb7500b0321fc1",
            "c5ae638b1b65bff4"
        ],
        "x": 745,
        "y": 860,
        "wires": [
            [
                "ffd0c1d0d38be2d5"
            ]
        ]
    },
    {
        "id": "ffd0c1d0d38be2d5",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "trigger",
        "func": "let msg1={};\nmsg1.topic = \"trigger\";\n\nreturn msg1;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 860,
        "wires": [
            [
                "5a44b5cc5e9f4844"
            ]
        ]
    },
    {
        "id": "b7a1e39d48d6b353",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "function 20",
        "func": "msg.type=msg.topic;\ndelete msg._msgid;\ndelete msg.socketid;\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 560,
        "wires": [
            [
                "e35b7df78bc6f722",
                "e4a4fc20462d5562",
                "76dca09b425ef4cb",
                "5a44b5cc5e9f4844",
                "7fa1754db79c4869"
            ]
        ]
    },
    {
        "id": "c5ae638b1b65bff4",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "g": "c361a153997d2dfd",
        "name": "link out 43",
        "mode": "link",
        "links": [
            "3d5dc66749eac00f"
        ],
        "x": 1035,
        "y": 260,
        "wires": []
    },
    {
        "id": "4ef6053b1b3d6301",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "4a119e18236415e9",
        "order": 7,
        "width": 12,
        "height": 1,
        "name": "spacer 11",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1020,
        "y": 920,
        "wires": []
    },
    {
        "id": "7fa1754db79c4869",
        "type": "ui_form",
        "z": "3aa03811830ef29e",
        "name": "group - Settings screen",
        "label": "Settings",
        "group": "4a119e18236415e9",
        "order": 11,
        "width": 4,
        "height": 1,
        "options": [
            {
                "label": "HEAT PUMP",
                "value": "Settings_HEAT_PUMP",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "OPERATION",
                "value": "Settings_OPERATION",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "HEAT",
                "value": "Settings_HEAT",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "DHW",
                "value": "Settings_DHW",
                "type": "checkbox",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "Settings_HEAT_PUMP": false,
            "Settings_OPERATION": false,
            "Settings_HEAT": false,
            "Settings_DHW": false
        },
        "payload": "",
        "submit": "Set",
        "cancel": "cancel",
        "topic": "group2",
        "topicType": "str",
        "splitLayout": false,
        "className": "",
        "x": 930,
        "y": 700,
        "wires": [
            [
                "b7a1e39d48d6b353"
            ]
        ]
    },
    {
        "id": "14fbc980fb2680f1",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 20,
        "width": 8,
        "height": 1,
        "name": "spacer 04",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1760,
        "y": 1440,
        "wires": []
    },
    {
        "id": "c96747c13bdcbcd3",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 17,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1770,
        "y": 1280,
        "wires": []
    },
    {
        "id": "94f9b89e93918fa6",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 15,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "<b>Block MQTT</b>",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1780,
        "y": 1240,
        "wires": []
    },
    {
        "id": "70b30de18eac8972",
        "type": "mqtt in",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "name": "IP",
        "topic": "panasonic_heat_pump/ip",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1770,
        "y": 560,
        "wires": [
            [
                "70016d3833197d68",
                "45838d6ea55cd401"
            ]
        ]
    },
    {
        "id": "70016d3833197d68",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "group": "d95eca50f9342e76",
        "order": 22,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "IP adress",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1780,
        "y": 640,
        "wires": []
    },
    {
        "id": "9293ce0fe3ffaed3",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "g": "b4e7d28c61065a10",
        "group": "d95eca50f9342e76",
        "order": 41,
        "width": 6,
        "height": 1,
        "name": "spacer 2x2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1790,
        "y": 1560,
        "wires": []
    },
    {
        "id": "c63327653e3140e5",
        "type": "switch",
        "z": "3aa03811830ef29e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "connect",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "change",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 410,
        "y": 60,
        "wires": [
            [
                "638acce8e81b513f"
            ],
            [
                "464ea2f7e0ae0b1f"
            ]
        ]
    },
    {
        "id": "47cb7500b0321fc1",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "name": "on_connect",
        "mode": "link",
        "links": [
            "2c79bd3e2dc678e7",
            "3d5dc66749eac00f",
            "62873fd698209c83",
            "a0b2a8ca1de90c30",
            "b7ba3cde110cd1ba",
            "c0d182e336a34912",
            "d9b3ca8bfaa4c10a",
            "ea31d112c91c0da9",
            "39fb55462d85b463",
            "836e280d214473ba"
        ],
        "x": 1035,
        "y": 60,
        "wires": []
    },
    {
        "id": "49ebac0412d87642",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "name": "on_change_GUI",
        "mode": "link",
        "links": [
            "281a5e0dca0e33dc",
            "2cf43683279df520",
            "3d5dc66749eac00f",
            "5c8427c809a8f68f",
            "838a27801d1da2db",
            "94fb2ca53932250b",
            "9fd7064be2551caa",
            "a0b2a8ca1de90c30",
            "a1d3737a5a110aa9",
            "a6e14f9f36b96843",
            "b9cc5f94e160078d",
            "bd0a287533674d75",
            "d4627d98961f13e3",
            "d9b3ca8bfaa4c10a",
            "e3cf888e2774fce3",
            "e4d3b74c7c050a7d",
            "e77ae78af76db973",
            "ea31d112c91c0da9",
            "725f538b26776db4",
            "c0fdc0126f7d69c7",
            "2c79bd3e2dc678e7",
            "836e280d214473ba",
            "901c1c1dfbe65b3b",
            "b5936f69e6b31d58",
            "bb3079717b437055"
        ],
        "x": 1035,
        "y": 100,
        "wires": []
    },
    {
        "id": "d14a858857494232",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "link in 50",
        "links": [],
        "x": 805,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "62873fd698209c83",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "link in 53",
        "links": [
            "47cb7500b0321fc1"
        ],
        "x": 305,
        "y": 200,
        "wires": [
            [
                "3a86dae674a0f12f"
            ]
        ]
    },
    {
        "id": "638acce8e81b513f",
        "type": "delay",
        "z": "3aa03811830ef29e",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 540,
        "y": 40,
        "wires": [
            [
                "47cb7500b0321fc1"
            ]
        ]
    },
    {
        "id": "f014b20991b88442",
        "type": "trigger",
        "z": "3aa03811830ef29e",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "nul",
        "duration": "30",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "topic",
        "topic": "topic",
        "outputs": 1,
        "x": 810,
        "y": 100,
        "wires": [
            [
                "49ebac0412d87642"
            ]
        ]
    },
    {
        "id": "464ea2f7e0ae0b1f",
        "type": "change",
        "z": "3aa03811830ef29e",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "socketid",
                "pt": "msg",
                "to": "topic",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 100,
        "wires": [
            [
                "f014b20991b88442"
            ]
        ]
    },
    {
        "id": "337082438f912abd",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "SENSORS",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "remove_red_eye",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\"],\"hide\":[\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_MENU\",\"SYSTEM_ABOUT\",\"SYSTEM_LOG\",\"SYSTEM_MQTT\",\"SYSTEM_SETTINGS\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 390,
        "y": 520,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "af9877a2a2ce809a",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "70a5fe6af8ed1d29",
        "order": 8,
        "width": 2,
        "height": 1,
        "name": "filler",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 370,
        "y": 560,
        "wires": []
    },
    {
        "id": "450373f786da707e",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "1eb6d525c86c4977",
        "order": 19,
        "width": 2,
        "height": 1,
        "name": "2x1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 310,
        "y": 620,
        "wires": []
    },
    {
        "id": "dbe4ac2fce5a9226",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "d95eca50f9342e76",
        "order": 31,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "MQTT node",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1730,
        "y": 1680,
        "wires": []
    },
    {
        "id": "b742f5fc9cae8166",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "broker status",
        "links": [
            "25c9701ce27fd523"
        ],
        "x": 1545,
        "y": 1680,
        "wires": [
            [
                "dbe4ac2fce5a9226"
            ]
        ]
    },
    {
        "id": "fd75674be084c74e",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "d95eca50f9342e76",
        "order": 35,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Last verified working",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1760,
        "y": 1720,
        "wires": []
    },
    {
        "id": "baf6c28e9b5a2dd8",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "last tested",
        "links": [
            "10c007e5346d744d"
        ],
        "x": 1545,
        "y": 1720,
        "wires": [
            [
                "fd75674be084c74e"
            ]
        ]
    },
    {
        "id": "f4428377604fbb3b",
        "type": "moment",
        "z": "3aa03811830ef29e",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "",
        "locale": "",
        "output": "",
        "outputType": "msg",
        "outTz": "",
        "x": 1880,
        "y": 1760,
        "wires": [
            []
        ]
    },
    {
        "id": "e8df057fcaf9d5b6",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "d95eca50f9342e76",
        "order": 26,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "TEST",
        "tooltip": "Test the connection with the MQTT broker",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Testing...",
        "payloadType": "str",
        "topic": "test",
        "topicType": "msg",
        "x": 1790,
        "y": 1820,
        "wires": [
            [
                "93689e503b06b2cc"
            ]
        ]
    },
    {
        "id": "cc1376f0b9161f41",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "d95eca50f9342e76",
        "order": 25,
        "width": 3,
        "height": 1,
        "name": "",
        "label": "MQTT Broker",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1620,
        "y": 1820,
        "wires": []
    },
    {
        "id": "93689e503b06b2cc",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "name": "link out 102",
        "mode": "link",
        "links": [
            "5aeff3950c06df9a"
        ],
        "x": 1875,
        "y": 1820,
        "wires": []
    },
    {
        "id": "fccd2e0f27d35404",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "d95eca50f9342e76",
        "order": 27,
        "width": 1,
        "height": 1,
        "name": "spacer 1x1",
        "label": "",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1610,
        "y": 1860,
        "wires": []
    },
    {
        "id": "57fc6d02518bc87e",
        "type": "http request",
        "z": "3aa03811830ef29e",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "body",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 810,
        "y": 1040,
        "wires": [
            [
                "c496f3d7589f186f"
            ]
        ]
    },
    {
        "id": "c496f3d7589f186f",
        "type": "json",
        "z": "3aa03811830ef29e",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 970,
        "y": 1040,
        "wires": [
            [
                "d41d91b9f6ab8ed6"
            ]
        ]
    },
    {
        "id": "45838d6ea55cd401",
        "type": "change",
        "z": "3aa03811830ef29e",
        "g": "0bb11670c285bff1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(file)::ip_adress_heishamon",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1850,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "d41d91b9f6ab8ed6",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "function 100",
        "func": "let msg1={};\nlet msg2={};\nlet msg3={};\nlet msg4={};\nlet msg5={};\nlet msg6={};\nlet msg7={};\n/*\nlet msg8={};\nlet msg9={};\nlet msg10={};\n*/\n// MQTT related\nmsg1.payload = msg.payload.mqtt_server // Broker IP adress\nmsg2.payload = msg.payload.listenonly; // Heishamon listen mode\nmsg3.payload = msg.payload.mqtt_topic_base; // MQTT topic used for heishamon to publish in.\n\n// Hardware related\nmsg4.payload = msg.payload.use_1wire\nmsg5.payload = msg.payload.optionalPCB\nmsg6.payload = msg.payload.opentherm\nmsg7.payload = msg.payload.use_s0\n\n\n\n\nreturn msg1;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "16efe2bed8a583d5",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "30",
        "topic": "",
        "payload": "start",
        "payloadType": "str",
        "x": 150,
        "y": 1040,
        "wires": [
            [
                "f5ad4e2a055707c9"
            ]
        ]
    },
    {
        "id": "f5ad4e2a055707c9",
        "type": "trigger",
        "z": "3aa03811830ef29e",
        "name": "",
        "op1": "check",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "-5",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 410,
        "y": 1040,
        "wires": [
            [
                "d8591ef4d113eb52"
            ]
        ]
    },
    {
        "id": "d8591ef4d113eb52",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "Send_IP",
        "func": "var IP = flow.get('ip_adress_heishamon', \"file\");\n\nif (IP === undefined)   { return null }\nif (IP == \"\")           { return null }\n\n/*\nmsg.payload = IP;\nmsg.reset = 1;\nreturn msg;\n*/\n\nmsg.payload = IP;\nmsg.method = 'get';\nmsg.url = 'http://' + IP + '/getsettings';\nmsg.reset = 1;\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 1040,
        "wires": [
            [
                "f5ad4e2a055707c9",
                "57fc6d02518bc87e"
            ]
        ]
    },
    {
        "id": "ab00a754cc5d702c",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "",
        "group": "70a5fe6af8ed1d29",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "SETTINGS",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "settings",
        "payload": "{\"group\":{\"show\":[\"SYSTEM_SETTINGS\"],\"hide\":[\"SYSTEM_MQTT\",\"SYSTEM_ABOUT\",\"SYSTEM_SYSTEM_HEALTH\",\"SYSTEM_HW_INFORMATION\",\"SYSTEM_MENU\",\"SYSTEM_LOG\",\"SYSTEM_MQTT_sensors\",\"SYSTEM_1_wire_sensors\"]}}",
        "payloadType": "json",
        "topic": "",
        "topicType": "str",
        "x": 3010,
        "y": 200,
        "wires": [
            [
                "ad0975065f9323c6"
            ]
        ]
    },
    {
        "id": "210dabb3aab9ca9f",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "81a6692d7ea02db2",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Time Zone",
        "label": "Time Zone",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3130,
        "y": 340,
        "wires": []
    },
    {
        "id": "321a2f9f39e97179",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "81a6692d7ea02db2",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "spacer1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3380,
        "y": 400,
        "wires": []
    },
    {
        "id": "9ad2c01ce6971a07",
        "type": "ui_template",
        "z": "3aa03811830ef29e",
        "group": "81a6692d7ea02db2",
        "name": "Line - Settings",
        "order": 1,
        "width": 24,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n<left>NodeRed settings</left> \n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 3300,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "3a1fab6a57ea634f",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "SET",
        "func": "if (msg.topic =='TimeZone') {\n    context.set('TZ', msg.payload);\n    return null ;\n}\n\nif (msg.topic == 'SAVE') {\n    var TZ = context.get('TZ');\n    if (TZ === undefined) { return null ;}\n    var NodeRed = global.get('NodeRed',\"file\");\n    if (NodeRed === undefined) { \n        NodeRed = {}; \n        global.set('NodeRed', {}, \"file\"); }\n    global.set('NodeRed.TZ', TZ, \"file\");\n    \n    let msg99={};\n    msg99.topic = 'SYSTEM';\n    msg99.payload = 'TimeZone set to: ' + TZ;\n    \n    return msg99;\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3510,
        "y": 440,
        "wires": [
            [
                "0efd6826e2004381"
            ]
        ]
    },
    {
        "id": "55dd8cd41a8c43d4",
        "type": "ui_button",
        "z": "3aa03811830ef29e",
        "name": "SAVE",
        "group": "81a6692d7ea02db2",
        "order": 5,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "SAVE",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "save",
        "payloadType": "str",
        "topic": "SAVE",
        "topicType": "str",
        "x": 3250,
        "y": 400,
        "wires": [
            [
                "3a1fab6a57ea634f"
            ]
        ]
    },
    {
        "id": "a013af0d02d6566b",
        "type": "ui_text",
        "z": "3aa03811830ef29e",
        "group": "81a6692d7ea02db2",
        "order": 6,
        "width": 11,
        "height": 1,
        "name": "spacer2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 3520,
        "y": 400,
        "wires": []
    },
    {
        "id": "51b5b527505d6707",
        "type": "ui_dropdown",
        "z": "3aa03811830ef29e",
        "name": "",
        "label": "",
        "tooltip": "",
        "place": "Select option",
        "group": "81a6692d7ea02db2",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "multiple": false,
        "options": [
            {
                "label": "Africa/Abidjan",
                "value": "Africa/Abidjan",
                "type": "str"
            },
            {
                "label": "Africa/Accra",
                "value": "Africa/Accra",
                "type": "str"
            },
            {
                "label": "Africa/Addis_Ababa",
                "value": "Africa/Addis_Ababa",
                "type": "str"
            },
            {
                "label": "Africa/Algiers",
                "value": "Africa/Algiers",
                "type": "str"
            },
            {
                "label": "Africa/Asmara",
                "value": "Africa/Asmara",
                "type": "str"
            },
            {
                "label": "Africa/Asmera",
                "value": "Africa/Asmera",
                "type": "str"
            },
            {
                "label": "Africa/Bamako",
                "value": "Africa/Bamako",
                "type": "str"
            },
            {
                "label": "Africa/Bangui",
                "value": "Africa/Bangui",
                "type": "str"
            },
            {
                "label": "Africa/Banjul",
                "value": "Africa/Banjul",
                "type": "str"
            },
            {
                "label": "Africa/Bissau",
                "value": "Africa/Bissau",
                "type": "str"
            },
            {
                "label": "Africa/Blantyre",
                "value": "Africa/Blantyre",
                "type": "str"
            },
            {
                "label": "Africa/Brazzaville",
                "value": "Africa/Brazzaville",
                "type": "str"
            },
            {
                "label": "Africa/Bujumbura",
                "value": "Africa/Bujumbura",
                "type": "str"
            },
            {
                "label": "Africa/Cairo",
                "value": "Africa/Cairo",
                "type": "str"
            },
            {
                "label": "Africa/Casablanca",
                "value": "Africa/Casablanca",
                "type": "str"
            },
            {
                "label": "Africa/Ceuta",
                "value": "Africa/Ceuta",
                "type": "str"
            },
            {
                "label": "Africa/Conakry",
                "value": "Africa/Conakry",
                "type": "str"
            },
            {
                "label": "Africa/Dakar",
                "value": "Africa/Dakar",
                "type": "str"
            },
            {
                "label": "Africa/Dar_es_Salaam",
                "value": "Africa/Dar_es_Salaam",
                "type": "str"
            },
            {
                "label": "Africa/Djibouti",
                "value": "Africa/Djibouti",
                "type": "str"
            },
            {
                "label": "Africa/Douala",
                "value": "Africa/Douala",
                "type": "str"
            },
            {
                "label": "Africa/El_Aaiun",
                "value": "Africa/El_Aaiun",
                "type": "str"
            },
            {
                "label": "Africa/Freetown",
                "value": "Africa/Freetown",
                "type": "str"
            },
            {
                "label": "Africa/Gaborone",
                "value": "Africa/Gaborone",
                "type": "str"
            },
            {
                "label": "Africa/Harare",
                "value": "Africa/Harare",
                "type": "str"
            },
            {
                "label": "Africa/Johannesburg",
                "value": "Africa/Johannesburg",
                "type": "str"
            },
            {
                "label": "Africa/Juba",
                "value": "Africa/Juba",
                "type": "str"
            },
            {
                "label": "Africa/Kampala",
                "value": "Africa/Kampala",
                "type": "str"
            },
            {
                "label": "Africa/Khartoum",
                "value": "Africa/Khartoum",
                "type": "str"
            },
            {
                "label": "Africa/Kigali",
                "value": "Africa/Kigali",
                "type": "str"
            },
            {
                "label": "Africa/Kinshasa",
                "value": "Africa/Kinshasa",
                "type": "str"
            },
            {
                "label": "Africa/Lagos",
                "value": "Africa/Lagos",
                "type": "str"
            },
            {
                "label": "Africa/Libreville",
                "value": "Africa/Libreville",
                "type": "str"
            },
            {
                "label": "Africa/Lome",
                "value": "Africa/Lome",
                "type": "str"
            },
            {
                "label": "Africa/Luanda",
                "value": "Africa/Luanda",
                "type": "str"
            },
            {
                "label": "Africa/Lubumbashi",
                "value": "Africa/Lubumbashi",
                "type": "str"
            },
            {
                "label": "Africa/Lusaka",
                "value": "Africa/Lusaka",
                "type": "str"
            },
            {
                "label": "Africa/Malabo",
                "value": "Africa/Malabo",
                "type": "str"
            },
            {
                "label": "Africa/Maputo",
                "value": "Africa/Maputo",
                "type": "str"
            },
            {
                "label": "Africa/Maseru",
                "value": "Africa/Maseru",
                "type": "str"
            },
            {
                "label": "Africa/Mbabane",
                "value": "Africa/Mbabane",
                "type": "str"
            },
            {
                "label": "Africa/Mogadishu",
                "value": "Africa/Mogadishu",
                "type": "str"
            },
            {
                "label": "Africa/Monrovia",
                "value": "Africa/Monrovia",
                "type": "str"
            },
            {
                "label": "Africa/Nairobi",
                "value": "Africa/Nairobi",
                "type": "str"
            },
            {
                "label": "Africa/Ndjamena",
                "value": "Africa/Ndjamena",
                "type": "str"
            },
            {
                "label": "Africa/Niamey",
                "value": "Africa/Niamey",
                "type": "str"
            },
            {
                "label": "Africa/Nouakchott",
                "value": "Africa/Nouakchott",
                "type": "str"
            },
            {
                "label": "Africa/Ouagadougou",
                "value": "Africa/Ouagadougou",
                "type": "str"
            },
            {
                "label": "Africa/Porto-Novo",
                "value": "Africa/Porto-Novo",
                "type": "str"
            },
            {
                "label": "Africa/Sao_Tome",
                "value": "Africa/Sao_Tome",
                "type": "str"
            },
            {
                "label": "Africa/Timbuktu",
                "value": "Africa/Timbuktu",
                "type": "str"
            },
            {
                "label": "Africa/Tripoli",
                "value": "Africa/Tripoli",
                "type": "str"
            },
            {
                "label": "Africa/Tunis",
                "value": "Africa/Tunis",
                "type": "str"
            },
            {
                "label": "Africa/Windhoek",
                "value": "Africa/Windhoek",
                "type": "str"
            },
            {
                "label": "America/Adak",
                "value": "America/Adak",
                "type": "str"
            },
            {
                "label": "America/Anchorage",
                "value": "America/Anchorage",
                "type": "str"
            },
            {
                "label": "America/Anguilla",
                "value": "America/Anguilla",
                "type": "str"
            },
            {
                "label": "America/Antigua",
                "value": "America/Antigua",
                "type": "str"
            },
            {
                "label": "America/Araguaina",
                "value": "America/Araguaina",
                "type": "str"
            },
            {
                "label": "America/Argentina/Buenos_Aires",
                "value": "America/Argentina/Buenos_Aires",
                "type": "str"
            },
            {
                "label": "America/Argentina/Catamarca",
                "value": "America/Argentina/Catamarca",
                "type": "str"
            },
            {
                "label": "America/Argentina/ComodRivadavia",
                "value": "America/Argentina/ComodRivadavia",
                "type": "str"
            },
            {
                "label": "America/Argentina/Cordoba",
                "value": "America/Argentina/Cordoba",
                "type": "str"
            },
            {
                "label": "America/Argentina/Jujuy",
                "value": "America/Argentina/Jujuy",
                "type": "str"
            },
            {
                "label": "America/Argentina/La_Rioja",
                "value": "America/Argentina/La_Rioja",
                "type": "str"
            },
            {
                "label": "America/Argentina/Mendoza",
                "value": "America/Argentina/Mendoza",
                "type": "str"
            },
            {
                "label": "America/Argentina/Rio_Gallegos",
                "value": "America/Argentina/Rio_Gallegos",
                "type": "str"
            },
            {
                "label": "America/Argentina/Salta",
                "value": "America/Argentina/Salta",
                "type": "str"
            },
            {
                "label": "America/Argentina/San_Juan",
                "value": "America/Argentina/San_Juan",
                "type": "str"
            },
            {
                "label": "America/Argentina/San_Luis",
                "value": "America/Argentina/San_Luis",
                "type": "str"
            },
            {
                "label": "America/Argentina/Tucuman",
                "value": "America/Argentina/Tucuman",
                "type": "str"
            },
            {
                "label": "America/Argentina/Ushuaia",
                "value": "America/Argentina/Ushuaia",
                "type": "str"
            },
            {
                "label": "America/Aruba",
                "value": "America/Aruba",
                "type": "str"
            },
            {
                "label": "America/Asuncion",
                "value": "America/Asuncion",
                "type": "str"
            },
            {
                "label": "America/Atikokan",
                "value": "America/Atikokan",
                "type": "str"
            },
            {
                "label": "America/Atka",
                "value": "America/Atka",
                "type": "str"
            },
            {
                "label": "America/Bahia",
                "value": "America/Bahia",
                "type": "str"
            },
            {
                "label": "America/Bahia_Banderas",
                "value": "America/Bahia_Banderas",
                "type": "str"
            },
            {
                "label": "America/Barbados",
                "value": "America/Barbados",
                "type": "str"
            },
            {
                "label": "America/Belem",
                "value": "America/Belem",
                "type": "str"
            },
            {
                "label": "America/Belize",
                "value": "America/Belize",
                "type": "str"
            },
            {
                "label": "America/Blanc-Sablon",
                "value": "America/Blanc-Sablon",
                "type": "str"
            },
            {
                "label": "America/Boa_Vista",
                "value": "America/Boa_Vista",
                "type": "str"
            },
            {
                "label": "America/Bogota",
                "value": "America/Bogota",
                "type": "str"
            },
            {
                "label": "America/Boise",
                "value": "America/Boise",
                "type": "str"
            },
            {
                "label": "America/Buenos_Aires",
                "value": "America/Buenos_Aires",
                "type": "str"
            },
            {
                "label": "America/Cambridge_Bay",
                "value": "America/Cambridge_Bay",
                "type": "str"
            },
            {
                "label": "America/Campo_Grande",
                "value": "America/Campo_Grande",
                "type": "str"
            },
            {
                "label": "America/Cancun",
                "value": "America/Cancun",
                "type": "str"
            },
            {
                "label": "America/Caracas",
                "value": "America/Caracas",
                "type": "str"
            },
            {
                "label": "America/Catamarca",
                "value": "America/Catamarca",
                "type": "str"
            },
            {
                "label": "America/Cayenne",
                "value": "America/Cayenne",
                "type": "str"
            },
            {
                "label": "America/Cayman",
                "value": "America/Cayman",
                "type": "str"
            },
            {
                "label": "America/Chicago",
                "value": "America/Chicago",
                "type": "str"
            },
            {
                "label": "America/Chihuahua",
                "value": "America/Chihuahua",
                "type": "str"
            },
            {
                "label": "America/Ciudad_Juarez",
                "value": "America/Ciudad_Juarez",
                "type": "str"
            },
            {
                "label": "America/Coral_Harbour",
                "value": "America/Coral_Harbour",
                "type": "str"
            },
            {
                "label": "America/Cordoba",
                "value": "America/Cordoba",
                "type": "str"
            },
            {
                "label": "America/Costa_Rica",
                "value": "America/Costa_Rica",
                "type": "str"
            },
            {
                "label": "America/Creston",
                "value": "America/Creston",
                "type": "str"
            },
            {
                "label": "America/Cuiaba",
                "value": "America/Cuiaba",
                "type": "str"
            },
            {
                "label": "America/Curacao",
                "value": "America/Curacao",
                "type": "str"
            },
            {
                "label": "America/Danmarkshavn",
                "value": "America/Danmarkshavn",
                "type": "str"
            },
            {
                "label": "America/Dawson",
                "value": "America/Dawson",
                "type": "str"
            },
            {
                "label": "America/Dawson_Creek",
                "value": "America/Dawson_Creek",
                "type": "str"
            },
            {
                "label": "America/Denver",
                "value": "America/Denver",
                "type": "str"
            },
            {
                "label": "America/Detroit",
                "value": "America/Detroit",
                "type": "str"
            },
            {
                "label": "America/Dominica",
                "value": "America/Dominica",
                "type": "str"
            },
            {
                "label": "America/Edmonton",
                "value": "America/Edmonton",
                "type": "str"
            },
            {
                "label": "America/Eirunepe",
                "value": "America/Eirunepe",
                "type": "str"
            },
            {
                "label": "America/El_Salvador",
                "value": "America/El_Salvador",
                "type": "str"
            },
            {
                "label": "America/Ensenada",
                "value": "America/Ensenada",
                "type": "str"
            },
            {
                "label": "America/Fort_Nelson",
                "value": "America/Fort_Nelson",
                "type": "str"
            },
            {
                "label": "America/Fort_Wayne",
                "value": "America/Fort_Wayne",
                "type": "str"
            },
            {
                "label": "America/Fortaleza",
                "value": "America/Fortaleza",
                "type": "str"
            },
            {
                "label": "America/Glace_Bay",
                "value": "America/Glace_Bay",
                "type": "str"
            },
            {
                "label": "America/Godthab",
                "value": "America/Godthab",
                "type": "str"
            },
            {
                "label": "America/Goose_Bay",
                "value": "America/Goose_Bay",
                "type": "str"
            },
            {
                "label": "America/Grand_Turk",
                "value": "America/Grand_Turk",
                "type": "str"
            },
            {
                "label": "America/Grenada",
                "value": "America/Grenada",
                "type": "str"
            },
            {
                "label": "America/Guadeloupe",
                "value": "America/Guadeloupe",
                "type": "str"
            },
            {
                "label": "America/Guatemala",
                "value": "America/Guatemala",
                "type": "str"
            },
            {
                "label": "America/Guayaquil",
                "value": "America/Guayaquil",
                "type": "str"
            },
            {
                "label": "America/Guyana",
                "value": "America/Guyana",
                "type": "str"
            },
            {
                "label": "America/Halifax",
                "value": "America/Halifax",
                "type": "str"
            },
            {
                "label": "America/Havana",
                "value": "America/Havana",
                "type": "str"
            },
            {
                "label": "America/Hermosillo",
                "value": "America/Hermosillo",
                "type": "str"
            },
            {
                "label": "America/Indiana/Indianapolis",
                "value": "America/Indiana/Indianapolis",
                "type": "str"
            },
            {
                "label": "America/Indiana/Knox",
                "value": "America/Indiana/Knox",
                "type": "str"
            },
            {
                "label": "America/Indiana/Marengo",
                "value": "America/Indiana/Marengo",
                "type": "str"
            },
            {
                "label": "America/Indiana/Petersburg",
                "value": "America/Indiana/Petersburg",
                "type": "str"
            },
            {
                "label": "America/Indiana/Tell_City",
                "value": "America/Indiana/Tell_City",
                "type": "str"
            },
            {
                "label": "America/Indiana/Vevay",
                "value": "America/Indiana/Vevay",
                "type": "str"
            },
            {
                "label": "America/Indiana/Vincennes",
                "value": "America/Indiana/Vincennes",
                "type": "str"
            },
            {
                "label": "America/Indiana/Winamac",
                "value": "America/Indiana/Winamac",
                "type": "str"
            },
            {
                "label": "America/Indianapolis",
                "value": "America/Indianapolis",
                "type": "str"
            },
            {
                "label": "America/Inuvik",
                "value": "America/Inuvik",
                "type": "str"
            },
            {
                "label": "America/Iqaluit",
                "value": "America/Iqaluit",
                "type": "str"
            },
            {
                "label": "America/Jamaica",
                "value": "America/Jamaica",
                "type": "str"
            },
            {
                "label": "America/Jujuy",
                "value": "America/Jujuy",
                "type": "str"
            },
            {
                "label": "America/Juneau",
                "value": "America/Juneau",
                "type": "str"
            },
            {
                "label": "America/Kentucky/Louisville",
                "value": "America/Kentucky/Louisville",
                "type": "str"
            },
            {
                "label": "America/Kentucky/Monticello",
                "value": "America/Kentucky/Monticello",
                "type": "str"
            },
            {
                "label": "America/Knox_IN",
                "value": "America/Knox_IN",
                "type": "str"
            },
            {
                "label": "America/Kralendijk",
                "value": "America/Kralendijk",
                "type": "str"
            },
            {
                "label": "America/La_Paz",
                "value": "America/La_Paz",
                "type": "str"
            },
            {
                "label": "America/Lima",
                "value": "America/Lima",
                "type": "str"
            },
            {
                "label": "America/Los_Angeles",
                "value": "America/Los_Angeles",
                "type": "str"
            },
            {
                "label": "America/Louisville",
                "value": "America/Louisville",
                "type": "str"
            },
            {
                "label": "America/Lower_Princes",
                "value": "America/Lower_Princes",
                "type": "str"
            },
            {
                "label": "America/Maceio",
                "value": "America/Maceio",
                "type": "str"
            },
            {
                "label": "America/Managua",
                "value": "America/Managua",
                "type": "str"
            },
            {
                "label": "America/Manaus",
                "value": "America/Manaus",
                "type": "str"
            },
            {
                "label": "America/Marigot",
                "value": "America/Marigot",
                "type": "str"
            },
            {
                "label": "America/Martinique",
                "value": "America/Martinique",
                "type": "str"
            },
            {
                "label": "America/Matamoros",
                "value": "America/Matamoros",
                "type": "str"
            },
            {
                "label": "America/Mazatlan",
                "value": "America/Mazatlan",
                "type": "str"
            },
            {
                "label": "America/Mendoza",
                "value": "America/Mendoza",
                "type": "str"
            },
            {
                "label": "America/Menominee",
                "value": "America/Menominee",
                "type": "str"
            },
            {
                "label": "America/Merida",
                "value": "America/Merida",
                "type": "str"
            },
            {
                "label": "America/Metlakatla",
                "value": "America/Metlakatla",
                "type": "str"
            },
            {
                "label": "America/Mexico_City",
                "value": "America/Mexico_City",
                "type": "str"
            },
            {
                "label": "America/Miquelon",
                "value": "America/Miquelon",
                "type": "str"
            },
            {
                "label": "America/Moncton",
                "value": "America/Moncton",
                "type": "str"
            },
            {
                "label": "America/Monterrey",
                "value": "America/Monterrey",
                "type": "str"
            },
            {
                "label": "America/Montevideo",
                "value": "America/Montevideo",
                "type": "str"
            },
            {
                "label": "America/Montreal",
                "value": "America/Montreal",
                "type": "str"
            },
            {
                "label": "America/Montserrat",
                "value": "America/Montserrat",
                "type": "str"
            },
            {
                "label": "America/Nassau",
                "value": "America/Nassau",
                "type": "str"
            },
            {
                "label": "America/New_York",
                "value": "America/New_York",
                "type": "str"
            },
            {
                "label": "America/Nipigon",
                "value": "America/Nipigon",
                "type": "str"
            },
            {
                "label": "America/Nome",
                "value": "America/Nome",
                "type": "str"
            },
            {
                "label": "America/Noronha",
                "value": "America/Noronha",
                "type": "str"
            },
            {
                "label": "America/North_Dakota/Beulah",
                "value": "America/North_Dakota/Beulah",
                "type": "str"
            },
            {
                "label": "America/North_Dakota/Center",
                "value": "America/North_Dakota/Center",
                "type": "str"
            },
            {
                "label": "America/North_Dakota/New_Salem",
                "value": "America/North_Dakota/New_Salem",
                "type": "str"
            },
            {
                "label": "America/Nuuk",
                "value": "America/Nuuk",
                "type": "str"
            },
            {
                "label": "America/Ojinaga",
                "value": "America/Ojinaga",
                "type": "str"
            },
            {
                "label": "America/Panama",
                "value": "America/Panama",
                "type": "str"
            },
            {
                "label": "America/Pangnirtung",
                "value": "America/Pangnirtung",
                "type": "str"
            },
            {
                "label": "America/Paramaribo",
                "value": "America/Paramaribo",
                "type": "str"
            },
            {
                "label": "America/Phoenix",
                "value": "America/Phoenix",
                "type": "str"
            },
            {
                "label": "America/Port-au-Prince",
                "value": "America/Port-au-Prince",
                "type": "str"
            },
            {
                "label": "America/Port_of_Spain",
                "value": "America/Port_of_Spain",
                "type": "str"
            },
            {
                "label": "America/Porto_Acre",
                "value": "America/Porto_Acre",
                "type": "str"
            },
            {
                "label": "America/Porto_Velho",
                "value": "America/Porto_Velho",
                "type": "str"
            },
            {
                "label": "America/Puerto_Rico",
                "value": "America/Puerto_Rico",
                "type": "str"
            },
            {
                "label": "America/Punta_Arenas",
                "value": "America/Punta_Arenas",
                "type": "str"
            },
            {
                "label": "America/Rainy_River",
                "value": "America/Rainy_River",
                "type": "str"
            },
            {
                "label": "America/Rankin_Inlet",
                "value": "America/Rankin_Inlet",
                "type": "str"
            },
            {
                "label": "America/Recife",
                "value": "America/Recife",
                "type": "str"
            },
            {
                "label": "America/Regina",
                "value": "America/Regina",
                "type": "str"
            },
            {
                "label": "America/Resolute",
                "value": "America/Resolute",
                "type": "str"
            },
            {
                "label": "America/Rio_Branco",
                "value": "America/Rio_Branco",
                "type": "str"
            },
            {
                "label": "America/Rosario",
                "value": "America/Rosario",
                "type": "str"
            },
            {
                "label": "America/Santa_Isabel",
                "value": "America/Santa_Isabel",
                "type": "str"
            },
            {
                "label": "America/Santarem",
                "value": "America/Santarem",
                "type": "str"
            },
            {
                "label": "America/Santiago",
                "value": "America/Santiago",
                "type": "str"
            },
            {
                "label": "America/Santo_Domingo",
                "value": "America/Santo_Domingo",
                "type": "str"
            },
            {
                "label": "America/Sao_Paulo",
                "value": "America/Sao_Paulo",
                "type": "str"
            },
            {
                "label": "America/Scoresbysund",
                "value": "America/Scoresbysund",
                "type": "str"
            },
            {
                "label": "America/Shiprock",
                "value": "America/Shiprock",
                "type": "str"
            },
            {
                "label": "America/Sitka",
                "value": "America/Sitka",
                "type": "str"
            },
            {
                "label": "America/St_Barthelemy",
                "value": "America/St_Barthelemy",
                "type": "str"
            },
            {
                "label": "America/St_Johns",
                "value": "America/St_Johns",
                "type": "str"
            },
            {
                "label": "America/St_Kitts",
                "value": "America/St_Kitts",
                "type": "str"
            },
            {
                "label": "America/St_Lucia",
                "value": "America/St_Lucia",
                "type": "str"
            },
            {
                "label": "America/St_Thomas",
                "value": "America/St_Thomas",
                "type": "str"
            },
            {
                "label": "America/St_Vincent",
                "value": "America/St_Vincent",
                "type": "str"
            },
            {
                "label": "America/Swift_Current",
                "value": "America/Swift_Current",
                "type": "str"
            },
            {
                "label": "America/Tegucigalpa",
                "value": "America/Tegucigalpa",
                "type": "str"
            },
            {
                "label": "America/Thule",
                "value": "America/Thule",
                "type": "str"
            },
            {
                "label": "America/Thunder_Bay",
                "value": "America/Thunder_Bay",
                "type": "str"
            },
            {
                "label": "America/Tijuana",
                "value": "America/Tijuana",
                "type": "str"
            },
            {
                "label": "America/Toronto",
                "value": "America/Toronto",
                "type": "str"
            },
            {
                "label": "America/Tortola",
                "value": "America/Tortola",
                "type": "str"
            },
            {
                "label": "America/Vancouver",
                "value": "America/Vancouver",
                "type": "str"
            },
            {
                "label": "America/Virgin",
                "value": "America/Virgin",
                "type": "str"
            },
            {
                "label": "America/Whitehorse",
                "value": "America/Whitehorse",
                "type": "str"
            },
            {
                "label": "America/Winnipeg",
                "value": "America/Winnipeg",
                "type": "str"
            },
            {
                "label": "America/Yakutat",
                "value": "America/Yakutat",
                "type": "str"
            },
            {
                "label": "America/Yellowknife",
                "value": "America/Yellowknife",
                "type": "str"
            },
            {
                "label": "Antarctica/Casey",
                "value": "Antarctica/Casey",
                "type": "str"
            },
            {
                "label": "Antarctica/Davis",
                "value": "Antarctica/Davis",
                "type": "str"
            },
            {
                "label": "Antarctica/DumontDUrville",
                "value": "Antarctica/DumontDUrville",
                "type": "str"
            },
            {
                "label": "Antarctica/Macquarie",
                "value": "Antarctica/Macquarie",
                "type": "str"
            },
            {
                "label": "Antarctica/Mawson",
                "value": "Antarctica/Mawson",
                "type": "str"
            },
            {
                "label": "Antarctica/McMurdo",
                "value": "Antarctica/McMurdo",
                "type": "str"
            },
            {
                "label": "Antarctica/Palmer",
                "value": "Antarctica/Palmer",
                "type": "str"
            },
            {
                "label": "Antarctica/Rothera",
                "value": "Antarctica/Rothera",
                "type": "str"
            },
            {
                "label": "Antarctica/South_Pole",
                "value": "Antarctica/South_Pole",
                "type": "str"
            },
            {
                "label": "Antarctica/Syowa",
                "value": "Antarctica/Syowa",
                "type": "str"
            },
            {
                "label": "Antarctica/Troll",
                "value": "Antarctica/Troll",
                "type": "str"
            },
            {
                "label": "Antarctica/Vostok",
                "value": "Antarctica/Vostok",
                "type": "str"
            },
            {
                "label": "Arctic/Longyearbyen",
                "value": "Arctic/Longyearbyen",
                "type": "str"
            },
            {
                "label": "Asia/Aden",
                "value": "Asia/Aden",
                "type": "str"
            },
            {
                "label": "Asia/Almaty",
                "value": "Asia/Almaty",
                "type": "str"
            },
            {
                "label": "Asia/Amman",
                "value": "Asia/Amman",
                "type": "str"
            },
            {
                "label": "Asia/Anadyr",
                "value": "Asia/Anadyr",
                "type": "str"
            },
            {
                "label": "Asia/Aqtau",
                "value": "Asia/Aqtau",
                "type": "str"
            },
            {
                "label": "Asia/Aqtobe",
                "value": "Asia/Aqtobe",
                "type": "str"
            },
            {
                "label": "Asia/Ashgabat",
                "value": "Asia/Ashgabat",
                "type": "str"
            },
            {
                "label": "Asia/Ashkhabad",
                "value": "Asia/Ashkhabad",
                "type": "str"
            },
            {
                "label": "Asia/Atyrau",
                "value": "Asia/Atyrau",
                "type": "str"
            },
            {
                "label": "Asia/Baghdad",
                "value": "Asia/Baghdad",
                "type": "str"
            },
            {
                "label": "Asia/Bahrain",
                "value": "Asia/Bahrain",
                "type": "str"
            },
            {
                "label": "Asia/Baku",
                "value": "Asia/Baku",
                "type": "str"
            },
            {
                "label": "Asia/Bangkok",
                "value": "Asia/Bangkok",
                "type": "str"
            },
            {
                "label": "Asia/Barnaul",
                "value": "Asia/Barnaul",
                "type": "str"
            },
            {
                "label": "Asia/Beirut",
                "value": "Asia/Beirut",
                "type": "str"
            },
            {
                "label": "Asia/Bishkek",
                "value": "Asia/Bishkek",
                "type": "str"
            },
            {
                "label": "Asia/Brunei",
                "value": "Asia/Brunei",
                "type": "str"
            },
            {
                "label": "Asia/Calcutta",
                "value": "Asia/Calcutta",
                "type": "str"
            },
            {
                "label": "Asia/Chita",
                "value": "Asia/Chita",
                "type": "str"
            },
            {
                "label": "Asia/Choibalsan",
                "value": "Asia/Choibalsan",
                "type": "str"
            },
            {
                "label": "Asia/Chongqing",
                "value": "Asia/Chongqing",
                "type": "str"
            },
            {
                "label": "Asia/Chungking",
                "value": "Asia/Chungking",
                "type": "str"
            },
            {
                "label": "Asia/Colombo",
                "value": "Asia/Colombo",
                "type": "str"
            },
            {
                "label": "Asia/Dacca",
                "value": "Asia/Dacca",
                "type": "str"
            },
            {
                "label": "Asia/Damascus",
                "value": "Asia/Damascus",
                "type": "str"
            },
            {
                "label": "Asia/Dhaka",
                "value": "Asia/Dhaka",
                "type": "str"
            },
            {
                "label": "Asia/Dili",
                "value": "Asia/Dili",
                "type": "str"
            },
            {
                "label": "Asia/Dubai",
                "value": "Asia/Dubai",
                "type": "str"
            },
            {
                "label": "Asia/Dushanbe",
                "value": "Asia/Dushanbe",
                "type": "str"
            },
            {
                "label": "Asia/Famagusta",
                "value": "Asia/Famagusta",
                "type": "str"
            },
            {
                "label": "Asia/Gaza",
                "value": "Asia/Gaza",
                "type": "str"
            },
            {
                "label": "Asia/Harbin",
                "value": "Asia/Harbin",
                "type": "str"
            },
            {
                "label": "Asia/Hebron",
                "value": "Asia/Hebron",
                "type": "str"
            },
            {
                "label": "Asia/Ho_Chi_Minh",
                "value": "Asia/Ho_Chi_Minh",
                "type": "str"
            },
            {
                "label": "Asia/Hong_Kong",
                "value": "Asia/Hong_Kong",
                "type": "str"
            },
            {
                "label": "Asia/Hovd",
                "value": "Asia/Hovd",
                "type": "str"
            },
            {
                "label": "Asia/Irkutsk",
                "value": "Asia/Irkutsk",
                "type": "str"
            },
            {
                "label": "Asia/Istanbul",
                "value": "Asia/Istanbul",
                "type": "str"
            },
            {
                "label": "Asia/Jakarta",
                "value": "Asia/Jakarta",
                "type": "str"
            },
            {
                "label": "Asia/Jayapura",
                "value": "Asia/Jayapura",
                "type": "str"
            },
            {
                "label": "Asia/Jerusalem",
                "value": "Asia/Jerusalem",
                "type": "str"
            },
            {
                "label": "Asia/Kabul",
                "value": "Asia/Kabul",
                "type": "str"
            },
            {
                "label": "Asia/Kamchatka",
                "value": "Asia/Kamchatka",
                "type": "str"
            },
            {
                "label": "Asia/Karachi",
                "value": "Asia/Karachi",
                "type": "str"
            },
            {
                "label": "Asia/Kashgar",
                "value": "Asia/Kashgar",
                "type": "str"
            },
            {
                "label": "Asia/Kathmandu",
                "value": "Asia/Kathmandu",
                "type": "str"
            },
            {
                "label": "Asia/Katmandu",
                "value": "Asia/Katmandu",
                "type": "str"
            },
            {
                "label": "Asia/Khandyga",
                "value": "Asia/Khandyga",
                "type": "str"
            },
            {
                "label": "Asia/Kolkata",
                "value": "Asia/Kolkata",
                "type": "str"
            },
            {
                "label": "Asia/Krasnoyarsk",
                "value": "Asia/Krasnoyarsk",
                "type": "str"
            },
            {
                "label": "Asia/Kuala_Lumpur",
                "value": "Asia/Kuala_Lumpur",
                "type": "str"
            },
            {
                "label": "Asia/Kuching",
                "value": "Asia/Kuching",
                "type": "str"
            },
            {
                "label": "Asia/Kuwait",
                "value": "Asia/Kuwait",
                "type": "str"
            },
            {
                "label": "Asia/Macao",
                "value": "Asia/Macao",
                "type": "str"
            },
            {
                "label": "Asia/Macau",
                "value": "Asia/Macau",
                "type": "str"
            },
            {
                "label": "Asia/Magadan",
                "value": "Asia/Magadan",
                "type": "str"
            },
            {
                "label": "Asia/Makassar",
                "value": "Asia/Makassar",
                "type": "str"
            },
            {
                "label": "Asia/Manila",
                "value": "Asia/Manila",
                "type": "str"
            },
            {
                "label": "Asia/Muscat",
                "value": "Asia/Muscat",
                "type": "str"
            },
            {
                "label": "Asia/Nicosia",
                "value": "Asia/Nicosia",
                "type": "str"
            },
            {
                "label": "Asia/Novokuznetsk",
                "value": "Asia/Novokuznetsk",
                "type": "str"
            },
            {
                "label": "Asia/Novosibirsk",
                "value": "Asia/Novosibirsk",
                "type": "str"
            },
            {
                "label": "Asia/Omsk",
                "value": "Asia/Omsk",
                "type": "str"
            },
            {
                "label": "Asia/Oral",
                "value": "Asia/Oral",
                "type": "str"
            },
            {
                "label": "Asia/Phnom_Penh",
                "value": "Asia/Phnom_Penh",
                "type": "str"
            },
            {
                "label": "Asia/Pontianak",
                "value": "Asia/Pontianak",
                "type": "str"
            },
            {
                "label": "Asia/Pyongyang",
                "value": "Asia/Pyongyang",
                "type": "str"
            },
            {
                "label": "Asia/Qatar",
                "value": "Asia/Qatar",
                "type": "str"
            },
            {
                "label": "Asia/Qostanay",
                "value": "Asia/Qostanay",
                "type": "str"
            },
            {
                "label": "Asia/Qyzylorda",
                "value": "Asia/Qyzylorda",
                "type": "str"
            },
            {
                "label": "Asia/Rangoon",
                "value": "Asia/Rangoon",
                "type": "str"
            },
            {
                "label": "Asia/Riyadh",
                "value": "Asia/Riyadh",
                "type": "str"
            },
            {
                "label": "Asia/Saigon",
                "value": "Asia/Saigon",
                "type": "str"
            },
            {
                "label": "Asia/Sakhalin",
                "value": "Asia/Sakhalin",
                "type": "str"
            },
            {
                "label": "Asia/Samarkand",
                "value": "Asia/Samarkand",
                "type": "str"
            },
            {
                "label": "Asia/Seoul",
                "value": "Asia/Seoul",
                "type": "str"
            },
            {
                "label": "Asia/Shanghai",
                "value": "Asia/Shanghai",
                "type": "str"
            },
            {
                "label": "Asia/Singapore",
                "value": "Asia/Singapore",
                "type": "str"
            },
            {
                "label": "Asia/Srednekolymsk",
                "value": "Asia/Srednekolymsk",
                "type": "str"
            },
            {
                "label": "Asia/Taipei",
                "value": "Asia/Taipei",
                "type": "str"
            },
            {
                "label": "Asia/Tashkent",
                "value": "Asia/Tashkent",
                "type": "str"
            },
            {
                "label": "Asia/Tbilisi",
                "value": "Asia/Tbilisi",
                "type": "str"
            },
            {
                "label": "Asia/Tehran",
                "value": "Asia/Tehran",
                "type": "str"
            },
            {
                "label": "Asia/Tel_Aviv",
                "value": "Asia/Tel_Aviv",
                "type": "str"
            },
            {
                "label": "Asia/Thimbu",
                "value": "Asia/Thimbu",
                "type": "str"
            },
            {
                "label": "Asia/Thimphu",
                "value": "Asia/Thimphu",
                "type": "str"
            },
            {
                "label": "Asia/Tokyo",
                "value": "Asia/Tokyo",
                "type": "str"
            },
            {
                "label": "Asia/Tomsk",
                "value": "Asia/Tomsk",
                "type": "str"
            },
            {
                "label": "Asia/Ujung_Pandang",
                "value": "Asia/Ujung_Pandang",
                "type": "str"
            },
            {
                "label": "Asia/Ulaanbaatar",
                "value": "Asia/Ulaanbaatar",
                "type": "str"
            },
            {
                "label": "Asia/Ulan_Bator",
                "value": "Asia/Ulan_Bator",
                "type": "str"
            },
            {
                "label": "Asia/Urumqi",
                "value": "Asia/Urumqi",
                "type": "str"
            },
            {
                "label": "Asia/Ust-Nera",
                "value": "Asia/Ust-Nera",
                "type": "str"
            },
            {
                "label": "Asia/Vientiane",
                "value": "Asia/Vientiane",
                "type": "str"
            },
            {
                "label": "Asia/Vladivostok",
                "value": "Asia/Vladivostok",
                "type": "str"
            },
            {
                "label": "Asia/Yakutsk",
                "value": "Asia/Yakutsk",
                "type": "str"
            },
            {
                "label": "Asia/Yangon",
                "value": "Asia/Yangon",
                "type": "str"
            },
            {
                "label": "Asia/Yekaterinburg",
                "value": "Asia/Yekaterinburg",
                "type": "str"
            },
            {
                "label": "Asia/Yerevan",
                "value": "Asia/Yerevan",
                "type": "str"
            },
            {
                "label": "Atlantic/Azores",
                "value": "Atlantic/Azores",
                "type": "str"
            },
            {
                "label": "Atlantic/Bermuda",
                "value": "Atlantic/Bermuda",
                "type": "str"
            },
            {
                "label": "Atlantic/Canary",
                "value": "Atlantic/Canary",
                "type": "str"
            },
            {
                "label": "Atlantic/Cape_Verde",
                "value": "Atlantic/Cape_Verde",
                "type": "str"
            },
            {
                "label": "Atlantic/Faeroe",
                "value": "Atlantic/Faeroe",
                "type": "str"
            },
            {
                "label": "Atlantic/Faroe",
                "value": "Atlantic/Faroe",
                "type": "str"
            },
            {
                "label": "Atlantic/Jan_Mayen",
                "value": "Atlantic/Jan_Mayen",
                "type": "str"
            },
            {
                "label": "Atlantic/Madeira",
                "value": "Atlantic/Madeira",
                "type": "str"
            },
            {
                "label": "Atlantic/Reykjavik",
                "value": "Atlantic/Reykjavik",
                "type": "str"
            },
            {
                "label": "Atlantic/South_Georgia",
                "value": "Atlantic/South_Georgia",
                "type": "str"
            },
            {
                "label": "Atlantic/St_Helena",
                "value": "Atlantic/St_Helena",
                "type": "str"
            },
            {
                "label": "Atlantic/Stanley",
                "value": "Atlantic/Stanley",
                "type": "str"
            },
            {
                "label": "Australia/ACT",
                "value": "Australia/ACT",
                "type": "str"
            },
            {
                "label": "Australia/Adelaide",
                "value": "Australia/Adelaide",
                "type": "str"
            },
            {
                "label": "Australia/Brisbane",
                "value": "Australia/Brisbane",
                "type": "str"
            },
            {
                "label": "Australia/Broken_Hill",
                "value": "Australia/Broken_Hill",
                "type": "str"
            },
            {
                "label": "Australia/Canberra",
                "value": "Australia/Canberra",
                "type": "str"
            },
            {
                "label": "Australia/Currie",
                "value": "Australia/Currie",
                "type": "str"
            },
            {
                "label": "Australia/Darwin",
                "value": "Australia/Darwin",
                "type": "str"
            },
            {
                "label": "Australia/Eucla",
                "value": "Australia/Eucla",
                "type": "str"
            },
            {
                "label": "Australia/Hobart",
                "value": "Australia/Hobart",
                "type": "str"
            },
            {
                "label": "Australia/LHI",
                "value": "Australia/LHI",
                "type": "str"
            },
            {
                "label": "Australia/Lindeman",
                "value": "Australia/Lindeman",
                "type": "str"
            },
            {
                "label": "Australia/Lord_Howe",
                "value": "Australia/Lord_Howe",
                "type": "str"
            },
            {
                "label": "Australia/Melbourne",
                "value": "Australia/Melbourne",
                "type": "str"
            },
            {
                "label": "Australia/North",
                "value": "Australia/North",
                "type": "str"
            },
            {
                "label": "Australia/NSW",
                "value": "Australia/NSW",
                "type": "str"
            },
            {
                "label": "Australia/Perth",
                "value": "Australia/Perth",
                "type": "str"
            },
            {
                "label": "Australia/Queensland",
                "value": "Australia/Queensland",
                "type": "str"
            },
            {
                "label": "Australia/South",
                "value": "Australia/South",
                "type": "str"
            },
            {
                "label": "Australia/Sydney",
                "value": "Australia/Sydney",
                "type": "str"
            },
            {
                "label": "Australia/Tasmania",
                "value": "Australia/Tasmania",
                "type": "str"
            },
            {
                "label": "Australia/Victoria",
                "value": "Australia/Victoria",
                "type": "str"
            },
            {
                "label": "Australia/West",
                "value": "Australia/West",
                "type": "str"
            },
            {
                "label": "Australia/Yancowinna",
                "value": "Australia/Yancowinna",
                "type": "str"
            },
            {
                "label": "Brazil/Acre",
                "value": "Brazil/Acre",
                "type": "str"
            },
            {
                "label": "Brazil/DeNoronha",
                "value": "Brazil/DeNoronha",
                "type": "str"
            },
            {
                "label": "Brazil/East",
                "value": "Brazil/East",
                "type": "str"
            },
            {
                "label": "Brazil/West",
                "value": "Brazil/West",
                "type": "str"
            },
            {
                "label": "Canada/Atlantic",
                "value": "Canada/Atlantic",
                "type": "str"
            },
            {
                "label": "Canada/Central",
                "value": "Canada/Central",
                "type": "str"
            },
            {
                "label": "Canada/Eastern",
                "value": "Canada/Eastern",
                "type": "str"
            },
            {
                "label": "Canada/Mountain",
                "value": "Canada/Mountain",
                "type": "str"
            },
            {
                "label": "Canada/Newfoundland",
                "value": "Canada/Newfoundland",
                "type": "str"
            },
            {
                "label": "Canada/Pacific",
                "value": "Canada/Pacific",
                "type": "str"
            },
            {
                "label": "Canada/Saskatchewan",
                "value": "Canada/Saskatchewan",
                "type": "str"
            },
            {
                "label": "Canada/Yukon",
                "value": "Canada/Yukon",
                "type": "str"
            },
            {
                "label": "CET",
                "value": "CET",
                "type": "str"
            },
            {
                "label": "Chile/Continental",
                "value": "Chile/Continental",
                "type": "str"
            },
            {
                "label": "Chile/EasterIsland",
                "value": "Chile/EasterIsland",
                "type": "str"
            },
            {
                "label": "CST6CDT",
                "value": "CST6CDT",
                "type": "str"
            },
            {
                "label": "Cuba",
                "value": "Cuba",
                "type": "str"
            },
            {
                "label": "EET",
                "value": "EET",
                "type": "str"
            },
            {
                "label": "Egypt",
                "value": "Egypt",
                "type": "str"
            },
            {
                "label": "Eire",
                "value": "Eire",
                "type": "str"
            },
            {
                "label": "EST",
                "value": "EST",
                "type": "str"
            },
            {
                "label": "EST5EDT",
                "value": "EST5EDT",
                "type": "str"
            },
            {
                "label": "Etc/GMT",
                "value": "Etc/GMT",
                "type": "str"
            },
            {
                "label": "Etc/GMT+0",
                "value": "Etc/GMT+0",
                "type": "str"
            },
            {
                "label": "Etc/GMT+1",
                "value": "Etc/GMT+1",
                "type": "str"
            },
            {
                "label": "Etc/GMT+10",
                "value": "Etc/GMT+10",
                "type": "str"
            },
            {
                "label": "Etc/GMT+11",
                "value": "Etc/GMT+11",
                "type": "str"
            },
            {
                "label": "Etc/GMT+12",
                "value": "Etc/GMT+12",
                "type": "str"
            },
            {
                "label": "Etc/GMT+2",
                "value": "Etc/GMT+2",
                "type": "str"
            },
            {
                "label": "Etc/GMT+3",
                "value": "Etc/GMT+3",
                "type": "str"
            },
            {
                "label": "Etc/GMT+4",
                "value": "Etc/GMT+4",
                "type": "str"
            },
            {
                "label": "Etc/GMT+5",
                "value": "Etc/GMT+5",
                "type": "str"
            },
            {
                "label": "Etc/GMT+6",
                "value": "Etc/GMT+6",
                "type": "str"
            },
            {
                "label": "Etc/GMT+7",
                "value": "Etc/GMT+7",
                "type": "str"
            },
            {
                "label": "Etc/GMT+8",
                "value": "Etc/GMT+8",
                "type": "str"
            },
            {
                "label": "Etc/GMT+9",
                "value": "Etc/GMT+9",
                "type": "str"
            },
            {
                "label": "Etc/GMT-0",
                "value": "Etc/GMT-0",
                "type": "str"
            },
            {
                "label": "Etc/GMT-1",
                "value": "Etc/GMT-1",
                "type": "str"
            },
            {
                "label": "Etc/GMT-10",
                "value": "Etc/GMT-10",
                "type": "str"
            },
            {
                "label": "Etc/GMT-11",
                "value": "Etc/GMT-11",
                "type": "str"
            },
            {
                "label": "Etc/GMT-12",
                "value": "Etc/GMT-12",
                "type": "str"
            },
            {
                "label": "Etc/GMT-13",
                "value": "Etc/GMT-13",
                "type": "str"
            },
            {
                "label": "Etc/GMT-14",
                "value": "Etc/GMT-14",
                "type": "str"
            },
            {
                "label": "Etc/GMT-2",
                "value": "Etc/GMT-2",
                "type": "str"
            },
            {
                "label": "Etc/GMT-3",
                "value": "Etc/GMT-3",
                "type": "str"
            },
            {
                "label": "Etc/GMT-4",
                "value": "Etc/GMT-4",
                "type": "str"
            },
            {
                "label": "Etc/GMT-5",
                "value": "Etc/GMT-5",
                "type": "str"
            },
            {
                "label": "Etc/GMT-6",
                "value": "Etc/GMT-6",
                "type": "str"
            },
            {
                "label": "Etc/GMT-7",
                "value": "Etc/GMT-7",
                "type": "str"
            },
            {
                "label": "Etc/GMT-8",
                "value": "Etc/GMT-8",
                "type": "str"
            },
            {
                "label": "Etc/GMT-9",
                "value": "Etc/GMT-9",
                "type": "str"
            },
            {
                "label": "Etc/GMT0",
                "value": "Etc/GMT0",
                "type": "str"
            },
            {
                "label": "Etc/Greenwich",
                "value": "Etc/Greenwich",
                "type": "str"
            },
            {
                "label": "Etc/UCT",
                "value": "Etc/UCT",
                "type": "str"
            },
            {
                "label": "Etc/Universal",
                "value": "Etc/Universal",
                "type": "str"
            },
            {
                "label": "Etc/UTC",
                "value": "Etc/UTC",
                "type": "str"
            },
            {
                "label": "Etc/Zulu",
                "value": "Etc/Zulu",
                "type": "str"
            },
            {
                "label": "Europe/Amsterdam",
                "value": "Europe/Amsterdam",
                "type": "str"
            },
            {
                "label": "Europe/Andorra",
                "value": "Europe/Andorra",
                "type": "str"
            },
            {
                "label": "Europe/Astrakhan",
                "value": "Europe/Astrakhan",
                "type": "str"
            },
            {
                "label": "Europe/Athens",
                "value": "Europe/Athens",
                "type": "str"
            },
            {
                "label": "Europe/Belfast",
                "value": "Europe/Belfast",
                "type": "str"
            },
            {
                "label": "Europe/Belgrade",
                "value": "Europe/Belgrade",
                "type": "str"
            },
            {
                "label": "Europe/Berlin",
                "value": "Europe/Berlin",
                "type": "str"
            },
            {
                "label": "Europe/Bratislava",
                "value": "Europe/Bratislava",
                "type": "str"
            },
            {
                "label": "Europe/Brussels",
                "value": "Europe/Brussels",
                "type": "str"
            },
            {
                "label": "Europe/Bucharest",
                "value": "Europe/Bucharest",
                "type": "str"
            },
            {
                "label": "Europe/Budapest",
                "value": "Europe/Budapest",
                "type": "str"
            },
            {
                "label": "Europe/Busingen",
                "value": "Europe/Busingen",
                "type": "str"
            },
            {
                "label": "Europe/Chisinau",
                "value": "Europe/Chisinau",
                "type": "str"
            },
            {
                "label": "Europe/Copenhagen",
                "value": "Europe/Copenhagen",
                "type": "str"
            },
            {
                "label": "Europe/Dublin",
                "value": "Europe/Dublin",
                "type": "str"
            },
            {
                "label": "Europe/Gibraltar",
                "value": "Europe/Gibraltar",
                "type": "str"
            },
            {
                "label": "Europe/Guernsey",
                "value": "Europe/Guernsey",
                "type": "str"
            },
            {
                "label": "Europe/Helsinki",
                "value": "Europe/Helsinki",
                "type": "str"
            },
            {
                "label": "Europe/Isle_of_Man",
                "value": "Europe/Isle_of_Man",
                "type": "str"
            },
            {
                "label": "Europe/Istanbul",
                "value": "Europe/Istanbul",
                "type": "str"
            },
            {
                "label": "Europe/Jersey",
                "value": "Europe/Jersey",
                "type": "str"
            },
            {
                "label": "Europe/Kaliningrad",
                "value": "Europe/Kaliningrad",
                "type": "str"
            },
            {
                "label": "Europe/Kiev",
                "value": "Europe/Kiev",
                "type": "str"
            },
            {
                "label": "Europe/Kirov",
                "value": "Europe/Kirov",
                "type": "str"
            },
            {
                "label": "Europe/Kyiv",
                "value": "Europe/Kyiv",
                "type": "str"
            },
            {
                "label": "Europe/Lisbon",
                "value": "Europe/Lisbon",
                "type": "str"
            },
            {
                "label": "Europe/Ljubljana",
                "value": "Europe/Ljubljana",
                "type": "str"
            },
            {
                "label": "Europe/London",
                "value": "Europe/London",
                "type": "str"
            },
            {
                "label": "Europe/Luxembourg",
                "value": "Europe/Luxembourg",
                "type": "str"
            },
            {
                "label": "Europe/Madrid",
                "value": "Europe/Madrid",
                "type": "str"
            },
            {
                "label": "Europe/Malta",
                "value": "Europe/Malta",
                "type": "str"
            },
            {
                "label": "Europe/Mariehamn",
                "value": "Europe/Mariehamn",
                "type": "str"
            },
            {
                "label": "Europe/Minsk",
                "value": "Europe/Minsk",
                "type": "str"
            },
            {
                "label": "Europe/Monaco",
                "value": "Europe/Monaco",
                "type": "str"
            },
            {
                "label": "Europe/Moscow",
                "value": "Europe/Moscow",
                "type": "str"
            },
            {
                "label": "Europe/Nicosia",
                "value": "Europe/Nicosia",
                "type": "str"
            },
            {
                "label": "Europe/Oslo",
                "value": "Europe/Oslo",
                "type": "str"
            },
            {
                "label": "Europe/Paris",
                "value": "Europe/Paris",
                "type": "str"
            },
            {
                "label": "Europe/Podgorica",
                "value": "Europe/Podgorica",
                "type": "str"
            },
            {
                "label": "Europe/Prague",
                "value": "Europe/Prague",
                "type": "str"
            },
            {
                "label": "Europe/Riga",
                "value": "Europe/Riga",
                "type": "str"
            },
            {
                "label": "Europe/Rome",
                "value": "Europe/Rome",
                "type": "str"
            },
            {
                "label": "Europe/Samara",
                "value": "Europe/Samara",
                "type": "str"
            },
            {
                "label": "Europe/San_Marino",
                "value": "Europe/San_Marino",
                "type": "str"
            },
            {
                "label": "Europe/Sarajevo",
                "value": "Europe/Sarajevo",
                "type": "str"
            },
            {
                "label": "Europe/Saratov",
                "value": "Europe/Saratov",
                "type": "str"
            },
            {
                "label": "Europe/Simferopol",
                "value": "Europe/Simferopol",
                "type": "str"
            },
            {
                "label": "Europe/Skopje",
                "value": "Europe/Skopje",
                "type": "str"
            },
            {
                "label": "Europe/Sofia",
                "value": "Europe/Sofia",
                "type": "str"
            },
            {
                "label": "Europe/Stockholm",
                "value": "Europe/Stockholm",
                "type": "str"
            },
            {
                "label": "Europe/Tallinn",
                "value": "Europe/Tallinn",
                "type": "str"
            },
            {
                "label": "Europe/Tirane",
                "value": "Europe/Tirane",
                "type": "str"
            },
            {
                "label": "Europe/Tiraspol",
                "value": "Europe/Tiraspol",
                "type": "str"
            },
            {
                "label": "Europe/Ulyanovsk",
                "value": "Europe/Ulyanovsk",
                "type": "str"
            },
            {
                "label": "Europe/Uzhgorod",
                "value": "Europe/Uzhgorod",
                "type": "str"
            },
            {
                "label": "Europe/Vaduz",
                "value": "Europe/Vaduz",
                "type": "str"
            },
            {
                "label": "Europe/Vatican",
                "value": "Europe/Vatican",
                "type": "str"
            },
            {
                "label": "Europe/Vienna",
                "value": "Europe/Vienna",
                "type": "str"
            },
            {
                "label": "Europe/Vilnius",
                "value": "Europe/Vilnius",
                "type": "str"
            },
            {
                "label": "Europe/Volgograd",
                "value": "Europe/Volgograd",
                "type": "str"
            },
            {
                "label": "Europe/Warsaw",
                "value": "Europe/Warsaw",
                "type": "str"
            },
            {
                "label": "Europe/Zagreb",
                "value": "Europe/Zagreb",
                "type": "str"
            },
            {
                "label": "Europe/Zaporozhye",
                "value": "Europe/Zaporozhye",
                "type": "str"
            },
            {
                "label": "Europe/Zurich",
                "value": "Europe/Zurich",
                "type": "str"
            },
            {
                "label": "Factory",
                "value": "Factory",
                "type": "str"
            },
            {
                "label": "GB",
                "value": "GB",
                "type": "str"
            },
            {
                "label": "GB-Eire",
                "value": "GB-Eire",
                "type": "str"
            },
            {
                "label": "GMT",
                "value": "GMT",
                "type": "str"
            },
            {
                "label": "GMT+0",
                "value": "GMT+0",
                "type": "str"
            },
            {
                "label": "GMT-0",
                "value": "GMT-0",
                "type": "str"
            },
            {
                "label": "GMT0",
                "value": "GMT0",
                "type": "str"
            },
            {
                "label": "Greenwich",
                "value": "Greenwich",
                "type": "str"
            },
            {
                "label": "Hongkong",
                "value": "Hongkong",
                "type": "str"
            },
            {
                "label": "HST",
                "value": "HST",
                "type": "str"
            },
            {
                "label": "Iceland",
                "value": "Iceland",
                "type": "str"
            },
            {
                "label": "Indian/Antananarivo",
                "value": "Indian/Antananarivo",
                "type": "str"
            },
            {
                "label": "Indian/Chagos",
                "value": "Indian/Chagos",
                "type": "str"
            },
            {
                "label": "Indian/Christmas",
                "value": "Indian/Christmas",
                "type": "str"
            },
            {
                "label": "Indian/Cocos",
                "value": "Indian/Cocos",
                "type": "str"
            },
            {
                "label": "Indian/Comoro",
                "value": "Indian/Comoro",
                "type": "str"
            },
            {
                "label": "Indian/Kerguelen",
                "value": "Indian/Kerguelen",
                "type": "str"
            },
            {
                "label": "Indian/Mahe",
                "value": "Indian/Mahe",
                "type": "str"
            },
            {
                "label": "Indian/Maldives",
                "value": "Indian/Maldives",
                "type": "str"
            },
            {
                "label": "Indian/Mauritius",
                "value": "Indian/Mauritius",
                "type": "str"
            },
            {
                "label": "Indian/Mayotte",
                "value": "Indian/Mayotte",
                "type": "str"
            },
            {
                "label": "Indian/Reunion",
                "value": "Indian/Reunion",
                "type": "str"
            },
            {
                "label": "Iran",
                "value": "Iran",
                "type": "str"
            },
            {
                "label": "Israel",
                "value": "Israel",
                "type": "str"
            },
            {
                "label": "Jamaica",
                "value": "Jamaica",
                "type": "str"
            },
            {
                "label": "Japan",
                "value": "Japan",
                "type": "str"
            },
            {
                "label": "Kwajalein",
                "value": "Kwajalein",
                "type": "str"
            },
            {
                "label": "Libya",
                "value": "Libya",
                "type": "str"
            },
            {
                "label": "MET",
                "value": "MET",
                "type": "str"
            },
            {
                "label": "Mexico/BajaNorte",
                "value": "Mexico/BajaNorte",
                "type": "str"
            },
            {
                "label": "Mexico/BajaSur",
                "value": "Mexico/BajaSur",
                "type": "str"
            },
            {
                "label": "Mexico/General",
                "value": "Mexico/General",
                "type": "str"
            },
            {
                "label": "MST",
                "value": "MST",
                "type": "str"
            },
            {
                "label": "MST7MDT",
                "value": "MST7MDT",
                "type": "str"
            },
            {
                "label": "Navajo",
                "value": "Navajo",
                "type": "str"
            },
            {
                "label": "NZ",
                "value": "NZ",
                "type": "str"
            },
            {
                "label": "NZ-CHAT",
                "value": "NZ-CHAT",
                "type": "str"
            },
            {
                "label": "Pacific/Apia",
                "value": "Pacific/Apia",
                "type": "str"
            },
            {
                "label": "Pacific/Auckland",
                "value": "Pacific/Auckland",
                "type": "str"
            },
            {
                "label": "Pacific/Bougainville",
                "value": "Pacific/Bougainville",
                "type": "str"
            },
            {
                "label": "Pacific/Chatham",
                "value": "Pacific/Chatham",
                "type": "str"
            },
            {
                "label": "Pacific/Chuuk",
                "value": "Pacific/Chuuk",
                "type": "str"
            },
            {
                "label": "Pacific/Easter",
                "value": "Pacific/Easter",
                "type": "str"
            },
            {
                "label": "Pacific/Efate",
                "value": "Pacific/Efate",
                "type": "str"
            },
            {
                "label": "Pacific/Enderbury",
                "value": "Pacific/Enderbury",
                "type": "str"
            },
            {
                "label": "Pacific/Fakaofo",
                "value": "Pacific/Fakaofo",
                "type": "str"
            },
            {
                "label": "Pacific/Fiji",
                "value": "Pacific/Fiji",
                "type": "str"
            },
            {
                "label": "Pacific/Funafuti",
                "value": "Pacific/Funafuti",
                "type": "str"
            },
            {
                "label": "Pacific/Galapagos",
                "value": "Pacific/Galapagos",
                "type": "str"
            },
            {
                "label": "Pacific/Gambier",
                "value": "Pacific/Gambier",
                "type": "str"
            },
            {
                "label": "Pacific/Guadalcanal",
                "value": "Pacific/Guadalcanal",
                "type": "str"
            },
            {
                "label": "Pacific/Guam",
                "value": "Pacific/Guam",
                "type": "str"
            },
            {
                "label": "Pacific/Honolulu",
                "value": "Pacific/Honolulu",
                "type": "str"
            },
            {
                "label": "Pacific/Johnston",
                "value": "Pacific/Johnston",
                "type": "str"
            },
            {
                "label": "Pacific/Kanton",
                "value": "Pacific/Kanton",
                "type": "str"
            },
            {
                "label": "Pacific/Kiritimati",
                "value": "Pacific/Kiritimati",
                "type": "str"
            },
            {
                "label": "Pacific/Kosrae",
                "value": "Pacific/Kosrae",
                "type": "str"
            },
            {
                "label": "Pacific/Kwajalein",
                "value": "Pacific/Kwajalein",
                "type": "str"
            },
            {
                "label": "Pacific/Majuro",
                "value": "Pacific/Majuro",
                "type": "str"
            },
            {
                "label": "Pacific/Marquesas",
                "value": "Pacific/Marquesas",
                "type": "str"
            },
            {
                "label": "Pacific/Midway",
                "value": "Pacific/Midway",
                "type": "str"
            },
            {
                "label": "Pacific/Nauru",
                "value": "Pacific/Nauru",
                "type": "str"
            },
            {
                "label": "Pacific/Niue",
                "value": "Pacific/Niue",
                "type": "str"
            },
            {
                "label": "Pacific/Norfolk",
                "value": "Pacific/Norfolk",
                "type": "str"
            },
            {
                "label": "Pacific/Noumea",
                "value": "Pacific/Noumea",
                "type": "str"
            },
            {
                "label": "Pacific/Pago_Pago",
                "value": "Pacific/Pago_Pago",
                "type": "str"
            },
            {
                "label": "Pacific/Palau",
                "value": "Pacific/Palau",
                "type": "str"
            },
            {
                "label": "Pacific/Pitcairn",
                "value": "Pacific/Pitcairn",
                "type": "str"
            },
            {
                "label": "Pacific/Pohnpei",
                "value": "Pacific/Pohnpei",
                "type": "str"
            },
            {
                "label": "Pacific/Ponape",
                "value": "Pacific/Ponape",
                "type": "str"
            },
            {
                "label": "Pacific/Port_Moresby",
                "value": "Pacific/Port_Moresby",
                "type": "str"
            },
            {
                "label": "Pacific/Rarotonga",
                "value": "Pacific/Rarotonga",
                "type": "str"
            },
            {
                "label": "Pacific/Saipan",
                "value": "Pacific/Saipan",
                "type": "str"
            },
            {
                "label": "Pacific/Samoa",
                "value": "Pacific/Samoa",
                "type": "str"
            },
            {
                "label": "Pacific/Tahiti",
                "value": "Pacific/Tahiti",
                "type": "str"
            },
            {
                "label": "Pacific/Tarawa",
                "value": "Pacific/Tarawa",
                "type": "str"
            },
            {
                "label": "Pacific/Tongatapu",
                "value": "Pacific/Tongatapu",
                "type": "str"
            },
            {
                "label": "Pacific/Truk",
                "value": "Pacific/Truk",
                "type": "str"
            },
            {
                "label": "Pacific/Wake",
                "value": "Pacific/Wake",
                "type": "str"
            },
            {
                "label": "Pacific/Wallis",
                "value": "Pacific/Wallis",
                "type": "str"
            },
            {
                "label": "Pacific/Yap",
                "value": "Pacific/Yap",
                "type": "str"
            },
            {
                "label": "Poland",
                "value": "Poland",
                "type": "str"
            },
            {
                "label": "Portugal",
                "value": "Portugal",
                "type": "str"
            },
            {
                "label": "PRC",
                "value": "PRC",
                "type": "str"
            },
            {
                "label": "PST8PDT",
                "value": "PST8PDT",
                "type": "str"
            },
            {
                "label": "ROC",
                "value": "ROC",
                "type": "str"
            },
            {
                "label": "ROK",
                "value": "ROK",
                "type": "str"
            },
            {
                "label": "Singapore",
                "value": "Singapore",
                "type": "str"
            },
            {
                "label": "Turkey",
                "value": "Turkey",
                "type": "str"
            },
            {
                "label": "UCT",
                "value": "UCT",
                "type": "str"
            },
            {
                "label": "Universal",
                "value": "Universal",
                "type": "str"
            },
            {
                "label": "US/Alaska",
                "value": "US/Alaska",
                "type": "str"
            },
            {
                "label": "US/Aleutian",
                "value": "US/Aleutian",
                "type": "str"
            },
            {
                "label": "US/Arizona",
                "value": "US/Arizona",
                "type": "str"
            },
            {
                "label": "US/Central",
                "value": "US/Central",
                "type": "str"
            },
            {
                "label": "US/East-Indiana",
                "value": "US/East-Indiana",
                "type": "str"
            },
            {
                "label": "US/Eastern",
                "value": "US/Eastern",
                "type": "str"
            },
            {
                "label": "US/Hawaii",
                "value": "US/Hawaii",
                "type": "str"
            },
            {
                "label": "US/Indiana-Starke",
                "value": "US/Indiana-Starke",
                "type": "str"
            },
            {
                "label": "US/Michigan",
                "value": "US/Michigan",
                "type": "str"
            },
            {
                "label": "US/Mountain",
                "value": "US/Mountain",
                "type": "str"
            },
            {
                "label": "US/Pacific",
                "value": "US/Pacific",
                "type": "str"
            },
            {
                "label": "US/Samoa",
                "value": "US/Samoa",
                "type": "str"
            },
            {
                "label": "UTC",
                "value": "UTC",
                "type": "str"
            },
            {
                "label": "W-SU",
                "value": "W-SU",
                "type": "str"
            },
            {
                "label": "WET",
                "value": "WET",
                "type": "str"
            },
            {
                "label": "Zulu",
                "value": "Zulu",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "TimeZone",
        "topicType": "str",
        "className": "",
        "x": 3380,
        "y": 440,
        "wires": [
            [
                "3a1fab6a57ea634f"
            ]
        ]
    },
    {
        "id": "0efd6826e2004381",
        "type": "link out",
        "z": "3aa03811830ef29e",
        "name": "Link out to log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 3625,
        "y": 480,
        "wires": []
    },
    {
        "id": "a4ac5565207c1ebe",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "#:(file)::NodeRed.TZ",
        "payloadType": "global",
        "x": 3190,
        "y": 440,
        "wires": [
            [
                "51b5b527505d6707"
            ]
        ]
    },
    {
        "id": "616a6b199f9e13a4",
        "type": "function",
        "z": "3aa03811830ef29e",
        "name": "function 119",
        "func": "var varTZ = global.get('NodeRed.TZ', \"file\");\nvar msg1 = {};\n\nif (varTZ === undefined) {\n    msg1.topic = 'SYSTEM';\n    msg1.payload = '<font color=red>TimeZone not set. Please go to SYSTEM >> SETTINGS and set your timezone from the list </font>';\n    return ([null,msg1])\n}\n\n\nmsg1.payload = varTZ;\n\nreturn msg1;",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 480,
        "wires": [
            [
                "51b5b527505d6707"
            ],
            [
                "0efd6826e2004381"
            ]
        ]
    },
    {
        "id": "39fb55462d85b463",
        "type": "link in",
        "z": "3aa03811830ef29e",
        "name": "link in 101",
        "links": [
            "47cb7500b0321fc1"
        ],
        "x": 3095,
        "y": 480,
        "wires": [
            [
                "616a6b199f9e13a4"
            ]
        ]
    },
    {
        "id": "6a3a4d811750ba5d",
        "type": "inject",
        "z": "3aa03811830ef29e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 3170,
        "y": 520,
        "wires": [
            [
                "616a6b199f9e13a4"
            ]
        ]
    },
    {
        "id": "d5fea67661261002",
        "type": "tab",
        "label": "WP Debug",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3ce1342324a97c52",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "HP data logging when compr. is ON (Tinlet, Toutlet, Ttarget, Freq)",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "57c9f02c576ad71f",
            "c8b48ccb978f3380",
            "b903f8bbf513d6a1",
            "a1954fc33dd6ddf9",
            "ff02e751b096770f",
            "9080f9e84fd9e2a5",
            "082586cfc8693748",
            "1a8bf49ae0badf5a",
            "2a1004c42a0b7dc1",
            "109e99262b1d9b31",
            "3078dedaa0fa9fa6",
            "df9dc017de54372f",
            "98332e44d65ec671",
            "32c013973096ab65"
        ],
        "x": 74,
        "y": 219,
        "w": 1112,
        "h": 202
    },
    {
        "id": "1f4cf47dbe4285dc",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "MQTT Counter + Overflow protection",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "459dcc6cc8cff9da",
            "c94e5636d62a2bd9",
            "de77807ce3dc66fc",
            "58c919290387cba4",
            "fdd35059e43f16d0",
            "c4dd85e3e2a5dff4",
            "b65cbaafba3a948a"
        ],
        "x": 574,
        "y": 439,
        "w": 612,
        "h": 162
    },
    {
        "id": "aed05096f97f9ba6",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Function System Check",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "8e9e69d85c6ec035",
            "365e9747b6e58903",
            "ae21a03ad6f43d1c",
            "614b9c64adf19f94",
            "d0ac8299461b7c1f"
        ],
        "x": 74,
        "y": 439,
        "w": 492,
        "h": 162
    },
    {
        "id": "5166b23daf2b561d",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Defrost counter",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f9d6e659dbe05a19",
            "991502670f43d03e",
            "116f4e573c2d55e8",
            "a9fa37eb6a1a4fc2",
            "842e7cc6853ea3c8",
            "afa5bf9f7c3531bc"
        ],
        "x": 74,
        "y": 619,
        "w": 552,
        "h": 162
    },
    {
        "id": "9a941ae145859932",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Averige runtime",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "4df2960daa64b31d",
            "6fe317de99320aa3",
            "0af4b3b3445b3ce2",
            "6c6d719592dac8d5",
            "09a6b8cd0884bcc2",
            "2c3deed445f0081b",
            "5018105cf5b6fcf8",
            "c5514adad11b8217"
        ],
        "x": 54,
        "y": 799,
        "w": 1132,
        "h": 142
    },
    {
        "id": "ebe2890eadc33dcd",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Error Counter",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "0e9c0e551061fdbf",
            "b8280b17e99b11d1",
            "63680817e29852bf"
        ],
        "x": 744,
        "y": 659,
        "w": 442,
        "h": 122
    },
    {
        "id": "1a3f956a12898279",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Check for custom sensors connected to Heishamon:  kWh meter(s) & 1-wire sensors",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "88b24c510e42cb4d",
            "e13d89b6bf39c3a3",
            "320f3cb11444550f",
            "10a931a475e12a39",
            "f91a8e87996f7a36",
            "50965b08724bdd8c",
            "f2d7ea937abca010",
            "f135a11c0945f1cd",
            "2dd99b9e00efee29",
            "fe8169803ad0da4c",
            "98ab01c488771719",
            "f04a11835631b092",
            "e570795bddada758",
            "28ad1d969c079693",
            "70220fbbb0e911d1"
        ],
        "x": 74,
        "y": 1379,
        "w": 1072,
        "h": 262
    },
    {
        "id": "cd5937af83198f9a",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Test Dynamic subsribe to Heishamon 1-wire topics",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "05e22a7bbcfb1aa1",
            "825f53ebdfb5fd43",
            "8cab4c14513ce5fa",
            "16808d5b28081690",
            "798b2017d73b9795",
            "fd1a14b5c123f7aa",
            "9624117d96bd6dbb"
        ],
        "x": 74,
        "y": 1679,
        "w": 1112,
        "h": 202
    },
    {
        "id": "bab76cb8c9631c59",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Defrost button",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "399e883e6deac7a3",
            "d6ef6434856148df",
            "037c668f34165450",
            "1b91aa81aad7c7b5",
            "d3a2ef1813673fb5",
            "1ebb1a2803291fd7",
            "fd2777fee0c73d23",
            "6df1fb31e6665cd4"
        ],
        "x": 74,
        "y": 1919,
        "w": 1112,
        "h": 82
    },
    {
        "id": "0531f7d830ad5e1b",
        "type": "group",
        "z": "d5fea67661261002",
        "name": "Dashboard System check",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "a8acdcc0dc537830",
            "fa1495af192e1c1e",
            "8a882609f0e2d88a",
            "62d33aea9b2babaa",
            "751fec2ce6f8faac",
            "c25c9914b837785c",
            "dadcc09786666d40",
            "a13a59feb119d9ce",
            "5ce82b31e85cfe3a",
            "559f3875ebe7df72",
            "172fe3f8a616d7b8",
            "6e97d05d1a6275c7",
            "be1b927461546a7f",
            "bd61942b914a15ce",
            "43783f0ff1a97ef1",
            "35b2bc2a89cc2d84",
            "c3c58f9072c16f58",
            "4606d685d39ac772",
            "bb5e36b2c205a984",
            "d2415b149ef2f275",
            "2cc4d65eb692223b",
            "70355972167285f4",
            "4c70cc2db4654795",
            "bb8548eb6893bd56",
            "678c2fa5db148f1e",
            "c40e5d6c866f68df",
            "cbec49b57325d8a9",
            "c4100822f25e71c5"
        ],
        "x": 54,
        "y": 959,
        "w": 1132,
        "h": 382
    },
    {
        "id": "aca3036a5a8e2f25",
        "type": "comment",
        "z": "d5fea67661261002",
        "name": "WP Debug. A tab showing extra information. Show temperatures, system variables used by flow, Check for conflicts",
        "info": "",
        "x": 480,
        "y": 60,
        "wires": []
    },
    {
        "id": "57c9f02c576ad71f",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "Log all WP info",
        "func": "var Freq = msg.payload;\n//Freq = parseFloat(Freq);\n\n//save hightest freq ever:\nif (Freq > 0) { \n    var HighestFreq = global.get('HighestFreq', \"file\"); // get last highscore ;)\n    if (HighestFreq === undefined) { HighestFreq = 0; }\n    if (Freq > HighestFreq) { global.set('HighestFreq', Freq, \"file\"); } //save\n}\n\nif (global.get('Debugging', \"file\") == 0) { return null ; } //exit if debugging switch is off\n\nlet msg1 = {};\nmsg.topic = \"\";\nif (Freq > 0) \n    { \n    //var Freq = msg.payload;\n    var Ta = global.get('TOP6_Main_Outlet_Temp');                   //  PV (Ta/outlet) Temperature of water.\n    var Tr = global.get('TOP5_Main_Inlet_Temp');                    //  PV (Tr/inlet) Temperature of water\n    var SP = global.get('TOP27_Z1_Heat_Request_Temp'); \n    var QM = global.get('TOP18_Quiet_Mode_Level', \"file\");            // current Quietmode level\n    var PM = global.get('TOP17_Powerful_Mode_Time', \"file\");    // current TOP17_Powerful_Mode_Time\n    var Watt = global.get('TOP16_Heat_Energy_Consumption');           // power in Watt\n    var TOP62_Fan1_Motor_Speed = global.get('TOP62_Fan1_Motor_Speed');                  // Fan 1 rpm\n    var TOP63_Fan2_Motor_Speed = global.get('TOP63_Fan2_Motor_Speed');                  // Fan 2 rpm\n    var COP_HEAT = global.get('COP_HEAT');                      // COP Heat\n    var COP_DHW = global.get('COP_DHW');                        // COP DHW\n    var OperatingModes = [\"Heat only\", \"Cool only\", \"Auto(Heat)\", \"DHW only\", \"Heat+DHW\", \"Cool+DHW\", \"Auto(Heat)+DHW\", \"Auto(Cool)\", \"Auto(Cool)+DHW\"];\n    var OM = global.get('TOP4_Operating_Mode_State', \"file\");\n    OM = OperatingModes[OM];\n\n    \n    msg.payload = \"Target=\" + SP + \"°C\" + \", Inlet=\" + Tr + \"°C\" + \",  Outlet=\" + Ta + \"°C\" + \", Freq=\" + Freq + \" Hz\" + \", \" + Watt + \" W, OM=\" + OM;\n    if (PM > 0) msg.payload += \", Powerful mode=\" + PM;\n    msg.payload += \", fan1: \" + TOP62_Fan1_Motor_Speed + \" rpm\";\n    if (TOP63_Fan2_Motor_Speed > 0) \n        {\n            msg.payload += \", fan2: \" + TOP63_Fan2_Motor_Speed + \" rpm\";\n        }\n    if (QM > 0) \n        {\n            msg.payload += \", QM=\" + QM;\n        }\n    if (COP_HEAT > 0) {\n        msg.payload += \", COP=\" + COP_HEAT;\n    }\n    if (COP_DHW > 0) {\n        msg.payload += \", COP=\" + COP_DHW;\n    }\n    } \n\nelse \n    {\n    return null;\n    } \nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 320,
        "wires": [
            [
                "c8b48ccb978f3380"
            ]
        ]
    },
    {
        "id": "c8b48ccb978f3380",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1030,
        "y": 320,
        "wires": [
            [
                "b903f8bbf513d6a1"
            ]
        ]
    },
    {
        "id": "b903f8bbf513d6a1",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "Send to log",
        "mode": "link",
        "links": [
            "fa1495af192e1c1e"
        ],
        "x": 1145,
        "y": 320,
        "wires": []
    },
    {
        "id": "a1954fc33dd6ddf9",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "at boot",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "source",
                "v": "boot",
                "vt": "str"
            }
        ],
        "repeat": "1680",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "#:(file)::Debugging",
        "payloadType": "global",
        "x": 190,
        "y": 260,
        "wires": [
            [
                "ff02e751b096770f"
            ]
        ]
    },
    {
        "id": "ff02e751b096770f",
        "type": "ui_switch",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "Extend logging",
        "label": "Extend logging",
        "tooltip": "Show more data in logs",
        "group": "ec94eaa0930738be",
        "order": 7,
        "width": 4,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 380,
        "y": 260,
        "wires": [
            [
                "9080f9e84fd9e2a5"
            ]
        ]
    },
    {
        "id": "9080f9e84fd9e2a5",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "Debuginfo",
        "func": "// Extend logging on\nif (msg.payload == 1) {\n    global.set('Debugging', 1, \"file\");\n    if (msg.source == \"boot\") { \n        return null; \n    }\n} \n    \n// Extend logging on or undefined\nif (msg.payload == 0 || msg.payload === undefined) { \n    global.set('Debugging', 0, \"file\");\n    return null; \n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 260,
        "wires": [
            [
                "57c9f02c576ad71f"
            ]
        ]
    },
    {
        "id": "8e9e69d85c6ec035",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "aed05096f97f9ba6",
        "name": "System check",
        "func": "flow.set('debuglog', []); // clear log\n\nmsg.topic = \"\";\nmsg.payload = \"<b>============================================================</b>\";\nnode.send(msg);\n\n\n// Warn user is mqtt-messages are blocked:\nvar MQTT = global.get('MQTT', \"file\");\nif (MQTT.block_active == 1 && MQTT !== undefined) {\n    msg.payload = \"*SYSTEM: MQTT-Commands are blocked, this flow will not function correctly.\";\n    node.send(msg);\n}\n\n\n// check WP status first\nvar TOP0_Heatpump_State = global.get('TOP0_Heatpump_State', \"file\");\nif (TOP0_Heatpump_State == 0 || TOP0_Heatpump_State === undefined) { TOP0_Heatpump_State = \"off\"; } else { TOP0_Heatpump_State = \"on\"; }\nvar TOP20_ThreeWay_Valve_State = global.get('TOP20_ThreeWay_Valve_State'); // 3-way valve mode (0=Room, 1=DHW)\nif (TOP20_ThreeWay_Valve_State === undefined) { TOP20_ThreeWay_Valve_State = \"NA\"; }\nif (TOP20_ThreeWay_Valve_State == 0) { TOP20_ThreeWay_Valve_State = \"Room\"; }\nif (TOP20_ThreeWay_Valve_State == 1) { TOP20_ThreeWay_Valve_State = \"DHW\"; }\nvar ss_Hz = global.get('compressor_frequency', \"file\");         // Get the global variable for current compressor frequency\n\nvar OperatingModes = [\"Heat only\", \"Cool only\", \"Auto(Heat)\", \"DHW only\", \"Heat+DHW\", \"Cool+DHW\", \"Auto(Heat)+DHW\", \"Auto(Cool)\", \"Auto(Cool)+DHW\"];\nvar OM = global.get('TOP4_Operating_Mode_State', \"file\");\nvar message = \"HP power is \" + TOP0_Heatpump_State + \", operation mode \" + OperatingModes[OM] + \", threeway valve in position \" + TOP20_ThreeWay_Valve_State;\nmsg.payload = message;\nnode.send(msg);\n\n\n\n\n// temperatures etc:\nvar Freq = ss_Hz;\nvar Ta = global.get('TOP6_Main_Outlet_Temp');                   //  PV (Ta/outlet) Temperature of water.\nvar Tr = global.get('TOP5_Main_Inlet_Temp');                    //  PV (Tr/inlet) Temperature of water\nvar SP = global.get('TOP27_Z1_Heat_Request_Temp');\nvar QM = global.get('TOP18_Quiet_Mode_Level', \"file\");            // current Quietmode level\nvar PM = global.get('TOP17_Powerful_Mode_Time', \"file\");                // current TOP17_Powerful_Mode_Time\nvar Watt = global.get('TOP16_Heat_Energy_Consumption');           // power in Watt (Todo, use custom meter)\nmsg.payload = \"Target=\" + SP + \"°C\" + \", Inlet=\" + Tr + \"°C\" + \",  Outlet=\" + Ta + \"°C\" + \", Freq=\" + Freq + \" Hz\" + \", Quiet mode=\" + QM + \", \" + Watt + \" Watt\";\nif (PM > 0) msg.payload = msg.payload + \", Powerful mode=\" + PM;\nnode.send(msg);\n\n//check heating mode\nvar TOP76_Heating_Mode = global.get(\"TOP76_Heating_Mode\", \"file\");\nif (TOP76_Heating_Mode == 0) {\n    msg.payload = \"Heatpump is WAR mode (compensation curve)\";\n    msg.topic = \"SYSTEM\";\n}\nelse if (TOP76_Heating_Mode == 1) {\n    msg.payload = \"Heatpump is in DIRECT mode\";\n    msg.topic = \"SYSTEM\";\n}\nnode.send(msg);\n\n// check how long this flow is running without restart\nvar CurrentTime = new Date().getTime();\nvar StartTime = global.get(\"OnlineTimer\");\nvar TimeElapsed = ((CurrentTime - StartTime) / 60000); // minutes\nTimeElapsed = parseFloat(TimeElapsed.toFixed(0));\nmsg.topic = \"\";\nmsg.payload = \"This flow is running for \" + TimeElapsed + \" minutes since restart\";\nif (TimeElapsed > 60) { TimeElapsed = TimeElapsed / 60; TimeElapsed = parseFloat(TimeElapsed.toFixed(0)); msg.payload = \"This flow is running for \" + TimeElapsed + \" hours without a restart.\"; }\nif (TimeElapsed > 24) { TimeElapsed = TimeElapsed / 24; TimeElapsed = parseFloat(TimeElapsed.toFixed(0)); msg.payload = \"This flow is running for \" + TimeElapsed + \" days without a restart.\"; }\nnode.send(msg);\n\n//check MQTT blocked\nif (MQTT.block_active == 1) {\n    msg.topic = \"MQTT-Commands:\";\n    msg.payload = \"Are blocked (disable switch to unblock)\"\n    node.send(msg);\n}\n\n// Count TOP44 Error messages \nvar Last_Error = global.get('Last_Error', \"file\");      // Last error\nvar Error_Counter = global.get('Error_Counter', \"file\");// Total errors\nmsg.topic = \"\";\nmsg.payload = \"Total errors: \" + Error_Counter + \", last error: \" + Last_Error;\nnode.send(msg);\n\n// check if using own kWh-meter(s) \nvar Meters = 0;\nif (global.get('kWh_meter1') == \"true\") { Meters += 1; }\nif (global.get('kWh_meter2') == \"true\") { Meters += 1; }\nif (Meters > 0) {\n    msg.payload = \"Found \" + Meters + \" custom kWh-device(s) connected to Heishamon\";\n    node.send(msg);\n} else { msg.payload = \"No custom kWh-devices detected\"; node.send(msg); }\n\n// check if using 1-wire and how many:\nvar oneWire_sensors = flow.get('oneWire_sensors').length; // No. of sensors found\nmsg.payload = \"Found \" + oneWire_sensors + \" 1-wire sensors connected to Heishamon\";\nif (oneWire_sensors == 0) { msg.payload = \"No 1-wire sensors connected to Heishamon\"; }\nnode.send(msg);\n\n// finished checken HP state \nmsg.topic = \"\";\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// checking some scheduler vars \nmsg.topic = \"solar_block_scheduler:\";\nif (global.get('solar_block_scheduler', \"file\") === undefined) msg.payload = \"undefined (ok)\"; else msg.payload = global.get('F_stored_next_operating_mode', \"file\");\nnode.send(msg);\nmsg.topic = \"F_SOLAR.function_active_state:\";\nif (global.get('F_SOLAR.function_active_state', \"file\") === undefined) msg.payload = \"undefined (ok)\"; else msg.payload = global.get('F_stored_next_operating_mode', \"file\");\nnode.send(msg);\nmsg.topic = \"F_stored_next_operating_mode:\";\nif (global.get('F_stored_next_operating_mode', \"file\") === undefined) msg.payload = \"undefined (ok)\"; else msg.payload = global.get('F_stored_next_operating_mode', \"file\");\nnode.send(msg);\n\n// checking  scheduler tasks \nvar count = 0;\nfor (let i = 1; i < 11; i++) {\n    var state = global.get('Schedule_' + i + '_state', \"file\") || 0;\n    if (state == 1) { count += 1; }\n}\nmsg.topic = \"Scheduler:\"\nmsg.payload = count + \" tasks are currently active\";\nnode.send(msg);\n\n// show which tasks are active:\nfor (let i = 10; i > 0; i--) {\n    var schedule_topic = \"Schedule_\" + i;\n\n    //var var0 = global.get(schedule_topic + '_state', \"file\") + \", \";\n    var var1 = global.get(schedule_topic + '_Description', \"file\") + \", \";\n    var var2 = global.get(schedule_topic + '_day', \"file\") + \", \";\n    var var3 = global.get(schedule_topic + '_hour', \"file\");\n    var3 = Number(var3).toFixed(0);\n    if (var3 < 10) { var3 = \"0\" + var3 + \":\"; } else { var3 = var3 + \":\"; } //voorloopnul indien nodig\n    var var4 = global.get(schedule_topic + '_minutes', \"file\");\n    var4 = Number(var4).toFixed(0);\n    if (var4 < 10) { var4 = \"0\" + var4 + \", \" } // voorloopnul indien nodig\n    var var5 = global.get(schedule_topic + '_state', \"file\");\n    var var6 = global.get(schedule_topic + '_action', \"file\") + \" \";\n    if (global.get(schedule_topic + '_override', \"file\") == 1) { var var7 = \"(override)\" } else { var var7 = \"\"; }\n\n    msg.topic = schedule_topic;\n    msg.payload = var1 + var2 + var3 + var4 + var6 + var7;\n    if (var5 == 1) { node.send(msg); } // only show when active\n}\n//\n\nmsg.topic = \"\";\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// checking  RTC settings \nvar F_RTC = global.get('F_RTC', \"file\");\nif (F_RTC === undefined) { F_RTC = {}; F_RTC.z1 = {}; }\nmsg.topic = \"F_RTC.automation_active: \"; msg.payload = F_RTC.automation_active; node.send(msg);\n//msg.topic = \"F_RTC.on_off_status: \"; msg.payload = F_RTC.on_off_status; node.send(msg);\n\nmsg.topic = \"\";\n\nvar rtc_PV = global.get('T_zone_1'); // Actual room temp\n\nif (F_RTC.z1.state == 1) { msg.payload = \"F_RTC.z1.state: 1 (Function RTC is enabled)\"; } else msg.payload = \"F_RTC.z1.state: 0 (Function RTC is disabled)\";\nnode.send(msg);\nif (F_RTC.automation_power_state == 1) { msg.payload = \"F_RTC.automation_power_state: 1 (Function RTC turn heat on/off is enabled)\"; } else { msg.payload = \"F_RTC.automation_power_state: 0 (RTC turn heat on/off is disabled)\"; }\nnode.send(msg);\n\nif (F_RTC.automation_OM_state == 1) { msg.payload = \"F_RTC.automation_OM_state: 1 (Function RTC allow change OM is enabled)\"; } else { msg.payload = \"F_RTC.automation_OM_state: 0 (RTC allow change OM is disabled)\"; }\nnode.send(msg);\n\n// show incremental setpoint status:\nmsg.topic = \"F_RTC.z1.incremental_setpoints_state: \";\nmsg.payload = F_RTC.z1.incremental_setpoints_state;\nnode.send(msg);\n\nif (TOP0_Heatpump_State == \"on\") TOP0_Heatpump_State = \"(power is on)\";\nif (TOP0_Heatpump_State == \"off\") TOP0_Heatpump_State = \"(power is off)\";\nvar Room1SP = global.get('F_RTC.z1.setpoint', \"file\");\n\n// show current RTC room setpoint:\nmsg.topic = \"RTC Room 1 setpoint\";\nmsg.payload = Room1SP + \"°C\";\nnode.send(msg);\n\nvar Room2SP = global.get('F_RTC.z2.setpoint', \"file\");\n\n// show current RTC room setpoint:\nmsg.topic = \"RTC Room 2 setpoint\";\nmsg.payload = Room2SP + \"°C\";\nnode.send(msg);\n\nif (F_RTC.automation_power_state == 1 && TOP0_Heatpump_State == \"(power is off)\") {\n    var rtc_on = Room1SP + global.get('F_RTC.automation_off_limit', \"file\");\n    rtc_on = Number(rtc_on).toFixed(1);\n    if (TOP0_Heatpump_State == \"(power is off)\") {\n        msg.topic = \"\";\n        msg.payload = \"RTC will switch heatpump on at \" + rtc_on + \"°C (now \" + rtc_PV + \"°C) \" + TOP0_Heatpump_State;\n        node.send(msg); //\n    }\n}\n\nif (F_RTC.automation_power_state == 1 && TOP0_Heatpump_State == \"(power is on)\") {\n    var rtc_off = Room1SP + global.get('F_RTC.automation_on_limit', \"file\");\n    rtc_off = Number(rtc_off).toFixed(1);\n    msg.topic = \"\";\n    msg.payload = \"RTC will switch heatpump off at \" + rtc_off + \"°C (now \" + rtc_PV + \"°C) \" + TOP0_Heatpump_State; node.send(msg);\n}\n\n// check for possible error:\nif (F_RTC.automation_active == 0 && TOP0_Heatpump_State == \"(power is off)\" && F_RTC.automation_power_state == 1) {\n    msg.payload = \"<b>WARNING</b> RTC will not turn heatpump on, because pump manualy switched off or flow restarted\"; node.send(msg);\n}\n// check for possible error:\nif (F_RTC.automation_active == 1 && TOP0_Heatpump_State == \"(power is on)\" && F_RTC.automation_power_state == 1) {\n    msg.payload = \"<b>WARNING</b> RTC will not turn heatpump off, because you switched pump manualy on above room setpoint\"; node.send(msg);\n}\n\n\nmsg.topic = \"\";\n// test possible block:\nif (global.get('TOP2_Force_DHW_State') == 1) { msg.payload = \"TOP2_Force_DHW_State = 1 --> RTC will not turn heatpump to on (blocked)\"; node.send(msg); }\n\nmsg.topic = \"\";\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// check total MQTT messages \nif (MQTT !== undefined) {\n    // format the message\n    msg.payload = \"Total MQTT-Commands send: \" + MQTT.counter + \", today \" + MQTT.messages_today + \", yesterday \" + MQTT.messages_yesterday;\n    node.send(msg);\n}\n\n\n// check total Defrosts \nvar Defrost = global.get('Defrost', \"file\");\nif (Defrost === undefined) { Defrost = {}; global.set('Defrost', Defrost, \"file\"); }\nif (Defrost.Counter === undefined) { Defrost.Counter = 0; }\nif (Defrost.Counter_Today === undefined) { Defrost.Counter_Today = 0; }                 // Defrost_Counter_Today\nif (Defrost.Counter_Yesterday === undefined) { Defrost.Counter_Yesterday = 0; }         // Defrost_Counter_Yesterday\nmsg.payload = \"Total Defrosts: \" + Defrost.Counter + \", today \" + Defrost.Counter_Today + \", yesterday \" + Defrost.Counter_Yesterday; node.send(msg);\n\n// calc total hours/ Average  runtime\nvar TOP11_Operations_Hours = global.get('TOP11_Operations_Hours');\nvar TOP12_Operations_Counter = global.get('TOP12_Operations_Counter');\nvar AverageRuntime = (TOP11_Operations_Hours / TOP12_Operations_Counter);\nAverageRuntime = parseFloat(AverageRuntime.toFixed(2));\nmsg.topic = \"\";\nmsg.payload = \"Total hours: \" + TOP11_Operations_Hours + \", starts: \" + TOP12_Operations_Counter + \", average runtime: \" + AverageRuntime + \" hours\";\nnode.send(msg);\n\n// highest frequency ever recorded\nvar HighestFreq = global.get('HighestFreq', \"file\"); // get last highscore ;)\nif (HighestFreq === undefined) { HighestFreq = 0; }\nmsg.payload = \"Highest compressor frequency ever recorded: \" + HighestFreq + \" Hz\";\nnode.send(msg);\n\n//get Starts_Today:\nvar Starts_Today = global.get('Starts_Today', \"file\");\n//node.warn(Starts_Today);\nif (Starts_Today === undefined) { global.set('Starts_Today', 0, \"file\"); } // not necessary\nmsg.payload = \"The compressor has started \" + Starts_Today + \" times in the last 24 hours\";\nnode.send(msg);\n\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// Check SoftStart \nvar F_SS = global.get('F_SS', \"file\");\n// Get the global variable. Used to see if the softstart function is enabled.\nvar F_SS_state = F_SS.state;\nif (F_SS_state === undefined) { F_SS_state = 0; }\nif (F_SS_state == 0) { F_SS_state = \"disabled\" ; }\nif (F_SS_state == 1) { F_SS_state = \"enabled\" ; }\n//if (F_SS_state === undefined || F_SS_state == 0) { F_SS_state = \"disabled\"; } else { F_SS_state = \"enabled\"; }\nmsg.payload = \"Function - SoftStart is \" + F_SS_state;\n\n//At which state is SS running now?\nvar F_SS_actual_stage = global.get('F_SS_actual_stage'); //todo change to var F_SS.actual_stage (have to update function SoftStart)\nif (F_SS_actual_stage !== undefined) { msg.payload = msg.payload + \" (Operation in \" + F_SS_actual_stage + \")\"; }\nnode.send(msg);\n\n//SS limits:\nmsg.payload = \"F_SS.total_duration: \" + (F_SS.total_duration / 60) + \" minutes (Max. time the SoftStart will be active)\"; node.send(msg);\nmsg.payload = \"F_SS.upperlimit_correction: \" + F_SS.upperlimit_correction + \"°C (Max. setpoint increase)\"; node.send(msg);\nmsg.payload = \"F_SS.lowerlimit_correction: \" + F_SS.lowerlimit_correction + \"°C (Max. setpoint decrease)\"; node.send(msg);\n\nvar compressor_runtime = global.get('compressor_runtime', \"file\") || 0;\nvar compressor_last_runtime = global.get(\"compressor_last_runtime\", \"file\") || 0;\nmsg.payload = \"Actual runtime: \" + compressor_runtime + \" minutes, last runtime: \" + compressor_last_runtime + \" minutes\"; node.send(msg);\n\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// Quietmode settings:\nvar Quietmode_time = global.get('F_SS.QM_duration', \"file\");\n\nif (Quietmode_time === undefined) { Quietmode_time = 5; }                           //default 5 minutes\nvar SS_Quietmode_on_off = global.get(\"F_SS.QM_state\", \"file\");                // Status switch SS_Quietmode \nif (SS_Quietmode_on_off === 0 || SS_Quietmode_on_off === undefined) {\n    msg.payload = \"Function - SoftStart Quietmode is disabled\"; node.send(msg);\n} else { msg.payload = \"Function - SoftStart Quietmode is enabled\"; node.send(msg); }\n\nif (SS_Quietmode_on_off == 1) {\n    var TOP18_Quiet_Mode_Level = global.get('F_SS.QM_active_level', \"file\");           //check current Quietmode level\n    var QM_default_level = global.get('F_SS.QM_default_level', \"file\");  //check previous Quietmode level\n    if (QM_default_level === undefined) { QM_default_level = 0; }\n    msg.payload = \"Current Quietmode level: \" + TOP18_Quiet_Mode_Level + \", restoring to level: \" + QM_default_level + \" after \" + Quietmode_time + \" minutes runtime.\";\n    node.send(msg);\n}\n\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\nif (MQTT !== undefined) {\n    // Check MQTT-blocker and manual on/off settings\n    var value = MQTT.block_active;\n    msg.topic = \"MQTT.block_active: \"; msg.payload = value; node.send(msg); msg.topic = \"\";\n\n    value = MQTT.allow_rtc_onoff;\n    msg.topic = \"MQTT.allow_rtc_onoff: \"; msg.payload = value; node.send(msg); msg.topic = \"\";\n\n    value = MQTT.allow_solar;\n    msg.topic = \"MQTT.allow_solar: \"; msg.payload = value; node.send(msg);\n\n    value = MQTT.allow_scheduler;\n    msg.topic = \"MQTT.allow_scheduler: \"; msg.payload = value; node.send(msg);\n\n    value = MQTT.messages_today;\n    msg.topic = \"MQTT.messages_today: \"; msg.payload = value; node.send(msg);\n\n    value = MQTT.messages_yesterday;\n    msg.topic = \"MQTT.messages_yesterday: \"; msg.payload = value; node.send(msg);\n\n    value = MQTT.counter;;\n    msg.topic = \"MQTT.counter: \"; msg.payload = value + \" (total)\"; node.send(msg);\n\n    value = MQTT.message_limit;\n    msg.topic = \"MQTT.message_limit: \"; msg.payload = value; node.send(msg);\n\n    var block_mode = [\"undefined\", \"BLOCK ALL\", \"CUSTOM\", \"UNRESTRICTED\"];\n    var value = MQTT.block_mode;\n    msg.topic = \"MQTT.block_mode: \";\n    msg.payload = block_mode[value];\n    node.send(msg);\n\n    var value = MQTT.block_mode_previous;\n    msg.topic = \"MQTT.block_mode_previous: \";\n    msg.payload = block_mode[value];\n    node.send(msg);\n\n}\nelse {\n    msg.topic = \"MQTT: \"; msg.payload = \"undefined\";\n    node.send(msg);\n}\n\nmsg.topic = \"\";\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// Check Function reduce pump speed settings:\nvar F_ReducePumpSpeed = global.get('F_ReducePumpSpeed', \"file\");\nmsg.topic = \"F_ReducePumpSpeed.PumpMaxFlowSetting: \"; msg.payload = F_ReducePumpSpeed.PumpMaxFlowSetting; node.send(msg); msg.topic = \"\";\nmsg.topic = \"F_ReducePumpSpeed.NormalSpeed: \"; msg.payload = F_ReducePumpSpeed.NormalSpeed; node.send(msg); msg.topic = \"\";\nmsg.topic = \"F_ReducePumpSpeed.LowSpeed: \"; msg.payload = F_ReducePumpSpeed.LowSpeed; node.send(msg); msg.topic = \"\";\nmsg.topic = \"F_ReducePumpSpeed.state: \"; msg.payload = F_ReducePumpSpeed.state; node.send(msg); msg.topic = \"\";\n\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\n// Check Night Reduction variables:\nvar NightReductionWaterTemp = global.get('NightReductionWaterTemp', \"file\");\nmsg.topic = \"NightReductionWaterTemp.state:\"; msg.payload = NightReductionWaterTemp.nightreduction_state; node.send(msg); msg.topic = \"\";\nmsg.topic = \"NightReductionWaterTemp.correction:\"; msg.payload = NightReductionWaterTemp.correction; node.send(msg); msg.topic = \"\";\nmsg.topic = \"NightReductionWaterTemp.current_value:\"; msg.payload = NightReductionWaterTemp.current_value; node.send(msg); msg.topic = \"\";\nvar F_NR_correction = global.get('NightReductionWaterTemp.current_value', \"file\");\nmsg.topic = \"F_NR_correction:\"; msg.payload = F_NR_correction; node.send(msg); msg.topic = \"\";\n\nmsg.payload = \"---------------------------------------------------------------------------------------------------\";\nnode.send(msg);\n\nvar NightReductionRoomSetpoint = global.get('NightReductionRoomSetpoint', \"file\");\nmsg.topic = \"NightReduction room_setpoint.state:\"; msg.payload = NightReductionRoomSetpoint.state; node.send(msg); msg.topic = \"\";\nmsg.topic = \"NightReductionRoomSetpoint.LOW:\"; msg.payload = NightReductionRoomSetpoint.LOW; node.send(msg); msg.topic = \"\";\nmsg.topic = \"NightReductionRoomSetpoint.NORMAL:\"; msg.payload = NightReductionRoomSetpoint.NORMAL; node.send(msg); msg.topic = \"\";\n\nmsg.payload = \"<b>---------------------------------------------------------------------------------------------------</b>\";\nmsg.payload = \"<b>================refresh for actual values======================</b>\";\nnode.send(msg);\n\nnode.done(); // finished",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 480,
        "wires": [
            [
                "365e9747b6e58903"
            ]
        ]
    },
    {
        "id": "365e9747b6e58903",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "aed05096f97f9ba6",
        "name": "link out 18",
        "mode": "link",
        "links": [
            "fa1495af192e1c1e"
        ],
        "x": 525,
        "y": 480,
        "wires": []
    },
    {
        "id": "ae21a03ad6f43d1c",
        "type": "ui_button",
        "z": "d5fea67661261002",
        "g": "aed05096f97f9ba6",
        "name": "System check",
        "group": "ec94eaa0930738be",
        "order": 3,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "Refresh",
        "tooltip": "Press to refresh and show system data",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 180,
        "y": 480,
        "wires": [
            [
                "8e9e69d85c6ec035"
            ]
        ]
    },
    {
        "id": "614b9c64adf19f94",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "aed05096f97f9ba6",
        "name": "Online timer",
        "func": "var CurrentTime = new Date().getTime();\nglobal.set(\"OnlineTimer\", CurrentTime);\n\n",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 560,
        "wires": []
    },
    {
        "id": "d0ac8299461b7c1f",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "aed05096f97f9ba6",
        "name": "at boot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 180,
        "y": 560,
        "wires": [
            [
                "614b9c64adf19f94",
                "8e9e69d85c6ec035"
            ]
        ]
    },
    {
        "id": "459dcc6cc8cff9da",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "1f4cf47dbe4285dc",
        "name": "Count",
        "func": "var MQTT = global.get('MQTT',\"file\");\nif (MQTT===undefined){\n    MQTT = {};\n    global.set('MQTT',MQTT,\"file\");\n}\n\nif (MQTT.counter === undefined) {MQTT.counter = 0;\nMQTT.counter = parseFloat(MQTT.counter.toFixed(0));\n}\n\n// today\nif (MQTT.messages_today === undefined) MQTT.messages_today = 0;\nMQTT.messages_today = parseFloat(MQTT.messages_today.toFixed(0));\n\n// yesterday\nif (MQTT.messages_yesterday === undefined) {MQTT.messages_yesterday = 0;}\n\nMQTT.messages_yesterday = parseFloat(MQTT.messages_yesterday.toFixed(0));\n\n// reset_today\nif (msg.payload == \"reset_today\") { // daily midnight reset\n    MQTT.messages_yesterday = MQTT.messages_today;\n    MQTT.messages_today = 0;\n    global.set('MQTT.messages_yesterday', MQTT.messages_yesterday, \"file\");\n    global.set('MQTT.messages_today', MQTT.messages_today, \"file\");\n    return null; // exit node\n} \n\nMQTT.counter += 1; // increase total\nMQTT.messages_today += 1; //increase today\n\n// reset, clear all vars from flow:\nif (msg.payload == \"reset\") { MQTT.counter = 0; MQTT.messages_today; MQTT.messages_yesterday; }\n\nglobal.set('MQTT.counter', MQTT.counter, \"file\"); // save\nglobal.set('MQTT.messages_yesterday', MQTT.messages_yesterday, \"file\");\nglobal.set('MQTT.messages_today', MQTT.messages_today, \"file\");\n\n//msg.payload = \"Total:\" + MQTT.counter + \", Today:\" + MQTT.messages_today; // for debug node only\n\n//return msg;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 560,
        "wires": []
    },
    {
        "id": "c94e5636d62a2bd9",
        "type": "inject",
        "z": "d5fea67661261002",
        "d": true,
        "g": "1f4cf47dbe4285dc",
        "name": "Reset",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "reset",
        "payloadType": "str",
        "x": 730,
        "y": 500,
        "wires": [
            [
                "459dcc6cc8cff9da"
            ]
        ]
    },
    {
        "id": "de77807ce3dc66fc",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "1f4cf47dbe4285dc",
        "name": "New day reset",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": "0",
        "topic": "",
        "payload": "reset_today",
        "payloadType": "str",
        "x": 700,
        "y": 560,
        "wires": [
            [
                "459dcc6cc8cff9da"
            ]
        ]
    },
    {
        "id": "f9d6e659dbe05a19",
        "type": "inject",
        "z": "d5fea67661261002",
        "d": true,
        "g": "5166b23daf2b561d",
        "name": "Reset",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "reset",
        "payloadType": "str",
        "x": 230,
        "y": 660,
        "wires": [
            [
                "116f4e573c2d55e8"
            ]
        ]
    },
    {
        "id": "991502670f43d03e",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "5166b23daf2b561d",
        "name": "New day reset",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 00 * * *",
        "once": false,
        "onceDelay": "0",
        "topic": "",
        "payload": "reset_today",
        "payloadType": "str",
        "x": 260,
        "y": 740,
        "wires": [
            [
                "116f4e573c2d55e8"
            ]
        ]
    },
    {
        "id": "116f4e573c2d55e8",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "5166b23daf2b561d",
        "name": "Count",
        "func": "var Defrost = global.get('Defrost',\"file\");\nif (Defrost === undefined){\n    Defrost = {};\n    global.set('Defrost',Defrost,\"file\");\n}\n\n\nvar Defrost_Counter = global.get('Defrost.Counter', \"file\");\nif (Defrost_Counter === undefined) {\n    Defrost_Counter = 0;\n    global.set('Defrost.Counter',0,\"file\");\n}\n\n\n// today\nvar Defrost_Counter_Today = global.get('Defrost.Counter_Today', \"file\");\nif (Defrost_Counter_Today === undefined) Defrost_Counter_Today = 0;\nDefrost_Counter_Today = parseFloat(Defrost_Counter_Today.toFixed(0));\n\n// yesterday\nvar Defrost_Counter_Yesterday = global.get('Defrost.Counter_Yesterday', \"file\");\nif (Defrost_Counter_Yesterday === undefined) Defrost_Counter_Yesterday = 0;\nDefrost_Counter_Yesterday = parseFloat(Defrost_Counter_Yesterday.toFixed(0));\n\n\n// reset_today\nif (msg.payload == \"reset_today\") { // daily reset\n    var Defrost_Counter_Yesterday = Defrost_Counter_Today;\n    Defrost_Counter_Today = 0; \n    global.set('Defrost.Counter_Yesterday', Defrost_Counter_Yesterday, \"file\"); // memory only\n    global.set('Defrost.Counter_Today', Defrost_Counter_Today, \"file\"); // memory only\n    return null; // exit node\n     } \n\n// when Defrost is finished:\nlet msg99 = {}; // log\n\nif (msg.payload == 0 ) {\n    msg99.topic = \"<font color=blue>*DEFROSTING</font>\";\n    msg99.payload = \"Finished\";\n    return msg99; // exit node\n    } \n\n\nDefrost_Counter += 1; // increase total\nDefrost_Counter_Today += 1; //increase today\n\n// reset, clear all vars from flow:\nif (msg.payload == \"reset\") { Defrost_Counter = 0; Defrost_Counter_Today; Defrost_Counter_Yesterday; }\n\nglobal.set('Defrost.Counter', Defrost_Counter, \"file\");\nglobal.set('Defrost.Counter_Today', Defrost_Counter_Today, \"file\");\nglobal.set('Defrost.Counter_Yesterday', Defrost_Counter_Yesterday, \"file\");\n\nif (msg.payload == 1) {\n    msg99.topic = \"<font color=blue>*DEFROSTING</font>\";\n    msg99.payload = \"Started\";\n    }\n\nmsg.payload = \"Total:\" + Defrost_Counter + \", today:\" + Defrost_Counter_Today; // for debug node only\nmsg.topic = \"\";\n\nreturn msg99; // to input LOGS\n\n\n// <font color=green>Node Red MQTT node connected</font>\";",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 700,
        "wires": [
            [
                "842e7cc6853ea3c8"
            ]
        ]
    },
    {
        "id": "a9fa37eb6a1a4fc2",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "5166b23daf2b561d",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 210,
        "y": 700,
        "wires": [
            [
                "116f4e573c2d55e8"
            ]
        ]
    },
    {
        "id": "4df2960daa64b31d",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "set.TOP11_Operations_Hours",
        "func": "global.set('TOP11_Operations_Hours', msg.payload); // memory only\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 840,
        "wires": [
            [
                "0af4b3b3445b3ce2"
            ]
        ]
    },
    {
        "id": "6fe317de99320aa3",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "set.TOP12_Operations_Counter",
        "func": "global.set('TOP12_Operations_Counter', msg.payload); // memory only\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 900,
        "wires": [
            [
                "6c6d719592dac8d5"
            ]
        ]
    },
    {
        "id": "0af4b3b3445b3ce2",
        "type": "debug",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "Hours",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1090,
        "y": 840,
        "wires": []
    },
    {
        "id": "6c6d719592dac8d5",
        "type": "debug",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "Starts",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1090,
        "y": 900,
        "wires": []
    },
    {
        "id": "842e7cc6853ea3c8",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "5166b23daf2b561d",
        "name": "input LOGS",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 585,
        "y": 700,
        "wires": []
    },
    {
        "id": "2fa6b31339e8638d",
        "type": "ui_toast",
        "z": "d5fea67661261002",
        "position": "top left",
        "displayTime": "2",
        "highlight": "red",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "GUI Notify",
        "x": 1390,
        "y": 240,
        "wires": []
    },
    {
        "id": "c764c19340b7b720",
        "type": "link in",
        "z": "d5fea67661261002",
        "name": "Notify!",
        "links": [
            "85327198ddc6e251",
            "d65b99037cb3740d",
            "29f1c1eaf91ec977",
            "e0217508a82c4d43",
            "65e5ce7e8bb0e284",
            "302de5d951e650b6",
            "db78ad9b985b4aa5",
            "e1d9c3b48e3b4cba",
            "9b7f15d048bb1f60",
            "749ce60adde338d9",
            "c6e07a956cf2f293",
            "6886cb05525f8d0b",
            "16e91d824cef95e3",
            "6111292139d84986",
            "a863b940531858e1",
            "f2e85ff23b3dc136",
            "400c912774a24583",
            "f94a97e9d42084d7",
            "b8ed3bef56b272a1",
            "ae97f18776a1de28",
            "7ddd3f5d8f76897e",
            "b43820fd5a21f4e7",
            "776cbfd355ed920f",
            "037c668f34165450",
            "4c70cc2db4654795",
            "d233c56ec779154b",
            "86915cbe3b9c85d7",
            "2bd2ce362c201c1e"
        ],
        "x": 1285,
        "y": 240,
        "wires": [
            [
                "2fa6b31339e8638d"
            ]
        ]
    },
    {
        "id": "0e9c0e551061fdbf",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "ebe2890eadc33dcd",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 910,
        "y": 700,
        "wires": [
            [
                "b8280b17e99b11d1"
            ]
        ]
    },
    {
        "id": "b8280b17e99b11d1",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "ebe2890eadc33dcd",
        "name": "Count",
        "func": "var Error_Counter = global.get('Error_Counter', \"file\");\nif (Error_Counter === undefined)\n    {\n        Error_Counter = 0;\n        global.set('Error_Counter', Error_Counter, \"file\");\n    }\n\nvar Last_Error = msg.payload; // current error\nif (global.get('Last_Error', \"file\") === undefined)\n    {\n        global.set('Last_Error', Last_Error, \"file\");\n    }\nif (Last_Error == \"No error\")\n    {\n        return null;\n    }\n\nif (Last_Error != \"No error\")\n    { \n        Error_Counter += 1;\n        global.set('Error_Counter', Error_Counter, \"file\");\n        global.set('Last_Error', Last_Error, \"file\");\n    } \n\n//return msg;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 740,
        "wires": []
    },
    {
        "id": "88b24c510e42cb4d",
        "type": "mqtt in",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "panasonic_heat_pump/s0/Watt/1",
        "topic": "panasonic_heat_pump/s0/Watt/1",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 230,
        "y": 1420,
        "wires": [
            [
                "fe8169803ad0da4c"
            ]
        ]
    },
    {
        "id": "e13d89b6bf39c3a3",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "If detected 1st",
        "func": "if (msg.payload > 0) {\n    global.set('kWh_meter1', \"true\"); // memory only\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "320f3cb11444550f",
        "type": "mqtt in",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "panasonic_heat_pump/s0/Watt/2",
        "topic": "panasonic_heat_pump/s0/Watt/2",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 230,
        "y": 1480,
        "wires": [
            [
                "f04a11835631b092"
            ]
        ]
    },
    {
        "id": "10a931a475e12a39",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "if detected 2nd",
        "func": "if (msg.payload > 0) {\n    global.set('kWh_meter2', \"true\"); // memory only\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "f91a8e87996f7a36",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 870,
        "y": 1480,
        "wires": [
            [
                "10a931a475e12a39"
            ]
        ]
    },
    {
        "id": "50965b08724bdd8c",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "at boot",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 1600,
        "wires": [
            [
                "f2d7ea937abca010"
            ]
        ]
    },
    {
        "id": "f2d7ea937abca010",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "Clr sensors",
        "func": "flow.set('oneWire_sensors', []);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "082586cfc8693748",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "Log HP data",
        "func": "// [NEW] Melding tijdens defrost\nvar Debugging = global.get('Debugging', \"file\");    \nvar Defrosting = global.get('TOP26_Defrosting_State', \"file\");\n\nmsg.topic = \"Compressor\";\n\nif (msg.payload > 0) \n        {                                                       //started or already running\n        msg.payload = \"running\";\n        if (Defrosting == 1 && Debugging == 1) \n                {\n                msg.payload = \"running [defrosting]\";\n                } \n        if (Defrosting == 1 && Debugging == 0) \n                {\n                msg.payload = \"running skip\";\n                } \n        }\n        \n\nif (msg.payload == 0) \n        {\n        var runtime = global.get(\"compressor_runtime\", \"file\");         //stopped\n        if (runtime == 0) { msg.payload = \"stopped\"; } else { msg.payload = \"stopped (runtime: \" + runtime + \" min)\"; }\n        if (Defrosting == 1 && Debugging == 1) \n                {\n                msg.payload = \"stopped [defrosting]\";\n                } \n        if (Defrosting == 1 && Debugging == 0) \n                {\n                msg.payload = \"stopped skip\";\n                } \n        } \n\n\n\nreturn msg;\n\n//be carefull with changing msg.payload string, Start counter uses this.",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 380,
        "wires": [
            [
                "3078dedaa0fa9fa6"
            ]
        ]
    },
    {
        "id": "1a8bf49ae0badf5a",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "link out Log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1145,
        "y": 380,
        "wires": []
    },
    {
        "id": "2a1004c42a0b7dc1",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "24 hours reset",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "86400",
        "crontab": "",
        "once": false,
        "onceDelay": "0",
        "topic": "",
        "payload": "reset_today",
        "payloadType": "str",
        "x": 200,
        "y": 380,
        "wires": [
            [
                "df9dc017de54372f"
            ]
        ]
    },
    {
        "id": "109e99262b1d9b31",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 570,
        "y": 380,
        "wires": [
            [
                "082586cfc8693748"
            ]
        ]
    },
    {
        "id": "3078dedaa0fa9fa6",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 850,
        "y": 380,
        "wires": [
            [
                "df9dc017de54372f",
                "98332e44d65ec671"
            ]
        ]
    },
    {
        "id": "df9dc017de54372f",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "Starts counter",
        "func": "//get Starts_Today:\nvar Starts_Today = global.get('Starts_Today', \"file\");\nif (Starts_Today === undefined) { global.set('Starts_Today', 0, \"file\"); }\n\nif (msg.payload == \"reset_today\") {\n    global.set('Starts_Today', 0, \"file\");\n    return null;\n}\n\nif (msg.payload == \"running\" || msg.payload == \"running [defrosting]\" || msg.payload == \"running skip\") {                                      //started or already running\n    Starts_Today += 1;\n    global.set('Starts_Today', Starts_Today, \"file\");\n}\n\n\n",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 380,
        "wires": []
    },
    {
        "id": "58c919290387cba4",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "1f4cf47dbe4285dc",
        "name": "Overflow protection",
        "func": "//  msg1 to Pin1 Block MQTT switch\n// msg99 to input LOGS\n\n// get send commands today\nvar MQTT_messages_today = global.get('MQTT.messages_today', \"file\");\nif (MQTT_messages_today === undefined) MQTT_messages_today = 0;\n\n// get user set limit\nvar MQTT_message_limit = global.get('MQTT.message_limit', \"file\");\nif (MQTT_message_limit === undefined) {\n    MQTT_message_limit = 500; //default 300\n    global.set('MQTT.message_limit', 500, \"file\");\n}\n\n// check MQTT.message_limit reached\nif (MQTT_messages_today >= MQTT_message_limit) {\n    // first check if not already blocked:\n    if (global.get('MQTT.block_active', \"file\") == 1) { return null; } // exit node when already active\n\n    // block MQTT commands:\n    let msg1 = {};\n    msg1.topic = \"\";\n    msg1.payload = 1;\n    \n    //warning send to log\n    let msg99 = {};\n    msg99.topic = \"[WARNING]\";\n    msg99.payload = MQTT_messages_today + \" MQTT-commands send today! MQTT sending blocked (limit \" + MQTT_message_limit + \" msg/day)\";\n    return [msg1, msg99];\n}\n\nreturn [null, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 500,
        "wires": [
            [
                "fdd35059e43f16d0"
            ],
            [
                "c4dd85e3e2a5dff4"
            ]
        ]
    },
    {
        "id": "fdd35059e43f16d0",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "1f4cf47dbe4285dc",
        "name": "Block MQTT switch",
        "mode": "link",
        "links": [
            "172fe3f8a616d7b8"
        ],
        "x": 1145,
        "y": 480,
        "wires": []
    },
    {
        "id": "c4dd85e3e2a5dff4",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "1f4cf47dbe4285dc",
        "name": "to input LOGS",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1145,
        "y": 520,
        "wires": []
    },
    {
        "id": "05e22a7bbcfb1aa1",
        "type": "mqtt in",
        "z": "d5fea67661261002",
        "d": true,
        "g": "cd5937af83198f9a",
        "name": "Heishamon-1wire(1)",
        "topic": "",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 770,
        "y": 1760,
        "wires": [
            [
                "16808d5b28081690"
            ]
        ]
    },
    {
        "id": "825f53ebdfb5fd43",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "cd5937af83198f9a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1560",
        "crontab": "",
        "once": true,
        "onceDelay": "60",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 1800,
        "wires": [
            [
                "8cab4c14513ce5fa"
            ]
        ]
    },
    {
        "id": "8cab4c14513ce5fa",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "cd5937af83198f9a",
        "name": "Dynamic Subscribe to found 1-Wire",
        "func": "let msg1 = {}; // 1st 1-wire sensor topic\nlet msg2 = {}; // 2nd 1-wire sensor topic\nlet msg3 = {}; //Array of found sensors --> dropdown box\n\nmsg1.topic = \"panasonic_heat_pump/s0/\";\nmsg2.topic = \"panasonic_heat_pump/s0/\";\n\nlet oneWire_sensors = [];\n\noneWire_sensors =  flow.get('oneWire_sensors'); //array of found 1-wire sensors (for now max 2))\n\nvar i = oneWire_sensors.length;           // No. of sensors found\n//node.warn(\"No sensors=\" + i);\nif (i === undefined || i == 0 ) {return null;}\n\n\nmsg1.topic = msg1.topic + oneWire_sensors[0];\nmsg2.topic = msg2.topic + oneWire_sensors[1];\nmsg1.action = \"subscribe\";\nmsg2.action = \"subscribe\";\n\n//setup dropdownbox message:\nmsg3.options = oneWire_sensors;\nreturn [msg1, msg2,msg3];",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1800,
        "wires": [
            [
                "05e22a7bbcfb1aa1"
            ],
            [
                "798b2017d73b9795"
            ],
            []
        ]
    },
    {
        "id": "16808d5b28081690",
        "type": "debug",
        "z": "d5fea67661261002",
        "g": "cd5937af83198f9a",
        "name": "output",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1090,
        "y": 1760,
        "wires": []
    },
    {
        "id": "798b2017d73b9795",
        "type": "mqtt in",
        "z": "d5fea67661261002",
        "d": true,
        "g": "cd5937af83198f9a",
        "name": "Heishamon-1wire(2)",
        "topic": "",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 770,
        "y": 1840,
        "wires": [
            [
                "fd1a14b5c123f7aa"
            ]
        ]
    },
    {
        "id": "fd1a14b5c123f7aa",
        "type": "debug",
        "z": "d5fea67661261002",
        "g": "cd5937af83198f9a",
        "name": "output",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1090,
        "y": 1840,
        "wires": []
    },
    {
        "id": "9624117d96bd6dbb",
        "type": "comment",
        "z": "d5fea67661261002",
        "g": "cd5937af83198f9a",
        "name": "Test dynamic subcribe",
        "info": "",
        "x": 220,
        "y": 1720,
        "wires": []
    },
    {
        "id": "399e883e6deac7a3",
        "type": "ui_button",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "",
        "group": "548e51986bce11b0",
        "order": 7,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Defrost",
        "tooltip": "Send a force defrost to HP",
        "color": "",
        "bgcolor": "{{background}}",
        "className": "",
        "icon": "",
        "payload": "This will start a defrosting routine.",
        "payloadType": "str",
        "topic": "payload",
        "topicType": "msg",
        "x": 380,
        "y": 1960,
        "wires": [
            [
                "d3a2ef1813673fb5"
            ]
        ]
    },
    {
        "id": "d6ef6434856148df",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "Block?",
        "func": "var MQTT              = global.get('MQTT', \"file\");\n\n// *****************************************************************************\n//          Default manual or automated BLOCK ALL\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 1) {\n    let msg66 = {}; // pin 2 - To Notify msg (and INPUTdebuglog)\n    msg66.topic = \"SYSTEM\";\n    msg66.payload = \"MQTT-Commands are blocked!\";\n    return [null, msg66];                                                       //  Block msg, and log it.\n}\n\n// *****************************************************************************\n//  MQTT.block_mode = BLOCK ALL (1)\n//  MQTT.block_mode = CUSTOM (2)\n//  MQTT.block_mode = UNRESTRICTED (3)\n// *****************************************************************************\n\nif (MQTT.block_active == 1 && MQTT.block_mode == 2) {                                //  If Manual OFF has been detected...\n    \n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 1 || MQTT.block_mode == 2) {\n        return [null, null];  \n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    if (MQTT.block_mode == 3) {                                            //  MQTT_default_3 = UNRESTRICTED\n        return [msg, null];                                                     //  Pass through msg.\n    }\n}\n\nif (MQTT.block_active == 0) {\n    return msg;\n}\n\n    \n  ",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 1960,
        "wires": [
            [
                "6df1fb31e6665cd4"
            ],
            [
                "037c668f34165450"
            ]
        ]
    },
    {
        "id": "037c668f34165450",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "exit to INPUTlogs",
        "mode": "link",
        "links": [
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 895,
        "y": 1960,
        "wires": []
    },
    {
        "id": "1b91aa81aad7c7b5",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "Force",
        "func": "if (msg.payload == \"Yes\") \n    {\n        msg.payload = 1;\n        return msg;\n    } else \n    {\n        return null;\n    }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 1960,
        "wires": [
            [
                "d6ef6434856148df"
            ]
        ]
    },
    {
        "id": "d3a2ef1813673fb5",
        "type": "ui_toast",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "No",
        "cancel": "Yes",
        "raw": false,
        "className": "",
        "topic": "Send a defrost now to HP?",
        "name": "Defrost?",
        "x": 520,
        "y": 1960,
        "wires": [
            [
                "1b91aa81aad7c7b5"
            ]
        ]
    },
    {
        "id": "98332e44d65ec671",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "skip",
        "func": "if (msg.payload == \"running skip\" || msg.payload == \"stopped skip\") { return null; } // no log message\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 380,
        "wires": [
            [
                "1a8bf49ae0badf5a"
            ]
        ]
    },
    {
        "id": "afa5bf9f7c3531bc",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "5166b23daf2b561d",
        "name": "link in 15",
        "links": [
            "6c685782864f1787"
        ],
        "x": 115,
        "y": 700,
        "wires": [
            [
                "a9fa37eb6a1a4fc2"
            ]
        ]
    },
    {
        "id": "32c013973096ab65",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "3ce1342324a97c52",
        "name": "link in 16",
        "links": [
            "c57a81d1dee5b8a9"
        ],
        "x": 115,
        "y": 320,
        "wires": [
            [
                "109e99262b1d9b31",
                "57c9f02c576ad71f"
            ]
        ]
    },
    {
        "id": "1ebb1a2803291fd7",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "link in 19",
        "links": [
            "6c685782864f1787"
        ],
        "x": 115,
        "y": 1960,
        "wires": [
            [
                "fd2777fee0c73d23"
            ]
        ]
    },
    {
        "id": "fd2777fee0c73d23",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "Button look",
        "func": "if (msg.payload == 0)\n    {\n        msg.background = null;\n    }\n\n\n\nif (msg.payload == 1) \n    {\n    msg.background = \"Red\";\n    }\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 1960,
        "wires": [
            [
                "399e883e6deac7a3"
            ]
        ]
    },
    {
        "id": "c40e5d6c866f68df",
        "type": "ui_template",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "group": "ec94eaa0930738be",
        "name": "Line",
        "order": 2,
        "width": 24,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-top: 1px solid #a39d99;\n    border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: 0;\n    margin-right: 0;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1090,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "678c2fa5db148f1e",
        "type": "ui_text",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "group": "ec94eaa0930738be",
        "order": 8,
        "width": 9,
        "height": 1,
        "name": "spacer1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1100,
        "y": 1080,
        "wires": []
    },
    {
        "id": "bb8548eb6893bd56",
        "type": "ui_text",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "group": "ec94eaa0930738be",
        "order": 4,
        "width": 11,
        "height": 2,
        "name": "spacer2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1100,
        "y": 1040,
        "wires": []
    },
    {
        "id": "5566fb2a502d3f92",
        "type": "comment",
        "z": "d5fea67661261002",
        "name": "User info",
        "info": "Users currently using those devices:\n=====================================\nAikon (kWh + 1-wire (Toutside) + MQTT sensor (Troom))\nMikeyMan (kWh + MQTT sensors)\nMaarten69 (kWh + 1-wire)\nEdterbak (kWh)\nblb4 (2x kWh en 5x 1-wire)\nlampy25 (2x kWh + 1-wire)",
        "x": 1320,
        "y": 440,
        "wires": []
    },
    {
        "id": "a8acdcc0dc537830",
        "type": "ui_template",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "group": "ec94eaa0930738be",
        "name": "",
        "order": 10,
        "width": 24,
        "height": 17,
        "format": "<div ng-repeat=\"line in msg.payload track by $index\">\n<div ng-bind-html=\"line\"></div>\n</div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1100,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "fa1495af192e1c1e",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "inputDEBUGLOG",
        "links": [
            "16e91d824cef95e3",
            "29f1c1eaf91ec977",
            "302de5d951e650b6",
            "365e9747b6e58903",
            "400c912774a24583",
            "559f3875ebe7df72",
            "6111292139d84986",
            "65e5ce7e8bb0e284",
            "6886cb05525f8d0b",
            "749ce60adde338d9",
            "7ddd3f5d8f76897e",
            "85327198ddc6e251",
            "9b7f15d048bb1f60",
            "a863b940531858e1",
            "ae97f18776a1de28",
            "b43820fd5a21f4e7",
            "b8ed3bef56b272a1",
            "b903f8bbf513d6a1",
            "c6e07a956cf2f293",
            "d65b99037cb3740d",
            "db78ad9b985b4aa5",
            "e1d9c3b48e3b4cba",
            "f2e85ff23b3dc136",
            "f94a97e9d42084d7",
            "037c668f34165450",
            "4c70cc2db4654795",
            "d233c56ec779154b",
            "86915cbe3b9c85d7",
            "2bd2ce362c201c1e"
        ],
        "x": 725,
        "y": 1040,
        "wires": [
            [
                "8a882609f0e2d88a"
            ]
        ]
    },
    {
        "id": "8a882609f0e2d88a",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "Add",
        "func": "let pay = msg.topic + \" \" + msg.payload;\n\n// Read scrolling table from context\nlet debuglog = flow.get('debuglog'); //MemoryOnly\n\nif (debuglog === undefined || pay === undefined)\n    {\n        return null;\n    }\nelse if (msg.topic==\"populate\")\n    {\n        msg.payload = [...debuglog];\n        \n        return msg;\n    }\n\nelse\n    {\n        // Modify scrolling table by adding msg.payload as first element\n        let size = debuglog.unshift(pay);\n         \n        // Remove last element from scrolling table\n        if (size >80) debuglog.pop();\n         \n        // Update context for scrolling text\n        flow.set('debuglog',debuglog);\n         \n        // Shalow copy updated scrolling table to msg.payload\n        msg.payload = [...debuglog];\n         \n        return msg;\n    }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1040,
        "wires": [
            [
                "a8acdcc0dc537830"
            ]
        ]
    },
    {
        "id": "62d33aea9b2babaa",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "Create",
        "func": "var stored_value = flow.get(\"debuglog\",\"file\");\n\nif (msg.payload == \"RESET\")\n    {\n    flow.set(\"debuglog\", undefined); \n        return null;\n    }\n\nelse if (stored_value !== undefined) \n    {\n        let debuglog = [];\n        debuglog = stored_value; \n        msg.payload = [...debuglog];\n        return msg;\n    }\n    \nelse\n    {\n        let debuglog = [];\n        flow.set(\"debuglog\", debuglog);        \n    }\n    \n    \n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1000,
        "wires": [
            [
                "a8acdcc0dc537830"
            ]
        ]
    },
    {
        "id": "751fec2ce6f8faac",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "Block MQTT",
        "func": "let msg1 = {}; // pin2 to combobox update block_mode status\nmsg1.topic = \"Update block_mode\"; //update 19-01-2023 msg --> msg1\nif (msg.source == \"boot\") { return null; } //exit when source is from inject node\n\nlet msg99 = {};\nmsg99.topic = \"SYSTEM\";\nmsg99.payload = \"\";\n\nvar MQTT = global.get('MQTT',\"file\");\n\n// *****************************************************************************\n//  MQTT.block_mode 1 = BLOCK ALL\n//  MQTT.block_mode 2 = CUSTOM\n//  MQTT.block_mode 3 = UNRESTRICTED\n// *****************************************************************************\n\nif (msg.payload == 1) {\n    global.set('MQTT.block_active', 1, \"file\"); \n    msg99.payload = 1;\n    global.set('MQTT.block_mode_previous', MQTT.block_mode, \"file\"); // 11-01-20223 for restoring block_mode after disabling switch\n\n    // check if msg source is from shutdown_detection (POWER OFF)\n    if (msg.source == \"shutdown_detection\") {\n        msg1.payload = MQTT.block_mode;\n        return [msg99, msg1]; // log and update combobox\n    }\n\n\n    global.set('MQTT.block_mode', 1, \"file\"); // block all\n    msg1.payload = 1;\n    return [msg99, msg1]; // log and update combobox\n\n}\n\nif (msg.payload == 0) {\n    global.set('MQTT.block_active', 0, \"file\");\n    msg99.payload = 0;\n    if (MQTT.block_mode_previous !== undefined) { global.set('MQTT.block_mode', MQTT.block_mode_previous, \"file\"); } // 11-01-20223 for restoring block_mode after disabling switch\n        \n    // test if reached max MQTT command limit today:\n    if (MQTT.messages_today === undefined) MQTT.messages_today = 0;\n\n    // get user set limit\n    if (MQTT.message_limit === undefined) {\n        MQTT.message_limit = 500; //default 500\n        global.set('MQTT.message_limit', 500, \"file\");\n        }\n\n    // Request: Auto increase limit when disabling\n    if (MQTT.messages_today >= MQTT.message_limit) {\n        msg99.payload = \"MQTT limit of \" + MQTT.message_limit + \" reached, increasing limit to \" + (MQTT.message_limit + 100);\n        global.set('MQTT.message_limit', (MQTT.message_limit + 100), \"file\");\n    }\n\n    msg1.payload = MQTT.block_mode_previous; // now actual block_mode\n    return [msg99, msg1]; // log, and update combobox?\n}\n\n\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 1060,
        "wires": [
            [
                "35b2bc2a89cc2d84",
                "43783f0ff1a97ef1"
            ],
            [
                "bb5e36b2c205a984"
            ]
        ],
        "outputLabels": [
            "msg",
            "to button block_mode 1"
        ]
    },
    {
        "id": "c25c9914b837785c",
        "type": "ui_switch",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "Block MQTT commands",
        "label": "",
        "tooltip": "Block MQTT commands",
        "group": "d95eca50f9342e76",
        "order": 16,
        "width": 2,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 250,
        "y": 1060,
        "wires": [
            [
                "751fec2ce6f8faac",
                "c3c58f9072c16f58"
            ]
        ]
    },
    {
        "id": "dadcc09786666d40",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "set at boot",
        "func": "var MQTT = global.get('MQTT', \"file\");\nlet msg1 = {};\n\nif (MQTT.block_active === undefined){\n    global.set('MQTT.block_active',0,\"file\");\n    msg1.payload = 0;\n    msg1.source = \"boot\";\n    return msg1;\n    \n}\n\n\nmsg1.payload = MQTT.block_active;\nmsg1.source = \"boot\";\n\nvar value = MQTT.block_mode;\nvar Blockmode = \"undefined\";\nif (value === 1) Blockmode = \"BLOCK ALL\";\nif (value === 2) Blockmode = \"CUSTOM\";\nif (value === 3) Blockmode = \"UNRESTRICTED\";\n\nmsg1.topic = Blockmode; //text label toggle\n\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1160,
        "wires": [
            [
                "c25c9914b837785c"
            ]
        ]
    },
    {
        "id": "a13a59feb119d9ce",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "at boot",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "2100",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "trigger",
        "x": 160,
        "y": 1180,
        "wires": [
            [
                "dadcc09786666d40",
                "43783f0ff1a97ef1"
            ]
        ]
    },
    {
        "id": "5ce82b31e85cfe3a",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "Repair & delete old vars",
        "func": "    let msg99={};\n    msg99.topic = \"SYSTEM:\";\n    msg99.payload = \"removed old variables\";      \n\n\n\n    global.set('F_ReducePumpSpeed.SavedPumpspeed', undefined, \"file\");\n    global.set('MQTT_Block_default_3', undefined, \"file\");\n    global.set('MQTT_Block_default_2', undefined, \"file\");\n    global.set('MQTT_Block_default_1', undefined, \"file\");\n    global.set('MQTT_Block_Allow_function_scheduled_tasks', undefined, \"file\");   \n    global.set('MQTT_Block_Allow_function_solar', undefined, \"file\");\n    global.set('MQTT_Block_Allow_function_rtc_onoff', undefined, \"file\");\n// remove more old vars 18-01-2023     \n    global.set('Correction_1_RTC_on_off', undefined, \"file\");\n    global.set('F_RTC_on_off_active', undefined, \"file\");\n    global.set('F_RTC_on_off3_OM', undefined, \"file\");\n    global.set('F_RTC_on_off2', undefined, \"file\");\n    global.set('F_RTC_correction', undefined); //Memory Only\n    global.set('F_rtc_on_off_status', undefined, \"file\");\n    global.set('F_rtc_on_off_active', undefined, \"file\");\n    global.set('Defrost_Counter_Yesterday', undefined, \"file\");\n    global.set('Defrost_Counter_Today', undefined, \"file\");\n    global.set('Defrost_Counter', undefined, \"file\");\n    global.set('Booster', undefined, \"file\");\n    global.set('LowSpeed', undefined, \"file\");\n    global.set('SavedPumpspeed', undefined, \"file\");\n    global.set('PumpMaxFlowSetting', undefined, \"file\");\n    global.set('ReducePumpSpeed', undefined, \"file\");\n    global.set('RoomSetpointNORMAL', undefined, \"file\");\n    global.set('RoomSetpointLOW', undefined, \"file\");\n    global.set('nightreduction_on_off', undefined, \"file\");\n    global.set('NightReductionWaterTemp_correction', undefined, \"file\");\n    global.set('NightReduction_correction', undefined, \"file\");\n    global.set('NightReduction_current_value', undefined, \"file\");\n    global.set('NightReductionRoomPV_CurrentStatus', undefined, \"file\");\n    global.set('MQTT_Limit', undefined, \"file\");\n    global.set('MQTT_Counter_Yesterday', undefined, \"file\");\n    global.set('MQTT_Counter_Today', undefined, \"file\");\n    global.set('MQTT_Counter', undefined, \"file\");\n    global.set('MQTT_Block_select', undefined, \"file\");\n    global.set('MQTT_select', undefined, \"file\");\n    var MQTT = global.get('MQTT', \"file\");\n    global.set('MQTT_Block', undefined, \"file\");\n    if (MQTT == 0 || MQTT == 1) {global.set('MQTT',undefined,\"file\");}\n    global.set('Nightmode', undefined, \"file\");\n//delete old vars:\n\nvar SavedPumpspeed = global.get('F_ReducePumpSpeed.SavedPumpspeed', \"file\");\nif (SavedPumpspeed !== undefined) { global.set('F_ReducePumpSpeed.NormalSpeed', SavedPumpspeed, \"file\"); }\n// use old pumpspeed low:\n\nvar Correction_1_RTC_on_off = global.get('Correction_1_RTC_on_off', \"file\");\nif (Correction_1_RTC_on_off != undefined) { global.set('F_RTC.state', Correction_1_RTC_on_off, \"file\"); }\n\n    var F_RTC_on_off_active = global.get('F_RTC_on_off_active', \"file\");\n    if (F_RTC_on_off_active !== undefined) { global.set('F_RTC.on_off_active', F_RTC_on_off_active, \"file\"); }\n    if (F_RTC_on_off_active === undefined) { global.set('F_RTC.on_off_active', 0, \"file\"); }\n\n    var F_RTC_on_off3_OM = global.get('F_RTC_on_off3_OM', \"file\");\n    if (F_RTC_on_off3_OM !== undefined) { global.set('F_RTC.F2_OM_state', F_RTC_on_off3_OM, \"file\"); }\n\n    var F_RTC_on_off2 = global.get('F_RTC_on_off2', \"file\");\n    if (F_RTC_on_off2 !== undefined) { global.set('F_RTC.F1_power_state', F_RTC_on_off2, \"file\"); }\n\n    var F_RTC_on_off_active = global.get('F_RTC_on_off_active', \"file\");\n    if (F_RTC_on_off_active !== undefined) { global.set('F_RTC.on_off_active', F_RTC_on_off_active, \"file\"); }\n\n    var F_rtc_on_off_status = global.get('F_rtc_on_off_status', \"file\");\n    if (F_rtc_on_off_status !== undefined) { global.set('F_RTC.on_off_status', F_rtc_on_off_status, \"file\"); }\n\n    var F_rtc_on_off_active = global.get('F_rtc_on_off_active', \"file\");\n    if (F_rtc_on_off_active !== undefined) { global.set('F_RTC.on_off_active', F_rtc_on_off_active, \"file\"); }\n//copy RTC vars to new vars:\n    var Defrost_Counter = global.get('Defrost_Counter', \"file\");\n    if (Defrost_Counter !== undefined) { \n        global.set('Defrost.Counter', Defrost_Counter, \"file\"); \n        global.set('Defrost.Counter_Today', 0, \"file\"); \n        global.set('Defrost.Counter_Yesterday', 0, \"file\"); \n        } \n//copy defrost to new var:\n\n    var LowSpeed = global.get('LowSpeed', \"file\");\n    if (LowSpeed !== undefined) { global.set('F_ReducePumpSpeed.LowSpeed', LowSpeed, \"file\"); } \n\n    var SavedPumpspeed = global.get('SavedPumpspeed', \"file\");\n    if (SavedPumpspeed !== undefined) { global.set('F_ReducePumpSpeed.SavedPumpspeed', SavedPumpspeed, \"file\"); } \n\n    var PumpMaxFlowSetting = global.get('PumpMaxFlowSetting', \"file\");\n    if (PumpMaxFlowSetting !== undefined) { global.set('F_ReducePumpSpeed.PumpMaxFlowSetting', PumpMaxFlowSetting, \"file\"); }   \n\n    var ReducePumpSpeed = global.get('ReducePumpSpeed', \"file\");\n    if (ReducePumpSpeed !== undefined) { global.set('F_ReducePumpSpeed.state', ReducePumpSpeed, \"file\"); }   \n//copy reduce pumpspeed settings:\n\n    var MQTT_Limit = global.get('MQTT_Limit', \"file\");\n    if (MQTT_Limit !== undefined) { global.set('MQTT.message_limit', MQTT_Limit, \"file\"); }\n\n    var MQTT_Counter_Yesterday = global.get('MQTT_Counter_Yesterday', \"file\");\n    if (MQTT_Counter_Yesterday !== undefined) { global.set('MQTT.messages_yesterday', MQTT_Counter_Yesterday, \"file\"); }\n\n    var MQTT_Counter_Today = global.get('MQTT_Counter_Today', \"file\");\n    if (MQTT_Counter_Today !== undefined) { global.set('MQTT.messages_today', MQTT_Counter_Today, \"file\"); }\n\n    var MQTT_Counter = global.get('MQTT_Counter', \"file\");\n    if (MQTT_Counter !== undefined) { global.set('MQTT.counter', MQTT_Counter, \"file\"); }\n    //first move old mqtt counters to new vars:\n    \n/////////////////\n    \n\nif(global.get('F_SS_correction') !==undefined)                                   {   global.set('F_SS.correction_value', global.get('F_SS_correction'),'file'); global.set('F_SS_correction',undefined);}\nif(global.get('Correction_2_softstart_on_off','file') !==undefined)              {   global.set('F_SS.state', global.get('Correction_2_softstart_on_off','file'),'file'); global.set('Correction_2_softstart_on_off',undefined,'file');}\nif(global.get('F_SS_reset_after_defrost','file') !==undefined)                   {   global.set('F_SS.reset_after_defrost', global.get('F_SS_reset_after_defrost','file'),'file'); global.set('F_SS_reset_after_defrost',undefined,'file');}\nif(global.get('F_SS_stage2_limit','file') !==undefined)                          {   global.set('F_SS.upperlimit_correction', global.get('F_SS_stage2_limit','file'),'file'); global.set('F_SS_stage2_limit',undefined,'file');}\nif(global.get('F_SS_stage2','file') !==undefined)                                {   global.set('F_SS.total_duration', global.get('F_SS_stage2','file'),'file'); global.set('F_SS_stage2',undefined,'file');}\n// move old to new\nif(global.get('F_SS_correction_active') !==undefined)                            {   global.set('F_SS_correction_active',undefined);}\nif(global.get('compressor_frequency') !==undefined)                              {   global.set('compressor_frequency',undefined);}\n// remove old\n// 2023-02-12 (v22.02)\n\nif(global.get('SS_Quitmode_levelchange','file') !==undefined)                    {   global.set('SS_Quitmode_levelchange',undefined,'file');}\n// remove\n\nif(global.get('solar_detection_method','file') !==undefined)                     {   global.set('F_SOLAR.detection_method', global.get('solar_detection_method','file'),'file'); global.set('solar_detection_method',undefined,'file');}\nif(global.get('Quietmode_time','file') !==undefined)                             {   global.set('F_SS.QM_duration', global.get('Quietmode_time','file'),'file'); global.set('Quietmode_time',undefined,'file');}\nif(global.get('SS_Quietmode_on_off','file') !==undefined)                        {   global.set('F_SS.QM_state', global.get('SS_Quietmode_on_off','file'),'file'); global.set('SS_Quietmode_on_off',undefined,'file');}\n// replace\n// 2023-03-19 (v22.09)\n\nif(global.get('solar_turn_on','file') !==undefined)                              {   global.set('solar_turn_on',undefined,'file');}\nif(global.get('solar_state','file') !==undefined)                                {   global.set('solar_state',undefined,'file');}\nif(global.get('solar_fallback','file') !==undefined)                             {   global.set('solar_fallback',undefined,'file');}\n// remove\n\nif(global.get('DHW_Target_Temp','file') !==undefined)                            {   global.set('TOP9_DHW_Target_Temp', global.get('DHW_Target_Temp','file'),'file'); global.set('DHW_Target_Temp',undefined,'file');}\nif(global.get('DHW_SP_LOW','file') !==undefined)                                 {   global.set('F_SOLAR.dhw_sp_low', global.get('DHW_SP_LOW','file'),'file'); global.set('DHW_SP_LOW',undefined,'file');}\nif(global.get('DHW_SP_HIGH','file') !==undefined)                                {   global.set('F_SOLAR.dhw_sp_high', global.get('DHW_SP_HIGH','file'),'file'); global.set('DHW_SP_HIGH',undefined,'file');}\nif(global.get('solar_threshold','file') !==undefined)                            {   global.set('F_SOLAR.threshold', global.get('solar_threshold','file'),'file'); global.set('solar_threshold',undefined,'file');}\nif(global.get('SolarFunction_active','file') !==undefined)                       {   global.set('F_SOLAR.function_active_state', global.get('SolarFunction_active','file'),'file'); global.set('SolarFunction_active',undefined,'file');}\nif(global.get('F_Solar_import_correction','file') !==undefined)                  {   global.set('F_SOLAR.import_correction', global.get('F_Solar_import_correction','file'),'file'); global.set('F_Solar_import_correction',undefined,'file');}\nif(global.get('F_Solar_export_correction','file') !==undefined)                  {   global.set('F_SOLAR.export_correction', global.get('F_Solar_export_correction','file'),'file'); global.set('F_Solar_export_correction',undefined,'file');}\n// replace\n// 2023-03-26 (v22.10)\n\n\nvar T_room_custom       = global.get('T_room_custom',\"file\");                          // Custom outside temperature sensor\nif (T_room_custom > 0){\n    var old_value = T_room_custom;\n    T_room_custom = {};\n    T_room_custom.value = old_value;\n    global.set('T_room_custom',undefined,\"file\");\n    global.set('T_room_custom',T_room_custom,\"file\")\n}\n// replace\n// 2023-03-26 (v22.10)\n\n\n\n\n\n\nif(global.get('FloorHeatDelta','file') !==undefined)                             {   global.set('TOP23_Heat_Delta', global.get('FloorHeatDelta','file'),'file'); global.set('FloorHeatDelta',undefined,'file');}\nif(global.get('FloorCoolDelta','file') !==undefined)                             {   global.set('TOP24_Cool_Delta', global.get('FloorCoolDelta','file'),'file'); global.set('FloorCoolDelta',undefined,'file');}\nif(global.get('DHW_Temp') !==undefined)                                          {   global.set('TOP10_DHW_Temp', global.get('DHW_Temp')); global.set('DHW_Temp',undefined);}\nif(global.get('DHWHeatDelta','file') !==undefined)                               {   global.set('TOP22_DHW_Heat_Delta', global.get('DHWHeatDelta','file'),'file'); global.set('DHWHeatDelta',undefined,'file');}\nif(global.get('Sterilization_Temp','file') !==undefined)                         {   global.set('TOP70_Sterilization_Temp', global.get('Sterilization_Temp','file'),'file'); global.set('Sterilization_Temp',undefined,'file');}\nif(global.get('Sterilization_State') !==undefined)                               {   global.set('TOP69_Sterilization_State', global.get('Sterilization_State'),'file'); global.set('Sterilization_State',undefined);}\n// 2023-03-27 (v22.15)\n\n\n\n\nif(global.get('HolidayMode','file') !==undefined)                                {   global.set('TOP19_Holiday_Mode_State', global.get('HolidayMode','file')); global.set('HolidayMode',undefined,'file');}\nif(global.get('OperationHours') !==undefined)                                    {   global.set('TOP11_Operations_Hours', global.get('OperationHours')); global.set('OperationHours',undefined);}\nif(global.get('PanasonicMainScheduler','file') !==undefined)                     {   global.set('TOP13_Main_Schedule_State', global.get('PanasonicMainScheduler','file'),'file'); global.set('PanasonicMainScheduler',undefined,'file');}\nif(global.get('Fan2_Speed') !==undefined)                                        {   global.set('TOP63_Fan2_Motor_Speed', global.get('Fan2_Speed')); global.set('Fan2_Speed',undefined);}\nif(global.get('Fan1_Speed') !==undefined)                                        {   global.set('TOP62_Fan1_Motor_Speed', global.get('Fan1_Speed')); global.set('Fan1_Speed',undefined);}\nif(global.get('Heat_Energy_Consumption') !==undefined)                           {   global.set('TOP16_Heat_Energy_Consumption', global.get('Heat_Energy_Consumption')); global.set('Heat_Energy_Consumption',undefined);}\nif(global.get('DHW_Energy_Consumption') !==undefined)                            {   global.set('TOP41_DHW_Energy_Consumption', global.get('DHW_Energy_Consumption')); global.set('DHW_Energy_Consumption',undefined);}\nif(global.get('OperationCounter') !==undefined)                                  {   global.set('TOP12_Operations_Counter', global.get('OperationCounter')); global.set('OperationCounter',undefined);}\nif(global.get('Pump_Flow') !==undefined)                                         {   global.set('TOP1_Pump_Flow', global.get('Pump_Flow')); global.set('Pump_Flow',undefined);}\nif(global.get('SetZones','file') !==undefined)                                   {   global.set('TOP94_Zones_State', global.get('SetZones','file'),'file'); global.set('SetZones',undefined,'file');}\nif(global.get('Quiet_Mode_Level','file') !==undefined)                           {   global.set('TOP18_Quiet_Mode_Level', global.get('Quiet_Mode_Level','file'),'file'); global.set('Quiet_Mode_Level',undefined,'file');}\nif(global.get('ForceDefrost','file') !==undefined)                               {   global.set('TOP26_Defrosting_State', global.get('ForceDefrost','file'),'file'); global.set('ForceDefrost',undefined,'file');}\nif(global.get('Force_DHW_State') !==undefined)                                   {   global.set('TOP2_Force_DHW_State', global.get('Force_DHW_State')); global.set('Force_DHW_State',undefined);}\nif(global.get('T_outside_panasonic','file') !==undefined)                        {   global.set('TOP14_Outside_Temp', global.get('T_outside_panasonic','file'),'file'); global.set('T_outside_panasonic',undefined,'file');}\nif(global.get('PowerfulMode','file') !==undefined)                               {   global.set('TOP17_Powerful_Mode_Time', global.get('PowerfulMode','file'),'file'); global.set('PowerfulMode',undefined,'file');}\nif(global.get('Operating_Mode_State','file') !==undefined)                       {   global.set('TOP4_Operating_Mode_State', global.get('Operating_Mode_State','file'),'file'); global.set('Operating_Mode_State',undefined,'file');}\nif(global.get('Main_Target_Temp') !==undefined)                                  {   global.set('TOP27_Z1_Heat_Request_Temp', global.get('Main_Target_Temp')); global.set('Main_Target_Temp',undefined);}\nif(global.get('Main_Outlet_Temp') !==undefined)                                  {   global.set('TOP6_Main_Outlet_Temp', global.get('Main_Outlet_Temp')); global.set('Main_Outlet_Temp',undefined);}\nif(global.get('Main_Inlet_Temp') !==undefined)                                   {   global.set('TOP5_Main_Inlet_Temp', global.get('Main_Inlet_Temp')); global.set('Main_Inlet_Temp',undefined);}\nif(global.get('ThreeWay_Valve_State') !==undefined)                              {   global.set('TOP20_ThreeWay_Valve_State', global.get('ThreeWay_Valve_State')); global.set('ThreeWay_Valve_State',undefined);}\nif(global.get('Heating_Mode','file') !==undefined)                               {   global.set('TOP76_Heating_Mode', global.get('Heating_Mode','file'),'file'); global.set('Heating_Mode',undefined,'file');}\nif(global.get('Heatpump_State','file') !==undefined)                             {   global.set('TOP0_Heatpump_State', global.get('Heatpump_State','file'),'file'); global.set('Heatpump_State',undefined,'file');}\nif(global.get('HeaterStopDelta','file') !==undefined)                            {   global.set('TOP98_Heater_Stop_Delta', global.get('HeaterStopDelta','file'),'file'); global.set('HeaterStopDelta',undefined,'file');}\nif(global.get('HeaterStartDelta','file') !==undefined)                           {   global.set('TOP97_Heater_Start_Delta', global.get('HeaterStartDelta','file'),'file'); global.set('HeaterStartDelta',undefined,'file');}\nif(global.get('HeaterDelayTime','file') !==undefined)                            {   global.set('TOP96_Heater_Delay_Time', global.get('HeaterDelayTime','file'),'file'); global.set('HeaterDelayTime',undefined,'file');}\n// replace\n\nif(global.get('F_ReducePumpSpeed.NormalSpeed','file') !==undefined)              {   global.set('F_ReducePumpSpeed.NormalSpeed',undefined,'file');}\nif(global.get('solar_block_scheduler','file') !==undefined)                      {   global.set('solar_block_scheduler',undefined,'file');}\nif(global.get('Previous_Quiet_Mode_Level','file') !==undefined)                  {   global.set('Previous_Quiet_Mode_Level',undefined,'file');}\nif(global.get('Last_Error') !==undefined)                                        {   global.set('Last_Error',undefined);}\n\n// cleanup\n\n\n\n\nif(global.get('Correction_1_RTC_on_off','file') !==undefined)                    {   global.set('F_RTC.state', global.get('Correction_1_RTC_on_off','file'),'file'); global.set('Correction_1_RTC_on_off',undefined,'file');}\nif(global.get('rtc_t7','file') !==undefined)                                     {   global.set('F_RTC.rtc_t7_limit', global.get('rtc_t7','file'),'file'); global.set('rtc_t7',undefined,'file');}\nif(global.get('rtc_t7_custom_cor','file') !==undefined)                          {   global.set('F_RTC.rtc_t7_correction_value', global.get('rtc_t7_custom_cor','file'),'file'); global.set('rtc_t7_custom_cor',undefined,'file');}\nif(global.get('rtc_t6','file') !==undefined)                                     {   global.set('F_RTC.rtc_t6_limit', global.get('rtc_t6','file'),'file'); global.set('rtc_t6',undefined,'file');}\nif(global.get('rtc_t5','file') !==undefined)                                     {   global.set('F_RTC.rtc_t5_limit', global.get('rtc_t5','file'),'file'); global.set('rtc_t5',undefined,'file');}\nif(global.get('rtc_t4','file') !==undefined)                                     {   global.set('F_RTC.rtc_t4_limit', global.get('rtc_t4','file'),'file'); global.set('rtc_t4',undefined,'file');}\nif(global.get('rtc_t3','file') !==undefined)                                     {   global.set('F_RTC.rtc_t3_limit', global.get('rtc_t3','file'),'file'); global.set('rtc_t3',undefined,'file');}\nif(global.get('rtc_t2','file') !==undefined)                                     {   global.set('F_RTC.rtc_t2_limit', global.get('rtc_t2','file'),'file'); global.set('rtc_t2',undefined,'file');}\nif(global.get('rtc_t1','file') !==undefined)                                     {   global.set('F_RTC.rtc_t1_limit', global.get('rtc_t1','file'),'file'); global.set('rtc_t1',undefined,'file');}\nif(global.get('rtc_on','file') !==undefined)                                     {   global.set('rtc_on',undefined,'file');}\nif(global.get('rtc_off','file') !==undefined)                                    {   global.set('rtc_off',undefined,'file');}\n//\n\n\nif(global.get('DHW_treshold','file') !==undefined)                               {   global.set('DHW_threshold_upper', global.get('DHW_treshold','file'),'file'); global.set('DHW_treshold',undefined,'file');}\nif(global.get('F_RTC.F1_F2_active','file') !==undefined)                         {   global.set('F_RTC.F1_F2_active',undefined,'file');}\n//9-5-2023\n\n\n\nif(global.get('SetForceSterilization','file') !==undefined)                      {   global.set('SetForceSterilization',undefined,'file');}\n//11-5-2023\n\n\n//21-08-2023\nvar i = 1;\nwhile (i < 11) {\n    var condition = global.get('Schedule_' + i + '_condition',\"file\");\n    if (condition !== undefined) {\n        if (typeof(condition) === \"string\") {\n            var newCondition = [];\n            newCondition.push(condition);\n            global.set('Schedule_' + i + '_condition',newCondition,\"file\");\n        }\n        if (typeof(condition) === \"object\") { }\n    }\n    i++;\n}   // converting all conditions to multiselect objects instead of strings.\n\nglobal.set('Sterilization_active', 0, \"file\");\nglobal.set('Force_DHW_active', 0, \"file\");\nglobal.set('F_RTC.on_off_status', undefined, \"file\");\n\n//30-10-2023\nif (global.get('F_SS.state', \"file\") === \"enabled\") { global.set('F_SS.state', 0, \"file\"); }\nif (global.get('F_SS.state', \"file\") === \"disabled\") { global.set('F_SS.state', 0, \"file\"); }\n\nif (global.get('F_RTC.rtc_t1_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t1_limit', global.get('F_RTC.rtc_t1_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t1_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t2_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t2_limit', global.get('F_RTC.rtc_t2_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t2_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t3_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t3_limit', global.get('F_RTC.rtc_t3_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t3_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t4_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t4_limit', global.get('F_RTC.rtc_t4_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t4_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t5_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t5_limit', global.get('F_RTC.rtc_t5_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t5_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t6_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t6_limit', global.get('F_RTC.rtc_t6_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t6_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t7_limit', \"file\") !== undefined) { global.set('F_RTC.z1.t7_limit', global.get('F_RTC.rtc_t7_limit', \"file\"), \"file\"); global.set('F_RTC.rtc_t7_limit', undefined, \"file\"); }\nif (global.get('F_RTC.rtc_t7_correction_value', \"file\") !== undefined) { global.set('F_RTC.z1.t7_correction_value', global.get('F_RTC.rtc_t7_correction_value', \"file\"), \"file\"); global.set('F_RTC.rtc_t7_correction_value', undefined, \"file\"); }\nif (global.get('F_RTC.correction_value', \"file\") !== undefined) { global.set('F_RTC.correction_value', undefined, \"file\"); }\nif (global.get('F_RTC.state', \"file\") !== undefined) { global.set('F_RTC.z1.state', global.get('F_RTC.state', \"file\"), \"file\"); global.set('F_RTC.state', undefined, \"file\"); }\nif (global.get('F_RTC.on_limit', \"file\") !== undefined) { global.set('F_RTC.automation_on_limit', global.get('F_RTC.on_limit', \"file\"), \"file\"); global.set('F_RTC.on_limit', undefined, \"file\"); }\nif (global.get('F_RTC.off_limit', \"file\") !== undefined) { global.set('F_RTC.automation_off_limit', global.get('F_RTC.off_limit', \"file\"), \"file\"); global.set('F_RTC.off_limit', undefined, \"file\"); }\nif (global.get('F_RTC.on_off_active', \"file\") !== undefined) { global.set('F_RTC.automation_active', global.get('F_RTC.on_off_active', \"file\"), \"file\"); global.set('F_RTC.on_off_active', undefined, \"file\"); }\nif (global.get('F_RTC.F1_power_state', \"file\") !== undefined) { global.set('F_RTC.automation_power_state', global.get('F_RTC.F1_power_state', \"file\"), \"file\"); global.set('F_RTC.F1_power_state', undefined, \"file\"); }\nif (global.get('F_RTC.F2_OM_state', \"file\") !== undefined) { global.set('F_RTC.automation_OM_state', global.get('F_RTC.F2_OM_state', \"file\"), \"file\"); global.set('F_RTC.F2_OM_state', undefined, \"file\"); }\n\n// 16-03-2025\nif (global.get('panasonic.external_heater_not_present', \"file\") !== undefined)      { global.set('panasonic.external_heater_not_present', undefined, \"file\") }\nif (global.get('panasonic.fan2_not_present', \"file\") !== undefined)                 { global.set('panasonic.fan_not_present2', undefined, \"file\") }\nif (global.get('panasonic.fan2_not_present2', \"file\") !== undefined)                { global.set('panasonic.fan2_not_present2', undefined, \"file\") }\n\n\n//10-06-2025\nif (global.get('F_CCC', \"file\") === undefined) { \n    global.set('F_CCC',{},\"file\"); // create the empty variable....\n\n    global.set('F_CCC.z1.ot1', global.get('war_ot1', \"file\"), \"file\"); global.set('war_ot1', undefined, \"file\");\n    global.set('F_CCC.z1.ot2', global.get('war_ot2', \"file\"), \"file\"); global.set('war_ot2', undefined, \"file\");\n    global.set('F_CCC.z1.ot3', global.get('war_ot3', \"file\"), \"file\"); global.set('war_ot3', undefined, \"file\");\n\n    global.set('F_CCC.z1.wt1', global.get('war_wt1', \"file\"), \"file\"); global.set('war_wt1', undefined, \"file\");\n    global.set('F_CCC.z1.wt2', global.get('war_wt2', \"file\"), \"file\"); global.set('war_wt2', undefined, \"file\");\n    global.set('F_CCC.z1.wt3', global.get('war_wt3', \"file\"), \"file\"); global.set('war_wt3', undefined, \"file\");\n        \n    global.set('F_CCC.z1.state', global.get('Correction_0_WAR_on_off', \"file\"), \"file\"); global.set('Correction_0_WAR_on_off', undefined, \"file\");\n    global.set('F_CCC.z1.setpoint', global.get('F_WAR_SP'), \"file\"); global.set('F_WAR_SP', undefined);\n\n    global.set('F_CCC.z1.chart', global.get('war_chart', \"file\"), \"file\");\n    global.set('F_CCC.z2.chart', global.get('war_chart', \"file\"), \"file\"); global.set('war_chart', undefined, \"file\");\n}\n\n//05-08-2025\nif (global.get('rtc_chart', \"file\") !== undefined)      { global.set('rtc_chart_z1', global.get('rtc_chart', \"file\"), \"file\"); global.set('rtc_chart', undefined, \"file\"); }\nif (global.get('WoonkamerSP', \"file\") !== undefined)    { global.set('F_RTC.z1.setpoint', global.get('WoonkamerSP', \"file\"), \"file\"); global.set('WoonkamerSP',undefined,\"file\"); }\n\nif (global.get('T_room') !== undefined) { global.set(\"T_room\",undefined); }\nif (global.get('T_room_custom',\"file\") !== undefined) { global.set(\"T_room_custom\", undefined,\"file\"); }\n\nif (global.get('GUI.tabs.payload.CCC', \"file\") === undefined) {\n    var varGUI = { \"tabs\": { \"payload\": { \"SETTINGS\": true, \"CCC\": true, \"RTC\": true, \"COOL\": true, \"SOFTSTART\": true, \"Pumpspeed\": true, \"Solar²DHW\": true, \"SCHEDULER\": true, \"TEMPERATURES\": true, \"EFFICIENCY\": true, \"Degree_days\": true }, \"topic\": \"tabs\", \"type\": \"tabs\", \"_msgid\": \"dafb14a8dec6b194\" }, \"group\": { \"payload\": { \"Home_HEAT_(zone_1)\": true, \"Home_HEAT_(zone_2)\": true, \"Home_DHW\": true, \"Home_COOL\": true }, \"topic\": \"group\", \"type\": \"group\", \"_msgid\": \"56cf05b8d6503195\" }, \"group2\": { \"payload\": { \"Settings_HEAT_PUMP\": true, \"Settings_OPERATION\": true, \"Settings_HEAT\": true, \"Settings_DHW\": true }, \"topic\": \"group2\", \"type\": \"group2\", \"_msgid\": \"7a655620b8654c3f\" } };\n    global.set('GUI',varGUI,\"file\")}\n\nif (global.get('Schedule_1_toggle_item.WAR',\"file\") !== undefined) {\n    global.set('Schedule_1_toggle_item.CCC_Z1', global.get('Schedule_1_toggle_item.WAR', \"file\"),\"file\");\n    global.set('Schedule_1_toggle_item.WAR',undefined,\"file\");\n}\nif (global.get('Schedule_1_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_1_toggle_item.RTC_Z1', global.get('Schedule_1_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_1_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_2_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_2_toggle_item.CCC_Z1', global.get('Schedule_2_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_2_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_2_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_2_toggle_item.RTC_Z1', global.get('Schedule_2_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_2_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_3_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_3_toggle_item.CCC_Z1', global.get('Schedule_3_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_3_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_3_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_3_toggle_item.RTC_Z1', global.get('Schedule_3_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_3_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_4_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_4_toggle_item.CCC_Z1', global.get('Schedule_4_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_4_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_4_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_4_toggle_item.RTC_Z1', global.get('Schedule_4_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_4_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_5_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_5_toggle_item.CCC_Z1', global.get('Schedule_5_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_5_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_5_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_5_toggle_item.RTC_Z1', global.get('Schedule_5_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_5_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_6_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_6_toggle_item.CCC_Z1', global.get('Schedule_6_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_6_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_6_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_6_toggle_item.RTC_Z1', global.get('Schedule_6_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_6_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_7_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_7_toggle_item.CCC_Z1', global.get('Schedule_7_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_7_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_7_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_7_toggle_item.RTC_Z1', global.get('Schedule_7_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_7_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_8_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_8_toggle_item.CCC_Z1', global.get('Schedule_8_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_8_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_8_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_8_toggle_item.RTC_Z1', global.get('Schedule_8_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_8_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_9_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_9_toggle_item.CCC_Z1', global.get('Schedule_9_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_9_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_9_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_9_toggle_item.RTC_Z1', global.get('Schedule_9_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_9_toggle_item.RTC', undefined, \"file\");\n}\nif (global.get('Schedule_10_toggle_item.WAR', \"file\") !== undefined) {\n    global.set('Schedule_10_toggle_item.CCC_Z1', global.get('Schedule_10_toggle_item.WAR', \"file\"), \"file\");\n    global.set('Schedule_10_toggle_item.WAR', undefined, \"file\");\n}\nif (global.get('Schedule_10_toggle_item.RTC', \"file\") !== undefined) {\n    global.set('Schedule_10_toggle_item.RTC_Z1', global.get('Schedule_10_toggle_item.RTC', \"file\"), \"file\");\n    global.set('Schedule_10_toggle_item.RTC', undefined, \"file\");\n}\n\nif (global.get('HW_sensors.sensor1_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor1_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor2_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor2_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor3_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor3_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor4_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor4_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor5_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor5_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor6_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor6_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor7_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor7_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor8_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor8_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor9_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor9_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor10_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor10_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor11_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor11_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor12_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor12_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor13_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor13_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor14_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor14_purpose', 'RTC_Z1', \"file\") }\nif (global.get('HW_sensors.sensor15_purpose', \"file\") == 'RTC') { global.set('HW_sensors.sensor15_purpose', 'RTC_Z1', \"file\") }\n\n// 2025-10-24\nif (global.get('TOP34_Z2_Heat_Request_Temp') !== undefined) { global.set('TOP34_Z2_Heat_Request_Temp',undefined) };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1160,
        "wires": [
            [
                "559f3875ebe7df72"
            ]
        ]
    },
    {
        "id": "559f3875ebe7df72",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "to input DEBUGLOG",
        "mode": "link",
        "links": [
            "fa1495af192e1c1e"
        ],
        "x": 1005,
        "y": 1160,
        "wires": []
    },
    {
        "id": "172fe3f8a616d7b8",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "MQTT-switch link in",
        "links": [
            "6f8b37b8a4354baf",
            "cc96d0a80f6bdef4",
            "fdd35059e43f16d0",
            "00b957e057fd4843"
        ],
        "x": 165,
        "y": 1000,
        "wires": [
            [
                "c25c9914b837785c"
            ]
        ]
    },
    {
        "id": "6e97d05d1a6275c7",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "set MQTT-Limit",
        "func": "msg.payload = Number(msg.payload).toFixed(0);\nmsg.payload = parseFloat(msg.payload);\nglobal.set(\"MQTT.message_limit\",msg.payload,\"file\");\n\n//return msg;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 1220,
        "wires": []
    },
    {
        "id": "be1b927461546a7f",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 770,
        "y": 1220,
        "wires": [
            [
                "6e97d05d1a6275c7"
            ]
        ]
    },
    {
        "id": "bd61942b914a15ce",
        "type": "ui_numeric",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "MQTT-limit",
        "label": "MQTT Limit",
        "tooltip": "",
        "group": "d95eca50f9342e76",
        "order": 11,
        "width": 8,
        "height": 1,
        "wrap": true,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}}/day",
        "min": "100",
        "max": "2000",
        "step": "10",
        "className": "",
        "x": 590,
        "y": 1220,
        "wires": [
            [
                "be1b927461546a7f"
            ]
        ]
    },
    {
        "id": "43783f0ff1a97ef1",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "set at boot",
        "func": "var MQTT = global.get('MQTT', \"file\");\n\nif (MQTT.message_limit === undefined) {\n    MQTT.message_limit = 500; // default 500\n    global.set('MQTT.message_limit', 500, \"file\");\n}\n\nlet msg1 = {};\nlet msg2 = {};\nmsg1.messages_today = MQTT.messages_today;\nmsg1.payload = MQTT.message_limit;\nmsg2.payload = MQTT.messages_yesterday;\n\nreturn [msg1,msg2]\n",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1220,
        "wires": [
            [
                "bd61942b914a15ce",
                "cbec49b57325d8a9"
            ],
            [
                "c4100822f25e71c5"
            ]
        ],
        "outputLabels": [
            "DHW_treshold",
            ""
        ]
    },
    {
        "id": "35b2bc2a89cc2d84",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 650,
        "y": 1060,
        "wires": [
            [
                "dadcc09786666d40",
                "70355972167285f4"
            ]
        ]
    },
    {
        "id": "c3c58f9072c16f58",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "MQTT_Status",
        "mode": "link",
        "links": [
            "29daf0bbd602db4f",
            "5945f577b64bd499"
        ],
        "x": 325,
        "y": 1000,
        "wires": []
    },
    {
        "id": "4606d685d39ac772",
        "type": "inject",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "just once",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 600,
        "y": 1160,
        "wires": [
            [
                "5ce82b31e85cfe3a"
            ]
        ]
    },
    {
        "id": "bb5e36b2c205a984",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "to combobox update block_mode",
        "mode": "link",
        "links": [
            "419fb911b5aa7d3e"
        ],
        "x": 415,
        "y": 1100,
        "wires": []
    },
    {
        "id": "d2415b149ef2f275",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "link in update block_mode MQTT_block button",
        "links": [
            "e8e1e41f1c85ca7a"
        ],
        "x": 135,
        "y": 1120,
        "wires": [
            [
                "dadcc09786666d40"
            ]
        ]
    },
    {
        "id": "2cc4d65eb692223b",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "from COMMANDS#",
        "links": [
            "9202d8b025b48df6"
        ],
        "x": 125,
        "y": 1220,
        "wires": [
            [
                "43783f0ff1a97ef1"
            ]
        ]
    },
    {
        "id": "70355972167285f4",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "log",
        "func": "//if (msg.payload == 1) return null; // no logging when user turns on (will happen in node log on WP System)\n\nif (msg.payload != 0 && msg.payload != 1) return msg; // happens when received msg max mqqt message increase\n/*\nMQTT.\nblock_mode - 1 - BLOCK ALL\nblock_mode - 2 - CUSTOM\nblock_mode - 3 - UNRESTRICTED\n*/\n\nvar Block_mode = global.get('MQTT.block_mode', \"file\") || \"not set\";\nif (Block_mode == 1) Block_mode = \"BLOCK ALL\";\nif (Block_mode == 2) Block_mode = \"CUSTOM\";\nif (Block_mode == 3) Block_mode = \"UNRESTRICTED\";\n\nvar Block_active = global.get('MQTT.block_active', \"file\");\nif (Block_active == 0) Block_active = \"MQTT block inactive\";\nif (Block_active == 1) Block_active = \"MQTT block active\";\n\nmsg.topic = \"SYSTEM\";\nmsg.payload = Block_active + \", default block mode: \" + Block_mode;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1100,
        "wires": [
            [
                "4c70cc2db4654795"
            ]
        ]
    },
    {
        "id": "4c70cc2db4654795",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "name": "link out 36",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7",
            "c764c19340b7b720",
            "fa1495af192e1c1e"
        ],
        "x": 1005,
        "y": 1100,
        "wires": []
    },
    {
        "id": "cbec49b57325d8a9",
        "type": "ui_text",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "group": "d95eca50f9342e76",
        "order": 14,
        "width": 8,
        "height": 1,
        "name": "",
        "label": "MQTT count today",
        "format": "{{msg.messages_today}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 610,
        "y": 1260,
        "wires": []
    },
    {
        "id": "c4100822f25e71c5",
        "type": "ui_text",
        "z": "d5fea67661261002",
        "g": "0531f7d830ad5e1b",
        "group": "d95eca50f9342e76",
        "order": 18,
        "width": 8,
        "height": 1,
        "name": "",
        "label": "MQTT count yesterday",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 620,
        "y": 1300,
        "wires": []
    },
    {
        "id": "74a67c5148f41ad2",
        "type": "ui_button",
        "z": "d5fea67661261002",
        "name": "Reset1",
        "group": "ec94eaa0930738be",
        "order": 6,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Reset",
        "tooltip": "Reset \"F_stored_next_operating_mode\" + \"F_RTC.automation_active\" + \"F_SOLAR.function_active_state\"",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "reset",
        "payloadType": "str",
        "topic": "F_stored_next_operating_mode",
        "topicType": "msg",
        "x": 540,
        "y": 2120,
        "wires": [
            [
                "e70ff6cce7d56cac"
            ]
        ]
    },
    {
        "id": "fab0c909d11e0858",
        "type": "ui_text",
        "z": "d5fea67661261002",
        "group": "ec94eaa0930738be",
        "order": 5,
        "width": 7,
        "height": 1,
        "name": "F_stored_next_operating_mode",
        "label": "Generic: Reset certain operating variables",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 310,
        "y": 2120,
        "wires": []
    },
    {
        "id": "e70ff6cce7d56cac",
        "type": "function",
        "z": "d5fea67661261002",
        "name": "reset",
        "func": "global.set(\"F_stored_next_operating_mode\", undefined, \"file\");\nglobal.set('F_SOLAR.function_active_state', undefined, \"file\");\n\nvar F_RTC                           = global.get('F_RTC',\"file\");\n\nif (F_RTC.automation_power_state == 1){\n    var TOP0_Heatpump_State     = global.get('TOP0_Heatpump_State',\"file\");\n\n    if (TOP0_Heatpump_State == 0 && F_RTC.automation_active == 0) {\n        global.set('F_RTC.automation_active', 1, \"file\")\n    }\n    if (TOP0_Heatpump_State == 1 && F_RTC.automation_active == 1) {\n        global.set('F_RTC.automation_active', 0, \"file\")\n    }\n\n}\n\nlet msg1={};\nmsg1.payload = 'Stored variables are cleared...';\nmsg1.topic = 'Manual reset'\nreturn msg1;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "cf6084aaeae66737",
        "type": "ui_template",
        "z": "d5fea67661261002",
        "group": "ec94eaa0930738be",
        "name": "Line",
        "order": 9,
        "width": 24,
        "height": 1,
        "format": "<html>\n <!--box-shadow: (left) -5px (top) -5px (blur) 5px (spread)5px (color)#888;-->\n<head>\n<hr style=\n    \"border-width: 0px 0px 0;\n    width: 100%;\n    margin-left: 0;\n    margin-right: 0;\n    height: 0px;\n    margin-top: 0;\n    border-bottom: 1px solid #a39d99;\n    box-shadow: 0 0 3px #a39d99\";\n\t>\n</head>\n</html>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 230,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "f135a11c0945f1cd",
        "type": "function",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "Detect No. 1Wire",
        "func": "var Topic = msg.topic.split('panasonic_heat_pump/1wire/');          // strip \"panasonic_heat_pump/1wire/\" from topic\n//node.warn(Topic);\n\nlet oneWire_sensors = [];\noneWire_sensors = flow.get('oneWire_sensors');\noneWire_sensors.push(Topic[1]);                 // add to Array \n\n// check for duplicates sensors:\nvar hash = {};\noneWire_sensors.forEach(function (item) { hash[item] = 1; });\noneWire_sensors = Object.keys(hash);\n\nflow.set(\"oneWire_sensors\", oneWire_sensors);\n    \n\nmsg.payload = oneWire_sensors.length;           // No. of sensors found\nif (msg.payload == undefined) { msg.payload = 0; }\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1540,
        "wires": [
            [
                "2dd99b9e00efee29"
            ]
        ]
    },
    {
        "id": "2dd99b9e00efee29",
        "type": "debug",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "Found No. sensors",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1010,
        "y": 1540,
        "wires": []
    },
    {
        "id": "09a6b8cd0884bcc2",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 610,
        "y": 840,
        "wires": [
            [
                "4df2960daa64b31d"
            ]
        ]
    },
    {
        "id": "2c3deed445f0081b",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 610,
        "y": 900,
        "wires": [
            [
                "6fe317de99320aa3"
            ]
        ]
    },
    {
        "id": "fe8169803ad0da4c",
        "type": "switch",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 1420,
        "wires": [
            [],
            [
                "e570795bddada758"
            ]
        ]
    },
    {
        "id": "98ab01c488771719",
        "type": "rbe",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 870,
        "y": 1420,
        "wires": [
            [
                "e13d89b6bf39c3a3"
            ]
        ]
    },
    {
        "id": "f04a11835631b092",
        "type": "switch",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 1480,
        "wires": [
            [],
            [
                "28ad1d969c079693"
            ]
        ]
    },
    {
        "id": "e570795bddada758",
        "type": "change",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "payload =1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1420,
        "wires": [
            [
                "98ab01c488771719"
            ]
        ]
    },
    {
        "id": "28ad1d969c079693",
        "type": "change",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "payload =1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1480,
        "wires": [
            [
                "f91a8e87996f7a36"
            ]
        ]
    },
    {
        "id": "51030cc261a73195",
        "type": "mqtt in",
        "z": "d5fea67661261002",
        "name": "broker/status - receive",
        "topic": "broker/status",
        "qos": "0",
        "datatype": "utf8",
        "broker": "92e5b2c.00a8b5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 380,
        "y": 2540,
        "wires": [
            [
                "db28beb15a475ff0",
                "f3b6e5a0b78e91b9"
            ]
        ]
    },
    {
        "id": "de966fd67ed00465",
        "type": "function",
        "z": "d5fea67661261002",
        "name": "MQTT check - send",
        "func": "msg.payload = \"online\";\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 2420,
        "wires": [
            [
                "93243e3b65662c68",
                "d835f4b5ca16ea1b"
            ]
        ]
    },
    {
        "id": "bab67b7de6f048f1",
        "type": "mqtt out",
        "z": "d5fea67661261002",
        "name": "broker/status - send",
        "topic": "broker/status",
        "qos": "0",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "92e5b2c.00a8b5",
        "x": 1040,
        "y": 2420,
        "wires": []
    },
    {
        "id": "c98df7f6cdd712f3",
        "type": "inject",
        "z": "d5fea67661261002",
        "name": "MANUAL TEST BROKER CONNECTION",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 310,
        "y": 2420,
        "wires": [
            [
                "de966fd67ed00465"
            ]
        ]
    },
    {
        "id": "d835f4b5ca16ea1b",
        "type": "trigger",
        "z": "d5fea67661261002",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "num",
        "duration": "10",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 830,
        "y": 2460,
        "wires": [
            [
                "711818575ab7a585"
            ]
        ]
    },
    {
        "id": "93243e3b65662c68",
        "type": "delay",
        "z": "d5fea67661261002",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 2420,
        "wires": [
            [
                "bab67b7de6f048f1"
            ]
        ]
    },
    {
        "id": "c1c79e431d237e73",
        "type": "link out",
        "z": "d5fea67661261002",
        "name": "To log",
        "mode": "link",
        "links": [
            "031e62b0bf3df7d7"
        ],
        "x": 1550,
        "y": 2460,
        "wires": [],
        "l": true
    },
    {
        "id": "711818575ab7a585",
        "type": "function",
        "z": "d5fea67661261002",
        "name": "No connection detected",
        "func": "msg.topic = \"SYSTEM\";\nmsg.payload = \"MQTT Broker: <font color=red>WARNING</font> - Node Red MQTT node not connected !\";\nlet msg1={};\nmsg1.payload = 'NOT connected';\nmsg1.topic = '';\nreturn [msg,msg1];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 2460,
        "wires": [
            [
                "e7cda6f6301c3a98"
            ],
            [
                "25c9701ce27fd523"
            ]
        ],
        "outputLabels": [
            "not connected log",
            "not connected dash"
        ]
    },
    {
        "id": "5aeff3950c06df9a",
        "type": "link in",
        "z": "d5fea67661261002",
        "name": "mqtt broker test",
        "links": [
            "93689e503b06b2cc"
        ],
        "x": 465,
        "y": 2500,
        "wires": [
            [
                "de966fd67ed00465",
                "25c9701ce27fd523"
            ]
        ]
    },
    {
        "id": "db28beb15a475ff0",
        "type": "function",
        "z": "d5fea67661261002",
        "name": "connection detected",
        "func": "msg.topic = \"SYSTEM\";\nmsg.payload = \"MQTT Broker: <font color=green>Node Red MQTT node connected</font>\";\n\nlet msg1={};\nlet msg2={};\n\nmsg1.payload = \"Connected\";\nmsg1.topic = '';\n\nmsg2.payload = new Date().getTime();\nmsg2.topic = \"Test result\";\n\nreturn [msg,msg1,msg2];",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2540,
        "wires": [
            [
                "e7cda6f6301c3a98"
            ],
            [
                "25c9701ce27fd523"
            ],
            [
                "dd46600e120f880b"
            ]
        ],
        "outputLabels": [
            "connected log",
            "connected dash",
            "last tested dash"
        ]
    },
    {
        "id": "3ded629acc7a1bdf",
        "type": "comment",
        "z": "d5fea67661261002",
        "name": "Input TEST button press",
        "info": "",
        "x": 330,
        "y": 2500,
        "wires": []
    },
    {
        "id": "e7cda6f6301c3a98",
        "type": "rbe",
        "z": "d5fea67661261002",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1310,
        "y": 2460,
        "wires": [
            [
                "c1c79e431d237e73"
            ]
        ]
    },
    {
        "id": "25c9701ce27fd523",
        "type": "link out",
        "z": "d5fea67661261002",
        "name": "broker status",
        "mode": "link",
        "links": [
            "b742f5fc9cae8166"
        ],
        "x": 1570,
        "y": 2500,
        "wires": [],
        "l": true
    },
    {
        "id": "10c007e5346d744d",
        "type": "link out",
        "z": "d5fea67661261002",
        "name": "last tested",
        "mode": "link",
        "links": [
            "baf6c28e9b5a2dd8"
        ],
        "x": 1570,
        "y": 2540,
        "wires": [],
        "l": true
    },
    {
        "id": "dd46600e120f880b",
        "type": "moment",
        "z": "d5fea67661261002",
        "name": "",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/UTC",
        "adjAmount": "0",
        "adjType": "hours",
        "adjDir": "add",
        "format": "DD/MM HH:mm",
        "locale": "en-US",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Europe/Amsterdam",
        "x": 1360,
        "y": 2540,
        "wires": [
            [
                "10c007e5346d744d"
            ]
        ]
    },
    {
        "id": "523c9ce99de4c159",
        "type": "comment",
        "z": "d5fea67661261002",
        "name": "mqtt broker test",
        "info": "",
        "x": 120,
        "y": 2280,
        "wires": []
    },
    {
        "id": "f3b6e5a0b78e91b9",
        "type": "change",
        "z": "d5fea67661261002",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 2520,
        "wires": [
            [
                "d835f4b5ca16ea1b"
            ]
        ]
    },
    {
        "id": "63680817e29852bf",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "ebe2890eadc33dcd",
        "name": "link in 80",
        "links": [
            "b8bcc572150cf1d4"
        ],
        "x": 785,
        "y": 700,
        "wires": [
            [
                "0e9c0e551061fdbf"
            ]
        ]
    },
    {
        "id": "b65cbaafba3a948a",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "1f4cf47dbe4285dc",
        "name": "link in 81",
        "links": [
            "12df328367013dd2"
        ],
        "x": 625,
        "y": 520,
        "wires": [
            [
                "58c919290387cba4",
                "459dcc6cc8cff9da"
            ]
        ]
    },
    {
        "id": "5018105cf5b6fcf8",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "panasonic_heat_pump/main/Operations_Hours",
        "links": [
            "b9a90bcc4b056db7"
        ],
        "x": 260,
        "y": 840,
        "wires": [
            [
                "09a6b8cd0884bcc2"
            ]
        ],
        "l": true
    },
    {
        "id": "c5514adad11b8217",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "9a941ae145859932",
        "name": "panasonic_heat_pump/main/Operations_Counter",
        "links": [
            "6b27da6efcb59131"
        ],
        "x": 260,
        "y": 900,
        "wires": [
            [
                "2c3deed445f0081b"
            ]
        ],
        "l": true
    },
    {
        "id": "70220fbbb0e911d1",
        "type": "link in",
        "z": "d5fea67661261002",
        "g": "1a3f956a12898279",
        "name": "panasonic_heat_pump/1wire/#",
        "links": [
            "23cd009564548241"
        ],
        "x": 230,
        "y": 1540,
        "wires": [
            [
                "f135a11c0945f1cd"
            ]
        ],
        "l": true
    },
    {
        "id": "6df1fb31e6665cd4",
        "type": "link out",
        "z": "d5fea67661261002",
        "g": "bab76cb8c9631c59",
        "name": "To link out 122",
        "mode": "link",
        "links": [
            "51306cbfdaec2dc2"
        ],
        "x": 1145,
        "y": 1960,
        "wires": []
    },
    {
        "id": "a34c4683f1376f43",
        "type": "function",
        "z": "d5fea67661261002",
        "name": "function 131",
        "func": "global.set('Schedule_10_toggle_item.WAR', true, \"file\");",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1590,
        "y": 1160,
        "wires": [
            []
        ]
    },
    {
        "id": "6f697bf4722fcbea",
        "type": "inject",
        "z": "d5fea67661261002",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1380,
        "y": 1160,
        "wires": [
            [
                "a34c4683f1376f43"
            ]
        ]
    },
    {
        "id": "93b97fc6c177ccf5",
        "type": "tab",
        "label": "GUI_02",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "9faace07ea16ba4d",
        "type": "ui_text",
        "z": "93b97fc6c177ccf5",
        "group": "bf4af523ba16d457",
        "order": 16,
        "width": 6,
        "height": 1,
        "name": "Fan2",
        "label": "Fan 2",
        "format": "{{msg.payload}} rpm",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 370,
        "y": 160,
        "wires": []
    },
    {
        "id": "37418044a7a76657",
        "type": "link in",
        "z": "93b97fc6c177ccf5",
        "name": "link in 90",
        "links": [
            "913a3d6738a936b8"
        ],
        "x": 235,
        "y": 160,
        "wires": [
            [
                "9faace07ea16ba4d"
            ]
        ]
    },
    {
        "id": "8286fc9ff5aa8349",
        "type": "comment",
        "z": "93b97fc6c177ccf5",
        "name": "Part of Node Red flow",
        "info": "",
        "x": 320,
        "y": 120,
        "wires": []
    },
    {
        "id": "5a55a344dd8be7c2",
        "type": "tab",
        "label": "GUI_01",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "5ca62cc2d15410db",
        "type": "ui_text",
        "z": "5a55a344dd8be7c2",
        "group": "bf4af523ba16d457",
        "order": 20,
        "width": 2,
        "height": 1,
        "name": "External heater",
        "label": "",
        "format": "<font color= {{msg.color}} > {{msg.payload}}  </font>",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 340,
        "y": 160,
        "wires": []
    },
    {
        "id": "9125ba3c859df852",
        "type": "link in",
        "z": "5a55a344dd8be7c2",
        "name": "link in 89",
        "links": [
            "2225350cef3b4949"
        ],
        "x": 185,
        "y": 160,
        "wires": [
            [
                "5ca62cc2d15410db",
                "6964a3e6459dbe34"
            ]
        ]
    },
    {
        "id": "98d5911a0827654d",
        "type": "comment",
        "z": "5a55a344dd8be7c2",
        "name": "Part of Node Red flow",
        "info": "",
        "x": 320,
        "y": 120,
        "wires": []
    },
    {
        "id": "6964a3e6459dbe34",
        "type": "link out",
        "z": "5a55a344dd8be7c2",
        "name": "link out 132",
        "mode": "link",
        "links": [
            "b43a80548539a4b4"
        ],
        "x": 275,
        "y": 200,
        "wires": []
    },
    {
        "id": "cce68d6f8e62d22a",
        "type": "ui_text",
        "z": "5a55a344dd8be7c2",
        "group": "bf4af523ba16d457",
        "order": 19,
        "width": 4,
        "height": 1,
        "name": "",
        "label": "External heater",
        "format": "",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 340,
        "y": 280,
        "wires": []
    },
    {
        "id": "bf4af523ba16d457",
        "type": "ui_group",
        "name": "HEAT PUMP",
        "tab": "a5be8588.b8fbc8",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e3cc96332cd59f07",
        "type": "ui_group",
        "name": "DHW",
        "tab": "a5be8588.b8fbc8",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "1179fa790d2d89ca",
        "type": "ui_group",
        "name": "HEAT (zone 1)",
        "tab": "a5be8588.b8fbc8",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "92e5b2c.00a8b5",
        "type": "mqtt-broker",
        "name": "MQTT (x.x.x.x)",
        "broker": "x.x.x.x",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "compatmode": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "e27cfec311892d88",
        "type": "ui_group",
        "name": "Zone1",
        "tab": "d6d4a43045260ac9",
        "order": 2,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "e374621a9f5ac0d6",
        "type": "ui_group",
        "name": "DHW | Water temperature",
        "tab": "5b5fabb85470bd21",
        "order": 2,
        "disp": false,
        "width": "26",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9b8ec8b1b9f66309",
        "type": "ui_group",
        "name": "Zone1",
        "tab": "1d038e38da23c646",
        "order": 2,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "c2a0123d2e2c91f0",
        "type": "ui_group",
        "name": "Settings",
        "tab": "992c3064baf54797",
        "order": 2,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "b021ff109e8a2288",
        "type": "ui_group",
        "name": "TopBar",
        "tab": "1d038e38da23c646",
        "order": 1,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "fb77ab43998a2f18",
        "type": "ui_group",
        "name": "Power",
        "tab": "1a08b96c5aeb8d6e",
        "order": 2,
        "disp": false,
        "width": "26",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ef3dbc543ae92bec",
        "type": "ui_group",
        "name": "Automations",
        "tab": "d6d4a43045260ac9",
        "order": 4,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "1db6d698669f3827",
        "type": "ui_group",
        "name": "TOPBAR",
        "tab": "d6d4a43045260ac9",
        "order": 1,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "623f5d089867807d",
        "type": "ui_group",
        "name": "HEAT (zone 2)",
        "tab": "a5be8588.b8fbc8",
        "order": 4,
        "disp": true,
        "width": 6,
        "collapse": false,
        "className": ""
    },
    {
        "id": "e18bf5825c47a08f",
        "type": "ui_group",
        "name": "Advanced",
        "tab": "992c3064baf54797",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "16ec453c8cb345ac",
        "type": "ui_group",
        "name": "LOG",
        "tab": "593cfab8493b6bad",
        "order": 2,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "1eb6d525c86c4977",
        "type": "ui_group",
        "name": "HW INFORMATION",
        "tab": "593cfab8493b6bad",
        "order": 6,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "548e51986bce11b0",
        "type": "ui_group",
        "name": "OPERATION",
        "tab": "33ece0076bfd7cb7",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2b0c8e162d47abbb",
        "type": "ui_group",
        "name": "Scheduler",
        "tab": "ac594a9d775ca4fb",
        "order": 1,
        "disp": false,
        "width": 28,
        "collapse": false,
        "className": ""
    },
    {
        "id": "b7f740331bca1b3f",
        "type": "ui_group",
        "name": "ABOUT",
        "tab": "593cfab8493b6bad",
        "order": 10,
        "disp": true,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "fea7672db2f050c9",
        "type": "ui_group",
        "name": "HEAT PUMP",
        "tab": "33ece0076bfd7cb7",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4e9e24cca215ad4d",
        "type": "ui_group",
        "name": "DHW",
        "tab": "33ece0076bfd7cb7",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "26d9e6cf24507b4f",
        "type": "ui_group",
        "name": "HEAT",
        "tab": "33ece0076bfd7cb7",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "778fd272c9304a44",
        "type": "ui_group",
        "name": "Quietmode add-on settings",
        "tab": "992c3064baf54797",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "273f74f363a57507",
        "type": "ui_group",
        "name": "COOL",
        "tab": "a5be8588.b8fbc8",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "182f5ffccfef5c11",
        "type": "ui_group",
        "name": "POPUPTOP111",
        "tab": "534382cf81d94968",
        "order": 1,
        "disp": false,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "76ac95177cc46b00",
        "type": "ui_group",
        "name": "Zone2",
        "tab": "1d038e38da23c646",
        "order": 3,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "7267dafd7dc99038",
        "type": "ui_group",
        "name": "Zone2",
        "tab": "d6d4a43045260ac9",
        "order": 3,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c4606d0174cdbef4",
        "type": "ui_group",
        "name": "TopBar",
        "tab": "992c3064baf54797",
        "order": 1,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "24b2fad95360cd29",
        "type": "ui_group",
        "name": "MQTT sensors",
        "tab": "593cfab8493b6bad",
        "order": 3,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4a6d0f091176e20f",
        "type": "ui_group",
        "name": "1 wire sensors",
        "tab": "593cfab8493b6bad",
        "order": 4,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9aec7afe54746c39",
        "type": "ui_group",
        "name": "Scheduler related settings",
        "tab": "ac594a9d775ca4fb",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4fb2801b6ab7ae20",
        "type": "ui_group",
        "name": "Settings",
        "tab": "1cc13371e25eaa24",
        "order": 2,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "830a81a1c54c6ef5",
        "type": "ui_group",
        "name": "Settings",
        "tab": "575dc22256fd966c",
        "order": 2,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "9bbcceeeb21d12ab",
        "type": "ui_group",
        "name": "TopBar",
        "tab": "575dc22256fd966c",
        "order": 1,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "711eac1fe69f9447",
        "type": "ui_group",
        "name": "PopupAutoStartDHW",
        "tab": "e144332033431af7",
        "order": 13,
        "disp": false,
        "width": 8,
        "collapse": false,
        "className": ""
    },
    {
        "id": "4e7aaa8d2a717171",
        "type": "ui_group",
        "name": "TopBar",
        "tab": "1cc13371e25eaa24",
        "order": 1,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "78a82111b1f64468",
        "type": "ui_group",
        "name": "Buffer chart",
        "tab": "2839bc39ae16553b",
        "order": 1,
        "disp": true,
        "width": 20,
        "collapse": false,
        "className": ""
    },
    {
        "id": "2bd11d2d909e2ba3",
        "type": "ui_group",
        "name": "Charts",
        "tab": "4fb3ce05f81e8c95",
        "order": 3,
        "disp": false,
        "width": "14",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b7f22c282fde0f86",
        "type": "ui_group",
        "name": "Setup",
        "tab": "4fb3ce05f81e8c95",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false,
        "className": ""
    },
    {
        "id": "70a5fe6af8ed1d29",
        "type": "ui_group",
        "name": "NAVIGATION",
        "tab": "593cfab8493b6bad",
        "order": 1,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "87be08e6a82ef6a0",
        "type": "ui_group",
        "name": "Degree days information",
        "tab": "a681244e6db9a6a7",
        "order": 2,
        "disp": false,
        "width": 26,
        "collapse": false,
        "className": ""
    },
    {
        "id": "338420d1319e8350",
        "type": "ui_group",
        "name": "P1 setup",
        "tab": "593cfab8493b6bad",
        "order": 5,
        "disp": false,
        "width": 14,
        "collapse": false,
        "className": ""
    },
    {
        "id": "79eed3b289871944",
        "type": "ui_group",
        "name": "Help",
        "tab": "1d038e38da23c646",
        "order": 4,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "55fef8703465841e",
        "type": "ui_group",
        "name": "Help",
        "tab": "4fb3ce05f81e8c95",
        "order": 4,
        "disp": false,
        "width": "14",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ae6c2168304beda0",
        "type": "ui_group",
        "name": "Help",
        "tab": "d6d4a43045260ac9",
        "order": 5,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "a606e01fab1bbd66",
        "type": "ui_group",
        "name": "Help",
        "tab": "ac594a9d775ca4fb",
        "order": 3,
        "disp": false,
        "width": "15",
        "collapse": false,
        "className": ""
    },
    {
        "id": "3226b17db86f4510",
        "type": "ui_group",
        "name": "Help",
        "tab": "992c3064baf54797",
        "order": 5,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "1110c1df5a310684",
        "type": "ui_group",
        "name": "Help",
        "tab": "575dc22256fd966c",
        "order": 3,
        "disp": false,
        "width": 24,
        "collapse": false,
        "className": ""
    },
    {
        "id": "fdd93dca20acdfce",
        "type": "ui_group",
        "name": "Help",
        "tab": "5b5fabb85470bd21",
        "order": 1,
        "disp": false,
        "width": "13",
        "collapse": false,
        "className": ""
    },
    {
        "id": "064c9c202bf3ec8d",
        "type": "ui_group",
        "name": "Help",
        "tab": "1a08b96c5aeb8d6e",
        "order": 1,
        "disp": false,
        "width": 13,
        "collapse": false,
        "className": ""
    },
    {
        "id": "21f562f418c1ac52",
        "type": "ui_group",
        "name": "Help",
        "tab": "a681244e6db9a6a7",
        "order": 1,
        "disp": false,
        "width": "13",
        "collapse": false,
        "className": ""
    },
    {
        "id": "0f6e9adcc2474d02",
        "type": "ui_group",
        "name": "Help_Sensors",
        "tab": "593cfab8493b6bad",
        "order": 12,
        "disp": false,
        "width": "13",
        "collapse": false,
        "className": ""
    },
    {
        "id": "90c1cff3f272d850",
        "type": "ui_group",
        "name": "Notification",
        "tab": "ac594a9d775ca4fb",
        "order": 5,
        "disp": false,
        "width": 10,
        "collapse": false,
        "className": ""
    },
    {
        "id": "decdc0db03cb6227",
        "type": "ui_group",
        "name": "Conditions",
        "tab": "ac594a9d775ca4fb",
        "order": 2,
        "disp": false,
        "width": 28,
        "collapse": false,
        "className": ""
    },
    {
        "id": "5cfc57b36b31394c",
        "type": "ui_group",
        "name": "function_actions",
        "tab": "ac594a9d775ca4fb",
        "order": 6,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ec94eaa0930738be",
        "type": "ui_group",
        "name": "SYSTEM HEALTH",
        "tab": "593cfab8493b6bad",
        "order": 9,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "82f1040c4d704f04",
        "type": "ui_group",
        "name": "ATTENTION",
        "tab": "43190c0921e1e1ed",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "00f6a5c103e9ef2f",
        "type": "ui_group",
        "name": "Default",
        "tab": "43190c0921e1e1ed",
        "order": 2,
        "disp": false,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d95eca50f9342e76",
        "type": "ui_group",
        "name": "MQTT",
        "tab": "593cfab8493b6bad",
        "order": 7,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4a119e18236415e9",
        "type": "ui_group",
        "name": "MENU",
        "tab": "593cfab8493b6bad",
        "order": 8,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "81a6692d7ea02db2",
        "type": "ui_group",
        "name": "SETTINGS",
        "tab": "593cfab8493b6bad",
        "order": 11,
        "disp": false,
        "width": "24",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a5be8588.b8fbc8",
        "type": "ui_tab",
        "name": "Home",
        "icon": "home",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d6d4a43045260ac9",
        "type": "ui_tab",
        "name": "RTC",
        "icon": "shuffle",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5b5fabb85470bd21",
        "type": "ui_tab",
        "name": "Temperatures",
        "icon": "show_chart",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1d038e38da23c646",
        "type": "ui_tab",
        "name": "CCC",
        "icon": "cloud",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "992c3064baf54797",
        "type": "ui_tab",
        "name": "SoftStart",
        "icon": "power_input",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1a08b96c5aeb8d6e",
        "type": "ui_tab",
        "name": "Efficiency",
        "icon": "show_chart",
        "order": 11,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "593cfab8493b6bad",
        "type": "ui_tab",
        "name": "SYSTEM",
        "icon": "memory",
        "order": 13,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "33ece0076bfd7cb7",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "settings",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ac594a9d775ca4fb",
        "type": "ui_tab",
        "name": "Scheduler",
        "icon": "schedule",
        "order": 9,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "534382cf81d94968",
        "type": "ui_tab",
        "name": "GUI",
        "icon": "dashboard",
        "order": 15,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "1cc13371e25eaa24",
        "type": "ui_tab",
        "name": "Pumpspeed",
        "icon": "fa-forward",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "575dc22256fd966c",
        "type": "ui_tab",
        "name": "Cool",
        "icon": "ac_unit",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e144332033431af7",
        "type": "ui_tab",
        "name": "GUIAutoStartDHW",
        "icon": "dashboard",
        "order": 14,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "2839bc39ae16553b",
        "type": "ui_tab",
        "name": "Extra",
        "icon": "dashboard",
        "order": 18,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "4fb3ce05f81e8c95",
        "type": "ui_tab",
        "name": "Solar²DHW",
        "icon": "wb_sunny",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a681244e6db9a6a7",
        "type": "ui_tab",
        "name": "Degree days",
        "icon": "show_chart",
        "order": 12,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "43190c0921e1e1ed",
        "type": "ui_tab",
        "name": "Power",
        "icon": "memory",
        "order": 16,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "0db131122d30a8d7",
        "type": "global-config",
        "env": [],
        "modules": {
            "node-red-dashboard": "3.6.6",
            "node-red-contrib-dashboard-bar-chart-data": "0.9.94",
            "node-red-contrib-moment": "5.0.0",
            "node-red-node-smooth": "0.1.2"
        }
    }
]